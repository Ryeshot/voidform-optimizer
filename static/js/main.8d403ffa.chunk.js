(this["webpackJsonpvoidform-optimizer"]=this["webpackJsonpvoidform-optimizer"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){e.exports=a(61)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),o=a(32),s=a.n(o),c=(a(41),a(17)),l=a(4),u=a(3),d=a(2),m=a(5),h=a(1),f=(a(42),a(43),function(e){var t=e.max,a=e.current;e.voidform;return r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-text"},(a/t*100).toFixed(0)),r.a.createElement("div",{className:"progress-bar resource-bar",style:{width:"".concat((a/t*100).toFixed(2),"%")}}))}),p=(a(44),a(45),function(e){var t=e.size,a=e.progress,n=e.inverse,i=2*t,o=2*t-i/2,s=2*o*Math.PI;return r.a.createElement("svg",{width:t,height:t},r.a.createElement("circle",{fill:"transparent",strokeWidth:i,strokeOpacity:.7,strokeDasharray:s+" "+s,strokeDashoffset:n?(a?0:s)+(a||0)*s:s+(a||0)*s,stroke:"rgb(0,0,0)",cx:t/2,cy:t/2,r:o}))}),b=a(21),v=a(20),y=a(10),g=a(11),E={SPELL:["ABILITY_CAST_SUCCESS","ABILITY_COOLDOWN_START","ABILITY_COOLDOWN_END","ABILITY_CAST_START","ABILITY_CHANNEL_START","ABILITY_CHANNEL_UPDATE","ABILITY_CHANNEL_END","ABILITY_CHARGE_UPDATE"],RESOURCE:["RESOURCE_UPDATE"],AURA:["VOIDFORM_START","VOIDFORM_UPDATE","VOIDFORM_END","INSANITY_DRAIN_PAUSE_START","INSANITY_DRAIN_PAUSE_END","LINGERING_INSANITY_START","LINGERING_INSANITY_UPDATE","LINGERING_INSANITY_END","AURA_START","AURA_BEGIN","AURA_END","AURA_REFRESH","AURA_STACK_UPDATE"],STAT:["HASTE_UPDATE","HASTE_RESET"],EFFECT:["EFFECT_ACTIVATE","EFFECT_DEACTIVATE"]},T={"void-bolt":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE","DOT_EXTEND"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}},"mind-flay":{onEvent:{COOLDOWN_START:[],COOLDOWN_END:[],CHANNEL_START:["ABILITY_CHANNEL_START"],CHANNEL_UPDATE:["ABILITY_CHANNEL_UPDATE","RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END"]}},"mind-sear":{onEvent:{COOLDOWN_START:[],COOLDOWN_END:[],CHANNEL_START:["ABILITY_CHANNEL_START"],CHANNEL_UPDATE:["ABILITY_CHANNEL_UPDATE","RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END"]}},"void-eruption":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","VOIDFORM_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"],COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"]}},"mind-blast":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"],COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"]}},"shadow-word-death":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}},"void-torrent":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CHANNEL_START:["ABILITY_CHANNEL_START","INSANITY_DRAIN_PAUSE_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END","INSANITY_DRAIN_PAUSE_END"]}},"shadow-word-pain":{onEvent:{CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},"vampiric-touch":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},"devouring-plague":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},shadowfiend:{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}},"power-infusion":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}},"fae-blessings":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}},bloodlust:{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START"],CHARGES_UPDATE:["ABILITY_CHARGE_UPDATE"]}}},O={voidform:{onEvent:{AURA_START:["AURA_BEGIN","HASTE_UPDATE"],AURA_UPDATE:["VOIDFORM_UPDATE"],AURA_TIME_UPDATE:[],AURA_END:["AURA_END"]}},lingeringInsanity:{onEvent:{AURA_START:[],AURA_UPDATE:[],AURA_TIME_UPDATE:[],AURA_END:[]}},"shadow-word-pain":{onEvent:{AURA_START:[],AURA_UPDATE:[],AURA_TIME_UPDATE:[],AURA_END:[]}},"vampiric-touch":{onEvent:{AURA_START:[],AURA_UPDATE:[],AURA_TIME_UPDATE:[],AURA_END:[]}},"power-infusion":{onEvent:{AURA_START:["AURA_BEGIN","HASTE_UPDATE"],AURA_END:["AURA_END","HASTE_RESET"]}},"fae-blessings":{onEvent:{AURA_START:["AURA_BEGIN"],AURA_END:["AURA_END"]}},bloodlust:{onEvent:{AURA_START:["AURA_BEGIN","HASTE_UPDATE"],AURA_END:["AURA_END","HASTE_RESET"]}},"dark-thoughts":{onEvent:{AURA_START:["AURA_BEGIN"],AURA_END:["AURA_END"]}}},A=function(){function e(t,a,n,i){Object(y.a)(this,e),this.eventTrigger=t,this.events=a,this.effectHandler=i,this.source=n}return Object(g.a)(e,[{key:"prepareEvents",value:function(e,t){return e.map((function(e){return{type:e,payload:t}}))}},{key:"addEventCategory",value:function(e){for(var t in E)if(E[t].includes(e))return t;return""}},{key:"handleEvent",value:function(e,t){var a=this;if(this.events[e]){var n=this.prepareEvents(this.events[e],t);(n=this.effectHandler.transformEvents(this.source,e,{events:n,payload:t})).forEach((function(e){return a.eventTrigger(Object(h.a)({category:a.addEventCategory(e.type)},e))}))}}}]),e}(),w=function(e,t,a){return new A(t,O[e].onEvent,e,a)},S={"!":"S-1","@":"S-2","#":"S-3",$:"S-4","%":"S-5","^":"S-6","&":"S-7","*":"S-8","(":"S-9",")":"S-0"," ":"SPC"},N=function(){function e(t,a,n,i){Object(y.a)(this,e),this.state=t,this.updateState=a,this.onExecute=t.ignoreGcd?function(){}:n,this.eventHandler=i,this.updateState({progress:0,charges:t.charges.maxCharges||1})}return Object(g.a)(e,[{key:"getCurrentState",value:function(){var e={},t=this.state;return Object.keys(t).forEach((function(a){var n=t[a];if("object"===typeof n){var i={};Object.keys(n).forEach((function(e){var t=n[e];"undefined"!==t&&(i[e]="object"!==typeof t?t:t.current)})),e[a]=i}else e[a]=n})),e}},{key:"getRemainingCooldown",value:function(){this.state.name;var e=Date.now(),t=this.state.cooldown.startTime.current,a=t?this.state.cooldown.duration.current:0;return 0===(this.state.charges.current.current||0)?(t||e)+a-e:0}},{key:"startCooldown",value:function(){var e=this,t=this.getCurrentState().name;this.cooldownTimer=setInterval((function(){var a=Date.now(),n=e.state.cooldown.duration.current,i=e.state.cooldown.startTime.current||a,r=e.state.charges.current.current,o=e.state.charges.maxCharges.current,s=i+n-a;if(s<=20)return o&&e.eventHandler.handleEvent("CHARGES_UPDATE",{name:t,charges:Math.min(r+1,o)}),clearInterval(e.cooldownTimer),o&&r<o-1?void e.startCooldown():(e.eventHandler.handleEvent("COOLDOWN_END",{name:t}),void e.updateState((function(e){return Object(h.a)(Object(h.a)({},e),{},{progress:0})})));e.updateState((function(e){return Object(h.a)(Object(h.a)({},e),{},{progress:s/n})}))}),20),this.eventHandler.handleEvent("COOLDOWN_START",{name:t,time:Date.now()})}},{key:"cast",value:function(){var e=this.getCurrentState(),t=e.name,a=e.resource,n=e.resourceCost,i=e.costType;this.eventHandler.handleEvent("CAST_SUCCESS",{name:t,resource:a,resourceCost:n,costType:i,time:Date.now()});var r=this.state.cooldown.duration.current,o=this.state.cooldown.startTime.current,s=this.state.charges.current.current;if(r){if(this.eventHandler.handleEvent("CHARGES_UPDATE",{name:t,charges:s-1}),o)return;this.startCooldown()}}},{key:"startCast",value:function(){var e=this,t=this.getCurrentState(),a=t.name,n=t.displayName,i=t.cast.duration;i&&this.eventHandler.handleEvent("CAST_START",{name:a,displayName:n,duration:i,time:Date.now()}),this.castTimer=setTimeout((function(){return e.cast()}),i)}},{key:"startChannel",value:function(){var e=this,t=this.getCurrentState(),a=t.cast,n=a.startTime,i=a.endTime,r=a.duration,o=t.channel,s=o.baseDuration,c=o.baseTicks,l=o.ticks,u=t.name,d=t.displayName,m=t.resource,h=t.globalCooldown.duration,f=Date.now(),p=0,b=c;if(n){clearInterval(this.channelTimer);var v=i-n-(f-n),y=Math.floor(c*((s-h)/s));p=Math.min(v,.3*s),b+=Math.min(l,y)}var g=Math.round((r+p)/b);this.channelTimer=setInterval((function(){var t=Date.now(),a=e.state.cast.endTime.current,n=1===e.state.channel.ticks.current&&p?.3:1;return a?(e.eventHandler.handleEvent("CHANNEL_UPDATE",{resource:m/c*n,name:u}),t>=a?(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:u})):void 0):(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:u}))}),g),this.eventHandler.handleEvent("CHANNEL_START",{name:u,displayName:d,duration:r+p,time:f,baseChannelTime:r,currentTicks:b})}},{key:"beginGlobalCooldown",value:function(){var e=this,t=this.getCurrentState(),a=t.globalCooldown,n=a.duration,i=a.startTime,r=t.charges,o=r.current,s=r.maxCharges;if(!t.ignoreGcd){if(t.cooldown.startTime){if(s&&o<s-1)return;if(t.cooldown.startTime+t.cooldown.duration-i>n)return}this.globalCooldownTimer=setInterval((function(){var t=Date.now(),a=i+n-t;if(a<=20)return clearInterval(e.globalCooldownTimer),void e.updateState((function(e){return Object(h.a)(Object(h.a)({},e),{},{progress:0})}));e.state.cooldown.startTime.current||e.updateState((function(e){return Object(h.a)(Object(h.a)({},e),{},{progress:a/n})}))}),20)}}},{key:"canExecute",value:function(){return!this.state.disabled.current&&!this.state.unusable.current}},{key:"remove",value:function(){clearInterval(this.cooldownTimer),clearInterval(this.globalCooldownTimer),clearInterval(this.channelTimer),clearTimeout(this.castTimer)}}],[{key:"create",value:function(e,t,a,n,i,r){var o=function(e,t,a){return new A(t,T[e].onEvent,e,a)}(t.name,i,r);switch(e){case"instant":return new C(t,a,n,o);case"cast":return new I(t,a,n,o);case"channel":return new k(t,a,n,o)}}}]),e}(),C=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"execute",value:function(){if(this.canExecute()&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=(e.name,e.resource,e.resourceCost,e.cooldown.startTime),a=e.charges,n=(a.maxCharges,a.current);t&&0===n||(this.onExecute(),this.cast())}}}]),a}(N),I=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"execute",value:function(){if(this.canExecute()&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=e.cast.startTime,a=e.charges.current;t||0===a||(this.startCast(),this.onExecute())}}}]),a}(N),k=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"execute",value:function(){if(this.canExecute()&&!this.state.cast.casting.current){var e=this.getCurrentState().cooldown,t=e.duration;e.startTime||(this.startChannel(),t&&this.startCooldown(),this.onExecute())}}}]),a}(N),_=N,j=function(e){var t=e.name,a=e.abilityState,n=e.cooldownState,o=e.settings,s=e.cooldown,c=e.globalCooldown,l=e.globalCooldownStartTime,u=e.casttime,m=e.casting,h=e.subscribe,f=e.unsubscribe,b=e.onExecute,v=e.onClick,y=e.dispatch,g=e.effectHandler,E=e.show,T=e.reset,O=Object(i.useState)({}),A=Object(d.a)(O,2),w=A[0],S=A[1],N=o.type,C=o.resource,I=o.resourceCost,k=o.costType,j=o.charges,R=o.ticks,D=o.ignoreGcd,x=n.startTime,L=n.castStartTime,U=n.castEndTime,P=n.baseChannelTime,V=n.currentTicks,B=n.currentCharges,H=a.unusable,Y=a.displayName,G=a.icon,W=a.keybind,M=W.key,F=W.keybindText,z=Object(i.useRef)(x),q=Object(i.useRef)(s);z.current=x,q.current=s;var K=Object(i.useRef)(L),J=Object(i.useRef)(U),X=Object(i.useRef)(u),$=Object(i.useRef)(m);K.current=L,J.current=U,X.current=u,$.current=m;var Z=Object(i.useRef)(P),Q=Object(i.useRef)(V);Z.current=P,Q.current=V;var ee=Object(i.useRef)(j||1),te=Object(i.useRef)(j||1);ee.current=void 0!==B?B:j,te.current=j;var ae=Object(i.useRef)(c),ne=Object(i.useRef)(l);ae.current=c,ne.current=l;var ie=Object(i.useRef)(H);ie.current=H;var re=Object(i.useRef)(!E);re.current=!E;var oe=Object(i.useRef)();Object(i.useEffect)((function(){var e={name:t,displayName:Y,resource:C,resourceCost:I,costType:k,unusable:ie,disabled:re,ignoreGcd:D,cooldown:{duration:q,startTime:z},cast:{duration:X,startTime:K,endTime:J,casting:$},channel:{baseDuration:Z,baseTicks:R,ticks:Q},charges:{maxCharges:te,current:ee},globalCooldown:{duration:ae,startTime:ne}};return oe.current=_.create(N,e,S,b,y,g),h({source:t,keybind:M,execute:function(){return oe.current.execute()},notify:function(){return oe.current.beginGlobalCooldown()},getRemainingCooldown:function(){return oe.current.getRemainingCooldown()},canExecute:function(){return oe.current.canExecute()},ignoresGcd:!!D}),function(){oe.current.remove(),f(t)}}),[M,T]);return E?r.a.createElement("div",{className:"progress-ability-container"},r.a.createElement("div",{className:"progress-ability hover-pointer",onClick:function(){v(t,(function(){return oe.current.getRemainingCooldown()}),(function(){return oe.current.execute()}),(function(){return oe.current.canExecute()}),!!D)}},r.a.createElement("img",{className:H||!(ee.current>0&&j)&&z.current?"desaturated":"colored",src:G,width:50,height:50}),r.a.createElement("div",{className:"charge-text"},ee.current>1?ee.current:""),z.current||ae.current?r.a.createElement(p,{size:50,progress:w.progress}):null),r.a.createElement("div",null,F)):null},R={start:function(e,t){t({type:"GLOBAL_COOLDOWN_START",payload:{gcd:e,time:Date.now()}}),setTimeout((function(){t({type:"GLOBAL_COOLDOWN_END"})}),e)}},D=R,x=(a(46),function(e){var t=e.time,a=e.name,n=e.displayName,o=e.duration,s=e.direction,c=Object(i.useState)(0),l=Object(d.a)(c,2),u=l[0],m=l[1],h=Object(i.useRef)(t),f=Object(i.useRef)(t);return h.current=t,f.current=o,Object(i.useEffect)((function(){var e=setInterval((function(){var e=Date.now();m((function(t){return e-h.current}))}),50);return function(){clearInterval(e),m((function(e){return 0}))}}),[a]),r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"cast-bar-text-container"},r.a.createElement("div",{className:"progress-text cast-bar-text"},n),r.a.createElement("div",{className:"progress-text cast-bar-text"},s?"".concat((u/1e3).toFixed(1),"/").concat((o/1e3).toFixed(1)):"".concat(((f.current-u)/1e3).toFixed(1),"/").concat((f.current/1e3).toFixed(1)),"sec")),r.a.createElement("div",{className:"progress-bar cast-bar",style:{width:"".concat(s?(u/f.current*100).toFixed(2):((f.current-u)/f.current*100).toFixed(2),"%")}}))}),L=(a(47),function(e){var t=e.state,a=e.abilitySettings,n=e.abilities,o=e.effectHandler,s=e.haste,c=e.inVoidform,l=e.dispatch,m=e.keyEventsPaused,h=e.reset,f=Object(i.useRef)(s);f.current=s;var p=Object(i.useRef)(c);p.current=c;var b=Object(i.useRef)(),v=function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(i.useRef)(a);r.current=a;return[r.current,function(e){n((function(t){return[].concat(Object(u.a)(t),[e])}))},function(e){n((function(t){return t.filter((function(t){return t.source!==e}))}))}]}(),y=Object(d.a)(v,3),g=y[0],E=y[1],T=y[2],O=Object(i.useState)(h),A=Object(d.a)(O,2),w=A[0],S=A[1];Object(i.useEffect)((function(){return l({type:"RESET"}),function(){return S(h)}}),[h]),Object(i.useEffect)((function(){var e="mind-blast",n=a[e],i=L(e),r=n.cdr*(c?-1:1);n.cooldown+=r;var o=t.cooldowns[e].startTime;if(o&&w!==h){r=L(e)-i;var s=Date.now();l({type:"ABILITY_COOLDOWN_START",payload:{name:e,time:o+(o+i-s)/i*r-r}})}}),[c]),Object(i.useEffect)((function(){return document.addEventListener("keydown",I),document.addEventListener("keypress",I),function(){document.removeEventListener("keydown",I),document.removeEventListener("keypress",I)}}),[m]);var N=Object(i.useRef)(t.globalCooldown);N.current=t.globalCooldown;var C=Object(i.useRef)(t.globalCooldownStartTime);C.current=t.globalCooldownStartTime;var I=function(e){if(!m){var t=Date.now();g.forEach((function(a){if(a.keybind===e.key){e.preventDefault();var n=a.getRemainingCooldown(),i=N.current?N.current-(t-C.current):0,r=a.ignoresGcd?0:Math.max(n,i);if(r>250)return;if(!a.canExecute())return;P(a.source,a.execute,r+15)}}))}},k=function(e,t,a,n,i){var r=Date.now(),o=t(),s=N.current?N.current-(r-C.current):0,c=i?0:Math.max(o,s);c>250||n()&&P(e,a,c+15)},_=function(e){return e/f.current},R=function(){var e=Math.max(_(1500),750);D.start(e,l),setTimeout((function(){g.forEach((function(e){return e.notify()}))}),0)},L=function(e){var t=a[e],n=t.cooldown;return t.hasted?_(n):n},U=function(e){var t=a[e],n=t.casttime;return t.staticCastTime?n:_(n)},P=function(e,t,a){clearTimeout(b.current),b.current=setTimeout((function(){g.find((function(t){return t.source===e}))&&t()}),a)},V=function(e){return!!n[e]&&!n[e].disabled},B=function(e){return!("void-bolt"===e&&!p.current)&&("void-eruption"!==e||!p.current)};return r.a.createElement("div",{className:"ability-bar-container"},r.a.createElement("div",{className:"progress-bar-container"},t.casting?r.a.createElement(x,t.casting):null),r.a.createElement("div",{className:"ability-bar"},function(e){return Object.keys(e).filter(V).sort((function(t,a){return e[t].index-e[a].index}))}(t.cooldowns).map((function(e){return r.a.createElement(j,{name:e,key:"ability-".concat(e),abilityState:n[e],cooldownState:t.cooldowns[e],settings:a[e],cooldown:L(e),globalCooldown:t.globalCooldown,globalCooldownStartTime:t.globalCooldownStartTime,casttime:U(e),casting:t.casting&&t.casting.time&&t.casting.direction,subscribe:E,unsubscribe:T,onExecute:R,onAbilityUpdate:l,onClick:k,dispatch:l,effectHandler:o,show:B(e),reset:h})}))))}),U=a(13),P=(a(48),function(e,t,a,n,i){var r=0,o=setInterval((function(){var s=Date.now();r++,s>=t()?function(e,t,a){clearInterval(e),a.handleEvent("AURA_END",{name:t,source:t})}(o,n,a):(i.forEach((function(e){var t=e.eventName,i=e.getPayload,o=e.interval,s=Math.round(o/100);r%s===0&&a.handleEvent(t,Object(h.a)({name:n},i()))})),e(s))}),100);return o}),V=function(e){var t=e.icon,a=(e.displayName,e.duration),n=e.maxDuration,i=e.stacks,o=a&&(n-a)/n;return r.a.createElement("div",{className:"aura"},r.a.createElement("img",{src:t,width:30,height:30}),r.a.createElement("div",{className:"aura-text"},i>0?i:""),a?r.a.createElement(p,{size:30,progress:o,inverse:!0}):null,e.children)},B=["type","startTime","haste","stacks","inVoidform","triggerEvent"],H=function(e){var t=e.type,a=e.startTime,n=e.haste,o=e.stacks,s=e.inVoidform,c=e.triggerEvent,l=Object(U.a)(e,B),u=Object(i.useState)(6e4),m=Object(d.a)(u,2),h=m[0],f=m[1],p=Object(i.useState)(0),b=Object(d.a)(p,2),v=b[0],y=b[1],g=Object(i.useRef)(o);g.current=o;var E=Object(i.useRef)(s);E.current=s;var T=Object(i.useRef)(a);T.current=a;var O=Object(i.useRef)(n);O.current=n;var A=function(e,t,a,n){var i=e?6e4:n;return f((function(e){return i})),c({category:"AURA",type:"LINGERING_INSANITY_START",payload:{haste:O.current*t,stacks:Math.ceil(a*t)}}),{currentMaxDuration:i,voidformEntered:!1}},w=function(e,t){return Math.ceil(e/t)};return Object(i.useEffect)((function(){var e;switch(t){case"static":e=function(){var e=l.duration,t=l.afterVoidformEntry,a=l.hasteRetention,n=A(t,a,g.current,e),i=setInterval((function(){var r=Date.now();if(!n.voidformEntered||E.current)return r>=T.current+n.currentMaxDuration?(clearInterval(i),void c({category:"AURA",type:"LINGERING_INSANITY_END"})):!n.voidformEntered&&E.current&&(n.voidformEntered=!0,t)?(c({category:"AURA",type:"AURA_REFRESH",payload:{name:"lingeringInsanity",time:r}}),f((function(t){return e})),n.currentMaxDuration=e,void y((function(e){return 0}))):void y((function(e){return r-T.current}));n=A(t,a,g.current,e)}),100);return i}();break;case"decay":e=function(){var e=l.decayRate,t=l.hasteDecay,a=0,n=A(!0,1,w(O.current,t)),i=setInterval((function(){a+=100;var r=Date.now();return n.voidformEntered&&!E.current?(n=A(!0,1,w(O.current,t)),void(a=0)):g.current<=0?(clearInterval(i),void c({category:"AURA",type:"LINGERING_INSANITY_END"})):(a%e===0&&c({category:"AURA",type:"LINGERING_INSANITY_UPDATE",payload:-1*t}),!n.voidformEntered&&E.current&&(n.voidformEntered=!0),void y((function(e){return r-T.current})))}),100);return i}()}return function(){return clearInterval(e)}}),[]),r.a.createElement(V,{icon:"images/lingering-insanity.jpg",displayName:"Lingering Insanity",duration:v,maxDuration:h,stacks:o})},Y=function(e){var t=e.type,a=e.startTime,n=e.drainRate,o=e.drainStart,s=e.hasteStack,c=e.hasteStart,l=e.maxStacks,m=e.baseDuration,f=e.paused,p=e.active,b=e.triggerEvent,v=e.effectHandler,y="voidform",g=Object(i.useState)("insanity"===t?1:0),E=Object(d.a)(g,2),T=E[0],O=E[1],A=Object(i.useState)(0),S=Object(d.a)(A,2),N=S[0],C=S[1],I=Object(i.useRef)(f);I.current=f;var k=Object(i.useRef)(a);k.current=a;return Object(i.useEffect)((function(){var e;switch(t){case"insanity":e=function(){var e=0,t=Math.round(10),a=0;return b({type:"HASTE_UPDATE",payload:{source:y,haste:c+s}}),setInterval((function(){var i=.1*(o+n*e);a++,I.current||(e+=.1,b({type:"RESOURCE_UPDATE",payload:{resource:-1*i}})),a%t===0&&(!l||a/t<l)&&(b({category:"AURA",type:"VOIDFORM_UPDATE",payload:{hasteStack:s}}),O((function(e){return e+1})))}),100)}();break;case"static":var a=Date.now(),i=w(y,b,v),r={source:y,duration:m,time:a,haste:c},d=function(e,t){var a={},n={setStartingEvent:function(e,t){return a.starting={eventName:e,getPayload:t},n},addUpdateEvent:function(e,t,i){var r=i.interval;return a.update=[].concat(Object(u.a)(a.update||[]),[{eventName:e,getPayload:t,interval:r}]),n},start:function(n,i,r){var o=P((function(e){return n((function(t){return e-i.current}))}),(function(){return i.current+r}),t,e,a.update||[]);return t.handleEvent(a.starting.eventName,Object(h.a)({name:e},a.starting.getPayload())),o}};return n}(y,i).setStartingEvent("AURA_START",(function(){return r}));s&&d.addUpdateEvent("AURA_UPDATE",(function(){return O((function(e){return e+1})),{hasteStack:s}}),{interval:1e3}),e=d.start(C,k,m)}return function(){clearInterval(e),b({category:"AURA",type:"VOIDFORM_END",payload:{time:Date.now(),startingHaste:c}}),b({type:"RESOURCE_UPDATE",payload:{resource:0}})}}),[p]),r.a.createElement(V,{icon:"images/voidform.jpg",displayName:"Voidform",stacks:T,duration:N,maxDuration:m})},G=function(e){var t=e.icon,a=e.name,n=e.displayName,o=e.startTime,s=e.baseDuration,c=e.maxDuration,l=e.ticks,u=e.resource,m=e.haste,h=e.hasted,f=e.triggerEvent,p=Object(i.useState)(0),b=Object(d.a)(p,2),v=b[0],y=b[1],g=Object(i.useRef)(o);g.current=o;var E=Object(i.useRef)(c);E.current=c;var T=Object(i.useRef)(m);T.current=m;var O=function(e){return s/l/(h&&T.current||1)+e};return Object(i.useEffect)((function(){var e=Date.now(),t=O(e);f({category:"AURA",type:"AURA_BEGIN",payload:{name:a,duration:s,time:e,tickTime:t}});var n=setInterval((function(){var e=Date.now();if(e>=g.current+E.current)return clearInterval(n),f({type:"RESOURCE_UPDATE",payload:{resource:u}}),void f({category:"AURA",type:"AURA_END",payload:{name:a}});if(e>=t){var i=g.current+E.current;t=Math.min(O(e),i),f({type:"RESOURCE_UPDATE",payload:{resource:u}}),f({type:"AURA_TICK",payload:{name:a,tickTime:t}})}y((function(t){return e-g.current}))}),100);return function(){return clearInterval(n)}}),[]),r.a.createElement(V,{icon:t,displayName:n,duration:v,maxDuration:E.current})},W=function(e){var t=e.icon,a=e.name,n=e.displayName,o=e.startTime,s=e.stacks,c=e.setting,l=e.triggerEvent,u=e.effectHandler,m=c.baseDuration,f=c.maxStacks,p=Object(i.useState)(0),b=Object(d.a)(p,2),v=b[0],y=b[1],g=Object(i.useRef)(o);g.current=o;var E=Object(i.useRef)(s);return E.current=s,Object(i.useEffect)((function(){var e=w(a,l,u),t=Date.now();e.handleEvent("AURA_START",Object(h.a)({name:a,source:a,duration:m,time:t},c));var n=function(e,t,a,n,i,r){var o=r.name,s=r.maxStacks,c=setInterval((function(){var r=Date.now();if(r>=t.current+a||s&&n.current<=0)return clearInterval(c),void i.handleEvent("AURA_END",{name:o,source:o});e((function(e){return r-t.current}))}),100);return c}(y,g,m,E,e,{name:a,maxStacks:f});return function(){return clearInterval(n)}}),[]),r.a.createElement(V,{icon:t,displayName:n,duration:v,maxDuration:m,stacks:s})},M="An aura that is hasted has its period reduced by haste.",F="Increases the amount of resource generated from abilities while an aura is active.",z="Lingering Insanity has two types.\nStatic - The length of the aura and haste from stacks are constant.\nDecay - Haste stacks are lost over the aura's duration at a certain rate.",q="An option for type 'Static'. This is the amount of time, in seconds, that the aura will last.",K="An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform.",J="An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform.",X="An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost.",$="An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack.",Z="The amount of time, in seconds, that an aura's effect will last.",Q="The amount of haste, in percent, that is granted while an aura is active",ee="The maximum number of Dark Thoughts stacks.",te={cooldown:{key:"cooldown",displayName:"Cooldown",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be able to be recast.",unit:"sec"},charges:{key:"charges",displayName:"Charges",type:"number",whatIs:"The number of times an ability may be cast while it is on cooldown."},hasted:{key:"hasted",displayName:"Hasted",type:"boolean",whatIs:"An ability that is hasted has its cooldown reduced by haste."},resourceCast:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate upon a successful cast.",unit:"insanity"},resourceChannel:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate over its complete channel period.",unit:"insanity"},cost:{key:"resourceCost",displayName:"Cost",type:"number",whatIs:"The amount of resource required to cast an ability. Casting the ability will spend the resource cost.",unit:"insanity"},castTime:{key:"casttime",displayName:"Cast Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be executed.",unit:"sec"},channelTime:{key:"casttime",displayName:"Channel Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability's channel to complete.",unit:"sec"},ticks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times a channel generates resources over its duration."},auraDuration:{key:"baseDuration",displayName:"Duration",type:"time",whatIs:Z},auraTicks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times an aura will trigger its effect over its duration."},auraResource:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an aura will generate every time its effect triggers."}},ae={"void-bolt":[te.cooldown,te.hasted,te.charges,te.resourceCast,{key:"extension",displayName:"DoT Extension",type:"time",whatIs:"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast."}],"void-eruption":[te.cooldown,te.castTime,{key:"resourceCost",displayName:"Insanity Threshold",type:"number",whatIs:"The amount of Insanity that is required to cast Void Eruption out of Voidform."}],"mind-flay":[te.channelTime,te.resourceChannel,te.ticks],"mind-sear":[te.channelTime,te.resourceChannel,te.ticks,{key:"targetCount",displayName:"Target Count",type:"number",whatIs:"The number of targets Mind Sear will hit. Mind Sear generates more resource per additional target."}],"mind-blast":[te.cooldown,te.charges,te.castTime,te.hasted,te.resourceCast,{key:"cdr",displayName:"Voidform Cooldown Reduction",type:"time",whatIs:"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform."}],"shadow-word-death":[te.cooldown,te.charges,te.hasted,te.resourceCast],"void-torrent":[te.cooldown,te.channelTime,te.resourceChannel,te.ticks,{key:"requireVoidform",displayName:"Require Voidform",type:"boolean",whatIs:"Must be in Voidform in order to cast the ability."}],"shadow-word-pain":[te.resourceCast],"vampiric-touch":[te.castTime,te.resourceCast],"devouring-plague":[{key:"costType",displayName:"Cost Type",type:"select",options:[{value:"static",displayName:"Static"},{value:"dump",displayName:"Dump"}],whatIs:"Resource cost has two types.\nStatic - A static amount of resource is required to cast the ability.\nDump - Casting the ability spends all resource up to the amount specified by its cost."},te.cooldown,te.cost,te.resourceCast,{key:"requireNoVoidform",displayName:"Require No Voidform",type:"boolean",whatIs:"Must be out of Voidform in order to cast the ability."}],shadowfiend:[te.cooldown,te.resourceCast],"power-infusion":[te.cooldown]},ne={stats:[{key:"haste",displayName:"Haste",type:"percent",whatIs:"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate."},{key:"startingInsanity",displayName:"Starting Insanity",type:"number",whatIs:"The amount of Insanity provided out of combat."}],voidform:[{key:"type",displayName:"Aura Type",type:"select",options:[{value:"insanity",displayName:"Insanity"},{value:"static",displayName:"Static"}],whatIs:"Voidform has two types.\nInsanity - Insanity will drain and the aura will end when insanity reaches zero.\nStatic - The aura has a fixed duration."},{key:"drainStart",displayName:"Starting Insanity Drain",type:"float",unit:"/sec",whatIs:"The starting amount of Insanity being drained every second while in Voidform."},{key:"drainRate",displayName:"Insanity Drain Rate",type:"float",unit:"/sec",whatIs:"The amount of increasing Insanity drained every second while in Voidform."},{key:"hasteStart",displayName:"Voidform Starting Haste",type:"percent",whatIs:"The amount of haste, in percent, that is granted at the start of Voidform."},{key:"hasteStack",displayName:"Voidform Haste Per Stack",type:"percent",whatIs:"The amount of haste, in percent, that every stack of Voidform grants."},{key:"maxStacks",displayName:"Maximum Voidform Stacks",type:"number",whatIs:"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing."},{key:"gainInsanity",displayName:"Gain Insanity",type:"boolean",whatIs:"While in Voidform, if enabled spells will generate insanity, otherwise they won't."},Object(h.a)(Object(h.a)({},te.auraDuration),{},{whatIs:"An option for type 'Static'. ".concat(Z)})],lingeringInsanity:[{key:"type",displayName:"Aura Type",type:"select",options:[{value:"static",displayName:"Static"},{value:"decay",displayName:"Decay"}],whatIs:z},{key:"duration",displayName:"Aura Duration",type:"time",whatIs:q},{key:"afterVoidformEntry",displayName:"After Voidform Entry",type:"boolean",whatIs:K},{key:"hasteRetention",displayName:"Haste Retained",type:"percent",whatIs:J},{key:"decayRate",displayName:"Stack Decay Rate",type:"time",whatIs:X},{key:"hasteDecay",displayName:"Haste Decay Amount",type:"percent",whatIs:$}],"shadow-word-pain":[te.auraDuration,te.auraTicks,te.auraResource],"vampiric-touch":[te.auraDuration,te.auraTicks,te.auraResource],"devouring-plague":[te.auraDuration,te.auraTicks,te.auraResource,{key:"hasted",displayName:"Hasted",type:"boolean",whatIs:M}],shadowfiend:[te.auraResource],"power-infusion":[te.auraDuration,{key:"haste",displayName:"Haste",type:"percent",whatIs:Q},{key:"resourceGen",displayName:"Resource Generation",type:"percent",whatIs:F}],"dark-thoughts":[te.auraDuration,{key:"maxStacks",displayName:"Maximum Dark Thoughts Stacks",type:"number",whatIs:ee}]},ie=[{name:"shadow-word-pain",icon:"images/shadow-word-pain.jpg",displayName:"Shadow Word: Pain"},{name:"vampiric-touch",icon:"images/vampiric-touch.jpg",displayName:"Vampiric Touch"},{name:"devouring-plague",icon:"images/devouring-plague.jpg",displayName:"Devouring Plague"},{name:"shadowfiend",icon:"images/shadowfiend.jpg",displayName:"Shadowfiend"}],re=[{name:"power-infusion",icon:"images/power-infusion.jpg",displayName:"Power Infusion"},{name:"fae-blessings",icon:"images/fae-blessings.jpg",displayName:"Fae Blessings"},{name:"bloodlust",icon:"images/bloodlust.jpg",displayName:"Bloodlust"},{name:"dark-thoughts",icon:"images/dark-thoughts.jpg",displayName:"Dark Thoughts"}],oe=function(e){var t=e.auras,a=e.triggerEvent,n=e.settings,i=e.effectHandler,o=e.haste,s=n.lingeringInsanity,c=n.voidform;return r.a.createElement("div",{className:"aura-container"},t.voidform.active?r.a.createElement(Y,Object.assign({},c,t.voidform,{triggerEvent:a,effectHandler:i})):null,t.lingeringInsanity.active?r.a.createElement(H,Object.assign({},s,t.lingeringInsanity,{inVoidform:t.voidform.active,triggerEvent:a,effectHandler:i})):null,ie.map((function(e){return t[e.name].active?r.a.createElement(G,Object.assign({key:"dot-".concat(e.name)},e,t[e.name],n[e.name],{haste:o,triggerEvent:a,effectHandler:i})):null})),re.map((function(e){return t[e.name].active?r.a.createElement(W,Object.assign({key:"buff-".concat(e.name)},e,t[e.name],{setting:n[e.name],triggerEvent:a,effectHandler:i})):null})))},se=(a(12),function(e){var t=e.panel,a=e.currentPanel,n=e.reset,o=e.onClick,s=e.handleClose,c=e.header,l=e.panelClass,u=e.style;return function(e,t,a){var n=Object(i.useRef)();Object(i.useEffect)((function(){n.current===e&&a(),n.current=t}),[t])}(t,a,n),r.a.createElement("div",null,r.a.createElement("div",{className:"panel-header hover-pointer",onClick:function(){return o(t)}},c),r.a.createElement("div",{className:"panel ".concat(l),style:u},r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:s},"x"),e.children))}),ce=a(23),le={"mind-flay":{cooldown:0,resource:18,hasted:!0,casttime:4500,ticks:6,type:"channel"},"mind-sear":{cooldown:0,resource:6,hasted:!0,casttime:4500,ticks:6,targetCount:1,type:"channel"},"void-bolt":{cooldown:4500,resource:12,hasted:!0,rankTwo:!1,type:"instant",charges:1,extension:3e3},"void-eruption":{cooldown:9e4,type:"cast",casttime:1500,resourceCost:0},"mind-blast":{cooldown:7500,resource:8,hasted:!0,type:"cast",casttime:1500,charges:1,cdr:0},"shadow-word-death":{cooldown:2e4,resource:0,hasted:!0,type:"instant",charges:1},"void-torrent":{cooldown:3e4,resource:60,type:"channel",casttime:3e3,staticCastTime:!0,ticks:4,requireVoidform:!1},"shadow-word-pain":{cooldown:0,resource:4,type:"instant"},"vampiric-touch":{cooldown:0,resource:5,type:"cast",casttime:1500},"devouring-plague":{costType:"static",cooldown:0,resource:0,resourceCost:50,requireNoVoidform:!1,type:"instant"},shadowfiend:{cooldown:18e4,resource:0,type:"instant"},"power-infusion":{cooldown:12e4,type:"instant",ignoreGcd:!0},"fae-blessings":{cooldown:9e4,type:"instant"},bloodlust:{cooldown:3e5,ignoreGcd:!0,type:"instant"}},ue={stats:{displayName:"Passive",haste:0,startingInsanity:0},voidform:{displayName:"Voidform",type:"static",drainStart:0,drainRate:0,hasteStart:0,hasteStack:0,maxStacks:0,gainInsanity:!0,baseDuration:15e3},lingeringInsanity:{displayName:"Lingering Insanity",type:"static",duration:0,afterVoidformEntry:!1,hasteRetention:1,decayRate:3e3,hasteDecay:.01,enbaled:!1},"shadow-word-pain":{displayName:"Shadow Word: Pain",baseDuration:16e3,ticks:8,resource:0,hasted:!0,type:"pandemic"},"vampiric-touch":{displayName:"Vampiric Touch",baseDuration:21e3,ticks:7,resource:0,hasted:!0,type:"pandemic"},"devouring-plague":{displayName:"Devouring Plague",baseDuration:6e3,ticks:2,resource:0,hasted:!0,type:"rolling"},shadowfiend:{displayName:"Shadowfiend",baseDuration:15e3,ticks:10,resource:0},"power-infusion":{displayName:"Power Infusion",baseDuration:2e4,haste:.25,resourceGen:0},"fae-blessings":{displayName:"Fae Blessings",baseDuration:6e4,maxStacks:10},bloodlust:{displayName:"Bloodlust",baseDuration:4e4,haste:.3},"dark-thoughts":{displayName:"Dark Thoughts",baseDuration:15e3,maxStacks:5}},de={"dark-thoughts":{displayName:"Dark Thoughts",procChance:.2}},me=function(e){var t={};return Object.keys(le).forEach((function(a){var n=e[a]||le[a];t[a]=function(e,t){var a=le[t];return Object.keys(a).reduce((function(t,n){var i=e[n],r=a[n];if(i&&typeof i!==typeof r)throw new Error("Ability setting has invalid format");return t[n]=void 0!==i?i:r,t}),{})}(n,a)})),t},he=function(e){var t={};return Object.keys(ue).forEach((function(a){var n=e[a]||ue[a];t[a]=function(e,t){var a=ue[t];return Object.keys(a).reduce((function(t,n){var i=e[n],r=a[n];if(i&&typeof i!==typeof r)throw new Error("Aura setting has invalid format");return t[n]=void 0!==i?i:r,t}),{})}(n,a)})),t},fe=function(e){return Object.keys(e).reduce((function(t,a){var n,i=e[a],r=(n=i,Object.keys(n).reduce((function(e,t){return e[t]=n[t],e}),{}));return t[a]=r,t}),{})},pe=function(e,t,a){return Object.keys(e).reduce((function(n,i){var r=e[i],o=r.keybind,s=r.disabled,c=r.index;return n[i]={disabled:!!s},t&&o&&(n[i].keybind=o),a&&c&&(n[i].index=c),n}),{})},be=function(e){var t=fe(e.abilitySettings),a=pe(e.abilities,!0,!0),n={abilitySettings:t,auraSettings:e.auraSettings,abilityConfig:a,effectSettings:e.effectSettings};return ce.Base64.encode(JSON.stringify(n))},ve={displayName:"Shadowlands",abilitySettings:Object(h.a)({},le),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{"dark-thoughts":{displayName:"Dark Thoughts",baseDuration:15e3,maxStacks:5}}),effectSettings:Object(h.a)({},de),abilities:{"mind-flay":{},"mind-sear":{},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{},shadowfiend:{}}},ye={displayName:"Battle for Azeroth",abilitySettings:Object(h.a)(Object(h.a)({},le),{},(n={"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{casttime:1500,resourceCost:60}),"mind-blast":Object(h.a)(Object(h.a)({},le["mind-blast"]),{},{cooldown:9e3,resource:15,charges:2}),"vampiric-touch":Object(h.a)(Object(h.a)({},le["vampiric-touch"]),{},{resource:5}),"void-bolt":Object(h.a)(Object(h.a)({},le["void-bolt"]),{},{resource:15}),"mind-flay":Object(h.a)(Object(h.a)({},le["mind-flay"]),{},{casttime:4500,ticks:6,resource:18}),"mind-sear":Object(h.a)(Object(h.a)({},le["mind-sear"]),{},{casttime:4500,ticks:6,resource:7.5})},Object(m.a)(n,"mind-blast",Object(h.a)(Object(h.a)({},le["mind-blast"]),{},{cooldown:7500,resource:8})),Object(m.a)(n,"shadow-word-death",Object(h.a)(Object(h.a)({},le["shadow-word-death"]),{},{charges:2})),n)),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{voidform:Object(h.a)(Object(h.a)({},ue.voidform),{},{hasteStack:0}),"devouring-plague":Object(h.a)(Object(h.a)({},ue["devouring-plague"]),{},{displayName:"Devouring Plague",baseDuration:6e3,ticks:2})}),abilities:{"mind-flay":{},"mind-sear":{},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{disabled:!0},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{disabled:!0},shadowfiend:{},"power-infusion":{disabled:!0}}},ge={displayName:"Legion: EN + Void Lord",abilitySettings:Object(h.a)(Object(h.a)({},le),{},{"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{casttime:2500,resourceCost:90}),"void-torrent":{cooldown:6e4,resource:0,type:"channel",casttime:4e3,staticCastTime:!0,ticks:10,requireVoidform:!0},shadowfiend:{cooldown:18e4,resource:0,type:"instant"}}),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{voidform:{displayName:"Voidform",drainStart:6,drainRate:.66,hasteStart:0,hasteStack:.01,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"static",duration:8e3,afterVoidformEntry:!0,hasteRetention:1,decayRate:1e3,hasteDecay:.01},shadowfiend:{displayName:"Shadowfiend",baseDuration:15e3,ticks:10,resource:0}}),abilities:{"mind-flay":{},"mind-sear":{},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{},"void-torrent":{},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{disabled:!0},"power-infusion":{disabled:!0}}},Ee={displayName:"Legion: Antorus",abilitySettings:Object(h.a)(Object(h.a)({},le),{},{"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{casttime:1500,resourceCost:65}),"mind-blast":{cooldown:7500,resource:12,hasted:!0,type:"cast",casttime:1500,charges:2,cdr:1500},"void-torrent":{cooldown:6e4,resource:0,type:"channel",casttime:4e3,staticCastTime:!0,ticks:10,requireVoidform:!0},shadowfiend:{cooldown:6e4,resource:6,type:"instant"}}),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{stats:Object(h.a)(Object(h.a)({},ue.stats),{},{displayName:"Stats",haste:.4}),voidform:{displayName:"Voidform",drainStart:6,drainRate:.66,hasteStart:0,hasteStack:.01,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"decay",duration:6e4,afterVoidformEntry:!1,hasteRetention:1,decayRate:1e3,hasteDecay:.01},shadowfiend:{displayName:"Shadowfiend",baseDuration:24e3,ticks:16,resource:6}}),abilities:{"mind-flay":{},"mind-sear":{disabled:!0},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{},"void-torrent":{},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{disabled:!0},"power-infusion":{disabled:!0}}},Te={displayName:"Ryeshot's Shadowlands",abilitySettings:Object(h.a)(Object(h.a)({},le),{},{"void-bolt":Object(h.a)(Object(h.a)({},le["void-bolt"]),{},{resource:15}),"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{cooldown:0,resourceCost:90}),"mind-blast":Object(h.a)(Object(h.a)({},le["mind-blast"]),{},{cooldown:7500,resource:25,charges:2,cdr:0}),"shadow-word-death":Object(h.a)(Object(h.a)({},le["shadow-word-death"]),{},{cooldown:2e4,resource:0,hasted:!0}),"vampiric-touch":Object(h.a)(Object(h.a)({},le["vampiric-touch"]),{},{resource:6}),"devouring-plague":Object(h.a)(Object(h.a)({},le["devouring-plague"]),{},{costType:"dump",resourceCost:100})}),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{stats:Object(h.a)(Object(h.a)({},ue.stats),{},{haste:.15,startingInsanity:30}),voidform:Object(h.a)(Object(h.a)({},ue.voidform),{},{type:"insanity",drainStart:6,drainRate:.66,hasteStart:.1,hasteStack:.01}),lingeringInsanity:Object(h.a)(Object(h.a)({},ue.lingeringInsanity),{},{type:"static",duration:0}),"devouring-plague":Object(h.a)(Object(h.a)({},ue["devouring-plague"]),{},{baseDuration:6e3,ticks:6,resource:5,hasted:!1})}),abilities:{"mind-flay":{},"mind-sear":{disabled:!0},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{disabled:!0},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{},shadowfiend:{disabled:!0},"power-infusion":{disabled:!0}}},Oe={displayName:"Yvaelle's Shadowlands",abilitySettings:Object(h.a)(Object(h.a)({},le),{},{"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{resourceCost:0}),"mind-blast":Object(h.a)(Object(h.a)({},le["mind-blast"]),{},{cooldown:7500,resource:15,charges:2})}),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{stats:Object(h.a)(Object(h.a)({},ue.stats),{},{haste:.35}),voidform:Object(h.a)(Object(h.a)({},ue.voidform),{},{drainStart:5,drainRate:0,hasteStart:.15,hasteStack:0,gainInsanity:!1}),lingeringInsanity:Object(h.a)(Object(h.a)({},ue.lingeringInsanity),{},{type:"static",duration:0})}),abilities:{"mind-flay":{},"mind-sear":{disabled:!0},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{disabled:!0},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{disabled:!0},shadowfiend:{disabled:!0},"power-infusion":{disabled:!0}}},Ae={live:ve,dragonflight:{displayName:"Dragonflight",abilitySettings:Object(h.a)(Object(h.a)({},le),{},{"void-bolt":Object(h.a)(Object(h.a)({},le["void-bolt"]),{},{cooldown:9e3}),"void-eruption":Object(h.a)(Object(h.a)({},le["void-eruption"]),{},{cooldown:12e4}),"mind-blast":Object(h.a)(Object(h.a)({},le["mind-blast"]),{},{cooldown:7500,charges:2}),"vampiric-touch":Object(h.a)(Object(h.a)({},le["vampiric-touch"]),{},{resource:5})}),auraSettings:Object(h.a)(Object(h.a)({},ue),{},{stats:Object(h.a)(Object(h.a)({},ue.stats),{},{haste:.15})}),abilities:{"mind-flay":{},"mind-sear":{disabled:!0},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{},"void-torrent":{},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{},shadowfiend:{},"power-infusion":{}}},bfa:ye,legionENVoidlord:ge,legionAntorus:Ee,ryeshot:Te,yvaelle:Oe},we=["displayName"],Se=function(e){var t=e.onChange,a=e.selected;return r.a.createElement("div",{style:{width:"60%"}},r.a.createElement("select",{className:"panel-dropdown",value:a,onChange:t},r.a.createElement("option",{value:"default",disabled:!0},"Choose a template..."),Object.keys(Ae).map((function(e){return r.a.createElement("option",{key:e,value:e},Ae[e].displayName)})),r.a.createElement("option",{key:"custom",value:"custom"},"Custom")))},Ne=function(e){var t=e.settings,a=e.onImport,n=e.currentPanel,o=e.onClick,s=e.closePanel,c=Object(i.useState)(""),l=Object(d.a)(c,2),u=l[0],m=l[1],f=Object(i.useState)(""),p=Object(d.a)(f,2),b=p[0],v=p[1],y=Object(i.useState)(!1),g=Object(d.a)(y,2),E=g[0],T=g[1],O=Object(i.useState)(!1),A=Object(d.a)(O,2),w=A[0],S=A[1],N=Object(i.useState)("default"),C=Object(d.a)(N,2),I=C[0],k=C[1];return r.a.createElement(se,{panel:"export",currentPanel:n,reset:function(){m(""),v(""),T(!1),S(!1),k("default")},onClick:o,handleClose:s,header:"Import/Export Settings",panelClass:"left-panel",style:{transform:"translateX(".concat("export"===n?"0px":"-350px",")")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Import Settings"),r.a.createElement(Se,{selected:I,onChange:function(e){var t=e.target.value;if(k(t),"custom"!==t){var a=Ae[t],n=(a.displayName,Object(U.a)(a,we)),i=be(Object(h.a)({},n));v(i)}else v("")}}),r.a.createElement("textarea",{className:"panel-text-area",rows:20,cols:25,placeholder:"Import settings here...",value:b,onChange:function(e){var t=e.target.value;v(t)}}),r.a.createElement("div",{className:"panel-info-text-container"},r.a.createElement("label",null,"Include keybinds"),r.a.createElement("input",{type:"checkbox",onChange:function(){return T(!E)},checked:E})),r.a.createElement("div",{className:"panel-info-text-container"},r.a.createElement("label",null,"Include spell order"),r.a.createElement("input",{type:"checkbox",onChange:function(){return S(!w)},checked:w})),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){try{var e=function(e,t,a){try{var n=JSON.parse(ce.Base64.decode(e));return{abilitySettings:me(n.abilitySettings),auraSettings:he(n.auraSettings),abilityConfig:pe(n.abilityConfig,t,a),effectSettings:n.effectSettings||{}}}catch(i){throw new Error("An error occurred while parsing input data.\nReason: "+i.message)}}(b,E,w);I&&function(e){var t=new URLSearchParams;t.set("template",e),window.history.replaceState(null,window.document.title,"?".concat(t.toString()))}(I),a(e)}catch(t){console.error(t)}v("")},disabled:!b},"Import"))),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Export Settings"),r.a.createElement("textarea",{id:"export-content",className:"panel-text-area",rows:20,cols:25,value:u,readOnly:!0}),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){var e=be(t);m(e)}},"Export"),r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){document.getElementById("export-content").select();try{document.execCommand("copy")}catch(e){}},disabled:!u},"Copy")))))},Ce=function(e){var t=e.value,a=e.onChange,n=Object(i.useState)(t/1e3),o=Object(d.a)(n,2),s=o[0],c=o[1];return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:s,min:"0",step:".1",onChange:function(e){e.target.value&&(a(1e3*parseFloat(e.target.value)),c(e.target.value))}}),"sec")},Ie=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",onChange:function(e){e.target.value&&a(parseInt(e.target.value))}})," ",n)},ke=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",step:".01",onChange:function(e){e.target.value&&a(parseFloat(e.target.value))}})," ",n)},_e=function(e){var t=e.value,a=e.onChange,n=Object(i.useState)(100*t),o=Object(d.a)(n,2),s=o[0],c=o[1];return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:s,min:"0",step:".5",onChange:function(e){e.target.value&&(a(parseFloat(e.target.value)/100),c(e.target.value))}}),"%")},je=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"checkbox",defaultChecked:t,onChange:function(e){a(e.target.checked)}})},Re=function(e){var t=e.value,a=e.onChange,n=e.name,i=e.options,o=function(e){a(e.target.value)};return i.map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:e.value,name:n,value:e.value,defaultChecked:e.value===t,onChange:o}),r.a.createElement("label",{htmlFor:e.value},e.displayName))}))},De=Option=function(e,t,a,n,i,o){switch(e){case"time":return r.a.createElement(Ce,{key:n,value:t,onChange:a});case"number":return r.a.createElement(Ie,Object.assign({key:n,value:t,onChange:a},o));case"float":return r.a.createElement(ke,Object.assign({key:n,value:t,onChange:a},o));case"percent":return r.a.createElement(_e,{key:n,value:t,onChange:a});case"boolean":return r.a.createElement(je,{key:n,value:t,onChange:a});case"select":return r.a.createElement(Re,Object.assign({key:n,value:t,name:i,onChange:a},o));default:return null}},xe=(a(28),a(29),["value","name","type","whatIs","displayName","onChange","onHelp","closeHelp","parentKey"]),Le=function(e){var t=e.value,a=e.name,n=e.type,i=e.whatIs,o=e.displayName,s=e.onChange,c=e.onHelp,l=e.closeHelp,u=e.parentKey,d=Object(U.a)(e,xe);return r.a.createElement("div",{className:"setting-option"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-question-circle what-is-icon",onMouseEnter:function(e){var t={x:e.target.offsetLeft,y:e.target.offsetTop};c(o,i,t)},onMouseLeave:l})),r.a.createElement("div",{className:"setting-option-header"},o),De(n,t,(function(e){s(a,e)}),u+"-input",a,d))},Ue=function(e){var t=e.name,a=e.text,n=e.xPos,i=e.yPos,o={left:"".concat(n,"px"),top:"".concat(i+30,"px")};return r.a.createElement("div",{className:"what-is",style:o},r.a.createElement("div",{className:"what-is-header"},"What is... ",t,"?"),r.a.createElement("div",{className:"what-is-description"},a))},Pe=function(e){var t=e.name,a=e.setting,n=e.options,o=e.onChange,s=Object(i.useState)(!1),c=Object(d.a)(s,2),l=c[0],u=c[1],f=Object(i.useState)({}),p=Object(d.a)(f,2),b=p[0],v=p[1],y=function(e,n){var i=Object(h.a)(Object(h.a)({},a),{},Object(m.a)({},e,n));o(i,t)},g=function(e,t,a){u(!0),v({name:e,text:t,xPos:a.x,yPos:a.y})},E=function(){u(!1),v({})};return r.a.createElement("div",{className:"customize-section"},r.a.createElement("div",{className:"customoze-section-header"},a.displayName),n.map((function(e){return r.a.createElement(Le,Object.assign({},e,{key:"".concat(t,"-").concat(e.key),value:a[e.key],name:e.key,parentKey:"".concat(t,"-").concat(e.key),onChange:y,onHelp:g,closeHelp:E}))})),l?r.a.createElement(Ue,b):null)},Ve=function(e){var t=e.settings,a=e.currentPanel,n=e.didReset,o=e.onAbilitySet,s=e.onAuraSet,c=e.onClick,l=e.closePanel,u=t.abilities,f=t.auras,p="Changes pending...\nClick the button below to apply your changes",b=Object(i.useState)(u),v=Object(d.a)(b,2),y=v[0],g=v[1],E=Object(i.useState)(f),T=Object(d.a)(E,2),O=T[0],A=T[1],w=Object(i.useState)(null),S=Object(d.a)(w,2),N=S[0],C=S[1],I=Object(i.useState)(null),k=Object(d.a)(I,2),_=k[0],j=k[1],R=Object(i.useState)(!1),D=Object(d.a)(R,2),x=D[0],L=D[1],U=Object(i.useState)(!1),P=Object(d.a)(U,2),V=P[0],B=P[1];Object(i.useEffect)((function(){A(f),g(u)}),[n]),Object(i.useEffect)((function(){"settings"===a&&(C(Object.keys(u)[0]),j(Object.keys(f)[0]))}),[a]);var H=function(e){var t=e.target.getAttribute("setting");C(t)},Y=function(e){var t=e.target.getAttribute("setting");j(t)};return r.a.createElement(se,{panel:"settings",currentPanel:a,reset:function(){A(f),g(u),L(!1),B(!1),setTimeout((function(){C(null),j(null)}),500)},onClick:c,handleClose:l,header:"Custom Settings",panelClass:"right-panel",style:{transform:"translateX(".concat("settings"===a?"0px":"350px")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Abilities"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(u).filter((function(e){return ae[e]})).map((function(e){return r.a.createElement("div",{key:e,className:N===e?"settings-header-active":"settings-header",setting:e,onClick:H},u[e].displayName)}))),N?r.a.createElement(Pe,{name:N,setting:y[N],options:ae[N],onChange:function(e,t){var a=Object(h.a)(Object(h.a)({},y),{},Object(m.a)({},t,e));g(a),L(!0)}}):null,r.a.createElement("div",{className:"panel-text-button-container"},r.a.createElement("div",{className:"panel-info-text-container"},x?p:null),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){o(y),L(!1)}},"Update Abilities")))),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Auras"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(f).filter((function(e){return ne[e]})).map((function(e){return r.a.createElement("div",{key:e,className:_===e?"settings-header-active":"settings-header",setting:e,onClick:Y},f[e].displayName)}))),_?r.a.createElement(Pe,{name:_,setting:O[_],options:ne[_],onChange:function(e,t){var a=Object(h.a)(Object(h.a)({},O),{},Object(m.a)({},t,e));A(a),B(!0)}}):null,r.a.createElement("div",{className:"panel-text-button-container"},r.a.createElement("div",{className:"panel-info-text-container"},V?p:null),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){s(O),B(!1)}},"Update Auras"))))))},Be=(a(49),function(e){var t=e.name,a=e.count,n=e.onChange,i=e.value;return r.a.createElement("div",null,r.a.createElement("select",{className:"panel-dropdown",value:i,onChange:function(e){n(parseInt(e.target.value),t)}},Object(u.a)(Array(a).keys()).map((function(e){return r.a.createElement("option",{key:"".concat(t,"-index-").concat(e),value:e+1},e+1)}))))}),He=function(e){var t=e.abilities,a=e.currentPanel,n=e.onKeybind,o=e.setOrder,s=e.onToggle,c=e.onClick,l=e.closePanel,u="",m="",h="",f=Object(i.useState)(u),p=Object(d.a)(f,2),b=p[0],v=p[1],y=Object(i.useState)(m),g=Object(d.a)(y,2),E=g[0],T=g[1],O=Object(i.useState)(h),A=Object(d.a)(O,2),w=A[0],N=A[1],C=Object(i.useState)(Object.keys(t).length-1),I=Object(d.a)(C,1)[0],k=Object(i.useRef)(w);k.current=w;var _=function(e){v(e.target.alt)},j=function(){v("")},R=function(e){var a=e.target.getAttribute("ability");N(a),T("Press any key to bind to ".concat(t[a].displayName)),document.addEventListener("keydown",D,{once:!0}),document.addEventListener("keypress",x,{once:!0})},D=function(e){var t=e.key;L(t)&&(e.preventDefault(),U(t))},x=function(e){return U(e.key)},L=function(e){return!!e.match(/F[1-9]{1,2}/)},U=function(e){document.removeEventListener("keypress",x);var a=function(e){return S[e]?{key:e,keybindText:S[e]}:e.match(/^[a-z]$/)?{key:e,keybindText:e.toUpperCase()}:e.match(/^[A-Z]$/)?{key:e,keybindText:"S-"+e}:{key:e,keybindText:e}}(e),i=k.current;n(a,i),T("".concat(t[i].displayName," successfuly bound to ").concat(a.keybindText))};return r.a.createElement(se,{panel:"abilitykeybinds",currentPanel:a,reset:function(){document.removeEventListener("keydown",D),document.removeEventListener("keypress",x),v(u),T(m),N(h)},onClick:c,header:"Ability and Keybinds",style:{transform:"translateY(".concat("abilitykeybinds"===a?"0px":"250px")},panelClass:"bottom-panel",handleClose:function(){v(u),T(m),N(h),l()}},r.a.createElement("div",{className:"horizontal-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"Change Abilities and Keybinds"),r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{className:"tooltip-text",visibility:(!!b).toString()},b)),r.a.createElement("div",{className:"panel-abilities-content"},r.a.createElement("div",{className:"panel-abilities-header"},"Spell Order"),r.a.createElement("div",{className:"panel-abilities-container"},Object.keys(t).map((function(e){if("void-eruption"!==e)return r.a.createElement("div",{className:"panel-ability-container",key:e},r.a.createElement("img",{className:"hover-pointer",alt:t[e].displayName,ability:e,onMouseOver:_,onMouseOut:j,onClick:R,src:t[e].icon,height:50,width:50}),r.a.createElement("button",{className:"".concat(t[e].disabled?"panel-button-secondary":"panel-button"),onClick:function(){return s(e)}},t[e].disabled?"Enable":"Disable"),r.a.createElement(Be,{name:e,count:I,value:t[e].index,onChange:o}))})))),r.a.createElement("div",null,E||null)))},Ye=function(e){var t=e.currentPanel,a=e.onClick,n=e.closePanel;return r.a.createElement(se,{panel:"about",onClick:a,handleClose:n,header:"About",panelClass:"middle-panel",style:{transform:"translateY(".concat("about"===t?"0px":"min(-685px,-70vh)")}},r.a.createElement("div",{className:"middle-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"About"),r.a.createElement("div",{className:"medium-text left-text panel-text-content"},r.a.createElement("p",null,"Voidform Optimizer is a thought experiment I had."),r.a.createElement("p",null,"I am convinced that many, although not all, players' grievances with Voidform are caused by the implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others to experience Voidform in a myriad of ways; in hope that they realize it isn't inherently flawed, find what they most enjoy about it, and share those findings with others. Then, just maybe, as a community we can come to an agreement on how to ",r.a.createElement("b",null,"#savevoidform"),"."),r.a.createElement("p",null,"If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711."))))},Ge=(a(30),[{header:"New Article: Ramp",description:"Ramp is a buzz-word used to express very valid complaints regarding Voidform. In this article I discuss how ramp works,         how it has worked in the past, and hopefully how it will work in the future."},{header:"New Article: Design Philosophy",description:"This is the first of articles I will be creating. The Design Philosophy article gives detailed reasoning behind         each of the decisions I made while designing the Ryeshot's Shadowlands template."},{header:"New Template: Yvaelle's Shadowlands",description:"Yvaelle had an interesting proposal for a static Voidform, so I decided to include support for it and created a template         based on their proposal."},{header:"New Ability: Bloodlust!",description:"Let's be honest, it's hard to determine how Shadow truly feels until you feel it under lust. Luckily, Bloodlust has now         been added so you can have the true Shadow experience. The ability works the same way on live (without the debuff), and is not customizable."},{header:"New Template: Ryeshot's Shadowlands",description:"This template reflects what I think the healthiest version of baseline Shadow looks like going into Shadowlands.         It will be updated regularly as I refine my beliefs on what is best for the spec."},{header:"Void Bolt Rank Two Removed!",description:"Void Bolt rank two has been removed from the alpha, and therefore is no longer part of the alpha template or a         customizable option for Void Bolt. Good riddance."},{header:"New Domain!",description:"Voidform Optimizer is now registered at voidform-optimizer.com."},{header:"Function Key Binding",description:"Due to popular demand, function keys are now a valid keybind option. Just make sure to unbind should you wish to         perform any browser function key events (such as refreshing the page), since the settings will override that default behavior."},{header:"Spell Ordering!",description:"You can now manually set the order of spells shown through the keybinds panel. You can also preserve these changes         by toggling include spell order while importing a template."},{header:"Power Infusion!",description:"Customizable Power Infusion ability has been added! The ability's cooldown may be changed         and the aura's duration and resource generation can be changed. If desired, you can create alpha StM, Lucid,         and Legion Power Infusion from these settings."},{header:"Legion Templates!",description:"New templates to satiate your Legion nostalgia. More to come in the future."},{header:"Shadowfiend",description:"Customizable Shadowfiend ability has been added!"},{header:"Templates",description:"Premade templates may now be selected on import panel!"},{header:"Devouring Plague",description:"The recent Shadowlands Devouring Plague addition is now available to try out!"},{header:"What's New?",description:"Added a what's new dialogue to inform about recent changes to Voidform Optimizer."}]),We={textAlign:"left",marginBottom:"20px"},Me={fontSize:"15px"},Fe={fontSize:"20px"},ze=function(e){var t=e.onClose;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},r.a.createElement("div",{className:"form-title"},"What's New"),r.a.createElement("div",null,Ge.map((function(e){return r.a.createElement("div",{style:We},r.a.createElement("b",{style:Fe},e.header),r.a.createElement("div",{style:Me},e.description))}))),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:t},"Got it!")),r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},qe=function(){var e=Object(i.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"panel-header hover-pointer",onClick:function(){return n(!0)}},"What's New"),a?r.a.createElement(ze,{onClose:function(){return n(!1)}}):null)},Ke={"mind-flay":{displayName:"Mind Flay",index:1,keybind:{key:"1",keybindText:"1"},icon:"images/mind-flay.jpg"},"mind-sear":{displayName:"Mind Sear",index:2,keybind:{key:"2",keybindText:"2"},icon:"images/mind-sear.jpg"},"mind-blast":{displayName:"Mind Blast",index:3,keybind:{key:"3",keybindText:"3"},icon:"images/mind-blast.jpg"},"void-bolt":{displayName:"Void Bolt",index:4,keybind:{key:"4",keybindText:"4"},icon:"images/void-bolt.jpg"},"void-eruption":{displayName:"Void Eruption",index:4,keybind:{key:"4",keybindText:"4"},icon:"images/void-eruption.jpg",unusable:!0},"shadow-word-death":{displayName:"Shadow Word: Death",index:5,keybind:{key:"5",keybindText:"5"},icon:"images/shadow-word-death.jpg"},"void-torrent":{displayName:"Void Torrent",index:6,keybind:{key:"6",keybindText:"6"},icon:"images/void-torrent.jpg"},"shadow-word-pain":{displayName:"Shadow Word: Pain",index:7,keybind:{key:"7",keybindText:"7"},icon:"images/shadow-word-pain.jpg"},"vampiric-touch":{displayName:"Vampiric Touch",index:8,keybind:{key:"8",keybindText:"8"},icon:"images/vampiric-touch.jpg"},"devouring-plague":{displayName:"Devouring Plague",index:9,keybind:{key:"9",keybindText:"9"},icon:"images/devouring-plague.jpg",unusable:!0},shadowfiend:{displayName:"Shadowfiend",index:10,keybind:{key:"0",keybindText:"0"},icon:"images/shadowfiend.jpg"},"power-infusion":{displayName:"Power Infusion",index:11,keybind:{key:"-",keybindText:"-"},icon:"images/power-infusion.jpg"},"fae-blessings":{displayName:"Fae Blessings",index:12,keybind:{key:"=",keybindText:"="},icon:"images/fae-blessings.jpg"},bloodlust:{displayName:"Bloodlust",index:12,keybind:{key:"=",keybindText:"="},icon:"images/bloodlust.jpg"}},Je=function(e){var t=e.value,a=e.id,n=e.label,i=e.className,o=e.placeHolder,s=e.onChange;return r.a.createElement("div",{className:"form-field ".concat(i)},r.a.createElement("label",{htmlFor:a},n),r.a.createElement("div",null,r.a.createElement("textarea",{className:"panel-text-area form-input-container",id:a,value:t,placeholder:o,required:!0,onChange:function(e){return s(a,e.target.value)}})))},Xe=function(e){var t=e.value,a=e.id,n=e.label,i=e.placeHolder,o=e.onChange,s=e.required;return r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"form-input-title",htmlFor:a},n),r.a.createElement("input",{className:"panel-text-area form-input",type:"text",id:a,value:t,placeholder:i,required:s,onChange:function(e){return o(a,e.target.value)}}))},$e=a(18),Ze=a.n($e),Qe=a(24),et=["title"],tt=window.Email,at=function(e){var t=["<h3>Give a brief description of the issue</h3>","<h3>What is the expected behavior?</h3>","<h3>What is the actual behavior?</h3>","<h3>Contact Information</h3>"];return"<h1>Bug Report for Voidform Optimizer</h1>\n"+Object.keys(e).reduce((function(a,n,i){return e[n]?a.concat([t[i],e[n]]):a}),[]).join("\n")},nt=function(){var e=Object(Qe.a)(Ze.a.mark((function e(t,a){var n,i;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={SecureToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SMTP_ACCESS_TOKEN,From:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SENDER_GMAIL_USER,To:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_RECEIVER_GMAIL_USER,Subject:t,Body:a},e.next=3,tt.send(n);case 3:if("OK"===(i=e.sent)){e.next=6;break}throw new Error(i);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),it=function(){var e=Object(Qe.a)(Ze.a.mark((function e(t,a,n){var i,r,o;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,r=Object(U.a)(t,et),o=at(r),e.prev=2,e.next=5,nt("[BUG] ".concat(i),o);case 5:a(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),n();case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),rt=[{id:"bug-report-description",label:"Description",className:"form-field-small"},{id:"bug-report-expected",label:"Expected Behavior",className:"form-field-medium"},{id:"bug-report-actual",label:"Actual Behavior",className:"form-field-medium"}],ot={id:"title",label:"Title"},st={id:"contact",label:"Contact (Optional)"},ct=function(e){var t=e.closeForm,a=Object(i.useState)({}),n=Object(d.a)(a,2),o=n[0],s=n[1],c=Object(i.useState)(!0),l=Object(d.a)(c,2),u=l[0],f=l[1],p=Object(i.useState)(""),b=Object(d.a)(p,2),v=b[0],y=b[1],g=function(e,t){s(Object(h.a)(Object(h.a)({},o),{},Object(m.a)({},e,t)))};return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},r.a.createElement("div",{className:"form-title"},"Bug Report"),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=function(e,t){var a=1;return t(e),setInterval((function(){var n=a%4;t("".concat(e).concat(".".repeat(n))),a++}),500)}("Submitting",y);it(o,(function(){clearInterval(t),y("Bug report successfully submitted!")}),(function(){clearInterval(t),y("Failed to submit bug report")})),f(!1)}},r.a.createElement("div",{className:"form-info"},"If the issue is UI related, please update your browser to the latest version before submitting."),r.a.createElement(Xe,Object.assign({value:o.title},ot,{required:!0,onChange:g})),rt.map((function(e){return r.a.createElement(Je,Object.assign({key:e.id,value:o[e.id]},e,{onChange:g}))})),r.a.createElement(Xe,Object.assign({value:o.contact},st,{required:!1,onChange:g})),r.a.createElement("div",null,r.a.createElement("input",{className:"panel-button",type:"submit",value:"Submit",disabled:!u}))),r.a.createElement("div",null,v),r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},lt=function(e){var t=e.closeForm;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},"Coming soon!",r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},ut=function(e){var t=e.pauseKeyEvents,a=Object(i.useState)(!1),n=Object(d.a)(a,2),o=n[0],s=n[1],c=Object(i.useState)(!1),l=Object(d.a)(c,2),u=l[0],m=l[1],h=function(e,a){t(a),e(a)};return r.a.createElement("div",{className:"forms-container"},r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){return h(s,!0)}},"Report a Bug"),r.a.createElement("button",{className:"panel-button",onClick:function(){return h(m,!0)}},"Request a Feature")),o?r.a.createElement(ct,{closeForm:function(){return h(s,!1)}}):null,u?r.a.createElement(lt,{closeForm:function(){return h(m,!1)}}):null)},dt=[{header:"",content:'This will be a detailed article on my design philosophy regarding the baseline health of Shadow and Voidform.     If you want to skip the reasoning behind my design decisions, you can try the design out yourself using the "Ryeshot\'s     Shadowlands" template on the main page. I will be breaking this article down by the changes made to each element of the     spec, and the reasons for those changes.'},{header:"Voidform",content:"The core of Voidform in my mind boils down to two things. It is a self-perpetuating state that mimics the descent     into madness. It also enables Void Bolt. Therefore I made Voidform do these two things and only these two things. Get rid of     borrowed power (good riddance Mass Hysteria and Chorus of Insanity), get rid of Lingering Insanity (more reason will be     provided later), get rid of Mind Blast cooldown reduction (why did this exist?).     \n\n    Voidform now immediately grants 10% haste and grants an extra 1% haste per stack while in Voidform. Entering Voidform     should immediately be noticeable due to the rotation quickening immediately. Additionally, unlike existing Voidform at     .5% haste per stack, you should be able to feel the quickening pace of your rotation while you remain in Voidform. You     should now feel like you are going insane while in Voidform!"},{header:"Shadowform",content:"Because of how Voidform is designed, Shadowform by necessity must be slow-paced. If you want to think about     Voidform as the high, then Shadowform is the low. There needs to be some time between Voidforms so that it is not     thought of as the default state, otherwise the player will become desensitized to its effects. This time should be     just long enough to begin wanting Voidform again, but not long enough to experience fatigue from the lack of Voidform."},{header:"Mind Blast",content:"Mind blast has two charges baseline. I think the reason is pretty self apparent, but for those who aren't     aware: Void Bolt and Mind Blast cause an effect call clashing, which means they come off cooldown at the same time.     This causes the lower priority spell (in this case Mind Blast) to be off cooldown during the global of the higher priority     spell (Void Bolt). Adding a second charge to Mind Blast removes this issue, since Mind Blast will continue     recharging when its cooldown clashes with Void Bolt.    \n\n    Mind Blast now generates 25 Insanity. This makes Shadowform's length shorter and makes less of a dependency of casting     Mind Flay to generate Insanity. You can now generate more Insanity while moving because your Insanity budget now     resides mostly in Void Bolt and Mind Blast (due to it recharging while moving).    \n\n    Mind blast no longer has its cooldown reduced while in Voidform. There was no reason for this to exist so I removed it."},{header:"Void Bolt",content:"Now generates 15 Insanity. Because I want Mind Blast to be the Insanity nuke of the spec, I needed to reduce     Void Bolt's Insanity generation so generation between the two spells did not feel too similar."},{header:"Devouring Plague",content:"Blizzard added Devouring Plague with the express purpose of having an option for spending Insanity in content     that does not support Voidform. I expanded upon this purpose and designed an ability which I believe to be a compelling     skill to press no matter the content.    \n\n    Devouring Plague spends all Insanity and generates 30 Insanity over its duration. Due to spending all Insanity, Devouring     Plague can now be used as an option to exit Voidform at will. It can also be used as (one of) the last spell in your     Voidform; scraping for any remaining Insanity and hurling it at your foe. Lastly, it can be used out of Voidform to     deal damage to an enemy that either will not last for Voidform's duration, or should you wish to do more priority damage     to that target.    \n\n    The fact that Devouring Plague also generates Insanity over its duration means that after using it you can get a faster     cast of another Devouring Plague or Void Eruption."},{header:"Lingering Insanity",content:"Lingering Insanity has been removed. No talent, not baseline; gone, poof. In a world where Voidform has base     haste, I could not think of a valid reason to keep Lingering Insanity. The purpose for Lingering Insanity is to smooth     the transitions between Voidforms. Not only is that counter to the design of Shadowform as explained above, it is no     longer necessary due to the duration in Shadowform being tolerable and entering Voidform having an immediate impact     on the pacing of the gameplay."},{header:"Starting Insanity",content:"Now gain 30 Insanity while out of combat. This alleviates the pain point for having the first Voidform of     a fight take longer than every other one. It also provides quick options for using Insanity in content where casting     Void Eruption is not the only option."},{header:"Insanity Drain",content:"Insanity drain was adjusted such that you can reach a soft cap of 25 stacks at entry-raid levels of haste.     If you wish to know the exact numbers, Voidform starts at a drain of 6 Insanity per second, which increases at a rate of     .66 Insanity per stack."}],mt=(a(51),function(e){var t=e.title,a=e.url;return r.a.createElement("div",null,r.a.createElement(c.b,{className:"page-nav-link",to:a},r.a.createElement("div",{className:"panel-header hover-pointer"},t)))}),ht=function(e){var t=e.title,a=e.sections;return r.a.createElement("div",{className:"sub-page"},r.a.createElement("header",{className:"App-header header-panel"},r.a.createElement("div",{className:"sub-page-header"},r.a.createElement("div",{className:"sub-page-title"},t)),r.a.createElement("div",{className:"page-nav-container"},r.a.createElement(c.b,{className:"page-nav-link",to:"/"},r.a.createElement("div",{className:"page-nav-text"},"Voidform Optimizer")))),r.a.createElement("div",{className:"sub-page-content-container"},a.map((function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e.header),r.a.createElement("div",null,e.content))}))),r.a.createElement("div",{className:"sub-page-asset-container"}))},ft=function(){return r.a.createElement(mt,{title:"Design Philosophy",url:"/articles/design-philosophy"})},pt=function(){return r.a.createElement(ht,{title:"Design Philosophy",sections:dt})},bt=[{header:"",content:"I need to address ramp because it is the largest pain point I have noticed regarding Voidform. Now, ramp is a     very contentious topic so I will discuss what ramp means when it comes to what we have experienced thus far, and what it     can mean in the future.    \n\n    Ramp, by my self-proclaimed definition, is a damage pattern where you start at a weaker state, end at your strongest state,     and there is some transition of the strength of your state over time."},{header:"Past Ramp Designs",content:'I call this section past ramp designs, because this is the ramp we have experienced for the entirety of Voidform\'s     existence, and for the sake of it and Shadow I pray we do not experience ramp in this form again.    \n\n    Borrowed power, in the form of Mass Hysteria in Legion and Chorus of Insanity/Spiteful Apparitions in Battle for Azeroth,     has created unhealthy ramp patterns for spec. In Legion, because of how the benefits of borrowed power compound with the     benefits of Voidform, Voidform stacks had significantly more power budget at the latest-most part of it. For this reason,     leaving Voidform early, by any means, lead to excessive punishment on the player. In Battle for Azeroth, Voidform stacks     had even more backloaded power because you needed to end Voidform in order to receive the benefit. So either you get too few stacks     from Voidform and leave early, or you leave at the right time and are unable to benefit from the stacks you attained (due to not being     able to attack a target and maintain Voidform). Not only did both of these cause excessive punishment to the player, but the performance     of a Voidform was dependent on the performance of the previous Voidform, due to benefits from Voidform lasting quite a long ways into the     next one. A term which I coin "Voidform dependency", and I believe this to be unhealthy for the spec to have.    \n\n    Lingering Insanity is also a major offender when it comes to ramp. Due to its implementation, except for 7.0 in Legion, Lingering     Insanity had lasting effects into the next Voidform, which means you were first at your most powerful the second Voidform of any     encounter. Lingering Insanity also adds more dependency to Voidform stacks, which means failing to attain stacks, or failing to     act while Lingering Insanity stacks are active, leads to excessive punishment.'},{header:"Ideal Ramp",content:"Now that we have established the pitfalls of past ramp designs, let us now explore how to correct those pitfalls into     an ideal ramp pattern.    \n\n    First I need to define what I mean when I say \"excessive punishment\". In my mind, excessive punishment is when the player is     unfairly punishment for failing, for whatever reason, to achieve a goal. In the case of Voidform, that goal is Voidform, and     therefore the punishment should be losing Voidform. Any other negative effects I would deem as excessive punishment.    \n\n    So how do we correct excessive punishment? That's simple - do not let it exist. The punishment for falling out of Voidform should     be, and should only be, losing Voidform. This is one reason Lingering Insanity was removed from my Shadowlands design.    \n\n    Correcting Voidform dependency is another easy one. If there exist any rewards after ending a Voidform, do not let them influence     the next Voidform. In my Shadowlands design the only reward I have included baseline is Devouring Plague, should one use it in while     in Voidform. Used this way, Devouring Plague's quick Insanity generation lends to reaching the next Voidform faster while preventing     it from influencing the performance of the next Voidform.    \n\n    Now let's discuss about how to balance this ideal ramp damage pattern. Again it's relatively simple, let us make the weakest state     not too weak, and the strongest state not too strong. Going into Shadowform from Voidform should give you a damage increase, but     not enough of a damage increase make damage in Shadowform feel like nothing. And now that the ramp of Voidform is mostly in Shadowform,     we can reach a pretty strong state rather quickly. While stacking haste might not be a compelling reason to extend Voidform for long     purely for damage, the quickening pace of the rotation from that stacking haste is."}],vt=function(){return r.a.createElement(mt,{title:"Ramp",url:"/articles/ramp"})},yt=function(){return r.a.createElement(ht,{title:"Ramp",sections:bt})},gt=function(e,t){if("SPELL"===!t.category)return e;var a=JSON.parse(JSON.stringify(e)),n=t.payload;switch(t.type){case"GLOBAL_COOLDOWN_START":a.globalCooldown=n.gcd,a.globalCooldownStartTime=n.time;break;case"GLOBAL_COOLDOWN_END":a.globalCooldownStartTime=0;break;case"ABILITY_CAST_SUCCESS":var i=n.name;a.cooldowns[i].castStartTime=0,a.cooldowns[i].castEndTime=0,a.casting&&(a.cooldowns[a.casting.name].castStartTime=0,a.cooldowns[a.casting.name].castEndTime=0,delete a.casting);break;case"ABILITY_COOLDOWN_START":i=n.name;var r=n.time;a.cooldowns[i].startTime=r;break;case"ABILITY_COOLDOWN_END":i=n.name;a.cooldowns[i].startTime=0;break;case"ABILITY_CHARGE_UPDATE":i=n.name;var o=n.charges;a.cooldowns[i].currentCharges=o;break;case"ABILITY_CAST_START":i=n.name;var s=n.displayName,c=(r=n.time,n.duration);a.cooldowns[i].castStartTime=r,a.cooldowns[i].castEndTime=r+c,a.casting&&(a.cooldowns[a.casting.name].castStartTime=0,a.cooldowns[a.casting.name].castEndTime=0),a.casting={duration:c,name:i,displayName:s,direction:1,time:r};break;case"ABILITY_CHANNEL_START":i=n.name,s=n.displayName,r=n.time,c=n.duration;var l=n.baseChannelTime,u=n.currentTicks,d=a.cooldowns[i];a.cooldowns[i]=Object(h.a)(Object(h.a)({},d),{},{castStartTime:r,castEndTime:r+c,baseChannelTime:l,currentTicks:u}),a.casting&&i!==a.casting.name&&(a.cooldowns[a.casting.name].castStartTime=0,a.cooldowns[a.casting.name].castEndTime=0),a.casting={duration:c,name:i,displayName:s,direction:0,time:r};break;case"ABILITY_CHANNEL_UPDATE":i=n.name;a.cooldowns[i].currentTicks--;break;case"ABILITY_CHANNEL_END":i=n.name,d=a.cooldowns[i];a.cooldowns[i]=Object(h.a)(Object(h.a)({},d),{},{castStartTime:0,castEndTime:0,currentTicks:0}),a.casting&&i===a.casting.name&&delete a.casting}return a},Et=function(e,t){if("AURA"!==t.category&&"STAT"!==t.category)return e;var a=JSON.parse(JSON.stringify(e)),n=t.payload,i=a.voidform,r=a.lingeringInsanity;switch(t.type){case"HASTE_SET":var o=n.source,s=n.haste;a[o].haste=s;break;case"HASTE_UPDATE":o=n.source,s=n.haste;a[o].haste+=s;break;case"HASTE_RESET":a[o=n.source].haste=0;break;case"VOIDFORM_UPDATE":i.stacks++,i.haste+=n.hasteStack;break;case"VOIDFORM_START":i.active=!0,i.stacks=1;break;case"VOIDFORM_END":var c=n.time,l=n.startingHaste;r.active=!0,r.stacks=i.stacks,r.haste=Math.round(1e3*(i.haste-l))/1e3,r.startTime=c,i.stacks=0,i.haste=0;break;case"LINGERING_INSANITY_START":s=n.haste;var u=n.stacks;r.haste=s,r.stacks=u;break;case"LINGERING_INSANITY_UPDATE":r.haste+=n,r.stacks--,r.haste<=0&&(r.haste=0);break;case"LINGERING_INSANITY_END":r.active=!1,r.stacks=0,r.haste=0,r.startTime=0;break;case"INSANITY_DRAIN_PAUSE_START":i.paused=!0;break;case"INSANITY_DRAIN_PAUSE_END":i.paused=!1;break;case"AURA_START":var d=n.name,m=(c=n.time,a[d]);m.active?function(e,t){var a=e.startTime+e.maxDuration,n=e.baseDuration,i=a-t,r=Math.min(.3*n,i);e.maxDuration=n+r,e.startTime=t}(m,c):m.active=!0;break;case"AURA_BEGIN":d=n.name,c=n.time;var h=n.duration,f=n.maxStacks;a[d].startTime=c,a[d].maxDuration=h,a[d].baseDuration=h,f&&(a[d].stacks=1);break;case"AURA_REFRESH":d=n.name,c=n.time,f=n.maxStacks;var p=a[d].stacks;a[d].startTime=c,f&&p<f&&a[d].stacks++;break;case"AURA_END":a[d=n.name].active=!1,a[d].startTime=0,a[d].stacks=0;break;case"AURA_STACK_UPDATE":d=n.name,u=n.stacks;a[d].stacks=u}return a},Tt=function(e,t){if("EFFECT"===!t.category)return e;switch(t.type){case"EFFECT_ACTIVATE":var a=e[n=t.payload.name];return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},n,Object(h.a)(Object(h.a)({},a),{},{active:!0})));case"EFFECT_DEACTIVATE":var n;a=e[n=t.payload.name];return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},n,Object(h.a)(Object(h.a)({},a),{},{active:!1})))}return e},Ot={resource:0,auras:{stats:{haste:0},voidform:{active:!1,stacks:0,haste:0,paused:!1},lingeringInsanity:{active:!1,stacks:0,haste:0},"shadow-word-pain":{active:!1},"vampiric-touch":{active:!1},"devouring-plague":{active:!1},shadowfiend:{active:!1},"power-infusion":{active:!1,haste:0},"fae-blessings":{active:!1},bloodlust:{active:!1,haste:0},"dark-thoughts":{active:!1,stacks:0}},abilities:{cooldowns:Object.keys(Ke).reduce((function(e,t){return e[t]={},e}),{}),globalCooldown:0},effects:{"void-bolt-cooldown-reduce-shadowfiend":{active:!1},"dark-thoughts":{active:!0}}},At=function(e,t,a){return[function(n,i){var r=n.auras,o=i.payload;if(!i.category||"RESOURCE"===i.category)switch(i.type){case"RESET":return Object(h.a)(Object(h.a)({},Ot),{},{resource:e.stats.startingInsanity});case"RESET_ABILITIES":return Object(h.a)(Object(h.a)({},Ot),{},{resource:e.stats.startingInsanity,auras:n.auras});case"RESET_AURAS":return Object(h.a)(Object(h.a)({},n),{},{resource:e.stats.startingInsanity,auras:Object(h.a)(Object(h.a)({},Ot.auras),{},{stats:n.auras.stats})});case"RESOURCE_UPDATE":var s=o.name,c=o.resource,l=o.resourceCost;return c+=-1*(l=l||0),c=Math.max(Math.min(n.resource+c,100),0),function(e,t,a,n){Object.keys(e).forEach((function(i){var r=e[i],o=t[i],s=n.active&&!!r.requireNoVoidform||!n.active&&!!r.requireVoidform;o&&(r.resourceCost?"dump"===r.costType?o.unusable=0===a||s:o.unusable=a<r.resourceCost||s:o.unusable=s)}))}(t,a,c,r.voidform),function(e,t,a){"insanity"!==!e.voidform.type&&(a>0||(t.voidform.active=!1,t.voidform.startTime=0,t.voidform.stacks=0))}(e,r,c),Object(h.a)(Object(h.a)({},n),{},{resource:c});case"ABILITY_ACTIVATE":s=o.name;return a[s].unusable=!1,n;case"ABILITY_DEACTIVATE":s=o.name;return a[s].unusable=!0,n;case"DOT_EXTEND":var u=t["void-bolt"].extension||0,d=["shadow-word-pain","vampiric-touch"].reduce((function(e,t){var a=function(e,t){return Object(h.a)({},t[e])}(t,n.auras);return a.active?(a.maxDuration+=u,Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t,a))):e}),{});return Object(h.a)(Object(h.a)({},n),{},{auras:Object(h.a)(Object(h.a)({},n.auras),d)})}return{resource:n.resource,abilities:gt(n.abilities,i),auras:Et(n.auras,i),effects:Tt(n.effects,i)}},Ot]},wt={RESOURCE_UPDATE:[{type:"TRIGGER",effects:["calculate-resource"]}]},St={"fae-blessings":{onEvent:{AURA_START:[{type:"ACTIVATE",effects:["void-bolt-cooldown-reduce-fae-blessings","void-bolt-cooldown-reduce-shadowfiend"]}],AURA_END:[{type:"DEACTIVATE",effects:["void-bolt-cooldown-reduce-fae-blessings","void-bolt-cooldown-reduce-shadowfiend"]}]}}},Nt={"void-bolt":{onEvent:{CAST_SUCCESS:[{type:"TRIGGER",effects:["void-bolt-cooldown-reset","void-bolt-cooldown-reduce-fae-blessings","void-bolt-cooldown-reduce-shadowfiend"]}]}},"void-eruption":{onEvent:{CAST_SUCCESS:[{type:"TRIGGER",effects:["voidform-deactivate-void-eruption"]}]}},"mind-flay":{onEvent:{CHANNEL_UPDATE:[{type:"TRIGGER",effects:["dark-thoughts"]}]}},"mind-sear":{onEvent:{CHANNEL_UPDATE:[{type:"TRIGGER",effects:["dark-thoughts"]}]}},"mind-blast":{onEvent:{CAST_SUCCESS:[{type:"REMOVE",effects:["dark-thoughts"]},{type:"UPDATE",effects:["dark-thoughts"]}]}}},Ct=function(e){return"fae-blessings"!==e},It=function(e){return"dark-thoughts"!==e},kt={"void-bolt-cooldown-reset":["void-bolt"],"void-bolt-cooldown-reduce-fae-blessings":["fae-blessings"],"void-bolt-cooldown-reduce-shadowfiend":["shadowfiend"]},_t=function(e){return Date.now()%100<100*e},jt={},Rt={"void-bolt-cooldown-reset":{trigger:function(e){var t=e.events,a=e.state,n=a.effects,i=a.effectSettings,r="void-bolt-cooldown-reset";if(!i)return t;if(!i[r])return t;if(!n[r])return t;var o=kt[r],s=i[r].chance;if(!n[r].active)return t;if(!_t(s))return t;var c=o.map((function(e){return{type:"ABILITY_COOLDOWN_END",payload:{name:e}}}));return[].concat(Object(u.a)(t),Object(u.a)(c))}},"void-bolt-cooldown-reduce-fae-blessings":{trigger:function(e){var t=e.events,a=e.state,n=a.effects,i=a.effectSettings,r=a.auras,o=a.abilities,s="void-bolt-cooldown-reduce-fae-blessing";if(!i)return t;if(!i[s])return t;if(!n[s])return t;var c=kt[s],l=i[s],d=l.chance,m=l.effectTime;if(!n[s].active)return t;if(!r["fae-blessings"].active)return t;if(!_t(d))return t;var h=c.map((function(e){var t=o.cooldowns[e];return{type:"ABILITY_COOLDOWN_START",payload:{name:e,time:t.startTime?t.startTime-m:0}}}));return[].concat(Object(u.a)(t),Object(u.a)(h))}},"void-bolt-cooldown-reduce-shadowfiend":{trigger:function(e){var t=e.events,a=e.state,n=a.effects,i=a.effectSettings,r=(a.auras,a.abilities),o="void-bolt-cooldown-reduce-shadowfiend";if(!i)return t;if(!i[o])return t;if(!n[o])return t;var s=kt[o],c=i[o].effectTime;if(!n[o].active)return t;var l=s.map((function(e){var t=r.cooldowns[e];return{type:"ABILITY_COOLDOWN_START",payload:{name:e,time:t.startTime?t.startTime-c:0}}}));return[].concat(Object(u.a)(t),Object(u.a)(l),[{type:"AURA_STACK_UPDATE",payload:{name:"fae-blessings",stack:-1}}])}},"voidform-deactivate-void-eruption":{trigger:function(e){var t=e.events,a={type:"ABILITY_DEACTIVATE",payload:{name:"void-eruption"}};return[].concat(Object(u.a)(t),[a])}},"calculate-resource":{trigger:function(e){var t=e.events;e.state;return t}},"dark-thoughts":{trigger:function(e){var t=e.events,a=e.state,n=a.effects,i=a.effectSettings,r=a.auras,o=a.auraSettings,s=a.abilitySettings,c=a.abilities,l="dark-thoughts";if(!It(l))return t;if(!(null===i||void 0===i?void 0:i[l]))return t;if(!(null===n||void 0===n?void 0:n[l].active))return t;var u=i[l].procChance,d=["shadow-word-pain","vampiric-touch","devouring-plague"].reduce((function(e,t){return r[t]&&r[t].active&&(e+=u),e}),0);if(!_t(d))return t;var m=s["mind-blast"],f=c.cooldowns["mind-blast"],p=r[l],b=f.startTime?0:1,v=f.currentCharges||b,y=o[l].maxStacks,g=m.charges+y,E=Date.now();return v<g&&t.push({type:"ABILITY_CHARGE_UPDATE",payload:{name:"mind-blast",charges:Math.min(v+1,g)}}),p.active&&t.push({type:"AURA_REFRESH",payload:{name:l,time:E,maxStacks:y}}),p.active||(t.push({type:"AURA_START",payload:{name:l,time:E}}),jt["mind-blast"]=Object(h.a)({},m),m.casttime=0,m.charges=g),t},remove:function(e){var t=e.events,a=e.state,n=a.effects,i=a.effectSettings,r=a.auras,o=(a.auraSettings,a.abilitySettings),s=(a.abilities,"dark-thoughts");if(!It(s))return t;if(!(null===i||void 0===i?void 0:i[s]))return t;if(!(null===n||void 0===n?void 0:n[s].active))return t;if(!r[s].active)return t;var c=r[s],l=o["mind-blast"];return t.push({type:"AURA_STACK_UPDATE",payload:{name:s,stacks:c.stacks-1}}),c.stacks-1<=0&&(l.casttime=jt["mind-blast"].casttime,l.charges=jt["mind-blast"].charges),t},update:function(e){var t,a=e.events,n=e.state,i=n.auras,r=n.abilities,o="dark-thoughts";if(!It(o))return a;if(!i[o].active)return a;var s=null===(t=r.casting)||void 0===t?void 0:t.name;return"mind-flay"!==s&&"mind-sear"!==s?a:a.filter((function(e){return"ABILITY_CAST_SUCCESS"!==e.type}))}}},Dt=function(){function e(t,a){Object(y.a)(this,e),this.state=t,this.effects=a}return Object(g.a)(e,[{key:"getGlobalEffects",value:function(e){return Object.keys(wt).reduce((function(t,a){return e.find((function(e){return e.type===a}))&&(t=[].concat(Object(u.a)(t),Object(u.a)(wt[a]))),t}),[])}},{key:"addEventEffects",value:function(e,t,a){var n=this.effects[e];if(!n)return a;var i=n.onEvent[t]||[];return[].concat(Object(u.a)(a),Object(u.a)(i))}},{key:"transformEvents",value:function(e,t,a){var n=this,i=a.events,r=this.getGlobalEffects(i);return 0===(r=this.addEventEffects(e,t,r)).length?i:(r.forEach((function(e){var t=e.type,i=e.effects;switch(t){case"TRIGGER":return void n.handleEffectTrigger(i,a);case"REMOVE":return void n.handleEffectRemove(i,a);case"UPDATE":n.handleEffectUpdate(i,a);case"ACTIVATE":return void n.handleEffectActivate(i,a);case"DEACTIVATE":return void n.handleEffectDeactivate(i,a);default:return null}})),a.events)}},{key:"handleEffectTrigger",value:function(e,t){var a=this;e.forEach((function(e){t.events=Rt[e].trigger(Object(h.a)(Object(h.a)({},t),{},{state:a.state.current}))}))}},{key:"handleEffectRemove",value:function(e,t){var a=this;e.forEach((function(e){t.events=Rt[e].remove(Object(h.a)(Object(h.a)({},t),{},{state:a.state.current}))}))}},{key:"handleEffectUpdate",value:function(e,t){var a=this;e.forEach((function(e){t.events=Rt[e].update(Object(h.a)(Object(h.a)({},t),{},{state:a.state.current}))}))}},{key:"handleEffectActivate",value:function(e,t){var a=t.events;e.forEach((function(e){var t={type:"EFFECT_ACTIVATE",payload:{name:e}};a=[].concat(Object(u.a)(a),[t])})),t.events=a}},{key:"handleEffectDeactivate",value:function(e,t){var a=t.events;e.forEach((function(e){var t={type:"EFFECT_DEACTIVATE",payload:{name:e}};a=[].concat(Object(u.a)(a),[t])})),t.events=a}}],[{key:"forAbility",value:function(t){return new e(t,Nt)}},{key:"forAura",value:function(t){return new e(t,St)}}]),e}(),xt=function(){var e=Object(i.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(i.useState)(le),s=Object(d.a)(o,2),c=s[0],l=s[1],p=Object(i.useState)(function(e){return Object.keys(e).reduce((function(t,a){return Ct(a)?Object(h.a)(Object(h.a)({},t),{},Object(m.a)({},a,e[a])):t}),{})}(Ke)),b=Object(d.a)(p,2),v=b[0],y=b[1],g=Object(i.useState)(ue),E=Object(d.a)(g,2),T=E[0],O=E[1],A=Object(i.useState)(de),w=Object(d.a)(A,2),S=w[0],N=w[1],C=Object(i.useState)(!1),I=Object(d.a)(C,2),k=I[0],_=I[1],j=Object(i.useState)(!1),R=Object(d.a)(j,2),D=R[0],x=R[1],U=Object(i.useState)(!1),P=Object(d.a)(U,2),V=P[0],B=P[1],H=Object(i.useState)(0),Y=Object(d.a)(H,2),G=Y[0],W=Y[1],M=i.useReducer.apply(void 0,Object(u.a)(At(T,c,v))),F=Object(d.a)(M,2),z=F[0],q=F[1],K=Object(i.useRef)();K.current=Object(h.a)(Object(h.a)({},z),{},{abilitySettings:c,auraSettings:T,effectSettings:S});var J=Object(i.useState)(Dt.forAbility(K)),X=Object(d.a)(J,1)[0],$=Object(i.useState)(Dt.forAura(K)),Z=Object(d.a)($,1)[0];Object(i.useEffect)((function(){W(Q)}),[z.auras.stats.haste,z.auras.voidform.haste,z.auras.lingeringInsanity.haste,z.auras["power-infusion"].haste,z.auras.bloodlust.haste]),Object(i.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("template");if(e&&Ae[e]){var t=Object(h.a)(Object(h.a)({},Ae[e]),{},{abilityConfig:Ae[e].abilities});delete t.abilities,ae(t)}}),[]);var Q=function(){var e=z.auras;return Object.keys(e).reduce((function(t,a){return e[a].haste?t*(1+e[a].haste):t}),1)},ee=function(e){_(!0),n(e)},te=function(){_(!1),n(null)},ae=function(e){ne(e.abilityConfig),re(e.abilitySettings),ie(e.auraSettings),se(e.effectSettings)},ne=function(e){var t=Object.keys(v).reduce((function(t,a){return t[a]=Object(h.a)(Object(h.a)({},v[a]),e[a]),t}),{});y(t)},ie=function(e){O(e);var t=e.stats.haste,a=e.stats.startingInsanity;me(a),q({category:"STAT",type:"HASTE_SET",payload:{source:"stats",haste:t}})},re=function(e){l(e),ce()},se=function(e){N(e),he()},ce=function(){q({type:"RESET_ABILITIES"}),q({type:"RESOURCE_UPDATE",payload:{resource:0}}),B(!V)},me=function(){q({type:"RESET_AURAS"}),setTimeout((function(){q({category:"AURA",type:"LINGERING_INSANITY_END"})}),0)},he=function(){q({type:"RESET_EFFECTS"})};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header header-panel"},r.a.createElement("div",{className:"App-title"},r.a.createElement("div",{className:"App-title-text"},"Voidform Optimizer")),r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"panel-container"},r.a.createElement(Ve,{settings:{abilities:Object.keys(c).reduce((function(e,t){return e[t]=Object(h.a)(Object(h.a)({},c[t]),{},{displayName:Ke[t].displayName}),e}),{}),auras:T},didReset:D,onAbilitySet:re,onAuraSet:ie,currentPanel:a,onClick:ee,closePanel:te}),r.a.createElement(He,{abilities:v,currentPanel:a,onKeybind:function(e,t){var a=JSON.parse(JSON.stringify(v)),n=e.key,i="void-bolt"===t||"void-eruption"===t;Object.keys(a).forEach((function(e){a[e].keybind.key===n&&(a[e].keybind={keybindText:"--"})})),i?(a["void-bolt"].keybind=Object(h.a)({},e),a["void-eruption"].keybind=Object(h.a)({},e)):a[t].keybind=Object(h.a)({},e),y(a)},setOrder:function(e,t){var a=JSON.parse(JSON.stringify(v)),n=a[t],i=n.index,r=e<i?"right":"left",o="void-bolt"===t||"void-eruption"===t;Object.keys(a).forEach((function(t){var n=a[t].index;"right"===r&&n>=e&&n<i&&a[t].index++,"left"===r&&n<=e&&n>i&&a[t].index--})),o?(a["void-bolt"].index=e,a["void-eruption"].index=e):n.index=e,y(a)},onToggle:function(e){var t=JSON.parse(JSON.stringify(v));t[e].disabled=!t[e].disabled,"void-bolt"===e&&(t["void-eruption"].disabled=t[e].disabled),y(t)},onClick:ee,closePanel:te}),r.a.createElement(Ne,{settings:{abilitySettings:c,auraSettings:T,abilities:v},onImport:ae,currentPanel:a,onClick:ee,closePanel:te}),r.a.createElement(Ye,{currentPanel:a,onClick:ee,closePanel:te}),r.a.createElement(qe,null)),r.a.createElement("div",{className:"panel-container"},r.a.createElement(ft,null),r.a.createElement(vt,null))),r.a.createElement(ut,{pauseKeyEvents:_})),r.a.createElement("div",{className:"App-content"},r.a.createElement(oe,{auras:z.auras,settings:T,effectHandler:Z,haste:G,triggerEvent:q}),r.a.createElement(f,{current:z.resource,max:100}),r.a.createElement(L,{state:z.abilities,abilitySettings:c,abilities:v,effectHandler:X,haste:G,inVoidform:z.auras.voidform.active,dispatch:q,keyEventsPaused:k,reset:V}),r.a.createElement("button",{className:"panel-button",onClick:function(){me(),ce(),he(),x(!D)}},"Reset")))},Lt=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/articles/design-philosophy"},r.a.createElement(pt,null)),r.a.createElement(l.a,{path:"/articles/ramp"},r.a.createElement(yt,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(xt,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ut=a(35);a.n(Ut).a.config(),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[36,1,2]]]);
//# sourceMappingURL=main.8d403ffa.chunk.js.map