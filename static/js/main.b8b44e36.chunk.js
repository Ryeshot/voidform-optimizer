(this["webpackJsonpvoidform-optimizer"]=this["webpackJsonpvoidform-optimizer"]||[]).push([[0],[,,,,function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){e.exports=a(41)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),i=a.n(o),c=(a(28),a(2)),s=a(1),l=(a(29),a(30),function(e){var t=e.max,a=e.current;e.voidform;return r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-text"},(a/t*100).toFixed(0)),r.a.createElement("div",{className:"progress-bar resource-bar",style:{width:"".concat((a/t*100).toFixed(2),"%")}}))}),u=a(22),d=(a(31),a(32),function(e){var t=e.size,a=e.progress,n=e.inverse,o=2*t,i=2*t-o/2,c=2*i*Math.PI;return r.a.createElement("svg",{width:t,height:t},r.a.createElement("circle",{fill:"transparent",strokeWidth:o,strokeOpacity:.7,strokeDasharray:c+" "+c,strokeDashoffset:n?(a?0:c)+(a||0)*c:c+(a||0)*c,stroke:"rgb(0,0,0)",cx:t/2,cy:t/2,r:i}))}),m=a(12),p=a(11),h=a(6),b=a(7),v={CAST:["ABILITY_CAST_SUCCESS","ABILITY_COOLDOWN_START","ABILITY_COOLDOWN_END","ABILITY_CAST_START","ABILITY_CHANNEL_START","ABILITY_CHANNEL_UPDATE","ABILITY_CHANNEL_END"],RESOURCE:["RESOURCE_UPDATE","INSANITY_DRAIN_PAUSE_START","INSANITY_DRAIN_PAUSE_END"],AURA:["VOIDFORM_START","VOIDFORM_UPDATE","VOIDFORM_END","LINGERING_INSANITY_START","LINGERING_INSANITY_UPDATE","LINGERING_INSANITY_END","AURA_START","AURA_END","DOT_EXTEND"],STAT:["HASTE_UPDATE"]},y={"void-bolt":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE","DOT_EXTEND"]}},"mind-flay":{onEvent:{COOLDOWN_START:[],COOLDOWN_END:[],CHANNEL_START:["ABILITY_CHANNEL_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END"]}},"mind-sear":{onEvent:{COOLDOWN_START:[],COOLDOWN_END:[],CHANNEL_START:["ABILITY_CHANNEL_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END"]}},"void-eruption":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","VOIDFORM_START"]}},"mind-blast":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"],COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"]}},"shadow-word-death":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"]}},"void-torrent":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CHANNEL_START:["ABILITY_CHANNEL_START","INSANITY_DRAIN_PAUSE_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END","INSANITY_DRAIN_PAUSE_END"]}},"shadow-word-pain":{onEvent:{CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},"vampiric-touch":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},"devouring-plague":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}}},f=function(){function e(t,a){Object(h.a)(this,e),this.eventTriggers=t,this.events=a}return Object(b.a)(e,[{key:"handleEvent",value:function(e,t){var a=this;this.events[e]&&this.events[e].forEach((function(e){return a.eventTriggers[e]({type:e,payload:t})}))}}]),e}(),g={"!":"S-1","@":"S-2","#":"S-3",$:"S-4","%":"S-5","^":"S-6","&":"S-7","*":"S-8","(":"S-9",")":"S-0"},E=function(){function e(t,a,n,r){Object(h.a)(this,e),this.state=t,this.updateState=a,this.onExecute=n,this.eventHandler=r,this.updateState({progress:0,charges:t.charges.maxCharges||1})}return Object(b.a)(e,[{key:"getCurrentState",value:function(){var e={},t=this.state;return Object.keys(t).forEach((function(a){var n=t[a];if("object"===typeof n){var r={};Object.keys(n).forEach((function(e){var t=n[e];"undefined"!==t&&(r[e]="object"!==typeof t?t:t.current)})),e[a]=r}else e[a]=n})),e}},{key:"getRemainingCooldown",value:function(){var e=Date.now(),t=this.state.cooldown.startTime.current,a=t?this.state.cooldown.duration.current:0;return 0===this.state.charges.current.current?(t||e)+a-e:0}},{key:"startCooldown",value:function(){var e=this,t=this.getCurrentState(),a=t.name,n=t.charges.maxCharges;this.cooldownTimer=setInterval((function(){var t=Date.now(),r=e.state.cooldown.duration.current,o=e.state.cooldown.startTime.current||t,i=e.state.charges.current.current,s=o+r-t;if(s<=70)return e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:i+1})})),clearInterval(e.cooldownTimer),n&&i<n-1?void e.startCooldown():(e.eventHandler.handleEvent("COOLDOWN_END",{name:a}),void e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:0})})));e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:s/r})}))}),20),this.eventHandler.handleEvent("COOLDOWN_START",{name:a,time:Date.now()})}},{key:"startCast",value:function(){var e=this,t=this.getCurrentState(),a=t.name,n=t.displayName,r=t.resource,o=t.costsResource,i=t.cast.duration;this.castTimer=setTimeout((function(){e.eventHandler.handleEvent("CAST_SUCCESS",{name:a,resource:r,costsResource:o,time:Date.now()});var t=e.state.cooldown.duration.current,n=e.state.cooldown.startTime.current,i=e.state.charges.current.current;if(t){if(e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:i-1})})),n)return;e.startCooldown()}}),i),this.eventHandler.handleEvent("CAST_START",{name:a,displayName:n,duration:i,time:Date.now()})}},{key:"startChannel",value:function(){var e=this,t=this.getCurrentState(),a=t.cast,n=a.startTime,r=a.endTime,o=a.duration,i=t.channel,c=i.baseDuration,s=i.ticks,l=t.name,u=t.displayName,d=t.resource,m=Date.now(),p=0,h=s;if(n){clearInterval(this.channelTimer);var b=r-n-(m-n),v=c/h;p=Math.min(b,.3*c),h+=Math.floor(p/v)}var y=Math.round((o+p)/h);this.channelTimer=setInterval((function(){var t=Date.now(),a=e.state.cast.endTime.current;return a?(e.eventHandler.handleEvent("CHANNEL_UPDATE",{resource:d/s,name:l}),t>=a?(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:l})):void 0):(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:l}))}),y),this.eventHandler.handleEvent("CHANNEL_START",{name:l,displayName:u,duration:o+p,time:m,baseChannelTime:o})}},{key:"beginGlobalCooldown",value:function(){var e=this,t=this.getCurrentState(),a=t.globalCooldown,n=a.duration,r=a.startTime;if(t.cooldown.startTime&&t.cooldown.startTime+t.cooldown.duration-r>n)return;this.globalCooldownTimer=setInterval((function(){var t=Date.now(),a=r+n-t;a<=20?clearInterval(e.globalCooldownTimer):e.state.cooldown.startTime.current||e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:a/n})}))}),20)}},{key:"remove",value:function(){clearInterval(this.cooldownTimer),clearInterval(this.globalCooldownTimer),clearInterval(this.channelTimer),clearTimeout(this.castTimer)}}],[{key:"create",value:function(e,t,a,n,r){var o=function(e,t){var a={};return t.forEach((function(e){e.eventTypes.forEach((function(t){v[t].forEach((function(t){return a[t]=e.trigger}))}))})),new f(a,y[e].onEvent)}(t.name,r);switch(e){case"instant":return new T(t,a,n,o);case"cast":return new N(t,a,n,o);case"channel":return new O(t,a,n,o)}}}]),e}(),T=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"execute",value:function(){if(!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=e.name,a=e.resource,n=e.costsResource,r=e.cooldown.startTime,o=e.charges,i=o.maxCharges,s=o.current;r&&0===s||(this.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:s-1})})),this.eventHandler.handleEvent("CAST_SUCCESS",{name:t,resource:a,costsResource:n,time:Date.now()}),this.onExecute(),i&&s<i||this.startCooldown())}}}]),a}(E),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"execute",value:function(){if(!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=e.cast.startTime,a=e.charges.current;t||0===a||(this.startCast(),this.onExecute())}}}]),a}(E),O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"execute",value:function(){if(!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState().cooldown,t=e.duration;e.startTime||(this.startChannel(),t&&this.startCooldown(),this.onExecute())}}}]),a}(E),S=E,k=function(e){var t=e.name,a=e.displayName,o=e.settings,i=e.cooldown,c=e.globalCooldown,l=e.globalCooldownStartTime,u=e.unusable,m=e.startTime,p=e.casttime,h=e.castStartTime,b=e.castEndTime,v=e.icon,y=e.baseChannelTime,f=e.keybind,g=e.casting,E=e.subscribe,T=e.unsubscribe,N=e.onExecute,O=e.onAbilityUpdate,k=e.triggerEvent,w=e.reset,C=Object(n.useState)({}),A=Object(s.a)(C,2),I=A[0],j=A[1],R=f.key,_=f.keybindText,D=o.type,x=o.resource,L=o.costsResource,U=o.charges,P=o.ticks,B=Object(n.useRef)(m),H=Object(n.useRef)(i);B.current=m,H.current=i;var V=Object(n.useRef)(h),Y=Object(n.useRef)(b),W=Object(n.useRef)(p),M=Object(n.useRef)(g);V.current=h,Y.current=b,W.current=p,M.current=g;var F=Object(n.useRef)(y);F.current=y;var G=Object(n.useRef)(U||1);G.current=I.charges;var z=Object(n.useRef)(c),J=Object(n.useRef)(l);z.current=c,J.current=l;var K=Object(n.useRef)();return Object(n.useEffect)((function(){var e=[{eventTypes:["CAST"],trigger:O},{eventTypes:["RESOURCE","AURA","STAT"],trigger:k}],n={name:t,displayName:a,resource:x,costsResource:L,unusable:u,cooldown:{duration:H,startTime:B},cast:{duration:W,startTime:V,endTime:Y,casting:M},channel:{baseDuration:F,ticks:P},charges:{maxCharges:U,current:G},globalCooldown:{duration:z,startTime:J}};return K.current=S.create(D,n,j,N,e),E({source:t,keybind:R,execute:function(){return K.current.execute()},notify:function(){return K.current.beginGlobalCooldown()},getRemainingCooldown:function(){return K.current.getRemainingCooldown()}}),function(){K.current.remove(),T(t)}}),[u,R,w]),r.a.createElement("div",{className:"progress-ability-container"},r.a.createElement("div",{className:"progress-ability",onClick:function(){}},r.a.createElement("img",{className:u||!(I.charges>0&&U)&&B.current?"desaturated":"colored",src:v,width:50,height:50}),r.a.createElement("div",{className:"charge-text"},U>1?I.charges:""),B.current||z.current?r.a.createElement(d,{size:50,progress:I.progress}):null),r.a.createElement("div",null,_))},w={start:function(e,t){console.log("End time for gcd: "+(Date.now()+e)),t({type:"GLOBAL_COOLDOWN_START",payload:{gcd:e,time:Date.now()}}),setTimeout((function(){console.log("Gcd ended"),t({type:"GLOBAL_COOLDOWN_END"})}),e)}},C=(a(33),function(e){var t=e.time,a=e.name,o=e.displayName,i=e.duration,c=e.direction,l=Object(n.useState)(0),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(n.useRef)(t),h=Object(n.useRef)(t);return p.current=t,h.current=i,Object(n.useEffect)((function(){var e=setInterval((function(){var e=Date.now();m((function(t){return e-p.current}))}),50);return function(){clearInterval(e),m((function(e){return 0}))}}),[a]),r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"cast-bar-text-container"},r.a.createElement("div",{className:"progress-text cast-bar-text"},o),r.a.createElement("div",{className:"progress-text cast-bar-text"},c?"".concat((d/1e3).toFixed(1),"/").concat((i/1e3).toFixed(1)):"".concat(((h.current-d)/1e3).toFixed(1),"/").concat((h.current/1e3).toFixed(1)),"sec")),r.a.createElement("div",{className:"progress-bar cast-bar",style:{width:"".concat(c?(d/h.current*100).toFixed(2):((h.current-d)/h.current*100).toFixed(2),"%")}}))}),A=(a(34),function(e){var t=e.abilitySettings,a=e.abilities,o=e.haste,i=e.inVoidform,c=e.triggerEvent,l=e.keyEventsPaused,d=e.reset,m=Object(n.useRef)(o);m.current=o;var p=Object(n.useRef)(i);p.current=i;var h=Object(n.useRef)(),b=Object(n.useState)([]),v=Object(s.a)(b,2),y=v[0],f=v[1],g=Object(n.useState)(!1),E=Object(s.a)(g,2),T=E[0],N=E[1],O=Object(n.useRef)(y);O.current=y;var S={globalCooldown:0,cooldowns:function(){var e={};return Object.keys(a).forEach((function(a){t[a]&&t[a].disabled||(e[a]={startTime:0})})),e}(),status:{}};Object(n.useEffect)((function(){R({type:"RESET"})}),[d]),Object(n.useEffect)((function(){return document.addEventListener("keypress",x),function(){document.removeEventListener("keypress",x)}}),[l]);var A=Object(n.useReducer)((function(e,a){var n=JSON.parse(JSON.stringify(e)),r=a.payload;switch(a.type){case"RESET":return S;case"EXECUTE_PENDING":var o=r.name;n.status[o]="PENDING";break;case"EXECUTE_END":o=r.name;n.status[o]="";break;case"ABILITY_CAST_SUCCESS":o=r.name;if(t["void-bolt"].rankTwo&&n.casting&&"void-bolt"===o&&"mind-flay"===n.casting.name)break;n.cooldowns[o].castStartTime=0,n.cooldowns[o].castEndTime=0,n.casting&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0,delete n.casting);break;case"ABILITY_COOLDOWN_START":o=r.name;var i=r.time;n.cooldowns[o].startTime=i;break;case"ABILITY_COOLDOWN_END":o=r.name;n.cooldowns[o].startTime=0;break;case"ABILITY_CAST_START":o=r.name;var c=r.displayName,s=(i=r.time,r.duration);n.cooldowns[o].castStartTime=i,n.cooldowns[o].castEndTime=i+s,n.casting&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0),n.casting={duration:s,name:o,displayName:c,direction:1,time:i};break;case"ABILITY_CHANNEL_START":o=r.name,c=r.displayName,i=r.time,s=r.duration;var l=r.baseChannelTime;n.cooldowns[o].castStartTime=i,n.cooldowns[o].castEndTime=i+s,n.cooldowns[o].baseChannelTime=l,n.casting&&o!==n.casting.name&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0),n.casting={duration:s,name:o,displayName:c,direction:0,time:i};break;case"ABILITY_CHANNEL_UPDATE":o=r.name;n.cooldowns[o].ticks--;break;case"ABILITY_CHANNEL_END":o=r.name;n.cooldowns[o].castStartTime=0,n.cooldowns[o].castEndTime=0,n.cooldowns[o].ticks=0,n.casting&&o===n.casting.name&&delete n.casting;break;case"GLOBAL_COOLDOWN_START":console.log("Starting gcd..."),n.globalCooldown=r.gcd,n.globalCooldownStartTime=r.time;break;case"GLOBAL_COOLDOWN_END":console.log("Ending gcd..."),n.globalCooldown=0,n.globalCooldownStartTime=0;break;default:console.error("Invalid action provided: ".concat(a.type))}return n}),S),I=Object(s.a)(A,2),j=I[0],R=I[1],_=Object(n.useRef)(j.globalCooldown);_.current=j.globalCooldown;var D=Object(n.useRef)(j.globalCooldownStartTime);D.current=j.globalCooldownStartTime;var x=function(e){if(!l){var t=Date.now();O.current.forEach((function(a){if(a.keybind===e.key){var n=a.getRemainingCooldown(),r=_.current?_.current-(t-D.current):0,o=Math.max(n,r);if(o>250)return;V(a.source,a.execute,o+15)}}))}},L=function(e){return e/m.current},U=function(){var e=Math.max(L(1500),750);w.start(e,R),setTimeout((function(){O.current.forEach((function(e){return e.notify()}))}),0)},P=function(e){f((function(t){return[].concat(Object(u.a)(t),[e])}))},B=function(e){f((function(t){return t.filter((function(t){return t.source!==e}))}))},H=function(e){var a=t[e],n=a.cooldown;if(p.current&&"mind-blast"===e){var r=a.cdr;if(!T){N(!0);var o=Date.now(),i=j.cooldowns[e].startTime;r*=(i?o-i:n)/n}n-=r}return!p.current&&T&&N(!1),a.hasted?L(n):n},V=function(e,t,a){clearTimeout(h.current),h.current=setTimeout(t,a)};return r.a.createElement("div",{className:"ability-bar-container"},r.a.createElement("div",{className:"progress-bar-container"},j.casting?r.a.createElement(C,j.casting):null),r.a.createElement("div",{className:"ability-bar"},Object.keys(a).map((function(e,n){if(!a[e].disabled&&("void-bolt"!==e||p.current)&&("void-eruption"!==e||!p.current))return r.a.createElement(k,Object.assign({name:e,key:n},a[e],j.cooldowns[e],{settings:t[e],cooldown:H(e),globalCooldown:j.globalCooldown,globalCooldownStartTime:j.globalCooldownStartTime,casttime:L(t[e].casttime),casting:j.casting&&j.casting.time&&j.casting.direction,subscribe:P,unsubscribe:B,onExecute:U,onAbilityUpdate:R,triggerEvent:c,reset:d}))}))))}),I=a(5),j=(a(35),function(e){var t=e.icon,a=(e.displayName,e.duration),n=e.maxDuration,o=e.stacks,i=a&&(n-a)/n;return r.a.createElement("div",{className:"aura"},r.a.createElement("img",{src:t,width:30,height:30}),r.a.createElement("div",{className:"aura-text"},o>0?o:""),a?r.a.createElement(d,{size:30,progress:i,inverse:!0}):null,e.children)}),R=function(e){var t=e.type,a=e.startTime,o=e.haste,i=e.stacks,c=e.inVoidform,l=e.triggerEvent,u=Object(I.a)(e,["type","startTime","haste","stacks","inVoidform","triggerEvent"]),d=Object(n.useState)(6e4),m=Object(s.a)(d,2),p=m[0],h=m[1],b=Object(n.useState)(0),v=Object(s.a)(b,2),y=v[0],f=v[1],g=Object(n.useRef)(i);g.current=i;var E=Object(n.useRef)(c);E.current=c;var T=Object(n.useRef)(a);T.current=a;var N=Object(n.useRef)(o);N.current=o;var O=function(e,t,a,n){var r=e?6e4:n;return h((function(e){return r})),l({type:"LINGERING_INSANITY_START",payload:{haste:N.current*t,stacks:a}}),{currentMaxDuration:r,voidformEntered:!1}},S=function(e,t){return Math.ceil(e/t)};return Object(n.useEffect)((function(){var e;switch(t){case"static":e=function(){var e=u.duration,t=u.afterVoidformEntry,a=u.hasteRetention,n=O(t,a,g.current,e),r=setInterval((function(){var o=Date.now();if(console.log("here"),!n.voidformEntered||E.current)return o>=T.current+n.currentMaxDuration?(clearInterval(r),void l({type:"LINGERING_INSANITY_END"})):!n.voidformEntered&&E.current&&(n.voidformEntered=!0,t)?(l({type:"AURA_REFRESH",payload:{name:"lingeringInsanity",time:o}}),h((function(t){return e})),n.currentMaxDuration=e,void f((function(e){return 0}))):void f((function(e){return o-T.current}));n=O(t,a,g.current,e)}),100);return r}();break;case"decay":e=function(){var e=u.decayRate,t=u.hasteDecay,a=0,n=O(!0,1,S(N.current,t)),r=setInterval((function(){a+=100;var o=Date.now();return n.voidformEntered&&!E.current?(n=O(!0,1,S(N.current,t)),void(a=0)):g.current<=0?(clearInterval(r),void l({type:"LINGERING_INSANITY_END"})):(a%e===0&&l({type:"LINGERING_INSANITY_UPDATE",payload:-1*t}),!n.voidformEntered&&E.current&&(n.voidformEntered=!0),void f((function(e){return o-T.current})))}),100);return r}()}return function(){return clearInterval(e)}}),[]),r.a.createElement(j,{icon:"images/lingering-insanity.jpg",displayName:"Lingering Insanity",duration:y,maxDuration:p,stacks:i})},_=function(e){var t=e.drainRate,a=e.drainStart,o=e.hasteStack,i=e.hasteStart,c=e.maxStacks,l=e.paused,u=e.active,d=e.triggerEvent,m=Object(n.useState)(1),p=Object(s.a)(m,2),h=p[0],b=p[1],v=Object(n.useRef)(l);v.current=l;return Object(n.useEffect)((function(){var e=function(){var e=0,n=Math.round(10),r=0;return d({type:"HASTE_UPDATE",payload:{source:"voidform",haste:i+o}}),setInterval((function(){var i=.1*(a+t*e);e+=.1,r++,v.current||d({type:"RESOURCE_UPDATE",payload:{resource:-1*i}}),r%n===0&&(!c||r/n<c)&&(d({type:"VOIDFORM_UPDATE",payload:o}),b((function(e){return e+1})))}),100)}();return function(){clearInterval(e),d({type:"VOIDFORM_END",payload:{time:Date.now(),startingHaste:i}})}}),[u]),r.a.createElement(j,{icon:"images/voidform.jpg",displayName:"Voidform",stacks:h})},D=function(e){var t=e.icon,a=e.name,o=e.displayName,i=e.startTime,c=e.baseDuration,l=e.maxDuration,u=e.ticks,d=e.resource,m=e.haste,p=e.triggerEvent,h=Object(n.useState)(0),b=Object(s.a)(h,2),v=b[0],y=b[1],f=Object(n.useRef)(i);f.current=i;var g=Object(n.useRef)(l);g.current=l;var E=Object(n.useRef)(m);E.current=m;var T=function(e){return c/u/E.current+e};return Object(n.useEffect)((function(){var e=Date.now(),t=T(e);p({type:"AURA_BEGIN",payload:{name:a,duration:c,time:e}});var n=setInterval((function(){var e=Date.now();if(e>=f.current+g.current)return clearInterval(n),p({type:"RESOURCE_UPDATE",payload:{resource:d}}),void p({type:"AURA_END",payload:{name:a}});e>=t&&(p({type:"RESOURCE_UPDATE",payload:{resource:d}}),t=T(e)),y((function(t){return e-f.current}))}),100);return function(){return clearInterval(n)}}),[]),r.a.createElement(j,{icon:t,displayName:o,duration:v,maxDuration:g.current})},x={cooldown:{key:"cooldown",displayName:"Cooldown",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be able to be recast.",unit:"sec"},charges:{key:"charges",displayName:"Charges",type:"number",whatIs:"The number of times an ability may be cast while it is on cooldown."},hasted:{key:"hasted",displayName:"Hasted",type:"boolean",whatIs:"An ability that is hasted has its cooldown reduced by haste."},resourceCast:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate upon a successful cast.",unit:"insanity"},resourceChannel:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate over its complete channel period.",unit:"insanity"},cost:{key:"resource",displayName:"Cost",type:"number",whatIs:"The amount of resource required to cast an ability. Casting the ability will spend the resource cost.",unit:"insanity"},castTime:{key:"casttime",displayName:"Cast Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be executed.",unit:"sec"},channelTime:{key:"casttime",displayName:"Channel Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability's channel to complete.",unit:"sec"},ticks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times a channel generates resources over its duration."},auraDuration:{key:"baseDuration",displayName:"Duration",type:"time",whatIs:"The amount of time, in seconds, that an aura's effect will last."},auraTicks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times an aura will trigger its effect over its duration."},auraResource:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an aura will generate every time its effect triggers."}},L={"void-bolt":[x.cooldown,x.hasted,x.charges,x.resourceCast,{key:"rankTwo",displayName:"Rank 2",type:"boolean",whatIs:"An extra rank coming to Void Bolt in Shadowlands. It allows Void Bolt to be cast during Mind Flay, without canceling it."},{key:"extension",displayName:"DoT Extension",type:"time",whatIs:"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast."}],"void-eruption":[x.castTime,{key:"resource",displayName:"Insanity Threshold",type:"number",whatIs:"The amount of Insanity that is required to cast Void Eruption out of Voidform."}],"mind-flay":[x.channelTime,x.resourceChannel,x.ticks],"mind-sear":[x.channelTime,x.resourceChannel,x.ticks,{key:"targetCount",displayName:"Target Count",type:"number",whatIs:"The number of targets Mind Sear will hit. Mind Sear generates more resource per additional target."}],"mind-blast":[x.cooldown,x.charges,x.castTime,x.hasted,x.resourceCast,{key:"cdr",displayName:"Voidform Cooldown Reduction",type:"time",whatIs:"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform."}],"shadow-word-death":[x.cooldown,x.charges,x.hasted,x.resourceCast],"void-torrent":[x.cooldown,x.channelTime,x.resourceChannel,x.ticks],"shadow-word-pain":[x.resourceCast],"vampiric-touch":[x.castTime,x.resourceCast],"devouring-plague":[x.cooldown,x.cost]},U={stats:[{key:"haste",displayName:"Haste",type:"percent",whatIs:"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate."}],voidform:[{key:"drainStart",displayName:"Starting Insanity Drain",type:"float",unit:"/sec",whatIs:"The starting amount of Insanity being drained every second while in Voidform."},{key:"drainRate",displayName:"Insanity Drain Rate",type:"float",unit:"/sec",whatIs:"The amount of increasing Insanity drained every second while in Voidform."},{key:"hasteStart",displayName:"Voidform Starting Haste",type:"percent",whatIs:"The amount of haste, in percent, that is granted at the start of Voidform."},{key:"hasteStack",displayName:"Voidform Haste Per Stack",type:"percent",whatIs:"The amount of haste, in percent, that every stack of Voidform grants."},{key:"maxStacks",displayName:"Maximum Voidform Stacks",type:"number",whatIs:"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing."}],lingeringInsanity:[{key:"type",displayName:"Aura Type",type:"select",options:[{value:"static",displayName:"Static"},{value:"decay",displayName:"Decay"}],whatIs:"Lingering Insanity has two types.\nStatic - The length of the aura and haste from stacks are constant.\nDecay - Haste stacks are lost over the aura's duration at a certain rate."},{key:"duration",displayName:"Aura Duration",type:"time",whatIs:"An option for type 'Static'. This is the amount of time, in seconds, that the aura will last."},{key:"afterVoidformEntry",displayName:"After Voidform Entry",type:"boolean",whatIs:"An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform."},{key:"hasteRetention",displayName:"Haste Retained",type:"percent",whatIs:"An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform."},{key:"decayRate",displayName:"Stack Decay Rate",type:"time",whatIs:"An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost."},{key:"hasteDecay",displayName:"Haste Decay Amount",type:"percent",whatIs:"An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack."}],"shadow-word-pain":[x.auraDuration,x.auraTicks,x.auraResource],"vampiric-touch":[x.auraDuration,x.auraTicks,x.auraResource],"devouring-plague":[x.auraDuration]},P=[{name:"shadow-word-pain",icon:"images/shadow-word-pain.jpg",displayName:"Shadow Word: Pain"},{name:"vampiric-touch",icon:"images/vampiric-touch.jpg",displayName:"Vampiric Touch"},{name:"devouring-plague",icon:"images/devouring-plague.jpg",displayName:"Devouring Plague"}],B=function(e){var t=e.auras,a=e.triggerEvent,o=e.settings,i=e.haste,c=o.lingeringInsanity,l=o.voidform,u=Object(n.useReducer)((function(e,t){})),d=Object(s.a)(u,2);d[0],d[1];return r.a.createElement("div",{className:"aura-container"},t.voidform.active?r.a.createElement(_,Object.assign({},l,t.voidform,{triggerEvent:a})):null,t.lingeringInsanity.active?r.a.createElement(R,Object.assign({},c,t.lingeringInsanity,{inVoidform:t.voidform.active,triggerEvent:a})):null,P.map((function(e){return t[e.name].active?r.a.createElement(D,Object.assign({},e,t[e.name],o[e.name],{haste:i,triggerEvent:a})):null})))},H=(a(4),function(e){var t=e.panel,a=e.currentPanel,o=e.reset,i=e.onClick,c=e.handleClose,s=e.header,l=e.panelClass,u=e.style;return function(e,t,a){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current===e&&a(),r.current=t}),[t])}(t,a,o),r.a.createElement("div",null,r.a.createElement("div",{className:"panel-header hover-pointer",onClick:function(){return i(t)}},s),r.a.createElement("div",{className:"panel ".concat(l),style:u},r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:c},"x"),e.children))}),V=a(13),Y={"mind-flay":{cooldown:0,resource:12,hasted:!0,casttime:3e3,ticks:4,type:"channel"},"mind-sear":{cooldown:0,resource:5,hasted:!0,casttime:3e3,ticks:4,targetCount:1,type:"channel"},"void-bolt":{cooldown:4500,resource:20,hasted:!0,rankTwo:!1,type:"instant",charges:1,extension:3e3},"void-eruption":{cooldown:0,type:"cast",casttime:2e3,resource:90,costsResource:!0},"mind-blast":{cooldown:7500,resource:12,hasted:!0,type:"cast",casttime:1500,charges:1,cdr:1500},"shadow-word-death":{cooldown:9e3,resource:15,type:"instant",charges:1},"void-torrent":{cooldown:45e3,resource:30,type:"channel",casttime:4e3,ticks:10},"shadow-word-pain":{cooldown:0,resource:4,type:"instant"},"vampiric-touch":{cooldown:0,resource:6,type:"cast",casttime:1500},"devouring-plague":{cooldown:0,resource:50,costsResource:!0,type:"instant"}},W={stats:{displayName:"Stats",haste:0},voidform:{displayName:"Voidform",drainStart:6,drainRate:.68,hasteStart:0,hasteStack:.005,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"decay",duration:6e4,afterVoidformEntry:!1,hasteRetention:1,decayRate:3e3,hasteDecay:.01},"shadow-word-pain":{displayName:"Shadow Word: Pain",baseDuration:16e3,ticks:8,resource:0},"vampiric-touch":{displayName:"Vampiric Touch",baseDuration:21e3,ticks:7,resource:0},"devouring-plague":{displayName:"Devouring Plague",baseDuration:12e3,ticks:4,resource:0}},M=function(e){var t={};return Object.keys(Y).forEach((function(a){var n=e[a];if(!n)throw new Error("Missing ability in input");t[a]=function(e,t){var a=Y[t];return Object.keys(a).reduce((function(t,n){var r=e[n],o=a[n];if(null===r||void 0===r)throw new Error("Missing ability setting in input "+n);if(typeof r!==typeof o)throw new Error("Ability setting has invalid format");return t[n]=r,t}),{})}(n,a)})),t},F=function(e){var t={};return Object.keys(W).forEach((function(a){var n=e[a];if(!n)throw new Error("Missing aura in input");t[a]=function(e,t){var a=W[t];return Object.keys(a).reduce((function(t,n){var r=e[n],o=a[n];if(null===r||void 0===a)throw new Error("Missing aura setting in input "+n);if(typeof r!==typeof o)throw new Error("Aura setting has invalid format");return t[n]=r,t}),{})}(n,a)})),t},G=function(e){return Object.keys(e).reduce((function(t,a){var n,r=e[a],o=(n=r,Object.keys(n).reduce((function(e,t){return e[t]=n[t],e}),{}));return t[a]=o,t}),{})},z=function(e,t){return Object.keys(e).reduce((function(a,n){var r=e[n],o=r.keybind,i=r.disabled;return a[n]={disabled:!!i},t&&o&&(a[n].keybind=o),a}),{})},J=function(e){console.log(e);var t=G(e.abilitySettings),a=z(e.abilities,!0),n={abilitySettings:t,auraSettings:e.auraSettings,abilityConfig:a};return V.Base64.encode(JSON.stringify(n))},K={live:{displayName:"Live",abilitySettings:{"mind-flay":{cooldown:0,resource:12,hasted:!0,casttime:3e3,ticks:4,type:"channel"},"mind-sear":{cooldown:0,resource:5,hasted:!0,casttime:3e3,ticks:4,targetCount:1,type:"channel"},"void-bolt":{cooldown:4500,resource:20,hasted:!0,rankTwo:!1,type:"instant",charges:1,extension:3e3},"void-eruption":{cooldown:0,type:"cast",casttime:2e3,resource:90,costsResource:!0},"mind-blast":{cooldown:7500,resource:12,hasted:!0,type:"cast",casttime:1500,charges:1,cdr:1500},"shadow-word-death":{cooldown:9e3,resource:15,type:"instant",charges:2},"void-torrent":{cooldown:45e3,resource:30,type:"channel",casttime:4e3,ticks:10},"shadow-word-pain":{cooldown:0,resource:4,type:"instant"},"vampiric-touch":{cooldown:0,resource:6,type:"cast",casttime:1500},"devouring-plague":{cooldown:0,resource:50,costsResource:!0,type:"instant"}},auraSettings:{stats:{displayName:"Stats",haste:0},voidform:{displayName:"Voidform",drainStart:6,drainRate:.72,hasteStart:0,hasteStack:.005,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"decay",duration:6e4,afterVoidformEntry:!1,hasteRetention:1,decayRate:3e3,hasteDecay:.01},"shadow-word-pain":{displayName:"Shadow Word: Pain",baseDuration:16e3,ticks:8,resource:0},"vampiric-touch":{displayName:"Vampiric Touch",baseDuration:21e3,ticks:7,resource:0},"devouring-plague":{displayName:"Devouring Plague",baseDuration:12e3,ticks:4,resource:0}},abilities:{"mind-flay":{},"mind-sear":{},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{disabled:!0},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{disabled:!0}}},alpha:{displayName:"Shadowlands Alpha",abilitySettings:{"mind-flay":{cooldown:0,resource:12,hasted:!0,casttime:3e3,ticks:4,type:"channel"},"mind-sear":{cooldown:0,resource:5,hasted:!0,casttime:3e3,ticks:4,targetCount:1,type:"channel"},"void-bolt":{cooldown:4500,resource:20,hasted:!0,rankTwo:!0,type:"instant",charges:1,extension:3e3},"void-eruption":{cooldown:0,type:"cast",casttime:2e3,resource:90,costsResource:!0},"mind-blast":{cooldown:8e3,resource:12,hasted:!0,type:"cast",casttime:1500,charges:1,cdr:1500},"shadow-word-death":{cooldown:2e4,resource:0,type:"instant",charges:1},"void-torrent":{cooldown:45e3,resource:30,type:"channel",casttime:4e3,ticks:10},"shadow-word-pain":{cooldown:0,resource:4,type:"instant"},"vampiric-touch":{cooldown:0,resource:6,type:"cast",casttime:1500},"devouring-plague":{cooldown:0,resource:50,costsResource:!0,type:"instant"}},auraSettings:{stats:{displayName:"Stats",haste:0},voidform:{displayName:"Voidform",drainStart:6,drainRate:.72,hasteStart:0,hasteStack:.005,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"decay",duration:6e4,afterVoidformEntry:!1,hasteRetention:1,decayRate:3e3,hasteDecay:.01},"shadow-word-pain":{displayName:"Shadow Word: Pain",baseDuration:16e3,ticks:8,resource:0},"vampiric-touch":{displayName:"Vampiric Touch",baseDuration:21e3,ticks:7,resource:0},"devouring-plague":{displayName:"Devouring Plague",baseDuration:12e3,ticks:4,resource:0}},abilities:{"mind-flay":{},"mind-sear":{},"void-bolt":{},"void-eruption":{},"mind-blast":{},"shadow-word-death":{},"void-torrent":{disabled:!0},"shadow-word-pain":{},"vampiric-touch":{},"devouring-plague":{}}}},q=function(e){var t=e.onChange;return r.a.createElement("div",{style:{width:"60%"}},r.a.createElement("select",{className:"panel-dropdown",onChange:t},r.a.createElement("option",{disabled:!0,selected:!0},"Choose a template..."),Object.keys(K).map((function(e){return r.a.createElement("option",{key:e,value:e},K[e].displayName)})),r.a.createElement("option",{key:"custom",value:"custom"},"Custom")))},X=function(e){var t=e.settings,a=e.onImport,o=e.currentPanel,i=e.onClick,l=e.closePanel,u=Object(n.useState)(""),d=Object(s.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(""),b=Object(s.a)(h,2),v=b[0],y=b[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),E=g[0],T=g[1];return r.a.createElement(H,{panel:"export",currentPanel:o,reset:function(){p(""),y(""),T(!1)},onClick:i,handleClose:l,header:"Import/Export Settings",panelClass:"left-panel",style:{transform:"translateX(".concat("export"===o?"0px":"-350px",")")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Import Settings"),r.a.createElement(q,{onChange:function(e){var t=e.target.value;if("custom"!==t){var a=K[t],n=(a.displayName,Object(I.a)(a,["displayName"])),r=J(Object(c.a)({},n));y(r)}else y("")}}),r.a.createElement("textarea",{className:"panel-text-area",rows:20,cols:25,placeholder:"Import settings here...",value:v,onChange:function(e){var t=e.target.value;y(t)}}),r.a.createElement("div",{className:"panel-info-text-container"},r.a.createElement("label",null,"Include keybinds"),r.a.createElement("input",{type:"checkbox",onChange:function(){return T(!E)},checked:E})),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){var e=function(e,t){try{var a=JSON.parse(V.Base64.decode(e));return{abilitySettings:M(a.abilitySettings),auraSettings:F(a.auraSettings),abilityConfig:z(a.abilityConfig,t)}}catch(n){throw new Error("An error occurred while parsing input data.\nReason: "+n.message)}}(v,E);a(e),y("")},disabled:!v},"Import"))),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Export Settings"),r.a.createElement("textarea",{id:"export-content",className:"panel-text-area",rows:20,cols:25,value:m,readOnly:!0}),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){var e=J(t);p(e)}},"Export"),r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){document.getElementById("export-content").select();try{document.execCommand("copy")}catch(e){}},disabled:!m},"Copy")))))},$=a(3),Z=function(e){var t=e.value,a=e.onChange;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t/1e3,min:"0",step:".1",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(1e3*parseFloat(e.target.value))}}),"sec")},Q=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseInt(e.target.value))}})," ",n)},ee=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",step:".01",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseFloat(e.target.value))}})," ",n)},te=function(e){var t=e.value,a=e.onChange;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:100*t,min:"0",step:".5",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseFloat(e.target.value)/100)}}),"%")},ae=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"checkbox",defaultChecked:t,onChange:function(e){a(e.target.checked)}})},ne=function(e){var t=e.value,a=e.onChange,n=e.name,o=e.options,i=function(e){a(e.target.value)};return o.map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:e.value,name:n,value:e.value,defaultChecked:e.value===t,onChange:i}),r.a.createElement("label",{htmlFor:e.value},e.displayName))}))},re=Option=function(e,t,a,n,o,i){switch(e){case"time":return r.a.createElement(Z,{key:n,value:t,onChange:a});case"number":return r.a.createElement(Q,Object.assign({key:n,value:t,onChange:a},i));case"float":return r.a.createElement(ee,Object.assign({key:n,value:t,onChange:a},i));case"percent":return r.a.createElement(te,{key:n,value:t,onChange:a});case"boolean":return r.a.createElement(ae,{key:n,value:t,onChange:a});case"select":return r.a.createElement(ne,Object.assign({key:n,value:t,name:o,onChange:a},i));default:return null}},oe=(a(16),a(17),function(e){var t=e.value,a=e.name,n=e.type,o=e.whatIs,i=e.displayName,c=e.onChange,s=e.onHelp,l=e.closeHelp,u=e.parentKey,d=Object(I.a)(e,["value","name","type","whatIs","displayName","onChange","onHelp","closeHelp","parentKey"]);return r.a.createElement("div",{className:"setting-option"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-question-circle what-is-icon",onMouseEnter:function(e){var t={x:e.target.offsetLeft,y:e.target.offsetTop};s(i,o,t)},onMouseLeave:l})),r.a.createElement("div",{className:"setting-option-header"},i),re(n,t,(function(e){c(a,e)}),u+"-input",a,d))}),ie=function(e){var t=e.name,a=e.text,n=e.xPos,o=e.yPos,i={left:"".concat(n,"px"),top:"".concat(o+30,"px")};return r.a.createElement("div",{className:"what-is",style:i},r.a.createElement("div",{className:"what-is-header"},"What is... ",t,"?"),r.a.createElement("div",{className:"what-is-description"},a))},ce=function(e){var t=e.name,a=e.setting,o=e.options,i=e.onChange,l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)({}),h=Object(s.a)(p,2),b=h[0],v=h[1],y=function(e,n){var r=Object(c.a)(Object(c.a)({},a),{},Object($.a)({},e,n));i(r,t)},f=function(e,t,a){m(!0),v({name:e,text:t,xPos:a.x,yPos:a.y})},g=function(){m(!1),v({})};return r.a.createElement("div",{className:"customize-section"},r.a.createElement("div",{className:"customoze-section-header"},a.displayName),o.map((function(e){return r.a.createElement(oe,Object.assign({},e,{key:"".concat(t,"-").concat(e.key),value:a[e.key],name:e.key,parentKey:"".concat(t,"-").concat(e.key),onChange:y,onHelp:f,closeHelp:g}))})),d?r.a.createElement(ie,b):null)},se=function(e){var t=e.settings,a=e.currentPanel,o=e.onAbilitySet,i=e.onAuraSet,l=e.onClick,u=e.closePanel,d=t.abilities,m=t.auras,p="Changes pending...\nClick the button below to apply your changes",h=Object(n.useState)(d),b=Object(s.a)(h,2),v=b[0],y=b[1],f=Object(n.useState)(m),g=Object(s.a)(f,2),E=g[0],T=g[1],N=Object(n.useState)(Object.keys(d)[0]),O=Object(s.a)(N,2),S=O[0],k=O[1],w=Object(n.useState)(Object.keys(m)[0]),C=Object(s.a)(w,2),A=C[0],I=C[1],j=Object(n.useState)(!1),R=Object(s.a)(j,2),_=R[0],D=R[1],x=Object(n.useState)(!1),P=Object(s.a)(x,2),B=P[0],V=P[1],Y=function(e){var t=e.target.getAttribute("setting");k(t)},W=function(e){var t=e.target.getAttribute("setting");I(t)};return r.a.createElement(H,{panel:"settings",currentPanel:a,reset:function(){k(Object.keys(d)[0]),I(Object.keys(m)[0]),T(m),y(d),D(!1),V(!1)},onClick:l,handleClose:u,header:"Custom Settings",panelClass:"right-panel",style:{transform:"translateX(".concat("settings"===a?"0px":"350px")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Abilities"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(d).map((function(e){return r.a.createElement("div",{key:e,className:S===e?"settings-header-active":"settings-header",setting:e,onClick:Y},d[e].displayName)}))),S?r.a.createElement(ce,{name:S,setting:v[S],options:L[S],onChange:function(e,t){var a=Object(c.a)(Object(c.a)({},v),{},Object($.a)({},t,e));y(a),D(!0)}}):null,r.a.createElement("div",{className:"panel-text-button-container"},r.a.createElement("div",{className:"panel-info-text-container"},_?p:null),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){o(v),D(!1)}},"Update Abilities")))),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Auras"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(m).map((function(e){return r.a.createElement("div",{key:e,className:A===e?"settings-header-active":"settings-header",setting:e,onClick:W},m[e].displayName)}))),A?r.a.createElement(ce,{name:A,setting:E[A],options:U[A],onChange:function(e,t){var a=Object(c.a)(Object(c.a)({},E),{},Object($.a)({},t,e));T(a),V(!0)}}):null,r.a.createElement("div",{className:"panel-text-button-container"},r.a.createElement("div",{className:"panel-info-text-container"},B?p:null),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){i(E),V(!1)}},"Update Auras"))))))},le=(a(37),function(e){var t=e.abilities,a=e.currentPanel,o=e.onKeybind,i=e.onToggle,c=e.onClick,l=(e.onPause,e.closePanel),u="",d="",m="",p=Object(n.useState)(u),h=Object(s.a)(p,2),b=h[0],v=h[1],y=Object(n.useState)(d),f=Object(s.a)(y,2),E=f[0],T=f[1],N=Object(n.useState)(m),O=Object(s.a)(N,2),S=O[0],k=O[1],w=Object(n.useRef)(S);w.current=S;var C=function(e){v(e.target.alt)},A=function(){v("")},I=function(e){var a=e.target.getAttribute("ability");k(a),T("Press any key to bind to ".concat(t[a].displayName)),document.addEventListener("keypress",j,{once:!0})},j=function e(a){document.removeEventListener("keypress",e);var n={key:a.key,keybindText:a.key};g[n.key]&&(n.keybindText=g[n.key]),n.key.match(/[a-z]/)&&(n.keybindText=n.key.toUpperCase()),n.key.match(/[A-Z]/)&&(n.keybindText="S-"+n.key);var r=w.current;o(n,r),T("".concat(t[r].displayName," successfuly bound to ").concat(n.keybindText))};return r.a.createElement(H,{panel:"abilitykeybinds",currentPanel:a,reset:function(){document.removeEventListener("keypress",j),v(u),T(d),k(m)},onClick:c,header:"Ability and Keybinds",style:{transform:"translateY(".concat("abilitykeybinds"===a?"0px":"250px")},panelClass:"bottom-panel",handleClose:function(){v(u),T(d),k(m),l()}},r.a.createElement("div",{className:"horizontal-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"Change Abilities and Keybinds"),r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{className:"tooltip-text",visibility:(!!b).toString()},b)),r.a.createElement("div",{className:"panel-abilities-container"},Object.keys(t).map((function(e){if("void-eruption"!==e)return r.a.createElement("div",{className:"panel-ability-container",key:e},r.a.createElement("img",{className:"hover-pointer",alt:t[e].displayName,ability:e,onMouseOver:C,onMouseOut:A,onClick:I,src:t[e].icon,height:50,width:50}),r.a.createElement("button",{className:"panel-button",onClick:function(){return i(e)}},t[e].disabled?"Enable":"Disable"))}))),r.a.createElement("div",null,E||null)))}),ue=function(e){var t=e.currentPanel,a=e.onClick,n=e.closePanel;return r.a.createElement(H,{panel:"about",onClick:a,handleClose:n,header:"About",panelClass:"middle-panel",style:{transform:"translateY(".concat("about"===t?"0px":"-685px")}},r.a.createElement("div",{className:"middle-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"About"),r.a.createElement("div",{className:"medium-text left-text panel-text-content"},r.a.createElement("p",null,"Voidform Optimizer is a thought experiment I had."),r.a.createElement("p",null,"I am convinced that many, although not all, players' grievances with Voidform are caused by the implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others to experience Voidform in a myriad of ways; in hope that they realize it isn't inherently flawed, find what they most enjoy about it, and share those findings with others. Then, just maybe, as a community we can come to an agreement on how to ",r.a.createElement("b",null,"#savevoidform"),"."),r.a.createElement("p",null,"If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711."))))},de=(a(18),[{header:"Templates",description:"Premade templates may now be selected on import panel!"},{header:"Devouring Plague",description:"The recent Shadowlands Devouring Plague addition is now available to try out!"},{header:"What's New?",description:"Added a what's new dialogue to inform about recent changes to Voidform Optimizer."}]),me={textAlign:"left",marginBottom:"20px"},pe={fontSize:"15px"},he={fontSize:"20px"},be=function(e){var t=e.onClose;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},r.a.createElement("div",{className:"form-title"},"What's New"),r.a.createElement("div",null,de.map((function(e){return r.a.createElement("div",{style:me},r.a.createElement("b",{style:he},e.header),r.a.createElement("div",{style:pe},e.description))}))),r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:t},"Got it!")),r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},ve=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"panel-header hover-pointer",onClick:function(){return o(!0)}},"What's New"),a?r.a.createElement(be,{onClose:function(){return o(!1)}}):null)},ye={"mind-flay":{displayName:"Mind Flay",keybind:{key:"1",keybindText:"1"},icon:"images/mind-flay.jpg"},"mind-sear":{displayName:"Mind Sear",keybind:{key:"2",keybindText:"2"},icon:"images/mind-sear.jpg"},"mind-blast":{displayName:"Mind Blast",keybind:{key:"3",keybindText:"3"},icon:"images/mind-blast.jpg"},"void-bolt":{displayName:"Void Bolt",keybind:{key:"4",keybindText:"4"},icon:"images/void-bolt.jpg"},"void-eruption":{displayName:"Void Eruption",keybind:{key:"4",keybindText:"4"},icon:"images/void-eruption.jpg"},"shadow-word-death":{displayName:"Shadow Word: Death",keybind:{key:"5",keybindText:"5"},icon:"images/shadow-word-death.jpg"},"void-torrent":{displayName:"Void Torrent",keybind:{key:"6",keybindText:"6"},icon:"images/void-torrent.jpg"},"shadow-word-pain":{displayName:"Shadow Word: Pain",keybind:{key:"7",keybindText:"7"},icon:"images/shadow-word-pain.jpg"},"vampiric-touch":{displayName:"Vampiric Touch",keybind:{key:"8",keybindText:"8"},icon:"images/vampiric-touch.jpg"},"devouring-plague":{displayName:"Devouring Plague",keybind:{key:"9",keybindText:"9"},icon:"images/devouring-plague.jpg"}},fe=function(e){var t=e.value,a=e.id,n=e.label,o=e.className,i=e.placeHolder,c=e.onChange;return r.a.createElement("div",{className:"form-field ".concat(o)},r.a.createElement("label",{htmlFor:a},n),r.a.createElement("div",{className:"form-input-container"},r.a.createElement("textarea",{className:"panel-text-area form-input-field",id:a,value:t,placeholder:i,required:!0,onChange:function(e){return c(a,e.target.value)}})))},ge=function(e){var t=e.value,a=e.id,n=e.label,o=e.placeHolder,i=e.onChange;return r.a.createElement("div",{className:"form-text-field form-title"},r.a.createElement("label",{className:"form-input-title",htmlFor:a},n),r.a.createElement("input",{className:"panel-text-area form-input-field",type:"text",id:a,value:t,placeholder:o,required:!0,onChange:function(e){return i(a,e.target.value)}}))},Ee=a(9),Te=a.n(Ee),Ne=a(14),Oe=window.Email,Se=function(e){var t=["<h3>Give a brief description of the issue</h3>","<h3>What is the expected behavior?</h3>","<h3>What is the actual behavior?</h3>"];return"<h1>Bug Report for Voidform Optimizer</h1>\n"+Object.keys(e).reduce((function(a,n,r){return a.concat([t[r],e[n]])}),[]).join("\n")},ke=function(){var e=Object(Ne.a)(Te.a.mark((function e(t,a){var n,r;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={SecureToken:"bc7171e6-2cf7-4f90-b6eb-faa890bc0e79",From:"ryeshot.dev.notifications@gmail.com",To:"ryanbosteder@gmail.com",Subject:t,Body:a},e.next=3,Oe.send(n);case 3:if("OK"===(r=e.sent)){e.next=6;break}throw new Error(r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),we=function(){var e=Object(Ne.a)(Te.a.mark((function e(t,a,n){var r,o,i;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,o=Object(I.a)(t,["title"]),i=Se(o),e.prev=2,e.next=5,ke("[BUG] ".concat(r),i);case 5:a(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),n();case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ce=[{id:"bug-report-description",label:"Description",className:"form-field-small"},{id:"bug-report-expected",label:"Expected Behavior",className:"form-field-medium"},{id:"bug-report-actual",label:"Actual Behavior",className:"form-field-medium"}],Ae={id:"title",label:"Title"},Ie=function(e){var t=e.closeForm,a=Object(n.useState)({}),o=Object(s.a)(a,2),i=o[0],l=o[1],u=Object(n.useState)(!0),d=Object(s.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(""),b=Object(s.a)(h,2),v=b[0],y=b[1],f=function(e,t){l(Object(c.a)(Object(c.a)({},i),{},Object($.a)({},e,t)))};return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},r.a.createElement("div",{className:"form-title"},"Bug Report"),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=function(e,t){var a=1;return t(e),setInterval((function(){var n=a%4;t("".concat(e).concat(".".repeat(n))),a++}),500)}("Submitting",y);we(i,(function(){clearInterval(t),y("Bug report successfully submitted!")}),(function(){clearInterval(t),y("Failed to submit bug report")})),p(!1)}},r.a.createElement(ge,Object.assign({value:i.title},Ae,{onChange:f})),Ce.map((function(e){return r.a.createElement(fe,Object.assign({key:e.id,value:i[e.id]},e,{onChange:f}))})),r.a.createElement("div",null,r.a.createElement("input",{className:"panel-button",type:"submit",value:"Submit",disabled:!m}))),r.a.createElement("div",null,v),r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},je=function(e){var t=e.closeForm;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},"Coming soon!",r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},Re=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1];return r.a.createElement("div",{className:"forms-container"},r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){return o(!0)}},"Report a Bug"),r.a.createElement("button",{className:"panel-button",onClick:function(){return u(!0)}},"Request a Feature")),a?r.a.createElement(Ie,{closeForm:function(){return o(!1)}}):null,l?r.a.createElement(je,{closeForm:function(){return u(!1)}}):null)},_e=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(Y),u=Object(s.a)(i,2),d=u[0],m=u[1],p=Object(n.useState)(ye),h=Object(s.a)(p,2),b=h[0],v=h[1],y=Object(n.useState)(W),f=Object(s.a)(y,2),g=f[0],E=f[1],T=Object(n.useState)(!1),N=Object(s.a)(T,2),O=N[0],S=N[1],k=Object(n.useState)(!1),w=Object(s.a)(k,2),C=w[0],I=w[1],j=Object(n.useState)(0),R=Object(s.a)(j,2),_=R[0],D=R[1],x={resource:0,auras:{stats:{haste:_},voidform:{active:!1,stacks:0,haste:0,paused:!1},lingeringInsanity:{active:!1,stacks:0,haste:0},"shadow-word-pain":{active:!1,maxDuration:16e3},"vampiric-touch":{active:!1,maxDuration:24e3},"devouring-plague":{active:!1,maxDuration:12e3}},abilities:{"void-eruption":{unusable:!0},"devouring-plague":{unusable:!0}}},L=Object(n.useReducer)((function(e,t){var a=t.type,n=JSON.parse(JSON.stringify(e)),r=n.auras.voidform,o=n.auras.lingeringInsanity;switch(a){case"RESET":return x;case"RESET_ABILITIES":return Object(c.a)(Object(c.a)({},x),{},{auras:e.auras});case"RESET_AURAS":var i=Object(c.a)(Object(c.a)({},n),{},{auras:Object(c.a)(Object(c.a)({},x.auras),{},{stats:e.auras.stats})});return console.log(i),Object(c.a)(Object(c.a)({},n),{},{auras:Object(c.a)(Object(c.a)({},x.auras),{},{stats:e.auras.stats})});case"HASTE_SET":var s=t.payload,l=s.source,u=s.haste;n.auras[l].haste=u;break;case"HASTE_UPDATE":var m=t.payload;l=m.source,u=m.haste;n.auras[l].haste+=u;break;case"VOIDFORM_UPDATE":r.stacks++,r.haste+=t.payload;break;case"VOIDFORM_START":r.active=!0,r.stacks=1;break;case"VOIDFORM_END":var p=t.payload,h=p.time,b=p.startingHaste;o.active=!0,o.stacks=r.stacks,o.haste=Math.round(1e3*(r.haste-b))/1e3,o.startTime=h,r.stacks=0,r.haste=0,n.abilities["void-eruption"].unusable=!0;break;case"LINGERING_INSANITY_START":var v=t.payload,y=(u=v.haste,v.stacks);o.haste=u,o.stacks=y;break;case"LINGERING_INSANITY_UPDATE":o.haste+=t.payload,o.stacks--,o.haste<=0&&(o.haste=0);break;case"LINGERING_INSANITY_END":o.active=!1,o.stacks=0,o.haste=0,o.startTime=0;break;case"RESOURCE_UPDATE":var f=t.payload,E=f.name,T=f.resource,N=f.costsResource;console.log(N);var O="mind-sear"===E?d[E].targetCount:1;T=Math.max(Math.min(n.resource+T*(N?-1:1)*O,100),0),n.resource=T,T<=0&&r.active&&(r.active=!1),Object.keys(d).forEach((function(e){var t=d[e];t.costsResource&&(n.abilities[e].unusable=T<t.resource)}));break;case"INSANITY_DRAIN_PAUSE_START":r.paused=!0;break;case"INSANITY_DRAIN_PAUSE_END":r.paused=!1;break;case"AURA_START":var S=t.payload,k=(E=S.name,h=S.time,n.auras[E]);k.active?function(e,t,a){var n=e.startTime+e.maxDuration-a,r=Math.min(.3*t,n);e.maxDuration=t+r,e.startTime=a}(k,g[E].baseDuration,h):k.active=!0;break;case"AURA_BEGIN":var w=t.payload,C=(E=w.name,h=w.time,w.duration);n.auras[E].startTime=h,n.auras[E].maxDuration=C;break;case"AURA_REFRESH":var A=t.payload;E=A.name,h=A.time;n.auras[E].startTime=h;break;case"AURA_END":E=t.payload.name;n.auras[E].active=!1,n.auras[E].startTime=0;break;case"DOT_EXTEND":var I=d["void-bolt"].extension;["shadow-word-pain","vampiric-touch"].forEach((function(e){var t=n.auras[e];t.active&&(t.maxDuration+=I)}))}return n}),x),U=Object(s.a)(L,2),P=U[0],H=U[1];Object(n.useEffect)((function(){D(V)}),[P.auras.stats.haste,P.auras.voidform.haste,P.auras.lingeringInsanity.haste]);var V=function(){var e=P.auras;return Object.keys(e).reduce((function(t,a){return e[a].haste?t*(1+e[a].haste):t}),1)},M=function(e){S(!0),o(e)},F=function(){S(!1),o(null)},G=function(e){var t=Object.keys(b).reduce((function(t,a){return t[a]=Object(c.a)(Object(c.a)({},b[a]),e[a]),t}),{});v(t)},z=function(e){q(),E(e);var t=e.stats.haste;H({type:"HASTE_SET",payload:{source:"stats",haste:t}})},J=function(e){K(),m(e)},K=function(){I(!C),H({type:"RESET_ABILITIES"}),H({type:"RESOURCE_UPDATE",payload:{resource:0}})},q=function(){H({type:"RESET_AURAS"})};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header header-panel"},r.a.createElement("div",{className:"App-title"},r.a.createElement("div",{className:"App-title-text"},"Voidform Optimizer")),r.a.createElement("div",{className:"panel-container"},r.a.createElement(se,{settings:{abilities:Object.keys(d).reduce((function(e,t){return e[t]=Object(c.a)(Object(c.a)({},d[t]),{},{displayName:ye[t].displayName}),e}),{}),auras:g},onAbilitySet:J,onAuraSet:z,currentPanel:a,onClick:M,closePanel:F}),r.a.createElement(le,{abilities:b,currentPanel:a,onKeybind:function(e,t){var a=JSON.parse(JSON.stringify(b)),n=e.key,r="void-bolt"===t||"void-eruption"===t;Object.keys(a).forEach((function(e){a[e].keybind.key===n&&(a[e].keybind={keybindText:"--"})})),r?(a["void-bolt"].keybind=Object(c.a)({},e),a["void-eruption"].keybind=Object(c.a)({},e)):a[t].keybind=Object(c.a)({},e),v(a)},onToggle:function(e){var t=JSON.parse(JSON.stringify(b));t[e].disabled=!t[e].disabled,"void-bolt"===e&&(t["void-eruption"].disabled=t[e].disabled),v(t)},onClick:M,closePanel:F}),r.a.createElement(X,{settings:{abilitySettings:d,auraSettings:g,abilities:b},onImport:function(e){G(e.abilityConfig),J(e.abilitySettings),z(e.auraSettings)},currentPanel:a,onClick:M,closePanel:F}),r.a.createElement(ue,{currentPanel:a,onClick:M,closePanel:F}),r.a.createElement(ve,null)),r.a.createElement(Re,null)),r.a.createElement("div",{className:"App-content"},r.a.createElement(B,{auras:P.auras,settings:g,haste:_,triggerEvent:H}),r.a.createElement(l,{current:P.resource,max:100}),r.a.createElement(A,{abilitySettings:d,abilities:Object.keys(b).reduce((function(e,t){return e[t]=Object(c.a)(Object(c.a)({},b[t]),P.abilities[t]),e}),{}),haste:_,inVoidform:P.auras.voidform.active,triggerEvent:H,keyEventsPaused:O,reset:C}),r.a.createElement("button",{className:"panel-button",onClick:function(){K(),q()}},"Reset")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=a(21);a.n(De).a.config(),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[23,1,2]]]);
//# sourceMappingURL=main.b8b44e36.chunk.js.map