{"version":3,"sources":["components/ResourceBar.js","components/CooldownSweep.js","lib/events.js","lib/abilityEvents.js","lib/auraEvents.js","utils/eventHandler.js","lib/constants.js","utils/ability.js","components/ProgressAbility.js","components/GlobalCooldown.js","components/CastBar.js","components/AbilityBar.js","components/auras/Aura.js","components/auras/LingeringInsanity.js","components/auras/Buff.js","components/auras/Voidform.js","components/auras/DamageOverTime.js","lib/options.js","components/auras/AuraBar.js","components/panels/Panel.js","utils/hooks.js","lib/abilitySettings.js","lib/auraSettings.js","utils/importExport.js","lib/templates/index.js","lib/templates/live.js","lib/templates/beta.js","lib/templates/legionENVoidlord.js","lib/templates/legionAntorus.js","lib/templates/ryeshot.js","lib/templates/yvaelle.js","components/panels/ExportPanel.js","components/panels/optionFactory.js","components/panels/SettingOption.js","components/panels/WhatIs.js","components/panels/CustomizeSection.js","components/panels/SettingsPanel.js","components/panels/AbilityKeybindsPanel.js","components/panels/AboutPanel.js","lib/whatsNew.js","components/panels/WhatsNewPanel.js","lib/abilities.js","components/forms/FormTextAreaField.js","components/forms/FormTextField.js","utils/bugreport.js","components/forms/BugReport.js","components/forms/FeatureRequest.js","components/forms/Forms.js","lib/articles/designPhilosophy.js","components/articles/Article.js","components/articles/DesignPhilosophy.js","lib/articles/ramp.js","components/articles/Ramp.js","VoidformOptimizer.js","App.js","serviceWorker.js","index.js"],"names":["ResourceBar","props","max","current","voidform","className","toFixed","style","width","CooldownSweep","size","progress","inverse","stroke","normalizedRadius","circumference","Math","PI","height","fill","strokeWidth","strokeOpacity","strokeDasharray","strokeDashoffset","cx","cy","r","events","abilityEvents","onEvent","auraEvents","EventHandler","eventTriggers","this","event","payload","forEach","e","type","auraEventHandler","name","trigger","keybinds","Ability","initialState","updateFn","onExecute","eventHandler","state","updateState","ignoreGcd","charges","maxCharges","currentState","Object","keys","k","value","subState","k2","value2","now","Date","startTime","cooldown","duration","getCurrentState","cooldownTimer","setInterval","remaining","clearInterval","startCooldown","handleEvent","time","displayName","resource","resourceCost","costType","cast","castTimer","setTimeout","currentlyOnCooldown","endTime","channel","baseDuration","baseTicks","ticks","gcd","globalCooldown","pandemicTime","currentTicks","channelTimer","previousChannelRemaining","maximumTicks","floor","min","channelFrequency","round","tickResourceModifier","baseChannelTime","globalCooldownTimer","disabled","unusable","clearTimeout","triggers","eventTypes","constructEventHandler","InstantAbility","CastAbility","ChannelAbility","canExecute","casting","console","log","startCast","startChannel","ProgressAbility","settings","globalCooldownStartTime","casttime","castStartTime","castEndTime","icon","keybind","subscribe","unsubscribe","onAbilityUpdate","onClick","triggerEvent","show","reset","useState","setState","key","keybindText","startTimeRef","useRef","cooldownRef","castStartTimeRef","castEndTimeRef","casttimeRef","castingRef","baseChannelTimeRef","ticksRef","chargesRef","globalCooldownRef","globalCooldownStartTimeRef","unusableRef","disabledRef","ability","useEffect","create","source","execute","notify","beginGlobalCooldown","getRemainingCooldown","ignoresGcd","remove","src","GlobalCooldown","start","CastBar","direction","setCurrent","timeRef","durationRef","timer","AbilityBar","abilitySettings","abilities","haste","inVoidform","keyEventsPaused","hasteRef","inVoidformRef","spellQueueTimer","observers","setObservers","observersRef","defaultState","cooldowns","defaultCooldowns","status","hasReset","setHasReset","triggerCooldown","getAbilityCooldown","cdr","document","addEventListener","handleKeyPress","removeEventListener","useReducer","oldState","action","newState","JSON","parse","stringify","rankTwo","error","o","preventDefault","abilityCooldownRemaining","globalCooldownRemaining","queueAbility","handleClick","calculateCooldown","triggerGlobalCooldown","gcdLength","observer","obs","filter","hasted","getAbilityCastTime","staticCastTime","find","disabledAbilities","showAbility","sort","k1","index","buildAbilityBar","map","Aura","maxDuration","stacks","children","LingeringInsanity","setMaxDuration","setDuration","stacksRef","initialize","afterVoidformEntry","hasteRetention","currentMaxDuration","ceil","voidformEntered","calculateDecayStacks","voidformHaste","hasteDecay","startStatic","decayRate","i","startDecay","startBuff","_","Buff","setting","Voidform","drainRate","drainStart","hasteStack","hasteStart","maxStacks","paused","active","setStacks","pausedRef","n","frequency","drain","interval","startingHaste","DamageOverTime","maxDurationRef","calculateNextTickTime","tickTime","whatIs","commonOptions","unit","resourceCast","resourceChannel","cost","castTime","channelTime","auraDuration","auraTicks","auraResource","abilityOptions","options","auraOptions","dots","buffs","AuraBar","auras","lingeringInsanity","dot","buff","Panel","panel","currentPanel","handleClose","header","panelClass","target","cleanup","ref","useCleanup","defaultAbilitySettings","targetCount","extension","requireVoidform","requireNoVoidform","defaultAuraSettings","stats","startingInsanity","gainInsanity","resourceGen","parseAbilitySettings","result","a","abilitySetting","reduce","obj","userSetting","Error","undefined","parseAbility","parseAuraSettings","auraSettings","aura","auraSetting","parseAura","formatAbilitySettingsForExport","formattedAbility","formatAbilityConfig","includeKeybinds","includeSpellOrder","exportSettings","currentSettings","formattedAbilitySettings","formattedAbilityConfig","combined","abilityConfig","Base64","encode","live","beta","legionENVoidlord","legionAntorus","ryeshot","yvaelle","Templates","onChange","selected","templates","t","ExportPanel","onImport","closePanel","exportData","setExportData","inputData","setInputData","setIncludeKeybinds","setIncludeSpellOrder","selectedTemplate","setSelectedTemplate","transform","template","data","rows","cols","placeholder","checked","parsedSettings","decode","message","importSettings","queryParams","URLSearchParams","set","window","history","replaceState","title","toString","addTemplateToQueryString","id","readOnly","getElementById","select","execCommand","err","TimeTextOption","displayValue","setDisplayValue","step","parseFloat","NumberTextOption","parseInt","FloatTextOption","PercentTextOption","BooleanOption","defaultChecked","SelectOption","handleChange","htmlFor","Option","rest","SettingOption","onHelp","closeHelp","parentKey","onMouseEnter","pos","x","offsetLeft","y","offsetTop","onMouseLeave","v","WhatIs","text","xPos","yPos","left","top","CustomizeSection","showWhatIs","setShowWhatIs","setWhatIs","optionKey","option","newSetting","handleShowWhatIs","closeWhatIs","SettingsPanel","didReset","onAbilitySet","onAuraSet","changesPendingText","currentAbilities","setCurrentAbilities","currentAuras","setCurrentAuras","activeAbilitySection","setActiveAbilitySection","activeAuraSection","setActiveAuraSection","abilityChangesPending","setAbilityChangesPending","auraChangesPending","setAuraChangesPending","showAbilityOptions","settingKey","getAttribute","showAuraOptions","newAbilities","newAuras","AbilityIndex","count","Array","AbilityKeybindsPanel","onKeybind","setOrder","onToggle","tooltip","setTooltip","setKeybindText","currentAbility","setCurrentAbility","length","abilityCount","currentAbilityRef","showToolTip","alt","hideToolTip","prepareToBindAbility","handleKeyDown","once","isKeydownKey","bindAbility","match","toUpperCase","formKeybindFromKey","visibility","onMouseOver","onMouseOut","AboutPanel","description","containerStyle","textAlign","marginBottom","smallText","fontSize","mediumText","WhatsNew","onClose","whatsNew","item","WhatsNewPanel","showWhatsNew","setShowWhatsNew","defaultAbilities","FormTextAreaField","label","placeHolder","required","FormTextField","email","Email","formatBugReportContent","body","headers","content","concat","join","sendBugReport","SecureToken","process","REACT_APP_SMTP_ACCESS_TOKEN","From","REACT_APP_SENDER_GMAIL_USER","To","REACT_APP_RECEIVER_GMAIL_USER","Subject","Body","send","submitBugReport","onSuccess","onFail","fields","titleField","contactField","BugReport","closeForm","setData","canSubmit","setCanSubmit","submitMessage","setSubmitMessage","onSubmit","setText","repeat","createPendingTextTimer","f","contact","FeatureRequest","Forms","pauseKeyEvents","showBugReport","setShowBugReport","showFeatureRequest","setShowFeatureRequest","handleFormClick","setShow","ArticleLink","url","to","Article","sections","s","DesignPhilosophyLink","DesignPhilosophy","RampLink","Ramp","handleDotRefresh","pandemic","pandemicDuration","rolling","timeToNextTick","VoidformOptimizer","setPanel","setAbilitySettings","setAbilities","setAuraSettings","setKeyEventsPaused","setReset","abilityReset","setAbilityReset","setHaste","powerInfusion","voidformAbilities","d","calculateHaste","location","search","get","templateSettings","handleImport","handlePanelHeaderClick","handlePanelClose","setAllAbilities","handleAbilitySet","handleAuraSet","handleReset","importedAbilities","handleAuraReset","handleAbilityReset","merged","voidBoltOrEruption","abilityIndex","shift","currentIndex","newSettings","path","Boolean","hostname","dotenv","config","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.aa79461a.chunk.js","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react';\nimport \"./ResourceBar.css\"\n\nconst ResourceBar = (props) => {\n    const {max, current, voidform} = props\n\n    return (\n        <div className=\"progress-bar-container\">\n            <div className=\"progress-text\">{(current/max*100).toFixed(0)}</div> \n            <div className=\"progress-bar resource-bar\" \n                style={{\n                    width: `${(current/max*100).toFixed(2)}%`\n            }}>\n            </div>\n        </div>\n    )\n}\n\nexport default ResourceBar","import React, {useState, useEffect, useRef} from 'react';\n\nimport \"./CooldownSweep.css\"\n\nconst CooldownSweep = (props) => {\n\n    const {size, progress, inverse} = props\n\n    const radius = size * 2\n    const stroke = size * 2\n\n    const normalizedRadius = radius - (stroke/2)\n    const circumference = normalizedRadius * 2 * Math.PI\n\n    return (\n        <svg width={size} height={size}>\n            <circle\n                fill=\"transparent\"\n                strokeWidth={stroke}\n                strokeOpacity={.7}\n                strokeDasharray={circumference + \" \" + circumference}\n                strokeDashoffset={inverse ? ((!progress ? circumference : 0) + (progress || 0) * circumference) : (circumference + (progress || 0) * circumference)}\n                stroke={\"rgb(0,0,0)\"}\n                cx={size/2}\n                cy={size/2}\n                r={normalizedRadius} />\n        </svg>\n    )\n}\n\nexport default CooldownSweep","const events = {\n    \"CAST\": [\n        \"ABILITY_CAST_SUCCESS\",\n        \"ABILITY_COOLDOWN_START\",\n        \"ABILITY_COOLDOWN_END\",\n        \"ABILITY_CAST_START\",\n        \"ABILITY_CHANNEL_START\",\n        \"ABILITY_CHANNEL_UPDATE\",\n        \"ABILITY_CHANNEL_END\"\n    ],\n    \"RESOURCE\": [\n        \"RESOURCE_UPDATE\",\n        \"INSANITY_DRAIN_PAUSE_START\",\n        \"INSANITY_DRAIN_PAUSE_END\"\n    ],\n    \"AURA\": [\n        \"VOIDFORM_START\",\n        \"VOIDFORM_UPDATE\",\n        \"VOIDFORM_END\",\n        \"LINGERING_INSANITY_START\",\n        \"LINGERING_INSANITY_UPDATE\",\n        \"LINGERING_INSANITY_END\",\n        \"AURA_START\",\n        \"AURA_BEGIN\",\n        \"AURA_END\",\n        \"DOT_EXTEND\"\n    ],\n    \"STAT\": [\n        \"HASTE_UPDATE\", \n        \"HASTE_RESET\"\n    ]\n}\n\nexport default events","const abilityEvents = {\n    \"void-bolt\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\", \"DOT_EXTEND\"]\n        }\n    },\n    \"mind-flay\": {\n        onEvent: {\n            \"COOLDOWN_START\": [],\n            \"COOLDOWN_END\": [],\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\"],\n            \"CHANNEL_UPDATE\": [\"ABILITY_CHANNEL_UPDATE\", \"RESOURCE_UPDATE\"],\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\"]\n        }\n    },\n    \"mind-sear\": {\n        onEvent: {\n            \"COOLDOWN_START\": [],\n            \"COOLDOWN_END\": [],\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\"],\n            \"CHANNEL_UPDATE\": [\"ABILITY_CHANNEL_UPDATE\", \"RESOURCE_UPDATE\"],\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\"]\n        }\n    },\n    \"void-eruption\": {\n        onEvent: {\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"VOIDFORM_START\"],\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"]\n        }\n    },\n    \"mind-blast\": {\n        onEvent: {\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"],\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"]\n        }\n    },\n    \"shadow-word-death\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"]\n        }\n    },\n    \"void-torrent\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\", \"INSANITY_DRAIN_PAUSE_START\"],\n            \"CHANNEL_UPDATE\": [\"RESOURCE_UPDATE\"],\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\", \"INSANITY_DRAIN_PAUSE_END\"]\n        }\n    },\n    \"shadow-word-pain\": {\n        onEvent: {\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\n        }\n    },\n    \"vampiric-touch\": {\n        onEvent: {\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\n        }\n    },\n    \"devouring-plague\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\n        }\n    },\n    \"shadowfiend\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\n        }\n    },\n    \"power-infusion\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\"]\n        }\n    },\n    \"bloodlust\": {\n        onEvent: {\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\"]\n        }\n    }\n}\n\nexport default abilityEvents","const auraEvents = {\n    \"voidform\": {\n        onEvent: {\n            \"AURA_START\": [\"AURA_BEGIN\", \"HASTE_UPDATE\"],\n            \"AURA_UPDATE\": [],\n            \"AURA_TIME_UPDATE\": [],\n            \"AURA_END\": [\"AURA_END\"]\n        }\n    },\n    \"lingeringInsanity\": {\n        onEvent: {\n            \"AURA_START\": [],\n            \"AURA_UPDATE\": [],\n            \"AURA_TIME_UPDATE\": [],\n            \"AURA_END\": []\n        }\n    },\n    \"shadow-word-pain\": {\n        onEvent: {\n            \"AURA_START\": [],\n            \"AURA_UPDATE\": [],\n            \"AURA_TIME_UPDATE\": [],\n            \"AURA_END\": []\n        }\n    },\n    \"vampiric-touch\": {\n        onEvent: {\n            \"AURA_START\": [],\n            \"AURA_UPDATE\": [],\n            \"AURA_TIME_UPDATE\": [],\n            \"AURA_END\": []\n        }\n    },\n    \"power-infusion\": {\n        onEvent: {\n            \"AURA_START\": [\"AURA_BEGIN\", \"HASTE_UPDATE\"],\n            \"AURA_END\": [\"AURA_END\", \"HASTE_RESET\"]\n        }\n    },\n    \"bloodlust\": {\n        onEvent: {\n            \"AURA_START\": [\"AURA_BEGIN\", \"HASTE_UPDATE\"],\n            \"AURA_END\": [\"AURA_END\", \"HASTE_RESET\"]\n        }\n    }\n}\n\nexport default auraEvents","import events from \"../lib/events\"\nimport abilityEvents from \"../lib/abilityEvents\"\nimport auraEvents from \"../lib/auraEvents\"\n\nclass EventHandler {\n\n    constructor(eventTriggers, events) {\n        this.eventTriggers = eventTriggers\n        this.events = events\n    }\n\n    handleEvent(event, payload) {\n        if(!this.events[event]) return\n\n        this.events[event].forEach(e => this.eventTriggers[e]({\n            type: e,\n            payload\n        }))\n    }\n}\n\nexport const constructEventHandler = (name, triggers) => {\n    const eventTriggers = {}\n\n    triggers.forEach(trigger => {\n        let types = trigger.eventTypes\n        types.forEach(type => {\n            events[type].forEach(e => eventTriggers[e] = trigger.trigger)\n        })\n    })\n\n    return new EventHandler(eventTriggers, abilityEvents[name].onEvent)\n}\n\nexport const auraEventHandler = (name, trigger) => {\n    const types = [\"AURA\", \"RESOURCE\", \"STAT\"]\n    const eventTriggers = {}\n\n    types.forEach(type => {\n        events[type].forEach(e => eventTriggers[e] = trigger)\n    })\n\n    return new EventHandler(eventTriggers, auraEvents[name].onEvent)\n}","export const interval = 20\nexport const lag = 50\nexport const spellQueueWindow = 250\nexport const keybinds = {\n    \"!\": \"S-1\",\n    \"@\": \"S-2\",\n    \"#\": \"S-3\",\n    \"$\": \"S-4\",\n    \"%\": \"S-5\",\n    \"^\": \"S-6\",\n    \"&\": \"S-7\",\n    \"*\": \"S-8\",\n    \"(\": \"S-9\",\n    \")\": \"S-0\",\n    \" \": \"SPC\"\n}","import {constructEventHandler} from \"./eventHandler\"\nimport {interval, lag} from \"../lib/constants\"\n\nclass Ability {\n\n    constructor(initialState, updateFn, onExecute, eventHandler) {\n        this.state = initialState\n        this.updateState = updateFn\n        this.onExecute = initialState.ignoreGcd ? () => {} : onExecute\n        this.eventHandler = eventHandler\n        this.updateState({\n            progress: 0,\n            charges: initialState.charges.maxCharges || 1\n        })       \n    }\n\n    static create(type, initialState, updateFn, onExecute, triggers) {\n        const eventHandler = constructEventHandler(initialState.name, triggers)\n        switch(type) {\n            case \"instant\":\n                return new InstantAbility(initialState, updateFn, onExecute, eventHandler)\n            case \"cast\":\n                return new CastAbility(initialState, updateFn, onExecute, eventHandler)\n            case \"channel\":\n                return new ChannelAbility(initialState, updateFn, onExecute, eventHandler)\n        }\n    }\n\n    getCurrentState() {\n        const currentState = {}\n        let state = this.state\n\n        Object.keys(state).forEach(k => {\n            let value = state[k]\n            if(typeof value !== \"object\") {\n                currentState[k] = value\n                return\n            }\n\n            const subState = {}\n            Object.keys(value).forEach(k2 => {\n                let value2 = value[k2]\n                if(value2 === \"undefined\") return\n                subState[k2] =  typeof value2 !== \"object\" ? value2 : value2.current\n            })\n            currentState[k] = subState\n        })\n\n        return currentState\n    }\n\n    getRemainingCooldown() {\n        const now = Date.now()\n        const startTime = this.state.cooldown.startTime.current\n        const duration = startTime ? this.state.cooldown.duration.current : 0\n        const charges = this.state.charges.current.current\n        const remaining = charges === 0 ? ((startTime || now) + duration) - now : 0\n\n        return remaining\n    }\n\n    startCooldown() {\n        let state = this.getCurrentState()\n        const {name} = state\n        const {maxCharges} = state.charges\n\n        this.cooldownTimer = setInterval(() => {\n            let now = Date.now()\n\n            let duration = this.state.cooldown.duration.current\n            let startTime = this.state.cooldown.startTime.current || now\n            let charges = this.state.charges.current.current\n            let remaining = (startTime + duration) - now\n\n            if(remaining <= interval) {\n                this.updateState(state => {\n                    return {...state, charges: charges+1}\n                })\n\n                clearInterval(this.cooldownTimer)\n\n                if(maxCharges && charges < maxCharges - 1) {\n                    this.startCooldown()\n                    return\n                }\n\n                this.eventHandler.handleEvent(\"COOLDOWN_END\", {name})\n\n                this.updateState(state => {\n                    return {...state, progress: 0}\n                })\n\n                return\n            }\n            this.updateState(state => {\n                return {...state, progress: remaining/duration}\n            })\n\n        }, interval)\n\n        this.eventHandler.handleEvent(\"COOLDOWN_START\", {\n            name,\n            time: Date.now()\n        })\n    }\n\n    startCast() {\n        let state = this.getCurrentState()\n        const {name, displayName, resource, resourceCost, costType} = state\n        const {duration} = state.cast\n\n        this.castTimer = setTimeout(() => {\n            this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\n                name,\n                resource,\n                resourceCost,\n                costType,\n                time: Date.now()\n            })\n\n            let cooldown = this.state.cooldown.duration.current\n            let currentlyOnCooldown = this.state.cooldown.startTime.current\n            let charges = this.state.charges.current.current\n\n            if(cooldown) {\n                this.updateState(state => {\n                    return {...state, charges: charges-1}\n                })\n                if(currentlyOnCooldown) return               \n                this.startCooldown()\n            }\n\n        }, duration)\n\n        if(duration) {\n            this.eventHandler.handleEvent(\"CAST_START\", {\n                name,\n                displayName,\n                duration,\n                time: Date.now()\n            })\n        }\n    }\n\n    startChannel() {\n        let state = this.getCurrentState()\n        const {startTime, endTime, duration} = state.cast\n        const {baseDuration, baseTicks, ticks} = state.channel\n        const {name, displayName, resource} = state\n        const gcd = state.globalCooldown.duration\n\n        let now = Date.now()\n        let pandemicTime = 0\n        let currentTicks = baseTicks\n\n        if(startTime) {\n            clearInterval(this.channelTimer)\n            const previousChannelTime = endTime - startTime\n            const previousChannelRemaining = previousChannelTime - (now - startTime)\n            const maximumTicks = Math.floor(baseTicks * ((baseDuration - gcd)/baseDuration))      \n            pandemicTime = Math.min(previousChannelRemaining, baseDuration * .3)\n\n            const remainingTicks = Math.min(ticks, maximumTicks)\n\n            currentTicks += remainingTicks\n        }\n\n        let channelFrequency = Math.round((duration+pandemicTime)/currentTicks)\n\n        this.channelTimer = setInterval(() => {\n\n            let now = Date.now()\n            let endTime = this.state.cast.endTime.current\n            let lastTick = this.state.channel.ticks.current === 1\n            let tickResourceModifier = lastTick ? (pandemicTime && .3 || 1) : 1\n\n            //another cast has stopped this channel, don't update\n            if(!endTime) {\n                clearInterval(this.channelTimer)\n\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\n                    name\n                })\n                return\n            }\n\n            this.eventHandler.handleEvent(\"CHANNEL_UPDATE\", {\n                resource: (resource/baseTicks) * tickResourceModifier,\n                name\n            })\n\n            if(now >= endTime) {\n                clearInterval(this.channelTimer)\n\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\n                    name\n                })\n                return\n            }\n\n        }, channelFrequency)\n\n        this.eventHandler.handleEvent(\"CHANNEL_START\", {\n            name,\n            displayName,\n            duration: duration + pandemicTime,\n            time: now,\n            baseChannelTime: duration,\n            currentTicks\n        })\n    }\n\n    beginGlobalCooldown() {\n        let state = this.getCurrentState()\n        const {duration, startTime} = state.globalCooldown\n        const {current, maxCharges} = state.charges\n\n        if(state.ignoreGcd) return\n\n        if(state.cooldown.startTime) {\n            if(maxCharges && current < maxCharges - 1) return\n            let remaining = (state.cooldown.startTime + state.cooldown.duration) - startTime\n            if(remaining > duration) return\n        }\n\n        this.globalCooldownTimer = setInterval(() => {\n            let now = Date.now()\n            let remaining = (startTime + duration) - now\n            if(remaining <= interval) {\n                clearInterval(this.globalCooldownTimer)\n                this.updateState(state => {\n                    return {...state, progress: 0}\n                })\n                             \n                return\n            }\n\n            if(this.state.cooldown.startTime.current) return\n            this.updateState(state => {\n                return {...state, progress: remaining/duration}\n            })\n        }, interval)\n    }\n\n    canExecute() {\n        if(this.state.disabled.current) return false\n        if(this.state.unusable.current) return false\n\n        return true\n    }\n\n    remove() {\n        clearInterval(this.cooldownTimer)\n        clearInterval(this.globalCooldownTimer)\n        clearInterval(this.channelTimer)\n        clearTimeout(this.castTimer)\n    }\n}\n\nclass InstantAbility extends Ability {\n\n    execute() {\n        if(!this.canExecute()) return\n        if(this.state.cast.casting.current) return\n        let state = this.getCurrentState()\n        const {name, resource, resourceCost} = state\n        const {startTime} = state.cooldown\n        const {maxCharges, current} = state.charges\n\n        if(startTime && current === 0) return      \n        this.updateState(state => {\n            return {...state, charges: current-1}\n        })\n\n        this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\n            name,\n            resource,\n            resourceCost,\n            time: Date.now()\n        })\n\n        this.onExecute()\n        if(maxCharges && current < maxCharges) return\n        this.startCooldown()\n    }\n}\n\nclass CastAbility extends Ability {\n\n    execute() {\n        if(!this.canExecute()) return\n        if(this.state.cast.casting.current) return\n        let state = this.getCurrentState()\n        const {startTime} = state.cast\n        const {current} = state.charges\n\n        if(startTime || current === 0) return\n        console.log(\"Casting\")\n        this.startCast()\n        this.onExecute()\n    }\n}\n\nclass ChannelAbility extends Ability {\n\n    execute() {\n        if(!this.canExecute()) return\n        if(this.state.cast.casting.current) return\n        let state = this.getCurrentState()\n        const {duration, startTime} = state.cooldown\n\n        if(startTime) return\n        this.startChannel()\n        if(duration) {\n            this.startCooldown()\n        }\n        this.onExecute()\n    }\n}\n\nexport default Ability","import React, {useState, useEffect, useRef} from 'react';\nimport \"./ProgressAbility.css\"\nimport CooldownSweep from \"./CooldownSweep\"\nimport Ability from \"../utils/ability\"\n\nconst ProgressAbility = (props) => {\n\n    const {name, displayName, settings, cooldown, globalCooldown, globalCooldownStartTime, unusable, startTime, casttime, castStartTime, castEndTime, icon, baseChannelTime, currentTicks, keybind, casting, subscribe, unsubscribe, onExecute, onAbilityUpdate, onClick, triggerEvent, show, reset} = props\n\n    const size = 50\n\n    const [state, setState] = useState({})\n\n    const {key, keybindText} = keybind\n    const {type, resource, resourceCost, costType, charges, ticks, ignoreGcd} = settings\n\n    //cooldown states\n    const startTimeRef = useRef(startTime)\n    const cooldownRef = useRef(cooldown)\n\n    startTimeRef.current = startTime\n    cooldownRef.current = cooldown\n\n    //cast states\n    const castStartTimeRef = useRef(castStartTime)\n    const castEndTimeRef = useRef(castEndTime)\n    const casttimeRef = useRef(casttime)\n    const castingRef = useRef(casting)\n\n    castStartTimeRef.current = castStartTime\n    castEndTimeRef.current = castEndTime\n    casttimeRef.current = casttime\n    castingRef.current = casting\n\n    //channel states\n    const baseChannelTimeRef = useRef(baseChannelTime)\n    const ticksRef = useRef(currentTicks)\n\n    baseChannelTimeRef.current = baseChannelTime\n    ticksRef.current = currentTicks\n\n    //charge states\n    const chargesRef = useRef(charges || 1)\n\n    chargesRef.current = state.charges\n\n    //gcd states\n    const globalCooldownRef = useRef(globalCooldown)\n    const globalCooldownStartTimeRef = useRef(globalCooldownStartTime)\n\n    globalCooldownRef.current = globalCooldown\n    globalCooldownStartTimeRef.current = globalCooldownStartTime\n\n    //other states\n    const unusableRef = useRef(unusable)\n    unusableRef.current = unusable\n\n    const disabledRef = useRef(!show)\n    disabledRef.current = !show\n\n    const ability = useRef()\n\n    useEffect(() => {\n        const triggers = [{\n            eventTypes: [\"CAST\"],\n            trigger: onAbilityUpdate \n        },\n        {\n            eventTypes: [\"RESOURCE\", \"AURA\", \"STAT\"],\n            trigger: triggerEvent\n        }]\n\n        const initialState = {\n            name,\n            displayName,\n            resource,\n            resourceCost,\n            costType,\n            unusable: unusableRef,\n            disabled: disabledRef,\n            ignoreGcd,\n            cooldown: {\n                duration: cooldownRef,\n                startTime: startTimeRef\n            },\n            cast: {\n                duration: casttimeRef,\n                startTime: castStartTimeRef,\n                endTime: castEndTimeRef,\n                casting: castingRef\n            },\n            channel: {\n                baseDuration: baseChannelTimeRef,\n                baseTicks: ticks,\n                ticks: ticksRef\n            },\n            charges: {\n                maxCharges: charges,\n                current: chargesRef\n            },\n            globalCooldown: {\n                duration: globalCooldownRef,\n                startTime: globalCooldownStartTimeRef\n            }\n        }\n\n        ability.current = Ability.create(type, initialState, setState, onExecute, triggers)\n        \n        subscribe({\n            source: name,\n            keybind: key,\n            execute: () => ability.current.execute(),\n            notify: () => ability.current.beginGlobalCooldown(),\n            getRemainingCooldown: () => ability.current.getRemainingCooldown(),\n            canExecute: () => ability.current.canExecute(),\n            ignoresGcd: !!ignoreGcd\n        })\n\n        return () => {\n            ability.current.remove()\n            unsubscribe(name)\n        }\n    }, [key, reset])\n\n    const handleClick = () => {\n        onClick(name, () => ability.current.getRemainingCooldown(), () => ability.current.execute(), () => ability.current.canExecute(), !!ignoreGcd)\n    }\n\n    return (\n        show ? <div className=\"progress-ability-container\">\n            <div className=\"progress-ability hover-pointer\" onClick={handleClick}>\n                <img\n                    className={!unusable && ((state.charges > 0 && charges) || (!startTimeRef.current)) ? \"colored\" : \"desaturated\"}\n                    src={icon}\n                    width={size}\n                    height={size}\n                />\n                <div className=\"charge-text\">{charges > 1 ? state.charges : \"\"}</div>\n                {startTimeRef.current || globalCooldownRef.current ? \n                <CooldownSweep size={size} progress={state.progress}/>\n                : null}\n            </div>\n            <div>{keybindText}</div>\n        </div>\n        : null\n    )\n}\n\nexport default ProgressAbility;","const GlobalCooldown = {\n\n    start: (duration, triggerEvent) => {\n        triggerEvent({\n            type: \"GLOBAL_COOLDOWN_START\",\n            payload: {\n                gcd: duration,\n                time: Date.now()\n\n            }\n        })\n\n        setTimeout(() => {\n            triggerEvent({\n                type: \"GLOBAL_COOLDOWN_END\"\n            })    \n        }, duration);\n    }\n}\n\nexport default GlobalCooldown","import React, {useState, useEffect, useRef} from 'react';\nimport \"./CastBar.css\"\n\nconst CastBar = (props) => {\n\n    const {time, name, displayName, duration, direction} = props\n\n    const sec = 1000\n    const interval = 50\n\n    const [current, setCurrent] = useState(0)\n\n    const timeRef = useRef(time)\n    const durationRef = useRef(time)\n\n    timeRef.current = time\n    durationRef.current = duration\n\n    useEffect(() => {\n        const timer = setInterval(() => {\n            let now = Date.now()\n            setCurrent(current => now - timeRef.current)\n        }, interval)\n\n        return () => {\n            clearInterval(timer)\n            setCurrent(current => 0)\n        }\n    }, [name])\n\n    return (\n        <div className=\"progress-bar-container\">\n            <div className=\"cast-bar-text-container\">\n                <div className=\"progress-text cast-bar-text\">{displayName}</div>\n                <div className=\"progress-text cast-bar-text\">{direction \n                ? `${(current/sec).toFixed(1)}/${((duration/sec).toFixed(1))}`\n                : `${((durationRef.current-current)/sec).toFixed(1)}/${((durationRef.current/sec).toFixed(1))}`}sec\n                </div> \n            </div>\n            <div className=\"progress-bar cast-bar\" \n                style={{\n                    width: direction \n                    ? `${(current/durationRef.current*100).toFixed(2)}%`\n                    : `${((durationRef.current-current)/durationRef.current*100).toFixed(2)}%`\n            }}>\n            </div>\n        </div>\n    )\n}\n\nexport default CastBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport ProgressAbility from \"./ProgressAbility\"\nimport GlobalCooldown from \"./GlobalCooldown\"\nimport CastBar from \"./CastBar\"\nimport {spellQueueWindow} from \"../lib/constants\"\nimport \"./AbilityBar.css\"\n\nconst AbilityBar = (props) => {\n\n    const gcdLength = 1500\n    const {abilitySettings, abilities, haste, inVoidform, triggerEvent, keyEventsPaused, reset} = props\n\n    const hasteRef = useRef(haste)\n    hasteRef.current = haste\n\n    const inVoidformRef = useRef(inVoidform)\n    inVoidformRef.current = inVoidform \n\n    const spellQueueTimer = useRef()\n\n    const defaultCooldowns = () => {\n        const cooldowns = {}\n        Object.keys(abilities).forEach(k => {\n            if(abilitySettings[k] && abilitySettings[k].disabled) return\n            cooldowns[k] = {\n                startTime: 0\n            }\n        })\n\n        return cooldowns\n    }\n\n    const [observers, setObservers] = useState([])\n\n    const observersRef = useRef(observers)\n    observersRef.current = observers\n\n    const defaultState = {\n        globalCooldown: 0,\n        cooldowns: defaultCooldowns(),\n        status: {}\n    }\n\n    const [hasReset, setHasReset] = useState(reset)\n\n    useEffect(() => {\n        triggerCooldown({\n            type: \"RESET\"\n        })\n\n        return () => setHasReset(reset)\n    }, [reset])\n\n    useEffect(() => {\n        const name = \"mind-blast\"\n        const ability = abilitySettings[name]\n        const duration = getAbilityCooldown(name)\n        let cdr = ability.cdr * (inVoidform && -1 || 1)\n        ability.cooldown += cdr\n\n        const startTime = state.cooldowns[name].startTime\n        if(!startTime || hasReset === reset) return\n        cdr = getAbilityCooldown(name) - duration\n        const now = Date.now()\n        const remaining = (startTime + duration) - now\n        const remainingPercent = remaining/duration\n        const remainingCdr = remainingPercent * cdr\n\n        triggerCooldown({\n            type: \"ABILITY_COOLDOWN_START\",\n            payload: {\n                name,\n                time: startTime + remainingCdr - cdr\n            }\n        })\n\n    }, [inVoidform])\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyPress)\n        document.addEventListener(\"keypress\", handleKeyPress)\n\n        return () => {\n            document.removeEventListener(\"keydown\", handleKeyPress)\n            document.removeEventListener(\"keypress\", handleKeyPress)\n        }\n    }, [keyEventsPaused])\n\n    const [state, triggerCooldown] = useReducer((oldState, action) => {\n        const newState = JSON.parse(JSON.stringify(oldState))\n        const payload = action.payload\n\n        switch(action.type) {\n            case \"RESET\":\n                return defaultState\n            case \"EXECUTE_PENDING\":\n                var {name} = payload\n                newState.status[name] = \"PENDING\"\n                break\n            case \"EXECUTE_END\":\n                var {name} = payload\n                newState.status[name] = \"\"\n                break\n            case \"ABILITY_CAST_SUCCESS\":\n                var {name} = payload\n                if(abilitySettings[\"void-bolt\"].rankTwo && newState.casting && name === \"void-bolt\" && newState.casting.name === \"mind-flay\") {\n                    break\n                }\n                newState.cooldowns[name].castStartTime = 0\n                newState.cooldowns[name].castEndTime = 0\n\n                if(newState.casting) {\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\n                    delete newState.casting\n                }\n                break\n            case \"ABILITY_COOLDOWN_START\":\n                var {name, time} = payload\n                newState.cooldowns[name].startTime = time\n                break\n            case \"ABILITY_COOLDOWN_END\":\n                var {name} = payload\n                newState.cooldowns[name].startTime = 0\n                break\n            case \"ABILITY_CAST_START\":\n                var {name, displayName, time, duration} = payload\n                newState.cooldowns[name].castStartTime = time\n                newState.cooldowns[name].castEndTime = time + duration\n                if(newState.casting) {\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\n                }\n                newState.casting = {\n                    duration,\n                    name,\n                    displayName,\n                    direction: 1,\n                    time\n                }\n                break\n            case \"ABILITY_CHANNEL_START\":\n                var {name, displayName, time, duration, baseChannelTime, currentTicks} = payload\n                var ability = newState.cooldowns[name]\n\n                newState.cooldowns[name] = {\n                    ...ability,\n                    castStartTime: time,\n                    castEndTime: time + duration,\n                    baseChannelTime,\n                    currentTicks\n                }\n\n                if(newState.casting && name !== newState.casting.name) {\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\n                }\n                newState.casting = {\n                    duration,\n                    name,\n                    displayName,\n                    direction: 0,\n                    time\n                }\n                break\n            case \"ABILITY_CHANNEL_UPDATE\":\n                var {name} = payload\n                newState.cooldowns[name].currentTicks--\n                break\n            case \"ABILITY_CHANNEL_END\":\n                var {name} = payload\n                var ability = newState.cooldowns[name]\n\n                newState.cooldowns[name] = {\n                    ...ability,\n                    castStartTime: 0,\n                    castEndTime: 0,\n                    currentTicks: 0\n                }\n                if(newState.casting && name === newState.casting.name) delete newState.casting\n                break\n            case \"GLOBAL_COOLDOWN_START\":\n                newState.globalCooldown = payload.gcd\n                newState.globalCooldownStartTime = payload.time\n                break\n            case \"GLOBAL_COOLDOWN_END\":\n                newState.globalCooldownStartTime = 0\n                break\n            default:\n                console.error(`Invalid action provided: ${action.type}`)\n        }\n\n        return newState\n\n    }, defaultState)\n\n    const globalCooldownRef = useRef(state.globalCooldown)\n    globalCooldownRef.current = state.globalCooldown\n\n    const globalCooldownStartTimeRef = useRef(state.globalCooldownStartTime)\n    globalCooldownStartTimeRef.current = state.globalCooldownStartTime\n\n    const handleKeyPress = (e) => {\n        if(keyEventsPaused) return\n\n        const now = Date.now()\n\n        observersRef.current.forEach(o => {\n            if(o.keybind === e.key) {\n                e.preventDefault()\n                const abilityCooldownRemaining = o.getRemainingCooldown()\n                const globalCooldownRemaining = globalCooldownRef.current ? globalCooldownRef.current - (now - globalCooldownStartTimeRef.current) : 0\n                const remaining = o.ignoresGcd ? 0 : Math.max(abilityCooldownRemaining, globalCooldownRemaining)\n\n                if(remaining > spellQueueWindow) return\n                if(!o.canExecute()) return\n\n                queueAbility(o.source, o.execute, remaining + 15)\n            }\n        })\n    }\n\n    const handleClick = (name, getRemainingCooldown, execute, canExecute, ignoresGcd) => {\n        const now = Date.now()\n\n        const abilityCooldownRemaining = getRemainingCooldown()\n        const globalCooldownRemaining = globalCooldownRef.current ? globalCooldownRef.current - (now - globalCooldownStartTimeRef.current) : 0\n        const remaining = ignoresGcd ? 0 : Math.max(abilityCooldownRemaining, globalCooldownRemaining)\n\n        if(remaining > spellQueueWindow) return\n        if(!canExecute()) return\n\n        queueAbility(name, execute, remaining + 15)\n    }\n\n    const calculateCooldown = (cooldown) => {\n        return cooldown/hasteRef.current\n    }\n\n    const triggerGlobalCooldown = () => {\n        let gcd = Math.max(calculateCooldown(gcdLength), gcdLength/2)\n\n        GlobalCooldown.start(gcd, triggerCooldown)\n\n        setTimeout(() => {\n            observersRef.current.forEach(o => o.notify())\n        }, 0)\n    }\n\n    const subscribe = (observer) => {\n        setObservers(o => [...o, observer])\n    }\n\n    const unsubscribe = (source) => {\n        setObservers(obs => obs.filter(o => o.source !== source))\n    }\n\n    const getAbilityCooldown = (k) => {\n        const ability = abilitySettings[k]\n        const cooldown = ability.cooldown\n\n        return ability.hasted ? calculateCooldown(cooldown) : cooldown\n    }\n\n    const getAbilityCastTime = (k) => {\n        const ability = abilitySettings[k]\n        const casttime = ability.casttime\n\n        return ability.staticCastTime ? casttime : calculateCooldown(casttime)\n    }\n\n    const queueAbility = (name, execute, remaining) => {\n\n        clearTimeout(spellQueueTimer.current)\n\n        spellQueueTimer.current = setTimeout(() => {\n            if(!observersRef.current.find(o => o.source === name)) return\n            execute()\n        }, remaining)\n    }\n\n    const makeGroupChunks = (size) => (chunks, curr, i) => {\n        const index = Math.floor(i/size)\n        chunks[index] = [...chunks[index] || [], curr]\n        return chunks\n    }\n\n    const disabledAbilities = (k) => {\n        if(abilities[k].disabled) return false\n        // if(k === \"void-bolt\" && !inVoidformRef.current) return false\n        // if(k === \"void-eruption\" && inVoidformRef.current) return false\n\n        return true\n    }\n\n    const showAbility = (k) => {\n        if(k === \"void-bolt\" && !inVoidformRef.current) return false\n        if(k === \"void-eruption\" && inVoidformRef.current) return false\n\n        return true\n    }\n\n    const buildAbilityBar = (abilities) => {\n        return Object.keys(abilities)\n            .filter(disabledAbilities)\n            .sort((k1, k2) => abilities[k1].index - abilities[k2].index)\n            //.reduce(makeGroupChunks(8), [])\n    }\n\n    return (\n    <div className=\"ability-bar-container\">\n        <div className=\"progress-bar-container\">\n            {state.casting ? <CastBar {...state.casting}/> : null}\n        </div>\n        <div className=\"ability-bar\">\n            {buildAbilityBar(abilities)\n            .map(k => {\n                return <ProgressAbility\n                    name={k}\n                    key={`ability-${k}`}\n                    {...abilities[k]}\n                    {...state.cooldowns[k]}\n                    settings={abilitySettings[k]}\n                    cooldown={getAbilityCooldown(k)}\n                    globalCooldown={state.globalCooldown}\n                    globalCooldownStartTime={state.globalCooldownStartTime}\n                    casttime={getAbilityCastTime(k)}\n                    casting={state.casting && state.casting.time && state.casting.direction}\n                    subscribe={subscribe}\n                    unsubscribe={unsubscribe}\n                    onExecute={triggerGlobalCooldown}\n                    onAbilityUpdate={triggerCooldown}\n                    onClick={handleClick}\n                    triggerEvent={triggerEvent}\n                    show={showAbility(k)}\n                    reset={reset}\n                    />\n                })}\n        </div>        \n    </div>\n    )\n}\n\nexport default AbilityBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport CooldownSweep from \"../CooldownSweep\"\nimport \"./Aura.css\"\n\nconst Aura = (props) => {\n\n    const {icon, displayName, duration, maxDuration, stacks} = props\n\n    const size = 30\n    const progress = duration && ((maxDuration-duration)/maxDuration)\n\n    return (\n        <div className=\"aura\">\n            <img\n                src={icon}\n                width={size}\n                height={size}\n            >\n            </img>\n            <div className=\"aura-text\">{stacks > 0 ? stacks : \"\"}</div>\n            {duration ? <CooldownSweep size={30} progress={progress} inverse={true}/> : null}\n            {props.children}\n        </div>\n    )\n}\n\nexport default Aura","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Aura from \"./Aura\"\n\nconst LingeringInsanity = (props) => {\n\n    const { type, startTime, haste, stacks, inVoidform, triggerEvent, ...settings} = props\n\n    const interval = 100\n    const name = \"lingeringInsanity\"\n    const displayName = \"Lingering Insanity\"\n    const icon = \"images/lingering-insanity.jpg\"\n    const defaultMaxDuration = 60000\n\n    const [maxDuration, setMaxDuration] = useState(defaultMaxDuration)\n    const [duration, setDuration] = useState(0)\n\n    const stacksRef = useRef(stacks)\n    stacksRef.current = stacks\n\n    const inVoidformRef = useRef(inVoidform)\n    inVoidformRef.current = inVoidform\n\n    const startTimeRef = useRef(startTime)\n    startTimeRef.current = startTime\n\n    const hasteRef = useRef(haste)\n    hasteRef.current = haste\n\n    const initialize = (afterVoidformEntry, hasteRetention, stacks, duration) => {\n        let currentMaxDuration = afterVoidformEntry ? defaultMaxDuration : duration\n        let voidformEntered = false\n\n        setMaxDuration(maxDuration => currentMaxDuration)\n\n        triggerEvent({\n            type: \"LINGERING_INSANITY_START\",\n            payload: {\n                haste: hasteRef.current * hasteRetention,\n                stacks: Math.ceil(stacks * hasteRetention)\n            }\n        })\n\n        return {\n            currentMaxDuration,\n            voidformEntered\n        }\n\n    }\n\n    const startStatic = () => {\n\n        const { duration, afterVoidformEntry, hasteRetention } = settings\n        \n        let state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\n\n        const timer = setInterval(() => {\n\n            const now = Date.now()\n\n            //just left voidform\n            if(state.voidformEntered && !inVoidformRef.current) {\n                state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\n\n                return\n            }\n\n            //timed out\n            if(now >= startTimeRef.current + state.currentMaxDuration) {\n                clearInterval(timer)\n                triggerEvent({\n                    type: \"LINGERING_INSANITY_END\"\n                })\n\n                return\n            }\n\n            if(!state.voidformEntered && inVoidformRef.current) \n            {\n                state.voidformEntered = true\n\n                if(afterVoidformEntry) {\n                    triggerEvent({\n                        type: \"AURA_REFRESH\",\n                        payload: {\n                            name,\n                            time: now\n                        }\n                    })\n                    setMaxDuration(maxDuration => duration)\n                    state.currentMaxDuration = duration\n                    setDuration(duration => 0)\n                    return\n                }\n           }            \n\n            setDuration(duration => now - startTimeRef.current)\n\n        }, interval)\n\n        return timer\n    }\n\n    const calculateDecayStacks = (voidformHaste, hasteDecay) => {\n        return Math.ceil(voidformHaste/hasteDecay)\n    }\n\n    const startDecay = () => {\n\n        const { decayRate, hasteDecay } = settings\n\n        let i = 0\n\n        let state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\n\n        const timer = setInterval(() => {\n\n            i += interval\n\n            const now = Date.now()\n\n            if(state.voidformEntered && !inVoidformRef.current) {\n                state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\n                i = 0\n\n                return\n            }\n\n            if(stacksRef.current <= 0) {\n                clearInterval(timer)\n                triggerEvent({\n                    type: \"LINGERING_INSANITY_END\"\n                })\n\n                return\n            }\n\n            //lose stack\n            if(i % decayRate === 0) {\n                triggerEvent({\n                    type: \"LINGERING_INSANITY_UPDATE\",\n                    payload: hasteDecay * -1\n                })\n            }\n\n            if(!state.voidformEntered && inVoidformRef.current) state.voidformEntered = true\n\n            setDuration(duration => now - startTimeRef.current)\n\n        }, interval)\n\n        return timer\n    }\n\n    useEffect(() => {\n        let timer\n\n        switch(type) {\n            case \"static\":\n                timer = startStatic()\n                break\n            case \"decay\":\n                timer = startDecay()\n                break\n        }\n\n        return () => clearInterval(timer)\n\n    }, [])\n\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDuration} stacks={stacks}/>\n}\n\nexport default LingeringInsanity","import React, {useState, useEffect, useRef} from 'react';\nimport Aura from \"./Aura\"\nimport {auraEventHandler} from \"../../utils/eventHandler\"\n\n//import \n\nconst interval = 100\n\nconst startBuff = (setDuration, startTimeRef, baseDuration, eventHandler, payload) => {\n    const {name} = payload\n    const timer = setInterval(() => {\n\n        const now = Date.now()\n\n        if(now >= startTimeRef.current + baseDuration) {\n            clearInterval(timer)\n\n            eventHandler.handleEvent(\"AURA_END\", {\n                name,\n                source: name\n            })\n\n            return\n        }\n\n        setDuration(_ => now - startTimeRef.current)\n\n    }, interval)\n\n    return timer\n}\n\nconst Buff = (props) => {\n\n    const {icon, name, displayName, startTime, setting, triggerEvent} = props\n    const {baseDuration} = setting\n\n    const [duration, setDuration] = useState(0)\n\n    const startTimeRef = useRef(startTime)\n    startTimeRef.current = startTime\n\n    useEffect(() => {\n        const eventHandler = auraEventHandler(name, triggerEvent)\n        const start = Date.now()\n\n        eventHandler.handleEvent(\"AURA_START\", {\n            name,\n            source: name,\n            duration: baseDuration,\n            time: start,\n            ...setting\n        })\n\n        const timer = startBuff(setDuration, startTimeRef, baseDuration, eventHandler, {name})\n\n        return () => clearInterval(timer)\n    }, [])\n\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={baseDuration}/>\n}\n\nexport default Buff\nexport {startBuff}","import React, { useState, useEffect, useRef } from 'react';\nimport Aura from \"./Aura\"\nimport {startBuff} from \"./Buff\"\nimport {auraEventHandler} from \"../../utils/eventHandler\"\n\nconst Voidform = (props) => {\n\n    const { type, startTime, drainRate, drainStart, hasteStack, hasteStart, maxStacks, baseDuration, paused, active, triggerEvent } = props\n    const interval = 100\n    const displayName = \"Voidform\"\n    const name = \"voidform\"\n    const icon = \"images/voidform.jpg\"\n\n    const [stacks, setStacks] = useState(type === \"insanity\" ? 1 : 0)\n    const [duration, setDuration] = useState(0)\n\n    const pausedRef = useRef(paused)\n    pausedRef.current = paused\n\n    const startTimeRef = useRef(startTime)\n    startTimeRef.current = startTime\n\n    const start = () => {\n        let n = 0\n        let frequency = Math.round(1000 / interval)\n\n        let i = 0\n\n        triggerEvent({\n            type: \"HASTE_UPDATE\",\n            payload: {\n                source: name,\n                haste: hasteStart + hasteStack\n            }\n        })\n\n        const timer = setInterval(() => {\n            let sec = interval / 1000\n            let drain = (drainStart + drainRate * n) * sec\n\n            i++\n\n            if (!pausedRef.current) {\n                n += sec\n                triggerEvent({\n                    type: \"RESOURCE_UPDATE\",\n                    payload: {\n                        resource: drain * -1\n                    }\n                })\n            }\n\n            if (i % frequency === 0 && (!maxStacks || i / frequency < maxStacks)) {\n                //gain a stack of vf\n                triggerEvent({\n                    type: \"VOIDFORM_UPDATE\",\n                    payload: hasteStack\n                })\n                setStacks(stacks => stacks + 1)\n            }\n\n        }, interval)\n\n        return timer\n    }\n\n    useEffect(() => {\n        let timer\n\n        switch(type) {\n            case \"insanity\":\n                timer = start()\n                break\n            case \"static\":\n                const time = Date.now()\n                const eventHandler = auraEventHandler(name, triggerEvent)\n\n                eventHandler.handleEvent(\"AURA_START\", {\n                    name,\n                    source: name,\n                    duration: baseDuration,\n                    time,\n                    haste: hasteStart\n                })\n\n                timer = startBuff(setDuration, startTimeRef, baseDuration, eventHandler, {name})\n            default:\n        }\n\n        return () => {\n            clearInterval(timer)\n\n            triggerEvent({\n                type: \"VOIDFORM_END\",\n                payload: {\n                    time: Date.now(),\n                    startingHaste: hasteStart\n                }\n            })\n\n            triggerEvent({\n                type: \"RESOURCE_UPDATE\",\n                payload: {\n                    resource: 0\n                }\n            })\n        }\n    }, [active])\n\n    return <Aura icon={icon} displayName={displayName} stacks={stacks} duration={duration} maxDuration={baseDuration} />\n}\n\nexport default Voidform","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Aura from \"./Aura\"\n\nconst DamageOverTime = (props) => {\n\n    const {icon, name, displayName, startTime, baseDuration, maxDuration, ticks, resource, haste, hasted, triggerEvent} = props\n\n    const interval = 100\n\n    const [duration, setDuration] = useState(0)\n\n    const startTimeRef = useRef(startTime)\n    startTimeRef.current = startTime\n\n    const maxDurationRef = useRef(maxDuration)\n    maxDurationRef.current = maxDuration\n\n    const hasteRef = useRef(haste)\n    hasteRef.current = haste\n\n    const calculateNextTickTime = (now) => {\n        //console.log(\"Haste: \" + hasteRef.current)\n        return (baseDuration/ticks)/(hasted && hasteRef.current || 1) + now\n\n    }\n\n    useEffect(() => {\n        let start = Date.now()\n        let tickTime = calculateNextTickTime(start)\n\n        triggerEvent({\n            type: \"AURA_BEGIN\",\n            payload: {\n                name,\n                duration: baseDuration,\n                time: start,\n                tickTime\n            }\n        })\n\n        const timer = setInterval(() => {\n\n            const now = Date.now()\n\n            if(now >= startTimeRef.current + maxDurationRef.current) {\n                clearInterval(timer)\n                triggerEvent({\n                    type: \"RESOURCE_UPDATE\",\n                    payload: {\n                        resource\n                    }\n                })\n                triggerEvent({\n                    type: \"AURA_END\",\n                    payload: {\n                        name\n                    }\n                })\n                return\n            }\n\n            if(now >= tickTime) {\n                //console.log(\"Tick!\")\n                const endTime = startTimeRef.current + maxDurationRef.current\n                tickTime = Math.min(calculateNextTickTime(now), endTime)\n\n                triggerEvent({\n                    type: \"RESOURCE_UPDATE\",\n                    payload: {\n                        resource\n                    }\n                })\n                triggerEvent({\n                    type: \"AURA_TICK\",\n                    payload: {\n                        name,\n                        tickTime\n                    }\n                })\n            }\n\n            setDuration(duration => now - startTimeRef.current)\n\n        }, interval)\n\n        return () => clearInterval(timer)\n    }, [])\n\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDurationRef.current}/>\n}\n\nexport default DamageOverTime","const whatIs = {\n    cooldown: \"The amount of time, in seconds, it takes for an ability to be able to be recast.\",\n    charges: \"The number of times an ability may be cast while it is on cooldown.\",\n    abilityHasted: \"An ability that is hasted has its cooldown reduced by haste.\",\n    auraHasted: \"An aura that is hasted has its period reduced by haste.\",\n    resourceCast: \"The amount of resource an ability will generate upon a successful cast.\",\n    resourceChannel: \"The amount of resource an ability will generate over its complete channel period.\",\n    resourceAura: \"The amount of resource an aura will generate every time its effect triggers.\",\n    resourceGeneration: \"Increases the amount of resource generated from abilities while an aura is active.\",\n    cost: \"The amount of resource required to cast an ability. Casting the ability will spend the resource cost.\",\n    resourceCostType: \"Resource cost has two types.\\nStatic - A static amount of resource is required to cast the ability.\\nDump - Casting the ability spends all resource up to the amount specified by its cost.\",\n    castTime: \"The amount of time, in seconds, it takes for an ability to be executed.\",\n    channelTime: \"The amount of time, in seconds, it takes for an ability's channel to complete.\",\n    ticks: \"The number of times a channel generates resources over its duration.\",\n    mindSearTargetCount: \"The number of targets Mind Sear will hit. Mind Sear generates more resource per additional target.\",\n    voidBoltRankTwo: \"An extra rank coming to Void Bolt in Shadowlands. It allows Void Bolt to be cast during Mind Flay, without canceling it.\",\n    voidBoltExtension: \"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast.\",\n    voidformThreshold: \"The amount of Insanity that is required to cast Void Eruption out of Voidform.\",\n    voidformCooldownReduction: \"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform.\",\n    requireVoidform: \"Must be in Voidform in order to cast the ability.\",\n    requireNoVoidform: \"Must be out of Voidform in order to cast the ability.\",\n    haste: \"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate.\",\n    startingInsanity: \"The amount of Insanity provided out of combat.\",\n    voidformType: \"Voidform has two types.\\nInsanity - Insanity will drain and the aura will end when insanity reaches zero.\\nStatic - The aura has a fixed duration.\",\n    voidformStartingDrain: \"The starting amount of Insanity being drained every second while in Voidform.\",\n    voidformDrainRate: \"The amount of increasing Insanity drained every second while in Voidform.\",\n    voidformStartingHaste: \"The amount of haste, in percent, that is granted at the start of Voidform.\",\n    voidformHasteStack: \"The amount of haste, in percent, that every stack of Voidform grants.\",\n    voidformMaximumStacks: \"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing.\",\n    voidformGainInsanity: \"While in Voidform, if enabled spells will generate insanity, otherwise they won't.\",\n    lingeringInsanityType: \"Lingering Insanity has two types.\\nStatic - The length of the aura and haste from stacks are constant.\\nDecay - Haste stacks are lost over the aura's duration at a certain rate.\",\n    lingeringInsanityDuration: \"An option for type 'Static'. This is the amount of time, in seconds, that the aura will last.\",\n    lingeringInsanityAfterVoidformEntry: \"An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform.\",\n    lingeringInsanityHasteRetention: \"An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform.\",\n    lingeringInsanityDecayRate: \"An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost.\",\n    lingeringInsanityHasteDecay: \"An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack.\",\n    auraDuration: \"The amount of time, in seconds, that an aura's effect will last.\",\n    auraTicks: \"The number of times an aura will trigger its effect over its duration.\",\n    auraHaste: \"The amount of haste, in percent, that is granted while an aura is active\"\n}\n\nconst commonOptions = {\n    cooldown: {\n        key: \"cooldown\",\n        displayName: \"Cooldown\",\n        type: \"time\",\n        whatIs: whatIs.cooldown,\n        unit: \"sec\"\n    },\n    charges: {\n        key: \"charges\",\n        displayName: \"Charges\",\n        type: \"number\",\n        whatIs: whatIs.charges\n    },\n    hasted: {\n        key: \"hasted\",\n        displayName: \"Hasted\",\n        type: \"boolean\",\n        whatIs: whatIs.abilityHasted\n    },\n    resourceCast: {\n        key: \"resource\",\n        displayName: \"Resource\",\n        type: \"number\",\n        whatIs: whatIs.resourceCast,\n        unit: \"insanity\"\n    },\n    resourceChannel: {\n        key: \"resource\",\n        displayName: \"Resource\",\n        type: \"number\",\n        whatIs: whatIs.resourceChannel,\n        unit: \"insanity\"\n    },\n    cost: {\n        key: \"resourceCost\",\n        displayName: \"Cost\",\n        type: \"number\",\n        whatIs: whatIs.cost,\n        unit: \"insanity\"\n    },\n    castTime: {\n        key: \"casttime\",\n        displayName: \"Cast Time\",\n        type: \"time\",\n        whatIs: whatIs.castTime,\n        unit: \"sec\"\n    },\n    channelTime: {\n        key: \"casttime\",\n        displayName: \"Channel Time\",\n        type: \"time\",\n        whatIs: whatIs.channelTime,\n        unit: \"sec\"\n    },\n    ticks: {\n        key: \"ticks\",\n        displayName: \"Ticks\",\n        type: \"number\",\n        whatIs: whatIs.ticks\n    },\n    auraDuration: {\n        key: \"baseDuration\",\n        displayName: \"Duration\",\n        type: \"time\",\n        whatIs: whatIs.auraDuration\n    },\n    auraTicks: {\n        key: \"ticks\",\n        displayName: \"Ticks\",\n        type: \"number\",\n        whatIs: whatIs.auraTicks\n    },\n    auraResource: {\n        key: \"resource\",\n        displayName: \"Resource\",\n        type: \"number\",\n        whatIs: whatIs.resourceAura\n    }\n}\n\n\nexport const abilityOptions = {\n    \"void-bolt\": [\n        commonOptions.cooldown,\n        commonOptions.hasted,\n        commonOptions.charges,\n        commonOptions.resourceCast,\n        // {\n        //     key: \"rankTwo\",\n        //     displayName: \"Rank 2\",\n        //     type: \"boolean\",\n        //     whatIs: whatIs.voidBoltRankTwo\n        // },\n        {\n            key: \"extension\",\n            displayName: \"DoT Extension\",\n            type: \"time\",\n            whatIs: whatIs.voidBoltExtension\n        }\n    ],\n    \"void-eruption\": [\n        commonOptions.cooldown,\n        commonOptions.castTime,\n        {\n            key: \"resourceCost\",\n            displayName: \"Insanity Threshold\",\n            type: \"number\",\n            whatIs: whatIs.voidformThreshold\n        }\n    ],\n    \"mind-flay\": [\n        commonOptions.channelTime,\n        commonOptions.resourceChannel,\n        commonOptions.ticks\n    ],\n    \"mind-sear\": [\n        commonOptions.channelTime,\n        commonOptions.resourceChannel,\n        commonOptions.ticks,\n        {\n            key: \"targetCount\",\n            displayName: \"Target Count\",\n            type: \"number\",\n            whatIs: whatIs.mindSearTargetCount\n        }\n    ],\n    \"mind-blast\": [\n        commonOptions.cooldown,\n        commonOptions.charges,\n        commonOptions.castTime,\n        commonOptions.hasted,\n        commonOptions.resourceCast,\n        {\n            key: \"cdr\",\n            displayName: \"Voidform Cooldown Reduction\",\n            type: \"time\",\n            whatIs: whatIs.voidformCooldownReduction\n        }\n    ],\n    \"shadow-word-death\": [\n        commonOptions.cooldown,\n        commonOptions.charges,\n        commonOptions.hasted,\n        commonOptions.resourceCast\n    ],\n    \"void-torrent\": [\n        commonOptions.cooldown,\n        commonOptions.channelTime,\n        commonOptions.resourceChannel,\n        commonOptions.ticks,\n        {\n            key: \"requireVoidform\",\n            displayName: \"Require Voidform\",\n            type: \"boolean\",\n            whatIs: whatIs.requireVoidform\n        }\n    ],\n    \"shadow-word-pain\": [\n        commonOptions.resourceCast\n    ],\n    \"vampiric-touch\": [\n        commonOptions.castTime,\n        commonOptions.resourceCast\n    ],\n    \"devouring-plague\": [\n        {\n            key: \"costType\",\n            displayName: \"Cost Type\",\n            type: \"select\",\n            options: [{\n                value: \"static\",\n                displayName: \"Static\"\n            },{\n                value: \"dump\",\n                displayName: \"Dump\"\n            }],\n            whatIs: whatIs.resourceCostType\n        },\n        commonOptions.cooldown,\n        commonOptions.cost,\n        commonOptions.resourceCast,\n        {\n            key: \"requireNoVoidform\",\n            displayName: \"Require No Voidform\",\n            type: \"boolean\",\n            whatIs: whatIs.requireNoVoidform\n        }\n    ],\n    \"shadowfiend\": [\n        commonOptions.cooldown,\n        commonOptions.resourceCast\n    ],\n    \"power-infusion\": [\n        commonOptions.cooldown\n    ]\n}\n\nexport const auraOptions = {\n    \"stats\": [\n        {\n            key: \"haste\",\n            displayName: \"Haste\",\n            type: \"percent\",\n            whatIs: whatIs.haste\n        },\n        {\n            key: \"startingInsanity\",\n            displayName: \"Starting Insanity\",\n            type: \"number\",\n            whatIs: whatIs.startingInsanity\n        }\n    ],\n    \"voidform\": [\n        {\n            key: \"type\",\n            displayName: \"Aura Type\",\n            type: \"select\",\n            options: [{\n                value: \"insanity\",\n                displayName: \"Insanity\"\n            },{\n                value: \"static\",\n                displayName: \"Static\"\n            }],\n            whatIs: whatIs.voidformType\n        },\n        {\n            key: \"drainStart\",\n            displayName: \"Starting Insanity Drain\",\n            type: \"float\",\n            unit: \"/sec\",\n            whatIs: whatIs.voidformStartingDrain,\n        },\n        {\n            key: \"drainRate\",\n            displayName: \"Insanity Drain Rate\",\n            type: \"float\",\n            unit: \"/sec\",\n            whatIs: whatIs.voidformDrainRate\n        },\n        {\n            key: \"hasteStart\",\n            displayName: \"Voidform Starting Haste\",\n            type: \"percent\",\n            whatIs: whatIs.voidformStartingHaste\n        },\n        {\n            key: \"hasteStack\",\n            displayName: \"Voidform Haste Per Stack\",\n            type: \"percent\",\n            whatIs: whatIs.voidformHasteStack\n        },\n        {\n            key: \"maxStacks\",\n            displayName: \"Maximum Voidform Stacks\",\n            type: \"number\",\n            whatIs: whatIs.voidformMaximumStacks\n        },\n        {\n            key: \"gainInsanity\",\n            displayName: \"Gain Insanity\",\n            type: \"boolean\",\n            whatIs: whatIs.voidformGainInsanity\n        },\n        {\n            ...commonOptions.auraDuration,\n            whatIs: `An option for type 'Static'. ${whatIs.auraDuration}`\n        }\n    ],\n    \"lingeringInsanity\": [\n        {\n            key: \"type\",\n            displayName: \"Aura Type\",\n            type: \"select\",\n            options: [{\n                value: \"static\",\n                displayName: \"Static\"\n            },{\n                value: \"decay\",\n                displayName: \"Decay\"\n            }],\n            whatIs: whatIs.lingeringInsanityType\n        },\n        {\n            key: \"duration\",\n            displayName: \"Aura Duration\",\n            type: \"time\",\n            whatIs: whatIs.lingeringInsanityDuration\n        },\n        {\n            key: \"afterVoidformEntry\",\n            displayName: \"After Voidform Entry\",\n            type: \"boolean\",\n            whatIs: whatIs.lingeringInsanityAfterVoidformEntry\n        },\n        {\n            key: \"hasteRetention\",\n            displayName: \"Haste Retained\",\n            type: \"percent\",\n            whatIs: whatIs.lingeringInsanityHasteRetention\n        },\n        {\n            key: \"decayRate\",\n            displayName: \"Stack Decay Rate\",\n            type: \"time\",\n            whatIs: whatIs.lingeringInsanityDecayRate\n        },\n        {\n            key: \"hasteDecay\",\n            displayName: \"Haste Decay Amount\",\n            type: \"percent\",\n            whatIs: whatIs.lingeringInsanityHasteDecay\n        }\n    ],\n    \"shadow-word-pain\": [\n        commonOptions.auraDuration,\n        commonOptions.auraTicks,\n        commonOptions.auraResource\n    ],\n    \"vampiric-touch\": [\n        commonOptions.auraDuration,\n        commonOptions.auraTicks,\n        commonOptions.auraResource\n    ],\n    \"devouring-plague\": [\n        commonOptions.auraDuration,\n        commonOptions.auraTicks,\n        commonOptions.auraResource,\n        {\n            key: \"hasted\",\n            displayName: \"Hasted\",\n            type: \"boolean\",\n            whatIs: whatIs.auraHasted\n        }\n    ],\n    \"shadowfiend\": [\n        commonOptions.auraResource\n    ],\n    \"power-infusion\": [\n        commonOptions.auraDuration,\n        {\n            key: \"haste\",\n            displayName: \"Haste\",\n            type: \"percent\",\n            whatIs: whatIs.auraHaste\n        },\n        {\n            key: \"resourceGen\",\n            displayName: \"Resource Generation\",\n            type: \"percent\",\n            whatIs: whatIs.resourceGeneration\n        }\n    ]\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport LingeringInsanity from \"./LingeringInsanity\"\nimport Voidform from \"./Voidform\"\nimport DamageOverTime from './DamageOverTime';\nimport Buff from \"./Buff\"\nimport { auraOptions } from '../../lib/options';\n\nconst dots = [\n  {\n    name: \"shadow-word-pain\",\n    icon: \"images/shadow-word-pain.jpg\",\n    displayName: \"Shadow Word: Pain\"\n  },\n  {\n    name: \"vampiric-touch\",\n    icon: \"images/vampiric-touch.jpg\",\n    displayName: \"Vampiric Touch\"\n  },\n  {\n    name: \"devouring-plague\",\n    icon: \"images/devouring-plague.jpg\",\n    displayName: \"Devouring Plague\"\n  },\n  {\n    name: \"shadowfiend\",\n    icon: \"images/shadowfiend.jpg\",\n    displayName: \"Shadowfiend\"\n  }\n]\n\nconst buffs = [\n  {\n    name: \"power-infusion\",\n    icon: \"images/power-infusion.jpg\",\n    displayName: \"Power Infusion\"\n  },\n  {\n    name: \"bloodlust\",\n    icon: \"images/bloodlust.jpg\",\n    displayName: \"Bloodlust\"\n  }\n]\n\nconst AuraBar = (props) => {\n\n    const {auras, triggerEvent, settings, haste} = props\n    const {lingeringInsanity, voidform} = settings \n\n    const [state, triggerAuraEvent] = useReducer((state, action) => {\n\n    })\n\n    return (\n        <div className=\"aura-container\">\n          {auras.voidform.active \n          ? <Voidform \n            {...voidform}\n            {...auras.voidform}\n            triggerEvent={triggerEvent}/> \n          : null}\n          {auras.lingeringInsanity.active\n          ? <LingeringInsanity \n            {...lingeringInsanity}\n            {...auras.lingeringInsanity} \n            inVoidform={auras.voidform.active} \n            triggerEvent={triggerEvent}/>\n          : null}\n          {dots.map(dot => \n            auras[dot.name].active\n            ? <DamageOverTime\n                {...dot}\n                {...auras[dot.name]}\n                {...settings[dot.name]}\n                haste={haste}\n                triggerEvent={triggerEvent} \n              />\n            : null\n          )}\n          {buffs.map(buff => \n            auras[buff.name].active\n            ? <Buff\n                {...buff}\n                {...auras[buff.name]}\n                setting={settings[buff.name]}\n                triggerEvent={triggerEvent} \n              />\n            : null\n          )}\n        </div>       \n    )\n}\n\nexport default AuraBar\n\n\n","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport {useCleanup} from \"../../utils/hooks\"\n\nimport \"./Panel.css\"\n\nconst Panel = (props) => {\n\n    const {panel, currentPanel, reset, onClick, handleClose, header, panelClass, style} = props\n\n    useCleanup(panel, currentPanel, reset)\n\n    return (\n        <div>\n            <div className=\"panel-header hover-pointer\" onClick={() => onClick(panel)}>{header}</div>\n            <div className={`panel ${panelClass}`} style={style}>\n                <button className=\"panel-button panel-exit-button\" onClick={handleClose}>x</button>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default Panel","import {useEffect, useRef} from \"react\"\n\nexport const useCleanup = (target, value, cleanup) => {\n    const ref = useRef()\n\n    useEffect(() => {\n        if(ref.current === target) {\n            cleanup()\n        }       \n        ref.current = value\n    }, [value])\n}","const defaultAbilitySettings = {\n    \"mind-flay\": {\n        cooldown: 0,\n        resource: 18,\n        hasted: true,\n        casttime: 4500,\n        ticks: 6,\n        type: \"channel\",\n    },\n    \"mind-sear\": {\n        cooldown: 0,\n        resource: 6,\n        hasted: true,\n        casttime: 4500,\n        ticks: 6,\n        targetCount: 1,\n        type: \"channel\",\n    },\n    \"void-bolt\": {\n        cooldown: 4500,\n        resource: 12,\n        hasted: true,\n        rankTwo: false,\n        type: \"instant\",\n        charges: 1,\n        extension: 3000\n    },\n    \"void-eruption\": {\n        cooldown: 90000,\n        type: \"cast\",\n        casttime: 1500,\n        resourceCost: 0,\n    },\n    \"mind-blast\": {\n        cooldown: 7500,\n        resource: 8,\n        hasted: true,\n        type: \"cast\",\n        casttime: 1500,\n        charges: 1,\n        cdr: 0\n    },\n    \"shadow-word-death\": {\n        cooldown: 20000,\n        resource: 0,\n        hasted: true,\n        type: \"instant\",\n        charges: 1,\n    },\n    \"void-torrent\": {\n        cooldown: 30,\n        resource: 60,\n        type: \"channel\",\n        casttime: 3000,\n        staticCastTime: true,\n        ticks: 4,\n        requireVoidform: false\n    },\n    \"shadow-word-pain\": {\n        cooldown: 0,\n        resource: 4,\n        type: \"instant\"\n    },\n    \"vampiric-touch\": {\n        cooldown: 0,\n        resource: 5,\n        type: \"cast\",\n        casttime: 1500\n    },\n    \"devouring-plague\": {\n        costType: \"static\",\n        cooldown: 0,\n        resource: 0,\n        resourceCost: 50,\n        requireNoVoidform: false,\n        type: \"instant\"\n    },\n    \"shadowfiend\": {\n        cooldown: 180000,\n        resource: 3,\n        type: \"instant\"\n    },\n    \"power-infusion\": {\n        cooldown: 120000,\n        type: \"instant\"\n    },\n    \"bloodlust\": {\n        cooldown: 300000,\n        ignoreGcd: true,\n        type: \"instant\"\n    }\n}\n\nexport default defaultAbilitySettings","const defaultAuraSettings = {\n    stats: {\n        displayName: \"Passive\",\n        haste: 0,\n        startingInsanity: 0\n    },\n    voidform: {\n        displayName: \"Voidform\",\n        type: \"static\",\n        drainStart: 0,\n        drainRate: 0,\n        hasteStart: 0,\n        hasteStack: 0,\n        maxStacks: 0,\n        gainInsanity: true,\n        baseDuration: 15000\n    },\n    lingeringInsanity: {\n        displayName: \"Lingering Insanity\",\n        type: \"static\",\n        duration: 0,\n        afterVoidformEntry: false,\n        hasteRetention: 1,\n        decayRate: 3000,\n        hasteDecay: .01\n    },\n    \"shadow-word-pain\": {\n        displayName: \"Shadow Word: Pain\",\n        baseDuration: 16000,\n        ticks: 8,\n        resource: 0,\n        hasted: true,\n        type: \"pandemic\"\n    },\n    \"vampiric-touch\": {\n        displayName: \"Vampiric Touch\",\n        baseDuration: 21000,\n        ticks: 7,\n        resource: 0,\n        hasted: true,\n        type: \"pandemic\"\n    },\n    \"devouring-plague\": {\n        displayName: \"Devouring Plague\",\n        baseDuration: 6000,\n        ticks: 2,\n        resource: 0,\n        hasted: true,\n        type: \"rolling\"\n    },\n    \"shadowfiend\": {\n        displayName: \"Shadowfiend\",\n        baseDuration: 15000,\n        ticks: 10,\n        resource: 3\n    },\n    \"power-infusion\": {\n        displayName: \"Power Infusion\",\n        baseDuration: 20000,\n        haste: .25,\n        resourceGen: 0\n    },\n    \"bloodlust\": {\n        displayName: \"Bloodlust\",\n        baseDuration: 40000,\n        haste: .3\n    }\n}\n\nexport default defaultAuraSettings","import {Base64} from \"js-base64\"\nimport abilitySettings from \"../lib/abilitySettings\"\nimport auraSettings from \"../lib/auraSettings\"\n\nconst parseAbility = (ability, key) => {\n    let abilitySetting = abilitySettings[key]\n    let result = Object.keys(abilitySetting).reduce((obj, k) => {\n        let userSetting = ability[k]\n        //might want to look at options\n        let setting = abilitySetting[k]\n\n        //if(userSetting === null || userSetting === undefined) throw new Error(\"Missing ability setting in input \" + k)\n\n        if(userSetting && typeof userSetting !== typeof setting) throw new Error(\"Ability setting has invalid format\")\n        \n        obj[k] = userSetting !== undefined ? userSetting : setting\n\n        return obj\n    }, {})\n\n    return result\n}\n\nconst parseAbilitySettings = (abilities) => {\n    let result = {}\n\n    Object.keys(abilitySettings).forEach(a => {\n        let ability = abilities[a] || abilitySettings[a]\n\n        result[a] = parseAbility(ability, a)\n    })\n\n    return result\n}\n\nconst parseAura = (aura, key) => {\n    let auraSetting = auraSettings[key]\n\n    let result = Object.keys(auraSetting).reduce((obj, k) => {\n        let userSetting = aura[k]\n        let setting = auraSetting[k]\n\n        //if(userSetting === null || auraSetting === undefined) throw new Error(\"Missing aura setting in input \" + k)\n        if(userSetting && typeof userSetting !== typeof setting) throw new Error(`Aura setting has invalid format`)\n\n        obj[k] = userSetting !== undefined ? userSetting : setting\n\n        return obj\n    }, {})\n\n    return result\n}\n\nconst parseAuraSettings = (auras) => {\n    let result = {}\n    Object.keys(auraSettings).forEach(a => {\n        let aura = auras[a] || auraSettings[a]\n\n        //if(!aura) throw new Error(\"Missing aura in input\")\n\n        result[a] = parseAura(aura, a)\n    })\n\n    return result\n}\n\nexport const importSettings = (settings, includeKeybinds, includeSpellOrder) => {\n\n    try {\n        let parsedSettings = JSON.parse(Base64.decode(settings))\n\n        let abilitySettings = parseAbilitySettings(parsedSettings.abilitySettings)\n        let auraSettings = parseAuraSettings(parsedSettings.auraSettings)\n        let abilityConfig = formatAbilityConfig(parsedSettings.abilityConfig, includeKeybinds, includeSpellOrder)\n\n        return {\n            abilitySettings,\n            auraSettings,\n            abilityConfig\n        }\n    }\n\n    catch(e) {\n        throw new Error(\"An error occurred while parsing input data.\\nReason: \" + e.message)\n    }\n}\n\nconst formatSingleAbilitySetting = (setting) => {\n    let result = Object.keys(setting).reduce((obj, k) => {\n        obj[k] = setting[k]\n        return obj\n    }, {})\n\n    return result\n}\n\nconst formatAbilitySettingsForExport = (settings) => {\n    let result = Object.keys(settings).reduce((obj, k) => {\n        let ability = settings[k]\n        let formattedAbility = formatSingleAbilitySetting(ability)\n        obj[k] = formattedAbility\n        return obj\n    }, {})\n\n    return result\n}\n\nconst formatAbilityConfig = (settings, includeKeybinds, includeSpellOrder) => {\n    let result = Object.keys(settings).reduce((result, k) => {\n        let {keybind, disabled, index} = settings[k]\n\n        result[k] = {disabled: !!disabled}\n        if(includeKeybinds && keybind) result[k].keybind = keybind\n        if(includeSpellOrder && index) result[k].index = index\n        \n        return result\n    }, {})\n\n    return result\n}\n\nexport const exportSettings = (currentSettings) => {\n    let formattedAbilitySettings = formatAbilitySettingsForExport(currentSettings.abilitySettings)\n    let formattedAbilityConfig = formatAbilityConfig(currentSettings.abilities, true, true)\n\n    let combined =  {\n        abilitySettings: formattedAbilitySettings,\n        auraSettings: currentSettings.auraSettings,\n        abilityConfig: formattedAbilityConfig\n    }\n\n    let result = Base64.encode(JSON.stringify(combined))\n\n    return result\n}","import live from \"./live\"\nimport beta from \"./beta\"\nimport legionENVoidlord from \"./legionENVoidlord\"\nimport legionAntorus from \"./legionAntorus\"\nimport ryeshot from \"./ryeshot\"\nimport yvaelle from \"./yvaelle\"\n\nexport default {\n    live,\n    beta,\n    legionENVoidlord,\n    legionAntorus,\n    ryeshot,\n    yvaelle\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Live\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n        \"void-eruption\": {\n            ...defaultAbilitySettings[\"void-eruption\"],\n            casttime: 1500,\n            resourceCost: 60,\n        },\n        \"mind-blast\": {\n            ...defaultAbilitySettings[\"mind-blast\"],\n            cooldown: 9000,\n            resource: 15,\n            charges: 2\n        },\n        \"shadow-word-death\": {\n            ...defaultAbilitySettings[\"shadow-word-death\"],\n            charges: 2\n        }\n    },\n    auraSettings: {\n        ...defaultAuraSettings\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": {},\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": { disabled: true },\n        \"void-torrent\": { disabled: true },\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": { disabled: true },\n        \"shadowfiend\": {},\n        \"power-infusion\": { disabled: true }\n    }\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Shadowlands Beta\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n    },\n    auraSettings: {\n        ...defaultAuraSettings\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": {},\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": {},\n        \"void-torrent\": { disabled: true },\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": {},\n        \"shadowfiend\": {}\n    }\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Legion: EN + Void Lord\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n        \"void-eruption\": {\n            ...defaultAbilitySettings[\"void-eruption\"],\n            casttime: 2500,\n            resourceCost: 90,\n        },\n        \"void-torrent\": {\n            cooldown: 60000,\n            resource: 0,\n            type: \"channel\",\n            casttime: 4000,\n            staticCastTime: true,\n            ticks: 10,\n            requireVoidform: true\n        },\n        \"shadowfiend\": {\n            cooldown: 180000,\n            resource: 0,\n            type: \"instant\"\n        }\n    },\n    auraSettings: {\n        ...defaultAuraSettings,\n        voidform: {\n            displayName: \"Voidform\",\n            drainStart: 6,\n            drainRate: .66,\n            hasteStart: 0,\n            hasteStack: .01,\n            maxStacks: 0\n        },\n        lingeringInsanity: {\n            displayName: \"Lingering Insanity\",\n            type: \"static\",\n            duration: 8000,\n            afterVoidformEntry: true,\n            hasteRetention: 1,\n            decayRate: 1000,\n            hasteDecay: .01\n        },\n        \"shadowfiend\": {\n            displayName: \"Shadowfiend\",\n            baseDuration: 15000,\n            ticks: 10,\n            resource: 0\n        }\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": {},\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": {},\n        \"void-torrent\": {},\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": { disabled: true },\n        \"power-infusion\": { disabled: true }\n    }\n\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Legion: Antorus\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n        \"void-eruption\": {\n            ...defaultAbilitySettings[\"void-eruption\"],\n            casttime: 1500,\n            resourceCost: 65\n        },\n        \"mind-blast\": {\n            cooldown: 7500,\n            resource: 12,\n            hasted: true,\n            type: \"cast\",\n            casttime: 1500,\n            charges: 2,\n            cdr: 1500\n        },\n        \"void-torrent\": {\n            cooldown: 60000,\n            resource: 0,\n            type: \"channel\",\n            casttime: 4000,\n            staticCastTime: true,\n            ticks: 10,\n            requireVoidform: true\n        },\n        \"shadowfiend\": {\n            cooldown: 60000,\n            resource: 6,\n            type: \"instant\"\n        }\n    },\n    auraSettings: {\n        ...defaultAuraSettings,\n        stats: {\n            ...defaultAuraSettings.stats,\n            displayName: \"Stats\",\n            haste: .4\n        },\n        voidform: {\n            displayName: \"Voidform\",\n            drainStart: 6,\n            drainRate: .66,\n            hasteStart: 0,\n            hasteStack: .01,\n            maxStacks: 0\n        },\n        lingeringInsanity: {\n            displayName: \"Lingering Insanity\",\n            type: \"decay\",\n            duration: 60000,\n            afterVoidformEntry: false,\n            hasteRetention: 1,\n            decayRate: 1000,\n            hasteDecay: .01\n        },\n        \"shadowfiend\": {\n            displayName: \"Shadowfiend\",\n            baseDuration: 24000,\n            ticks: 16,\n            resource: 6\n        }\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": { disabled: true },\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": {},\n        \"void-torrent\": {},\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": { disabled: true },\n        \"power-infusion\": { disabled: true }\n    }\n\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Ryeshot's Shadowlands\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n        \"void-bolt\": {\n            ...defaultAbilitySettings[\"void-bolt\"],\n            resource: 15\n        },\n        \"mind-blast\": {\n            ...defaultAbilitySettings[\"mind-blast\"],\n            cooldown: 7500,\n            resource: 25,\n            charges: 2,\n            cdr: 0\n        },\n        \"shadow-word-death\": {\n            ...defaultAbilitySettings[\"shadow-word-death\"],\n            cooldown: 20000,\n            resource: 0,\n            hasted: true\n        },\n        \"devouring-plague\": {\n            ...defaultAbilitySettings[\"devouring-plague\"],\n            costType: \"dump\",\n            resourceCost: 100\n        }\n    },\n    auraSettings: {\n        ...defaultAuraSettings,\n        stats: {\n            ...defaultAuraSettings.stats,\n            haste: .15,\n            startingInsanity: 30\n        },\n        voidform: {\n            ...defaultAuraSettings.voidform,\n            drainRate: .66,\n            hasteStart: .1,\n            hasteStack: .01\n        },\n        lingeringInsanity: {\n            ...defaultAuraSettings.lingeringInsanity,\n            type: \"static\",\n            duration: 0\n        },\n        \"devouring-plague\": {\n            ...defaultAuraSettings[\"devouring-plague\"],\n            baseDuration: 6000,\n            ticks: 6,\n            resource: 5,\n            hasted: false\n        }\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": { disabled: true },\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": { disabled: true },\n        \"void-torrent\": { disabled: true },\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": {},\n        \"shadowfiend\": { disabled: true },\n        \"power-infusion\": { disabled: true }\n    }\n}","import defaultAbilitySettings from \"../abilitySettings\"\nimport defaultAuraSettings from \"../auraSettings\"\n\nexport default {\n    displayName: \"Yvaelle's Shadowlands\",\n    abilitySettings: {\n        ...defaultAbilitySettings,\n        \"void-eruption\": {\n            ...defaultAbilitySettings[\"void-eruption\"],\n            resourceCost: 0\n        },\n        \"mind-blast\": {\n            ...defaultAbilitySettings[\"mind-blast\"],\n            cooldown: 7500,\n            resource: 15,\n            charges: 2\n        }\n    },\n    auraSettings: {\n        ...defaultAuraSettings,\n        stats: {\n            ...defaultAuraSettings.stats,\n            haste: .35\n        },\n        voidform: {\n            ...defaultAuraSettings.voidform,\n            drainStart: 5,\n            drainRate: 0,\n            hasteStart: .15,\n            hasteStack: 0,\n            gainInsanity: false\n        },\n        lingeringInsanity: {\n            ...defaultAuraSettings.lingeringInsanity,\n            type: \"static\",\n            duration: 0\n        }\n    },\n    abilities: {\n        \"mind-flay\": {},\n        \"mind-sear\": { disabled: true },\n        \"void-bolt\": {},\n        \"void-eruption\": {},\n        \"mind-blast\": {},\n        \"shadow-word-death\": { disabled: true },\n        \"void-torrent\": { disabled: true },\n        \"shadow-word-pain\": {},\n        \"vampiric-touch\": {},\n        \"devouring-plague\": { disabled: true },\n        \"shadowfiend\": { disabled: true },\n        \"power-infusion\": { disabled: true }\n    }\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Panel from \"./Panel\"\nimport { exportSettings, importSettings } from \"../../utils/importExport\"\nimport templates from \"../../lib/templates\"\nimport \"./Panel.css\"\n\nconst addTemplateToQueryString = (template) => {\n    const queryParams = new URLSearchParams()\n    queryParams.set(\"template\", template)\n    window.history.replaceState(null, window.document.title, `?${queryParams.toString()}`)\n}\n\nconst Templates = (props) => {\n\n    const {onChange, selected} = props\n\n    return (\n        <div style={{width: \"60%\"}}>\n            <select className=\"panel-dropdown\" value={selected} onChange={onChange}>\n                <option value={\"default\"} disabled>Choose a template...</option>\n                {Object.keys(templates).map(t => <option key={t} value={t}>{templates[t].displayName}</option>)}\n                <option key={\"custom\"} value={\"custom\"}>Custom</option>\n            </select>\n        </div>\n    )\n}\n\nconst ExportPanel = (props) => {\n\n    const {settings, onImport, currentPanel, onClick, closePanel} = props\n\n    const panel = \"export\"\n    const header = \"Import/Export Settings\"\n    const panelClass = \"left-panel\"\n    const placeholderText = \"Import settings here...\"\n    const exportTextAreaId = \"export-content\"\n    const defaultSelected = \"default\"\n    const rows = 20\n    const cols = 25\n\n    const [exportData, setExportData] = useState(\"\")\n    const [inputData, setInputData] = useState(\"\")\n    const [includeKeybinds, setIncludeKeybinds] = useState(false)\n    const [includeSpellOrder, setIncludeSpellOrder] = useState(false)\n    const [selectedTemplate, setSelectedTemplate] = useState(defaultSelected)\n\n    const handleImport = () => {\n        try {\n            const settings = importSettings(inputData, includeKeybinds, includeSpellOrder)\n            if(selectedTemplate) addTemplateToQueryString(selectedTemplate)\n            onImport(settings)\n        } catch (error) {\n            console.error(error)\n        }\n\n        setInputData(\"\")\n    }\n\n    const handleExport = () => {\n        const data = exportSettings(settings)\n\n        setExportData(data)\n    }\n\n    const handleTemplateChange = (e) => {\n        const key = e.target.value\n\n        setSelectedTemplate(key)\n\n        if(key === \"custom\") {\n            setInputData(\"\")\n            return\n        }\n\n        const {displayName, ...template} = templates[key]\n\n        const data = exportSettings({...template})\n\n        setInputData(data)\n    }\n\n    const copyToClipBoard = () => {\n        const textArea = document.getElementById(exportTextAreaId)\n\n        textArea.select()\n\n        try {\n            document.execCommand(\"copy\")\n\n        }\n        catch (err) {\n            //set the message\n        }\n    }\n\n    const handleInputChange = (e) => {\n        let data = e.target.value\n\n        setInputData(data)\n    }\n\n    const reset = () => {\n        setExportData(\"\")\n        setInputData(\"\")\n        setIncludeKeybinds(false)\n        setIncludeSpellOrder(false)\n        setSelectedTemplate(defaultSelected)\n    }\n\n    return (\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"-350px\"})`}}>\n            <div className=\"vertical-panel-content\">\n                <div className=\"panel-content-container\">\n                    <div className=\"panel-content-header\">Import Settings</div>\n                    <Templates selected={selectedTemplate} onChange={handleTemplateChange} />\n                    <textarea className=\"panel-text-area\" rows={rows} cols={cols} placeholder={placeholderText} value={inputData} onChange={handleInputChange}></textarea>\n                    <div className=\"panel-info-text-container\">\n                        <label>Include keybinds</label>\n                        <input type=\"checkbox\" onChange={() => setIncludeKeybinds(!includeKeybinds)} checked={includeKeybinds} />\n                    </div>\n                    <div className=\"panel-info-text-container\">\n                        <label>Include spell order</label>\n                        <input type=\"checkbox\" onChange={() => setIncludeSpellOrder(!includeSpellOrder)} checked={includeSpellOrder} />\n                    </div>\n                    <div className=\"panel-button-container\">\n                        <button className=\"panel-button panel-input-button\" onClick={handleImport} disabled={!inputData}>Import</button>\n                    </div>\n                </div>\n                <div className=\"panel-content-container\">\n                    <div className=\"panel-content-header\">Export Settings</div>\n                    <textarea id={exportTextAreaId} className=\"panel-text-area\" rows={rows} cols={cols} value={exportData} readOnly={true}></textarea>\n                    <div className=\"panel-button-container\">\n                        <button className=\"panel-button panel-input-button\" onClick={handleExport}>Export</button>\n                        <button className=\"panel-button panel-input-button\" onClick={copyToClipBoard} disabled={!exportData}>Copy</button>\n                    </div>\n                </div>      \n            </div> \n        </Panel>\n    )\n}\n\nexport default ExportPanel","import React, { useState } from \"react\"\n\nconst TimeTextOption = (props) => {\n    const {value, onChange} = props\n\n    const [displayValue, setDisplayValue] = useState(value/1000)\n\n    const handleChange = (e) => {\n        if(!e.target.value) return\n        onChange(parseFloat(e.target.value)*1000)\n        setDisplayValue(e.target.value)\n    }\n    \n    return <span><input className=\"setting-option-input\" type=\"number\" value={displayValue} min=\"0\" step=\".1\" onChange={handleChange} />sec</span>\n}\n\nconst NumberTextOption = (props) => {\n    const {value, onChange, unit} = props\n\n    const handleChange = (e) => {\n        if(!e.target.value) return\n        onChange(parseInt(e.target.value))\n    }\n    \n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" onChange={handleChange} /> {unit}</span>\n}\n\nconst FloatTextOption = (props) => {\n    const {value, onChange, unit} = props\n\n    const handleChange = (e) => {\n        if(!e.target.value) return\n        onChange(parseFloat(e.target.value))\n    }\n    \n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" step=\".01\" onChange={handleChange} /> {unit}</span>\n}\n\nconst PercentTextOption = (props) => {\n    const {value, onChange} = props\n\n    const [displayValue, setDisplayValue] = useState(value*100)\n\n    const handleChange = (e) => {\n        if(!e.target.value) return\n        onChange(parseFloat(e.target.value)/100)\n        setDisplayValue(e.target.value)\n    }\n\n    return <span><input className=\"setting-option-input\" type=\"number\" value={displayValue} min=\"0\" step=\".5\" onChange={handleChange} />%</span>\n}\n\nconst BooleanOption = (props) => {\n    const {value, onChange} = props\n\n    const handleChange = (e) => {\n        onChange(e.target.checked)\n    }\n\n    return <input type=\"checkbox\" defaultChecked={value} onChange={handleChange} />\n}\n\nconst SelectOption = (props) => {\n    const {value, onChange, name, options} = props\n\n    const handleChange = (e) => {\n        onChange(e.target.value)\n    }\n\n    return (\n        options.map(o => (\n            <div>\n                <input type=\"radio\" id={o.value} name={name} value={o.value} defaultChecked={o.value === value} onChange={handleChange} />\n                <label htmlFor={o.value}>{o.displayName}</label>\n            </div>\n        ))\n    )\n}\n\nexport default Option = (type, value, onChange, key, name, rest) => {\n    switch(type) {\n        case \"time\":\n            return <TimeTextOption key={key} value={value} onChange={onChange} />\n        case \"number\":\n            return <NumberTextOption key={key} value={value} onChange={onChange} {...rest} />\n        case \"float\":\n            return <FloatTextOption key={key} value={value} onChange={onChange} {...rest} />\n        case \"percent\":\n            return <PercentTextOption key={key} value={value} onChange={onChange} />\n        case \"boolean\":\n            return <BooleanOption key={key} value={value} onChange={onChange} />\n        case \"select\":\n            return <SelectOption key={key} value={value} name={name} onChange={onChange} {...rest} />\n        default:\n            return null\n    }\n}","import React from \"react\"\nimport Option from \"./optionFactory\"\nimport \"./WhatIs.css\"\nimport \"./SettingOption.css\"\n\nconst SettingOption = (props) => {\n    const {value, name, type, whatIs, displayName, onChange, onHelp, closeHelp, parentKey, ...rest} = props\n\n    const handleInputChange = (v) => {\n        onChange(name, v)\n    }\n\n    const handleOnHelp = (e) => {\n        const pos = {\n            x: e.target.offsetLeft,\n            y: e.target.offsetTop\n        }\n        onHelp(displayName, whatIs, pos)\n    }\n\n    return (\n        <div className=\"setting-option\">\n            <div>\n                <i className=\"fa fa-question-circle what-is-icon\" onMouseEnter={handleOnHelp} onMouseLeave={closeHelp}></i>\n            </div>\n            <div className=\"setting-option-header\">{displayName}</div>\n            {Option(type, value, handleInputChange, parentKey + \"-input\", name, rest)}\n        </div>\n    )\n}\n\nexport default SettingOption","import React from \"react\"\nimport \"./WhatIs.css\"\n\nconst WhatIs = (props) => {\n    const {name, text, xPos, yPos} = props\n\n    //console.log(xPos, yPos)\n    const minimumHeight = 30\n\n    const style = {\n        left: `${xPos}px`,\n        top: `${yPos+minimumHeight}px`\n    }\n    \n    return (\n        <div className=\"what-is\" style={style}>\n            <div className=\"what-is-header\">What is... {name}?</div>\n            <div className=\"what-is-description\">{text}</div> \n        </div>\n    )\n}\n\nexport default WhatIs","import React, {useState} from \"react\"\nimport SettingOption from \"./SettingOption\"\nimport WhatIs from \"./WhatIs\"\nimport \"./Panel.css\"\n\nconst CustomizeSection = (props) => {\n\n    const {name, setting, options, onChange} = props\n\n    const [showWhatIs, setShowWhatIs] = useState(false)\n    const [whatIs, setWhatIs] = useState({})\n\n    const handleChange = (optionKey, option) => {\n        const newSetting = {...setting, [optionKey]: option}\n        onChange(newSetting, name)\n    }\n\n    const handleShowWhatIs = (name, text, pos) => {\n        setShowWhatIs(true)\n        setWhatIs({\n            name,\n            text,\n            xPos: pos.x,\n            yPos: pos.y\n        })    \n    }\n\n    const closeWhatIs = () => {\n        setShowWhatIs(false)\n        setWhatIs({})\n    }\n\n    return (\n        <div className=\"customize-section\">\n            <div className=\"customoze-section-header\">{setting.displayName}</div>\n            {options.map(o => {\n            return <SettingOption {...o} key={`${name}-${o.key}`} value={setting[o.key]} name={o.key} parentKey={`${name}-${o.key}`} onChange={handleChange} onHelp={handleShowWhatIs} closeHelp={closeWhatIs}/>\n            })}\n            {showWhatIs ? <WhatIs {...whatIs}/> : null}\n        </div>\n            \n    )\n}\n\nexport default CustomizeSection","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Panel from \"./Panel\"\nimport CustomizeSection from \"./CustomizeSection\"\nimport {abilityOptions, auraOptions} from \"../../lib/options\"\nimport \"./Panel.css\"\n\nconst SettingsPanel = (props) => {\n\n    const {settings, currentPanel, didReset, onAbilitySet, onAuraSet, onClick, closePanel} = props\n\n    const {abilities, auras} = settings\n\n    const panel = \"settings\"\n    const header= \"Custom Settings\"\n    const panelClass = \"right-panel\"\n\n    const abilityButtonText = \"Update Abilities\"\n    const auraButtonText = \"Update Auras\"\n\n    const changesPendingText =\n`Changes pending...\nClick the button below to apply your changes`\n\n    const [currentAbilities, setCurrentAbilities] = useState(abilities)\n    const [currentAuras, setCurrentAuras] = useState(auras)\n    const [activeAbilitySection, setActiveAbilitySection] = useState(null)\n    const [activeAuraSection, setActiveAuraSection] = useState(null)\n    const [abilityChangesPending, setAbilityChangesPending] = useState(false)\n    const [auraChangesPending, setAuraChangesPending] = useState(false)\n\n    useEffect(() => {\n        setCurrentAuras(auras)\n        setCurrentAbilities(abilities)\n    }, [didReset])\n\n    useEffect(() => {\n        if(currentPanel !== panel) return\n        setActiveAbilitySection(Object.keys(abilities)[0])\n        setActiveAuraSection(Object.keys(auras)[0])\n    }, [currentPanel])\n\n    const handleAbilitySettingChange = (setting, key) => {\n        const newAbilities = {...currentAbilities, [key]: setting}\n        setCurrentAbilities(newAbilities)\n        setAbilityChangesPending(true)\n    }\n\n    const handleAuraSettingChange = (setting, key) => {\n        const newAuras = {...currentAuras, [key]: setting}\n        setCurrentAuras(newAuras)\n        setAuraChangesPending(true)\n    }\n\n    const handleAbilitySet = () => {\n        onAbilitySet(currentAbilities)\n        setAbilityChangesPending(false)\n    }\n\n    const handleAuraSet = () => {\n        onAuraSet(currentAuras)\n        setAuraChangesPending(false)\n    }\n\n    const showAbilityOptions = (e) => {\n        const settingKey = e.target.getAttribute(\"setting\")\n        setActiveAbilitySection(settingKey)\n    }\n\n    const showAuraOptions = (e) => {\n        const settingKey = e.target.getAttribute(\"setting\")\n        setActiveAuraSection(settingKey)\n    }\n\n    const reset = () => {\n        setCurrentAuras(auras)\n        setCurrentAbilities(abilities)\n        setAbilityChangesPending(false)\n        setAuraChangesPending(false)\n        setTimeout(() => {\n            setActiveAbilitySection(null)\n            setActiveAuraSection(null)\n        }, 500)\n    }\n\n    return (\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"350px\"}`}}>\n            <div className=\"vertical-panel-content\">\n                <div className=\"panel-content-container\">\n                    <div className=\"panel-content-header\">Customize Abilities</div>\n                    <div className=\"settings-header-container\">\n                        {Object.keys(abilities)\n                        .filter(k => abilityOptions[k])\n                        .map(k => \n                            <div key={k} className={activeAbilitySection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAbilityOptions}>{abilities[k].displayName}</div>    \n                        )}\n                    </div>\n                    {activeAbilitySection ? <CustomizeSection name={activeAbilitySection} setting={currentAbilities[activeAbilitySection]} options={abilityOptions[activeAbilitySection]} onChange={handleAbilitySettingChange}/> : null}\n                    <div className=\"panel-text-button-container\">\n                        <div className=\"panel-info-text-container\">\n                            {abilityChangesPending ? changesPendingText : null}\n                        </div>                  \n                        <div>\n                            <button className=\"panel-button\" onClick={handleAbilitySet}>{abilityButtonText}</button>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"panel-content-container\">\n                    <div className=\"panel-content-header\">Customize Auras</div>\n                        <div className=\"settings-header-container\">\n                            {Object.keys(auras)\n                            .filter(k => auraOptions[k])\n                            .map(k => \n                                <div key={k} className={activeAuraSection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAuraOptions}>{auras[k].displayName}</div>    \n                            )}\n                        </div>\n                        {activeAuraSection ? <CustomizeSection name={activeAuraSection} setting={currentAuras[activeAuraSection]} options={auraOptions[activeAuraSection]} onChange={handleAuraSettingChange}/> : null}\n                        <div className=\"panel-text-button-container\">\n                            <div className=\"panel-info-text-container\">\n                                {auraChangesPending ? changesPendingText : null}    \n                            </div>\n                            <div>\n                                <button className=\"panel-button\" onClick={handleAuraSet}>{auraButtonText}</button>   \n                            </div>  \n                        </div>            \n                </div>\n            </div>\n        </Panel>      \n    )\n}\n\nexport default SettingsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Panel from \"./Panel\"\nimport {keybinds} from \"../../lib/constants\"\nimport \"./Panel.css\"\nimport \"./Tooltip.css\"\n\nconst AbilityIndex = (props) => {\n\n    const {name, count, onChange, value} = props\n\n    const handleChange = (e) => {\n        onChange(parseInt(e.target.value), name)\n    }\n\n    return (\n        <div>\n            <select className=\"panel-dropdown\" value={value} onChange={handleChange}>\n                {[...Array(count).keys()].map(i => <option key={`${name}-index-${i}`} value={i+1}>{i+1}</option>)}\n            </select>\n        </div>\n    )\n}\n\nconst AbilityKeybindsPanel = (props) => {\n\n    const {abilities, currentPanel, onKeybind, setOrder, onToggle, onClick, closePanel} = props\n\n    const panel = \"abilitykeybinds\"\n    const header = \"Ability and Keybinds\"\n    const panelClass = \"bottom-panel\"\n\n    const defaultState = {\n        tooltip: \"\",\n        keybindText: \"\",\n        currentAbility: \"\"\n    }\n\n    const [tooltip, setTooltip] = useState(defaultState.tooltip)\n    const [keybindText, setKeybindText] = useState(defaultState.keybindText)\n    const [currentAbility, setCurrentAbility] = useState(defaultState.currentAbility)\n    const [abilityCount] = useState(Object.keys(abilities).length-1)\n\n    const handleClose = () => {\n        setTooltip(defaultState.tooltip)\n        setKeybindText(defaultState.keybindText)\n        setCurrentAbility(defaultState.currentAbility)\n\n        closePanel()\n    }\n\n    const currentAbilityRef = useRef(currentAbility)\n    currentAbilityRef.current = currentAbility\n\n    const showToolTip = (e) => {\n        setTooltip(e.target.alt)\n    }\n\n    const hideToolTip = () => {\n        setTooltip(\"\")\n    }\n\n    const prepareToBindAbility = (e) => {\n        let ability = e.target.getAttribute(\"ability\")\n        setCurrentAbility(ability)\n\n        setKeybindText(`Press any key to bind to ${abilities[ability].displayName}`)\n\n        document.addEventListener(\"keydown\", handleKeyDown, {once: true})\n        document.addEventListener(\"keypress\", handleKeyPress, {once: true})\n    }\n\n    const handleKeyDown = (event) => {\n        //check to see if we prevent default or not\n        const {key} = event\n\n        if(!isKeydownKey(key)) return\n\n        event.preventDefault()\n        bindAbility(key)\n\n        //if keybind was found, prevent default and bind ability\n\n        //if keybind was not found, return\n    }\n\n    const handleKeyPress = (e) => bindAbility(e.key)\n\n    const isKeydownKey = (key) => {     \n        if(key.match(/F[1-9]{1,2}/)) return true\n\n        return false\n    }\n\n    const formKeybindFromKey = (key) => {\n        if(keybinds[key]) \n            return {key, keybindText: keybinds[key]}\n        if(key.match(/^[a-z]$/)) \n            return {key, keybindText: key.toUpperCase() }\n        if(key.match(/^[A-Z]$/)) \n            return {key, keybindText: \"S-\" + key }\n        \n        return {key, keybindText: key}\n    }\n\n    const bindAbility = (key) => {\n        document.removeEventListener(\"keypress\", handleKeyPress)\n        \n        const keybind = formKeybindFromKey(key)\n        \n        let ability = currentAbilityRef.current \n\n        onKeybind(keybind, ability)\n        setKeybindText(`${abilities[ability].displayName} successfuly bound to ${keybind.keybindText}`)\n    }\n\n    const reset = () => {\n        document.removeEventListener(\"keydown\", handleKeyDown)\n        document.removeEventListener(\"keypress\", handleKeyPress)\n        setTooltip(defaultState.tooltip)\n        setKeybindText(defaultState.keybindText)\n        setCurrentAbility(defaultState.currentAbility)\n    }\n\n    return (\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} header={header} style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"250px\"}`}} panelClass={panelClass} handleClose={handleClose}>\n            <div className=\"horizontal-panel-content\">\n                <div className=\"panel-content-header\">Change Abilities and Keybinds</div>\n                <div className=\"tooltip\">\n                    <span className=\"tooltip-text\" visibility={(!!tooltip).toString()}>\n                        {tooltip}\n                    </span>\n                </div>\n                <div className=\"panel-abilities-content\">\n                    <div className=\"panel-abilities-header\">\n                        Spell Order\n                    </div>\n                    <div className=\"panel-abilities-container\">\n                        {Object.keys(abilities).map(k => {\n                            if(k === \"void-eruption\") return\n                            return <div className=\"panel-ability-container\" key={k}>\n                                <img  \n                                    className=\"hover-pointer\" \n                                    alt={abilities[k].displayName}\n                                    ability={k} \n                                    onMouseOver={showToolTip}\n                                    onMouseOut={hideToolTip}\n                                    onClick={prepareToBindAbility}\n                                    src={abilities[k].icon}\n                                    height={50}\n                                    width={50}\n                                />\n                                <button className={`${abilities[k].disabled ? \"panel-button-secondary\" : \"panel-button\"}`} onClick={() => onToggle(k)}>{abilities[k].disabled ? \"Enable\" : \"Disable\"}</button>\n                                <AbilityIndex name={k} count={abilityCount} value={abilities[k].index} onChange={setOrder} />\n                            </div>\n                    })}\n                    </div>\n                </div>\n                <div>{keybindText ? keybindText : null}</div>\n            </div>\n        </Panel>\n    )\n}\n\nexport default AbilityKeybindsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\nimport Panel from \"./Panel\"\n\nimport \"./Panel.css\"\n\nconst AboutPanel = (props) => {\n    const {currentPanel, onClick, closePanel} = props\n\n    const panel = \"about\"\n    const header= \"About\"\n    const panelClass = \"middle-panel\"\n\n    return (\n        <Panel panel={panel} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass}\n            style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"min(-685px,-70vh)\"}`}}\n        >\n            <div className=\"middle-panel-content\">\n                <div className=\"panel-content-header\">About</div>\n                <div className=\"medium-text left-text panel-text-content\">\n                    <p>\n                    Voidform Optimizer is a thought experiment I had.\n                    </p>\n                    <p>\n                    I am convinced that many, although not all, players' grievances with Voidform are caused by the\n                    implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others\n                    to experience Voidform in a myriad of ways; in hope that they realize it isn't inherently flawed, find what they most enjoy about it, and \n                    share those findings with others. Then, just maybe, as a community we can come to an agreement on how to <b>#savevoidform</b>.\n                    </p>\n                    <p>\n                    If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711.\n                    </p>\n\n                </div>\n            </div>\n        </Panel>      \n    )\n}\n\nexport default AboutPanel","export default [\n    {\n        header: \"New Article: Ramp\",\n        description: \"Ramp is a buzz-word used to express very valid complaints regarding Voidform. In this article I discuss how ramp works, \\\n        how it has worked in the past, and hopefully how it will work in the future.\"\n    },\n    {\n        header: \"New Article: Design Philosophy\",\n        description: \"This is the first of articles I will be creating. The Design Philosophy article gives detailed reasoning behind \\\n        each of the decisions I made while designing the Ryeshot's Shadowlands template.\"\n    },\n    {\n        header: \"New Template: Yvaelle's Shadowlands\",\n        description: \"Yvaelle had an interesting proposal for a static Voidform, so I decided to include support for it and created a template \\\n        based on their proposal.\"\n    },\n    {\n        header: \"New Ability: Bloodlust!\",\n        description: \"Let's be honest, it's hard to determine how Shadow truly feels until you feel it under lust. Luckily, Bloodlust has now \\\n        been added so you can have the true Shadow experience. The ability works the same way on live (without the debuff), and is not customizable.\"\n    },\n    {\n        header: \"New Template: Ryeshot's Shadowlands\",\n        description: \"This template reflects what I think the healthiest version of baseline Shadow looks like going into Shadowlands. \\\n        It will be updated regularly as I refine my beliefs on what is best for the spec.\"\n    },\n    {\n        header: \"Void Bolt Rank Two Removed!\",\n        description: \"Void Bolt rank two has been removed from the alpha, and therefore is no longer part of the alpha template or a \\\n        customizable option for Void Bolt. Good riddance.\"\n    },\n    {\n        header: \"New Domain!\",\n        description: \"Voidform Optimizer is now registered at voidform-optimizer.com.\"\n    },\n    {\n        header: \"Function Key Binding\",\n        description: \"Due to popular demand, function keys are now a valid keybind option. Just make sure to unbind should you wish to \\\n        perform any browser function key events (such as refreshing the page), since the settings will override that default behavior.\"\n    },\n    {\n        header: \"Spell Ordering!\",\n        description: \"You can now manually set the order of spells shown through the keybinds panel. You can also preserve these changes \\\n        by toggling include spell order while importing a template.\"\n    },\n    {\n        header: \"Power Infusion!\",\n        description: \"Customizable Power Infusion ability has been added! The ability's cooldown may be changed \\\n        and the aura's duration and resource generation can be changed. If desired, you can create alpha StM, Lucid, \\\n        and Legion Power Infusion from these settings.\"\n    },\n    {\n        header: \"Legion Templates!\",\n        description: \"New templates to satiate your Legion nostalgia. More to come in the future.\"\n    },\n    {\n        header: \"Shadowfiend\",\n        description: \"Customizable Shadowfiend ability has been added!\"\n    },\n    {\n        header: \"Templates\",\n        description: \"Premade templates may now be selected on import panel!\"\n    },\n    {\n        header: \"Devouring Plague\",\n        description: \"The recent Shadowlands Devouring Plague addition is now available to try out!\"\n    },\n    {\n        header: \"What's New?\",\n        description: \"Added a what's new dialogue to inform about recent changes to Voidform Optimizer.\"\n    }\n]","import React, {useState} from 'react';\nimport \"../forms/Form.css\"\nimport \"./Panel.css\"\nimport whatsNew from \"../../lib/whatsNew\"\n\nconst containerStyle = {\n    textAlign: \"left\",\n    marginBottom: \"20px\"\n}\n\nconst smallText = {\n    fontSize: \"15px\"\n}\n\nconst mediumText = {\n    fontSize: \"20px\"\n}\n\nconst WhatsNew = (props) => {\n    const title = \"What's New\"\n\n    const {onClose} = props\n\n    return (\n        <div className=\"modal\">\n            <div className=\"modal-content panel\">\n                <div className=\"form-title\">\n                    {title}\n                </div>           \n                <div>\n                    {whatsNew.map(item => \n                        <div style={containerStyle}>\n                            <b style={mediumText}>{item.header}</b>\n                            <div style={smallText}>\n                                {item.description}\n                            </div>\n                        </div>)}\n                </div>\n                <div>\n                    <button className=\"panel-button\" onClick={onClose}>Got it!</button>\n                </div>\n                <button className=\"panel-button panel-exit-button\" onClick={onClose}>x</button>\n            </div>\n        </div>\n    )\n}\n\nconst WhatsNewPanel = () => {\n\n    const header = \"What's New\"\n\n    const [showWhatsNew, setShowWhatsNew] = useState(false)\n\n    return (\n        <div>\n            <div className=\"panel-header hover-pointer\" onClick={() => setShowWhatsNew(true)}>{header}</div>\n            {showWhatsNew ? <WhatsNew onClose={() => setShowWhatsNew(false)} /> : null}\n        </div>\n    )\n}\n\nexport default WhatsNewPanel","const defaultAbilities = {\n    \"mind-flay\": {\n        displayName: \"Mind Flay\",\n        index: 1,\n        keybind: {\n            key: \"1\",\n            keybindText: \"1\"\n        },\n        icon: \"images/mind-flay.jpg\"\n    },\n    \"mind-sear\": {\n        displayName: \"Mind Sear\",\n        index: 2,\n        keybind: {\n            key: \"2\",\n            keybindText: \"2\"\n        },\n        icon: \"images/mind-sear.jpg\"\n    },\n    \"mind-blast\": {\n        displayName: \"Mind Blast\",\n        index: 3,\n        keybind: {\n            key: \"3\",\n            keybindText: \"3\"\n        },\n        icon: \"images/mind-blast.jpg\"\n    },\n    \"void-bolt\": {\n        displayName: \"Void Bolt\",\n        index: 4,\n        keybind: {\n            key: \"4\",\n            keybindText: \"4\"\n        },\n        icon: \"images/void-bolt.jpg\"\n    },\n    \"void-eruption\": {\n        displayName: \"Void Eruption\",\n        index: 4,\n        keybind: {\n            key: \"4\",\n            keybindText: \"4\"\n        },\n        icon: \"images/void-eruption.jpg\"\n    },\n    \"shadow-word-death\": {\n        displayName: \"Shadow Word: Death\",\n        index: 5,\n        keybind: {\n            key: \"5\",\n            keybindText: \"5\"\n        },\n        icon: \"images/shadow-word-death.jpg\"\n    },\n    \"void-torrent\": {\n        displayName: \"Void Torrent\",\n        index: 6,\n        keybind: {\n            key: \"6\",\n            keybindText: \"6\"\n        },\n        icon: \"images/void-torrent.jpg\"\n    },\n    \"shadow-word-pain\": {\n        displayName: \"Shadow Word: Pain\",\n        index: 7,\n        keybind: {\n            key: \"7\",\n            keybindText: \"7\"\n        },\n        icon: \"images/shadow-word-pain.jpg\"\n    },\n    \"vampiric-touch\": {\n        displayName: \"Vampiric Touch\",\n        index: 8,\n        keybind: {\n            key: \"8\",\n            keybindText: \"8\"\n        },\n        icon: \"images/vampiric-touch.jpg\"\n    },\n    \"devouring-plague\": {\n        displayName: \"Devouring Plague\",\n        index: 9,\n        keybind: {\n            key: \"9\",\n            keybindText: \"9\"\n        },\n        icon: \"images/devouring-plague.jpg\"\n    },\n    \"shadowfiend\": {\n        displayName: \"Shadowfiend\",\n        index: 10,\n        keybind: {\n            key: \"0\",\n            keybindText: \"0\"\n        },\n        icon: \"images/shadowfiend.jpg\"\n    },\n    \"power-infusion\": {\n        displayName: \"Power Infusion\",\n        index: 11,\n        keybind: {\n            key: \"-\",\n            keybindText: \"-\"\n        },\n        icon: \"images/power-infusion.jpg\"\n    },\n    \"bloodlust\": {\n        displayName: \"Bloodlust\",\n        index: 12,\n        keybind: {\n            key: \"=\",\n            keybindText: \"=\"\n        },\n        icon: \"images/bloodlust.jpg\"\n    }\n}\n\nexport default defaultAbilities","import React from \"react\"\n\nconst FormTextAreaField = (props) => {\n\n    const {value, id, label, className, placeHolder, onChange} = props\n\n    const handleChange = (e) => onChange(id, e.target.value)\n\n    return (\n        <div className={`form-field ${className}`}>\n            <label htmlFor={id}>{label}</label>\n            <div>\n                <textarea className=\"panel-text-area form-input-container\" id={id} value={value} placeholder={placeHolder} required={true} onChange={handleChange} />\n            </div>\n        </div>\n    )\n}\n\nexport default FormTextAreaField","import React from \"react\"\n\nconst FormTextField = (props) => {\n\n    const {value, id, label, placeHolder, onChange, required} = props\n\n    const handleChange = (e) => onChange(id, e.target.value)\n\n    return (\n        <div className=\"form-field\">\n            <label className=\"form-input-title\" htmlFor={id}>{label}</label>\n            <input className=\"panel-text-area form-input\" type=\"text\" id={id} value={value} placeholder={placeHolder} required={required} onChange={handleChange} />\n        </div>\n    )\n}\n\nexport default FormTextField","const email = window.Email\n\nconst formatBugReportContent = (body) => {\n    const appHeader = \"<h1>Bug Report for Voidform Optimizer</h1>\\n\"\n    const descriptionHeader = \"<h3>Give a brief description of the issue</h3>\"\n    //const reproductionHeader = \"### How can this issue be reproduced?\"\n    const expectedBehaviorHeader = \"<h3>What is the expected behavior?</h3>\"\n    const actualBehaviorHeader = \"<h3>What is the actual behavior?</h3>\"\n    const contactHeader = \"<h3>Contact Information</h3>\"\n\n    const headers = [descriptionHeader, expectedBehaviorHeader, actualBehaviorHeader, contactHeader]\n\n    const userContent = Object.keys(body).reduce((content, key, i) => {\n        if(!body[key]) return content\n        return content.concat([headers[i], body[key]])\n    }, []).join(\"\\n\")\n\n    return appHeader + userContent\n}\n\nconst sendBugReport = async (title, content) => {\n    const data = {\n        SecureToken: process.env.REACT_APP_SMTP_ACCESS_TOKEN,\n        From: process.env.REACT_APP_SENDER_GMAIL_USER,\n        To: process.env.REACT_APP_RECEIVER_GMAIL_USER,\n        Subject: title,\n        Body: content\n    }\n\n    const result = await email.send(data)\n\n    if(result !== \"OK\") throw new Error(result)\n}\n\nexport const submitBugReport = async (data, onSuccess, onFail) => {\n\n    const {title, ...body} = data\n\n    const content = formatBugReportContent(body)\n\n    try {\n        await sendBugReport(`[BUG] ${title}`, content)\n        onSuccess()\n    }\n    catch(err){\n        console.log(err)\n        onFail()\n    }\n}\n\nexport const createPendingTextTimer = (text, setText) => {\n    const dot = \".\"\n    let i = 1\n\n    setText(text)\n    \n    const timer = setInterval(() => {\n        const count = i % 4\n\n        setText(`${text}${dot.repeat(count)}`)\n\n        i++\n    }, 500);\n\n    return timer\n}\n","import React, {useState} from \"react\"\nimport Form from \"./Form\"\nimport FormTextAreaField from \"./FormTextAreaField\"\nimport FormTextField from \"./FormTextField\"\nimport {submitBugReport, createPendingTextTimer} from \"../../utils/bugreport\"\n\nconst fields = [{\n    id: \"bug-report-description\",\n    label: \"Description\",\n    className: \"form-field-small\"\n    // placeHolder: \"Enter a description of the bug...\"\n},\n{\n    id: \"bug-report-expected\",\n    label: \"Expected Behavior\",\n    className: \"form-field-medium\"\n    // placeHolder: \"Enter the expected behavior...\"\n},\n{\n    id: \"bug-report-actual\",\n    label: \"Actual Behavior\",\n    className: \"form-field-medium\"\n    // placeHolder: \"Enter the actual behavior...\"\n}]\n\nconst titleField = {\n    id: \"title\",\n    label: \"Title\"\n}\n\nconst contactField = {\n    id: \"contact\",\n    label: \"Contact (Optional)\"\n}\n\nconst formTitle = \"Bug Report\"\n\nconst formInfo = \"If the issue is UI related, please update your browser \\\nto the latest version before submitting.\"\n\nconst submitPending = \"Submitting\"\nconst submitSuccess = \"Bug report successfully submitted!\"\nconst submitFail = \"Failed to submit bug report\"\n\nconst BugReport = (props) => {\n\n    const {closeForm} = props\n    const [data, setData] = useState({})\n    const [canSubmit, setCanSubmit] = useState(true)\n    const [submitMessage, setSubmitMessage] = useState(\"\")\n\n    const onChange = (id, value) => {\n        setData({...data, [id]: value})\n    }\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n\n        const timer = createPendingTextTimer(submitPending, setSubmitMessage)\n\n        const onSuccess = () => {\n            clearInterval(timer)\n            setSubmitMessage(submitSuccess)\n        }\n        const onFail = () => {\n            clearInterval(timer)\n            setSubmitMessage(submitFail)\n        }\n\n        submitBugReport(data, onSuccess, onFail)\n        setCanSubmit(false)\n    }\n\n    return <div className=\"modal\">\n        <div className=\"modal-content panel\">\n            <div className=\"form-title\">\n                {formTitle}\n            </div>\n            <form className=\"form\" onSubmit={onSubmit}>\n                <div className=\"form-info\">\n                    {formInfo}\n                </div>\n                <FormTextField value={data.title} {...titleField} required={true} onChange={onChange} />\n                {fields.map(f => <FormTextAreaField key={f.id} value={data[f.id]} {...f} onChange={onChange} />)}\n                <FormTextField value={data.contact} {...contactField} required={false} onChange={onChange} />\n                <div>\n                    <input className=\"panel-button\" type=\"submit\" value=\"Submit\" disabled={!canSubmit} />\n                </div>\n            </form>\n            <div>\n                {submitMessage}\n            </div>\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\n        </div>\n    </div>\n}\n\nexport default BugReport","import React, {useState} from \"react\"\nimport Form from \"./Form\"\nimport FormTextAreaField from \"./FormTextAreaField\"\nimport FormTextField from \"./FormTextField\"\n\nconst fields = []\n\nconst submitSuccess = \"Feature request successfully submitted!\"\nconst submitFail = \"Failed to submit feature request\"\n\nconst FeatureRequest = (props) => {\n\n    const {closeForm} = props\n\n    return <div className=\"modal\">\n        <div className=\"modal-content panel\">\n            Coming soon!\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\n        </div>\n    </div>\n}\n\nexport default FeatureRequest","import React, {useState} from \"react\"\nimport BugReport from \"./BugReport\"\nimport FeatureRequest from \"./FeatureRequest\"\nimport \"./Form.css\"\nimport \"../panels/Panel.css\"\nimport \"../panels/SettingOption.css\"\n\nconst Forms = (props) => {\n\n    const {pauseKeyEvents} = props\n\n    const [showBugReport, setShowBugReport] = useState(false)\n    const [showFeatureRequest, setShowFeatureRequest] = useState(false)\n\n    const handleFormClick = (setShow, show) => {\n        pauseKeyEvents(show)\n        setShow(show)\n    }\n\n    return (\n        <div className=\"forms-container\">\n            <div>\n                <button className=\"panel-button\" onClick={() => handleFormClick(setShowBugReport, true)}>Report a Bug</button>\n                <button className=\"panel-button\" onClick={() => handleFormClick(setShowFeatureRequest, true)}>Request a Feature</button>\n            </div>\n                {showBugReport ? <BugReport closeForm={() => handleFormClick(setShowBugReport, false)} /> : null} \n                {showFeatureRequest ? <FeatureRequest closeForm={() => handleFormClick(setShowFeatureRequest, false)} /> : null} \n        </div>\n    )\n}\n\nexport default Forms","export default [{\n    header: \"\",\n    content: \"This will be a detailed article on my design philosophy regarding the baseline health of Shadow and Voidform. \\\n    If you want to skip the reasoning behind my design decisions, you can try the design out yourself using the \\\"Ryeshot's \\\n    Shadowlands\\\" template on the main page. I will be breaking this article down by the changes made to each element of the \\\n    spec, and the reasons for those changes.\"\n},\n{\n    header: \"Voidform\",\n    content: \"The core of Voidform in my mind boils down to two things. It is a self-perpetuating state that mimics the descent \\\n    into madness. It also enables Void Bolt. Therefore I made Voidform do these two things and only these two things. Get rid of \\\n    borrowed power (good riddance Mass Hysteria and Chorus of Insanity), get rid of Lingering Insanity (more reason will be \\\n    provided later), get rid of Mind Blast cooldown reduction (why did this exist?). \\\n    \\n\\n\\\n    Voidform now immediately grants 10% haste and grants an extra 1% haste per stack while in Voidform. Entering Voidform \\\n    should immediately be noticeable due to the rotation quickening immediately. Additionally, unlike existing Voidform at \\\n    .5% haste per stack, you should be able to feel the quickening pace of your rotation while you remain in Voidform. You \\\n    should now feel like you are going insane while in Voidform!\"   \n},\n{\n    header: \"Shadowform\",\n    content: \"Because of how Voidform is designed, Shadowform by necessity must be slow-paced. If you want to think about \\\n    Voidform as the high, then Shadowform is the low. There needs to be some time between Voidforms so that it is not \\\n    thought of as the default state, otherwise the player will become desensitized to its effects. This time should be \\\n    just long enough to begin wanting Voidform again, but not long enough to experience fatigue from the lack of Voidform.\"\n},\n{\n    header: \"Mind Blast\",\n    content: \"Mind blast has two charges baseline. I think the reason is pretty self apparent, but for those who aren't \\\n    aware: Void Bolt and Mind Blast cause an effect call clashing, which means they come off cooldown at the same time. \\\n    This causes the lower priority spell (in this case Mind Blast) to be off cooldown during the global of the higher priority \\\n    spell (Void Bolt). Adding a second charge to Mind Blast removes this issue, since Mind Blast will continue \\\n    recharging when its cooldown clashes with Void Bolt.\\\n    \\n\\n\\\n    Mind Blast now generates 25 Insanity. This makes Shadowform's length shorter and makes less of a dependency of casting \\\n    Mind Flay to generate Insanity. You can now generate more Insanity while moving because your Insanity budget now \\\n    resides mostly in Void Bolt and Mind Blast (due to it recharging while moving).\\\n    \\n\\n\\\n    Mind blast no longer has its cooldown reduced while in Voidform. There was no reason for this to exist so I removed it.\"\n},\n{\n    header: \"Void Bolt\",\n    content: \"Now generates 15 Insanity. Because I want Mind Blast to be the Insanity nuke of the spec, I needed to reduce \\\n    Void Bolt's Insanity generation so generation between the two spells did not feel too similar.\" \n},\n{\n    header: \"Devouring Plague\",\n    content: \"Blizzard added Devouring Plague with the express purpose of having an option for spending Insanity in content \\\n    that does not support Voidform. I expanded upon this purpose and designed an ability which I believe to be a compelling \\\n    skill to press no matter the content.\\\n    \\n\\n\\\n    Devouring Plague spends all Insanity and generates 30 Insanity over its duration. Due to spending all Insanity, Devouring \\\n    Plague can now be used as an option to exit Voidform at will. It can also be used as (one of) the last spell in your \\\n    Voidform; scraping for any remaining Insanity and hurling it at your foe. Lastly, it can be used out of Voidform to \\\n    deal damage to an enemy that either will not last for Voidform's duration, or should you wish to do more priority damage \\\n    to that target.\\\n    \\n\\n\\\n    The fact that Devouring Plague also generates Insanity over its duration means that after using it you can get a faster \\\n    cast of another Devouring Plague or Void Eruption.\"\n},\n{\n    header: \"Lingering Insanity\",\n    content: \"Lingering Insanity has been removed. No talent, not baseline; gone, poof. In a world where Voidform has base \\\n    haste, I could not think of a valid reason to keep Lingering Insanity. The purpose for Lingering Insanity is to smooth \\\n    the transitions between Voidforms. Not only is that counter to the design of Shadowform as explained above, it is no \\\n    longer necessary due to the duration in Shadowform being tolerable and entering Voidform having an immediate impact \\\n    on the pacing of the gameplay.\"\n},\n{\n    header: \"Starting Insanity\",\n    content: \"Now gain 30 Insanity while out of combat. This alleviates the pain point for having the first Voidform of \\\n    a fight take longer than every other one. It also provides quick options for using Insanity in content where casting \\\n    Void Eruption is not the only option.\"\n},\n{\n    header: \"Insanity Drain\",\n    content: \"Insanity drain was adjusted such that you can reach a soft cap of 25 stacks at entry-raid levels of haste. \\\n    If you wish to know the exact numbers, Voidform starts at a drain of 6 Insanity per second, which increases at a rate of \\\n    .66 Insanity per stack.\"\n}\n]","import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport \"./Article.css\"\n\nconst homeUrl = \"/\"\nconst home = \"Voidform Optimizer\"\n\nconst Article = (props) => {\n\n    const {title, sections} = props\n\n    return (\n        <div className=\"sub-page\">\n            <header className=\"App-header header-panel\">\n                <div className=\"sub-page-header\">\n                    <div className=\"sub-page-title\">{title}</div>\n                </div>\n                <div className=\"page-nav-container\">\n                    <Link className=\"page-nav-link\" to={homeUrl}>\n                        <div className=\"page-nav-text\">{home}</div>\n                    </Link>\n                </div>\n            </header>\n            <div className=\"sub-page-content-container\">\n                {sections.map(s => (\n                    <div>\n                        <h3>{s.header}</h3>\n                        <div>{s.content}</div>\n                    </div>\n                ))}\n            </div>\n            <div className=\"sub-page-asset-container\"></div>   \n        </div>\n    )\n}\n\nexport const ArticleLink = (props) => {\n\n    const {title, url} = props\n\n    return (\n    <div>\n        <Link className=\"page-nav-link\" to={url}>\n            <div className=\"panel-header hover-pointer\">{title}</div>\n        </Link>\n    </div>\n    )\n}\n\nexport default Article\n","import React from \"react\"\nimport sections from \"../../lib/articles/designPhilosophy\"\nimport Article, {ArticleLink} from \"./Article\"\n\nconst title = \"Design Philosophy\"\nconst url = \"/articles/design-philosophy\"\n\nconst DesignPhilosophy = () => {\n    return (\n        <Article title={title} sections={sections} />\n    )\n}\n\nexport const DesignPhilosophyLink = () => {\n    return (\n        <ArticleLink title={title} url={url} />\n    )\n}\n\nexport default DesignPhilosophy","export default [{\n    header: \"\",\n    content: \"I need to address ramp because it is the largest pain point I have noticed regarding Voidform. Now, ramp is a \\\n    very contentious topic so I will discuss what ramp means when it comes to what we have experienced thus far, and what it \\\n    can mean in the future.\\\n    \\n\\n\\\n    Ramp, by my self-proclaimed definition, is a damage pattern where you start at a weaker state, end at your strongest state, \\\n    and there is some transition of the strength of your state over time.\"\n},\n{\n    header: \"Past Ramp Designs\",\n    content: \"I call this section past ramp designs, because this is the ramp we have experienced for the entirety of Voidform's \\\n    existence, and for the sake of it and Shadow I pray we do not experience ramp in this form again.\\\n    \\n\\n\\\n    Borrowed power, in the form of Mass Hysteria in Legion and Chorus of Insanity/Spiteful Apparitions in Battle for Azeroth, \\\n    has created unhealthy ramp patterns for spec. In Legion, because of how the benefits of borrowed power compound with the \\\n    benefits of Voidform, Voidform stacks had significantly more power budget at the latest-most part of it. For this reason, \\\n    leaving Voidform early, by any means, lead to excessive punishment on the player. In Battle for Azeroth, Voidform stacks \\\n    had even more backloaded power because you needed to end Voidform in order to receive the benefit. So either you get too few stacks \\\n    from Voidform and leave early, or you leave at the right time and are unable to benefit from the stacks you attained (due to not being \\\n    able to attack a target and maintain Voidform). Not only did both of these cause excessive punishment to the player, but the performance \\\n    of a Voidform was dependent on the performance of the previous Voidform, due to benefits from Voidform lasting quite a long ways into the \\\n    next one. A term which I coin \\\"Voidform dependency\\\", and I believe this to be unhealthy for the spec to have.\\\n    \\n\\n\\\n    Lingering Insanity is also a major offender when it comes to ramp. Due to its implementation, except for 7.0 in Legion, Lingering \\\n    Insanity had lasting effects into the next Voidform, which means you were first at your most powerful the second Voidform of any \\\n    encounter. Lingering Insanity also adds more dependency to Voidform stacks, which means failing to attain stacks, or failing to \\\n    act while Lingering Insanity stacks are active, leads to excessive punishment.\"    \n},\n{\n    header: \"Ideal Ramp\",\n    content: \"Now that we have established the pitfalls of past ramp designs, let us now explore how to correct those pitfalls into \\\n    an ideal ramp pattern.\\\n    \\n\\n\\\n    First I need to define what I mean when I say \\\"excessive punishment\\\". In my mind, excessive punishment is when the player is \\\n    unfairly punishment for failing, for whatever reason, to achieve a goal. In the case of Voidform, that goal is Voidform, and \\\n    therefore the punishment should be losing Voidform. Any other negative effects I would deem as excessive punishment.\\\n    \\n\\n\\\n    So how do we correct excessive punishment? That's simple - do not let it exist. The punishment for falling out of Voidform should \\\n    be, and should only be, losing Voidform. This is one reason Lingering Insanity was removed from my Shadowlands design.\\\n    \\n\\n\\\n    Correcting Voidform dependency is another easy one. If there exist any rewards after ending a Voidform, do not let them influence \\\n    the next Voidform. In my Shadowlands design the only reward I have included baseline is Devouring Plague, should one use it in while \\\n    in Voidform. Used this way, Devouring Plague's quick Insanity generation lends to reaching the next Voidform faster while preventing \\\n    it from influencing the performance of the next Voidform.\\\n    \\n\\n\\\n    Now let's discuss about how to balance this ideal ramp damage pattern. Again it's relatively simple, let us make the weakest state \\\n    not too weak, and the strongest state not too strong. Going into Shadowform from Voidform should give you a damage increase, but \\\n    not enough of a damage increase make damage in Shadowform feel like nothing. And now that the ramp of Voidform is mostly in Shadowform, \\\n    we can reach a pretty strong state rather quickly. While stacking haste might not be a compelling reason to extend Voidform for long \\\n    purely for damage, the quickening pace of the rotation from that stacking haste is.\"\n}]","import React from \"react\"\nimport sections from \"../../lib/articles/ramp\"\nimport Article, {ArticleLink} from \"./Article\"\n\nconst title = \"Ramp\"\nconst url = \"/articles/ramp\"\n\nconst Ramp = () => {\n    return (\n        <Article title={title} sections={sections} />\n    )\n}\n\nexport const RampLink = () => {\n    return (\n        <ArticleLink title={title} url={url} />\n    )\n}\n\nexport default Ramp","import React, {useState, useEffect, useReducer} from 'react';\nimport './App.css';\nimport ResourceBar from \"./components/ResourceBar\"\nimport AbilityBar from \"./components/AbilityBar\"\nimport AuraBar from \"./components/auras/AuraBar\"\nimport ExportPanel from \"./components/panels/ExportPanel\"\nimport SettingsPanel from \"./components/panels/SettingsPanel\"\nimport AbilityKeybindsPanel from \"./components/panels/AbilityKeybindsPanel\"\nimport AboutPanel from \"./components/panels/AboutPanel\"\nimport WhatsNewPanel from \"./components/panels/WhatsNewPanel\"\nimport defaultAbilities from \"./lib/abilities\"\nimport defaultAbilitySettings from \"./lib/abilitySettings\"\nimport defaultAuraSettings from \"./lib/auraSettings\"\nimport Forms from \"./components/forms/Forms\"\nimport {DesignPhilosophyLink as DesignPhilosophy} from \"./components/articles/DesignPhilosophy\"\nimport {RampLink as Ramp} from \"./components/articles/Ramp\"\nimport templates from \"./lib/templates\"\n\nconst handleDotRefresh = {\n  pandemic: (aura, { baseDuration }, { time }) => {\n    const now = time\n    const endTime = aura.startTime + aura.maxDuration\n    const remaining = endTime - now\n    const pandemicDuration = Math.min(.3 * baseDuration, remaining)\n\n    aura.maxDuration = baseDuration + pandemicDuration\n    aura.startTime = now\n  },\n  rolling: (aura, { baseDuration }, { time }) => {\n    const now = time\n    const timeToNextTick = aura.tickTime - now\n    aura.maxDuration = baseDuration + timeToNextTick\n    aura.startTime = now\n  }\n}\n\nconst defaultState = {\n  resource: 0,\n  auras: {\n    stats: {\n      haste: 0\n    },\n    voidform: {\n      active: false,\n      stacks: 0,\n      haste: 0,\n      paused: false,\n    },\n    lingeringInsanity: {\n      active: false,\n      stacks: 0,\n      haste: 0\n    },\n    \"shadow-word-pain\": {\n      active: false\n    },\n    \"vampiric-touch\": {\n      active: false\n    },\n    \"devouring-plague\": {\n      active: false\n    },\n    \"shadowfiend\": {\n      active: false\n    },\n    \"power-infusion\": {\n      active: false,\n      haste: 0\n    },\n    \"bloodlust\": {\n      active: false,\n      haste: 0\n    }\n  },\n  abilities: {\n    \"void-eruption\": {\n      unusable: true\n    },\n    \"devouring-plague\": {\n      unusable: true\n    },\n    \"void-torrent\": {\n      unusable: defaultAbilitySettings[\"void-torrent\"].requireVoidform\n    }\n  }\n}\n\nconst VoidformOptimizer = () => {\n\n  const [panel, setPanel] = useState()\n  const [abilitySettings, setAbilitySettings] = useState(defaultAbilitySettings)\n  const [abilities, setAbilities] = useState(defaultAbilities)\n  const [auraSettings, setAuraSettings] = useState(defaultAuraSettings)\n  const [keyEventsPaused, setKeyEventsPaused] = useState(false)\n  const [reset, setReset] = useState(false)\n  const [abilityReset, setAbilityReset] = useState(false)\n  const [haste, setHaste] = useState(0)\n\n  const [state, updateState] = useReducer((state, action) => {\n\n    let event = action.type\n    let newState = JSON.parse(JSON.stringify(state))\n\n    const voidform = newState.auras.voidform\n    const lingeringInsanity = newState.auras.lingeringInsanity\n    const powerInfusion = newState.auras[\"power-infusion\"]\n    const voidformAbilities = [\"void-torrent\", \"devouring-plague\"]\n\n    switch(event) {\n      case \"RESET\":\n        return {...defaultState, resource: auraSettings.stats.startingInsanity }\n      case \"RESET_ABILITIES\":\n        return {...defaultState, resource: auraSettings.stats.startingInsanity, auras: state.auras}\n      case \"RESET_AURAS\":\n        return {...newState, resource: auraSettings.stats.startingInsanity, auras: {...defaultState.auras, stats: state.auras.stats} }\n      case \"UPDATE_ABILITY_STATE\":\n        // voidformAbilities.forEach(k => {\n        //   const setting = abilitySettings[k]\n        //   newState.abilities[k].unusable = !!setting.requireVoidform\n        // })\n        break\n      case \"HASTE_SET\":\n        var {source, haste} = action.payload\n        newState.auras[source].haste = haste\n        break\n      case \"HASTE_UPDATE\":\n        var {source, haste} = action.payload\n        newState.auras[source].haste += haste\n        break\n      case \"HASTE_RESET\":\n        var {source} = action.payload\n        newState.auras[source].haste = 0\n        break\n      case \"VOIDFORM_UPDATE\":\n        voidform.stacks++\n        voidform.haste += action.payload\n        break;\n      case \"VOIDFORM_START\":\n        voidform.active = true\n        voidform.stacks = 1\n        voidformAbilities.forEach(k => {\n          const setting = abilitySettings[k]\n          newState.abilities[k].unusable = !!setting.requireNoVoidform\n        })\n        break;\n      case \"VOIDFORM_END\":\n        var {time, startingHaste} = action.payload\n        lingeringInsanity.active = true\n        lingeringInsanity.stacks = voidform.stacks\n        lingeringInsanity.haste = Math.round((voidform.haste - startingHaste)*1000)/1000\n        lingeringInsanity.startTime = time\n        voidform.stacks = 0\n        voidform.haste = 0\n        newState.abilities[\"void-eruption\"].unusable = true\n        voidformAbilities.forEach(k => {\n          const setting = abilitySettings[k]\n          newState.abilities[k].unusable = !setting.requireNoVoidform || !!setting.requireVoidform\n        })\n        break;\n      case \"LINGERING_INSANITY_START\":\n        var {haste, stacks} = action.payload\n        lingeringInsanity.haste = haste\n        lingeringInsanity.stacks = stacks\n        break;\n      case \"LINGERING_INSANITY_UPDATE\":\n        lingeringInsanity.haste += action.payload\n        lingeringInsanity.stacks--\n        if(lingeringInsanity.haste <= 0) lingeringInsanity.haste = 0\n        break;\n      case \"LINGERING_INSANITY_END\":\n        lingeringInsanity.active = false\n        lingeringInsanity.stacks = 0\n        lingeringInsanity.haste = 0\n        lingeringInsanity.startTime = 0\n        break;\n      case \"RESOURCE_UPDATE\":\n        var {name, resource, resourceCost, costType} = action.payload\n        let targetCount = name === \"mind-sear\" ? abilitySettings[name].targetCount : 1\n\n        resourceCost = resourceCost || 0\n\n        resource = (resource + (resourceCost * -1)) * targetCount\n\n        if(voidform.active && !auraSettings.voidform.gainInsanity && resource > 0)\n          resource = 0\n\n        if(costType && costType === \"dump\") {\n          resource = 0\n          newState.resource = 0\n        }\n\n        if(powerInfusion.active && resource > 0)\n          resource += (resource * auraSettings[\"power-infusion\"].resourceGen)\n\n        resource = Math.max(Math.min(newState.resource + resource, 100), 0)\n        newState.resource = resource\n        if(resource <= 0 && voidform.active && auraSettings.voidform.type === \"insanity\") {\n          voidform.active = false\n        }\n        //whenever we get resource need to calculate if an ability is usable or not\n        Object.keys(abilitySettings).forEach(k => {\n          const setting = abilitySettings[k]\n          const ability = newState.abilities[k]\n          const unusable = (voidform.active && !!setting.requireNoVoidform) || (!voidform.active && !!setting.requireVoidform)\n          \n          if(!ability) return\n          if(!setting.resourceCost) {\n            ability.unusable = unusable\n            return\n          }\n          if(setting.costType === \"dump\") \n            ability.unusable = resource === 0 || unusable\n          else {\n            ability.unusable = resource < setting.resourceCost || unusable\n          }\n        })\n        break;\n      case \"INSANITY_DRAIN_PAUSE_START\":\n        voidform.paused = true\n        break\n      case \"INSANITY_DRAIN_PAUSE_END\":\n        voidform.paused = false\n        break\n      case \"AURA_START\":\n        var {name, time} = action.payload\n        var aura = newState.auras[name]\n\n        const type = auraSettings[name].type;\n        //handle pandemic or rolling\n        (aura.active && type) ? handleDotRefresh[type](aura, auraSettings[name], action.payload) : aura.active = true\n        break\n      case \"AURA_BEGIN\":\n        var {name, time, duration, tickTime} = action.payload\n        newState.auras[name].startTime = time\n        newState.auras[name].maxDuration = duration\n        newState.auras[name].tickTime = tickTime\n        break\n      case \"AURA_REFRESH\":\n        var {name, time} = action.payload\n        newState.auras[name].startTime = time\n        break\n      case \"AURA_TICK\":\n        var {name, tickTime} = action.payload\n        newState.auras[name].tickTime = tickTime\n        break\n      case \"AURA_END\":\n        var {name} = action.payload\n        newState.auras[name].active = false\n        newState.auras[name].startTime = 0\n        break\n      case \"DOT_EXTEND\":\n        const extension = abilitySettings[\"void-bolt\"].extension\n        const dots = [\"shadow-word-pain\", \"vampiric-touch\"]\n        dots.forEach(d => {\n          const dot = newState.auras[d]\n          if(!dot.active) return\n          dot.maxDuration += extension\n        })\n        break\n    }\n\n    return newState\n  }, defaultState)\n\n  useEffect(() => {\n    setHaste(calculateHaste)\n  }, [state.auras.stats.haste,\n    state.auras.voidform.haste,\n    state.auras.lingeringInsanity.haste,\n    state.auras[\"power-infusion\"].haste,\n    state.auras[\"bloodlust\"].haste])\n\n  useEffect(() => {\n    const queryParams = new URLSearchParams(window.location.search)\n    const template = queryParams.get(\"template\")\n    if(!template || !templates[template]) return\n    const templateSettings = {...templates[template], abilityConfig: templates[template].abilities}\n    delete templateSettings.abilities\n    handleImport(templateSettings)\n  }, [])\n\n  const enterVoidform = () => {\n    updateState({\n      type: \"VOIDFORM_START\"\n    })\n  }\n\n  const gainInsanity = () => {\n    updateState({\n      type: \"RESOURCE_UPDATE\",\n      payload: {\n        resource: 10\n      }\n    })\n  }\n\n  const calculateHaste = () => {\n    const auras = state.auras\n    return Object.keys(auras).reduce((haste, aura) => {\n      if(!auras[aura].haste) return haste\n      return haste * (1+auras[aura].haste)\n    }, 1)\n  }\n\n  const handlePanelHeaderClick = (panel) => {\n    setKeyEventsPaused(true)\n    setPanel(panel)\n  }\n\n  const handlePanelClose = () => {\n    setKeyEventsPaused(false)\n    setPanel(null)\n  }\n\n  const handleAbilityToggle = (ability) => {\n    let newSettings = JSON.parse(JSON.stringify(abilities))\n\n    newSettings[ability].disabled = !newSettings[ability].disabled\n    if(ability === \"void-bolt\") newSettings[\"void-eruption\"].disabled = newSettings[ability].disabled\n\n    setAbilities(newSettings)\n  }\n\n  const setKeyBind = (keybind, ability) => {\n    let state = JSON.parse(JSON.stringify(abilities))\n    let key = keybind.key\n    let voidBoltOrEruption = ability === \"void-bolt\" || ability === \"void-eruption\"\n    Object.keys(state).forEach(k => {\n      let abilityKeybind = state[k].keybind\n      if(abilityKeybind.key === key) state[k].keybind = { keybindText: \"--\"}\n    })\n    if(voidBoltOrEruption) {\n      state[\"void-bolt\"].keybind = {...keybind}\n      state[\"void-eruption\"].keybind = {...keybind}\n    }\n    else {\n      state[ability].keybind = {...keybind}\n    }\n\n    setAbilities(state)\n  }\n\n  const setAbilityOrder = (index, name) => {\n    const state = JSON.parse(JSON.stringify(abilities))\n    const ability = state[name]\n    const abilityIndex = ability.index\n    const shift = index < abilityIndex ? \"right\" : \"left\"\n\n    let voidBoltOrEruption = name === \"void-bolt\" || name === \"void-eruption\"\n\n    Object.keys(state).forEach(k => {\n      const currentIndex = state[k].index\n\n      if(shift === \"right\" && (currentIndex >= index && currentIndex < abilityIndex)) state[k].index++\n      if(shift === \"left\" && (currentIndex <= index && currentIndex > abilityIndex)) state[k].index--\n    })\n    \n    if(voidBoltOrEruption) {\n      state[\"void-bolt\"].index = index\n      state[\"void-eruption\"].index = index\n    }\n    else {\n      ability.index = index\n    }\n\n    setAbilities(state)\n  }\n\n  const handleImport = (settings) => {\n    setAllAbilities(settings.abilityConfig)\n    handleAbilitySet(settings.abilitySettings)\n    handleAuraSet(settings.auraSettings)\n    handleReset()\n  }\n\n  const setAllAbilities = (importedAbilities) => {\n    let state = Object.keys(abilities).reduce((state, ability) => {\n      state[ability] = {...abilities[ability], ...importedAbilities[ability]}\n      return state\n    }, {})\n\n    setAbilities(state)\n  }\n\n  const mergeAbilities = () => {\n    return Object.keys(abilities).reduce((merged, a) => {\n      merged[a] = {...abilities[a], ...state.abilities[a]}\n      return merged\n    }, {})\n  }\n\n  const abilitySettingsWithDisplayName = () => {\n    return Object.keys(abilitySettings).reduce((merged, a) => {\n      merged[a] = {...abilitySettings[a], displayName: defaultAbilities[a].displayName}\n      return merged\n    }, {}) \n  }\n\n  const handleAuraSet = (auraSettings) => {\n    setAuraSettings(auraSettings)\n    const haste = auraSettings.stats.haste\n    const resource = auraSettings.stats.startingInsanity\n    handleAuraReset(resource)\n    updateState({\n      type: \"HASTE_SET\",\n      payload: {\n        source: \"stats\",\n        haste\n      }\n    })\n  }\n\n  const handleAbilitySet = (abilitySettings) => {\n    setAbilitySettings(abilitySettings)\n    handleAbilityReset()\n  }\n\n  const handleAbilityReset = () => {\n    updateState({\n      type: \"RESET_ABILITIES\"\n    })\n    updateState({\n      type: \"RESOURCE_UPDATE\",\n      payload: {\n        resource: 0\n      }\n    })\n    setAbilityReset(!abilityReset)\n  }\n\n  const handleAuraReset = () => {\n    updateState({\n      type: \"RESET_AURAS\"\n    })\n\n    setTimeout(() => {\n      updateState({\n        type: \"LINGERING_INSANITY_END\"\n      })\n      // updateState({\n      //   type: \"RESOURCE_UPDATE\",\n      //   payload: {\n      //     resource\n      //   }\n      // })\n    }, 0)\n  }\n\n  const handleReset = () => {\n    handleAuraReset()\n    handleAbilityReset()\n    setReset(!reset)\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header header-panel\">\n        <div className=\"App-title\">\n          <div className=\"App-title-text\">\n            Voidform Optimizer 2.0\n          </div>\n        </div>\n        <div className=\"header-container\">\n          <div className=\"panel-container\">\n            <SettingsPanel settings={{abilities: abilitySettingsWithDisplayName(), auras: auraSettings}} didReset={reset} onAbilitySet={handleAbilitySet} onAuraSet={handleAuraSet} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\n            <AbilityKeybindsPanel abilities={abilities} currentPanel={panel} onKeybind={setKeyBind} setOrder={setAbilityOrder} onToggle={handleAbilityToggle} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\n            <ExportPanel settings={{abilitySettings, auraSettings, abilities}} onImport={handleImport} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose}/>\n            <AboutPanel currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\n            <WhatsNewPanel />\n          </div>\n          <div className=\"panel-container\">\n            <DesignPhilosophy />\n            <Ramp />\n          </div>\n        </div>\n        <Forms pauseKeyEvents={setKeyEventsPaused} />\n      </header>\n      <div className=\"App-content\">\n        <AuraBar auras={state.auras} settings={auraSettings} haste={haste} triggerEvent={updateState} />\n        <ResourceBar current={state.resource} max={100}/>\n        <AbilityBar abilitySettings={abilitySettings} abilities={mergeAbilities()} haste={haste} inVoidform={state.auras.voidform.active} triggerEvent={updateState} keyEventsPaused={keyEventsPaused} reset={abilityReset} />\n        <button className=\"panel-button\" onClick={handleReset}>Reset</button>\n      </div>\n    </div>\n  );\n}\n\nexport default VoidformOptimizer;\n","import React from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\nimport VoidformOptimizer from \"./VoidformOptimizer\"\nimport DesignPhilosophy from \"./components/articles/DesignPhilosophy\"\nimport Ramp from \"./components/articles/Ramp\"\n\nexport default () => {\n    return (\n        <Router>\n          <div>\n            <Switch>\n                <Route path=\"/articles/design-philosophy\">\n                  <DesignPhilosophy />\n                </Route>\n                <Route path=\"/articles/ramp\">\n                  <Ramp />\n                </Route>\n                <Route path=\"/\">\n                    <VoidformOptimizer />\n                </Route>\n            </Switch>\n          </div>\n        </Router>\n      )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport dotenv from \"dotenv\"\n\ndotenv.config()\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}