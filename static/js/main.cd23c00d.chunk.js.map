{"version":3,"sources":["components/ResourceBar.js","components/CooldownSweep.js","lib/events.js","lib/abilityEvents.js","lib/auraEvents.js","utils/eventHandler.js","lib/constants.js","utils/ability.js","components/ProgressAbility.js","components/GlobalCooldown.js","components/CastBar.js","components/AbilityBar.js","components/auras/Aura.js","components/auras/LingeringInsanity.js","components/auras/Voidform.js","components/auras/DamageOverTime.js","components/auras/Buff.js","lib/options.js","components/auras/AuraBar.js","components/panels/Panel.js","utils/hooks.js","lib/abilitySettings.js","lib/auraSettings.js","utils/importExport.js","lib/templates/index.js","lib/templates/live.js","lib/templates/alpha.js","lib/templates/legionENVoidlord.js","lib/templates/legionAntorus.js","components/panels/ExportPanel.js","components/panels/optionFactory.js","components/panels/SettingOption.js","components/panels/WhatIs.js","components/panels/CustomizeSection.js","components/panels/SettingsPanel.js","components/panels/AbilityKeybindsPanel.js","components/panels/AboutPanel.js","lib/whatsNew.js","components/panels/WhatsNewPanel.js","lib/abilities.js","components/forms/FormTextAreaField.js","components/forms/FormTextField.js","utils/bugreport.js","components/forms/BugReport.js","components/forms/FeatureRequest.js","components/forms/Forms.js","App.js","serviceWorker.js","index.js"],"names":["ResourceBar","props","max","current","voidform","className","toFixed","style","width","CooldownSweep","size","progress","inverse","stroke","normalizedRadius","circumference","Math","PI","height","fill","strokeWidth","strokeOpacity","strokeDasharray","strokeDashoffset","cx","cy","r","events","abilityEvents","onEvent","auraEvents","EventHandler","eventTriggers","this","event","payload","forEach","e","type","keybinds","Ability","initialState","updateFn","onExecute","eventHandler","state","updateState","charges","maxCharges","currentState","Object","keys","k","value","subState","k2","value2","now","Date","startTime","cooldown","duration","getCurrentState","name","cooldownTimer","setInterval","remaining","clearInterval","startCooldown","handleEvent","time","displayName","resource","costsResource","cast","castTimer","setTimeout","currentlyOnCooldown","endTime","channel","baseDuration","baseTicks","ticks","gcd","globalCooldown","pandemicTime","currentTicks","channelTimer","previousChannelRemaining","maximumTicks","floor","min","channelFrequency","round","tickResourceModifier","baseChannelTime","globalCooldownTimer","clearTimeout","triggers","trigger","eventTypes","constructEventHandler","InstantAbility","CastAbility","ChannelAbility","unusable","casting","startCast","startChannel","ProgressAbility","settings","globalCooldownStartTime","casttime","castStartTime","castEndTime","icon","keybind","subscribe","unsubscribe","onAbilityUpdate","onClick","triggerEvent","reset","useState","setState","key","keybindText","startTimeRef","useRef","cooldownRef","castStartTimeRef","castEndTimeRef","casttimeRef","castingRef","baseChannelTimeRef","ticksRef","chargesRef","globalCooldownRef","globalCooldownStartTimeRef","unusableRef","ability","useEffect","create","source","execute","notify","beginGlobalCooldown","getRemainingCooldown","remove","src","GlobalCooldown","start","CastBar","direction","setCurrent","timeRef","durationRef","timer","AbilityBar","abilitySettings","abilities","haste","inVoidform","keyEventsPaused","hasteRef","inVoidformRef","spellQueueTimer","observers","setObservers","observersRef","defaultState","cooldowns","disabled","defaultCooldowns","status","hasReset","setHasReset","triggerCooldown","getAbilityCooldown","cdr","document","addEventListener","handleKeyPress","removeEventListener","useReducer","oldState","action","newState","JSON","parse","stringify","rankTwo","console","error","o","preventDefault","abilityCooldownRemaining","globalCooldownRemaining","queueAbility","handleClick","calculateCooldown","triggerGlobalCooldown","gcdLength","observer","obs","filter","hasted","getAbilityCastTime","staticCastTime","find","disabledAbilities","sort","k1","index","buildAbilityBar","map","Aura","maxDuration","stacks","children","LingeringInsanity","setMaxDuration","setDuration","stacksRef","initialize","afterVoidformEntry","hasteRetention","currentMaxDuration","voidformEntered","calculateDecayStacks","voidformHaste","hasteDecay","ceil","log","startStatic","decayRate","i","startDecay","Voidform","drainRate","drainStart","hasteStack","hasteStart","maxStacks","paused","active","setStacks","pausedRef","n","frequency","drain","interval","startingHaste","DamageOverTime","maxDurationRef","calculateNextTickTime","tickTime","Buff","setting","auraEventHandler","commonOptions","whatIs","unit","resourceCast","resourceChannel","cost","castTime","channelTime","auraDuration","auraTicks","auraResource","abilityOptions","auraOptions","options","dots","buffs","AuraBar","auras","lingeringInsanity","dot","buff","Panel","panel","currentPanel","handleClose","header","panelClass","target","cleanup","ref","useCleanup","defaultAbilitySettings","targetCount","extension","requireVoidform","defaultAuraSettings","stats","resourceGen","parseAbilitySettings","result","a","Error","abilitySetting","reduce","obj","userSetting","undefined","parseAbility","parseAuraSettings","auraSettings","aura","auraSetting","parseAura","formatAbilitySettingsForExport","formattedAbility","formatAbilityConfig","includeKeybinds","includeSpellOrder","exportSettings","currentSettings","formattedAbilitySettings","formattedAbilityConfig","combined","abilityConfig","Base64","encode","live","alpha","legionENVoidlord","legionAntorus","Templates","onChange","selected","templates","t","ExportPanel","onImport","closePanel","exportData","setExportData","inputData","setInputData","setIncludeKeybinds","setIncludeSpellOrder","selectedTemplate","setSelectedTemplate","transform","template","data","rows","cols","placeholder","checked","parsedSettings","decode","message","importSettings","id","readOnly","getElementById","select","execCommand","err","TimeTextOption","displayValue","setDisplayValue","step","parseFloat","NumberTextOption","parseInt","FloatTextOption","PercentTextOption","BooleanOption","defaultChecked","SelectOption","handleChange","htmlFor","Option","rest","SettingOption","onHelp","closeHelp","parentKey","onMouseEnter","pos","x","offsetLeft","y","offsetTop","onMouseLeave","v","WhatIs","text","xPos","yPos","left","top","CustomizeSection","showWhatIs","setShowWhatIs","setWhatIs","optionKey","option","newSetting","handleShowWhatIs","closeWhatIs","SettingsPanel","didReset","onAbilitySet","onAuraSet","changesPendingText","currentAbilities","setCurrentAbilities","currentAuras","setCurrentAuras","activeAbilitySection","setActiveAbilitySection","activeAuraSection","setActiveAuraSection","abilityChangesPending","setAbilityChangesPending","auraChangesPending","setAuraChangesPending","showAbilityOptions","settingKey","getAttribute","showAuraOptions","newAbilities","newAuras","AbilityIndex","count","Array","AbilityKeybindsPanel","onKeybind","setOrder","onToggle","tooltip","setTooltip","setKeybindText","currentAbility","setCurrentAbility","length","abilityCount","currentAbilityRef","showToolTip","alt","hideToolTip","prepareToBindAbility","handleKeyDown","once","isKeydownKey","bindAbility","match","toUpperCase","formKeybindFromKey","visibility","toString","onMouseOver","onMouseOut","AboutPanel","description","containerStyle","textAlign","marginBottom","smallText","fontSize","mediumText","WhatsNew","onClose","whatsNew","item","WhatsNewPanel","showWhatsNew","setShowWhatsNew","defaultAbilities","FormTextAreaField","label","placeHolder","required","FormTextField","email","window","Email","formatBugReportContent","body","headers","content","concat","join","sendBugReport","title","SecureToken","process","From","To","Subject","Body","send","submitBugReport","onSuccess","onFail","fields","titleField","contactField","BugReport","closeForm","setData","canSubmit","setCanSubmit","submitMessage","setSubmitMessage","onSubmit","setText","repeat","createPendingTextTimer","f","contact","FeatureRequest","Forms","pauseKeyEvents","showBugReport","setShowBugReport","showFeatureRequest","setShowFeatureRequest","handleFormClick","setShow","show","App","setPanel","setAbilitySettings","setAbilities","setAuraSettings","setKeyEventsPaused","setReset","abilityReset","setAbilityReset","setHaste","powerInfusion","pandemicDuration","handleAuraPandemic","d","calculateHaste","handlePanelHeaderClick","handlePanelClose","setAllAbilities","importedAbilities","handleAuraSet","handleAuraReset","handleAbilitySet","handleAbilityReset","handleReset","merged","voidBoltOrEruption","abilityIndex","shift","currentIndex","newSettings","Boolean","location","hostname","dotenv","config","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"oeAkBeA,G,YAfK,SAACC,GAAW,IACrBC,EAA0BD,EAA1BC,IAAKC,EAAqBF,EAArBE,QAAqBF,EAAZG,SAErB,OACI,yBAAKC,UAAU,0BACX,yBAAKA,UAAU,kBAAkBF,EAAQD,EAAI,KAAKI,QAAQ,IAC1D,yBAAKD,UAAU,4BACXE,MAAO,CACHC,MAAM,GAAD,QAAML,EAAQD,EAAI,KAAKI,QAAQ,GAA/B,W,OCmBVG,G,YA1BO,SAACR,GAAW,IAEvBS,EAA2BT,EAA3BS,KAAMC,EAAqBV,EAArBU,SAAUC,EAAWX,EAAXW,QAGjBC,EAAgB,EAAPH,EAETI,EAHgB,EAAPJ,EAGoBG,EAAO,EACpCE,EAAmC,EAAnBD,EAAuBE,KAAKC,GAElD,OACI,yBAAKT,MAAOE,EAAMQ,OAAQR,GACtB,4BACIS,KAAK,cACLC,YAAaP,EACbQ,cAAe,GACfC,gBAAiBP,EAAgB,IAAMA,EACvCQ,iBAAkBX,GAAaD,EAA2B,EAAhBI,IAAsBJ,GAAY,GAAKI,EAAkBA,GAAiBJ,GAAY,GAAKI,EACrIF,OAAQ,aACRW,GAAId,EAAK,EACTe,GAAIf,EAAK,EACTgB,EAAGZ,O,8BCQJa,EAjCA,CACX,KAAQ,CACJ,uBACA,yBACA,uBACA,qBACA,wBACA,yBACA,uBAEJ,SAAY,CACR,kBACA,6BACA,4BAEJ,KAAQ,CACJ,iBACA,kBACA,eACA,2BACA,4BACA,yBACA,aACA,aACA,WACA,cAEJ,KAAQ,CACJ,eACA,gBC4DOC,EAzFO,CAClB,YAAa,CACTC,QAAS,CACL,eAAkB,CAAC,0BACnB,aAAgB,CAAC,wBACjB,aAAgB,CAAC,uBAAwB,kBAAmB,gBAGpE,YAAa,CACTA,QAAS,CACL,eAAkB,GAClB,aAAgB,GAChB,cAAiB,CAAC,yBAClB,eAAkB,CAAC,yBAA0B,mBAC7C,YAAe,CAAC,yBAGxB,YAAa,CACTA,QAAS,CACL,eAAkB,GAClB,aAAgB,GAChB,cAAiB,CAAC,yBAClB,eAAkB,CAAC,yBAA0B,mBAC7C,YAAe,CAAC,yBAGxB,gBAAiB,CACbA,QAAS,CACL,WAAc,CAAC,sBACf,aAAgB,CAAC,uBAAwB,oBAGjD,aAAc,CACVA,QAAS,CACL,WAAc,CAAC,sBACf,aAAgB,CAAC,uBAAwB,mBACzC,eAAkB,CAAC,0BACnB,aAAgB,CAAC,0BAGzB,oBAAqB,CACjBA,QAAS,CACL,eAAkB,CAAC,0BACnB,aAAgB,CAAC,wBACjB,aAAgB,CAAC,uBAAwB,qBAGjD,eAAgB,CACZA,QAAS,CACL,eAAkB,CAAC,0BACnB,aAAgB,CAAC,wBACjB,cAAiB,CAAC,wBAAyB,8BAC3C,eAAkB,CAAC,mBACnB,YAAe,CAAC,sBAAuB,8BAG/C,mBAAoB,CAChBA,QAAS,CACL,aAAgB,CAAC,uBAAwB,aAAc,qBAG/D,iBAAkB,CACdA,QAAS,CACL,WAAc,CAAC,sBACf,aAAgB,CAAC,uBAAwB,aAAc,qBAG/D,mBAAoB,CAChBA,QAAS,CACL,WAAc,CAAC,sBACf,aAAgB,CAAC,uBAAwB,aAAc,qBAG/D,YAAe,CACXA,QAAS,CACL,eAAkB,CAAC,0BACnB,aAAgB,CAAC,wBACjB,aAAgB,CAAC,uBAAwB,aAAc,qBAG/D,iBAAkB,CACdA,QAAS,CACL,eAAkB,CAAC,0BACnB,aAAgB,CAAC,wBACjB,aAAgB,CAAC,uBAAwB,iBCzCtCC,EA3CI,CACf,SAAY,CACRD,QAAS,CACL,WAAc,CACV,IAEJ,YAAe,GACf,iBAAoB,GACpB,SAAY,KAGpB,kBAAqB,CACjBA,QAAS,CACL,WAAc,GACd,YAAe,GACf,iBAAoB,GACpB,SAAY,KAGpB,mBAAoB,CAChBA,QAAS,CACL,WAAc,GACd,YAAe,GACf,iBAAoB,GACpB,SAAY,KAGpB,iBAAkB,CACdA,QAAS,CACL,WAAc,GACd,YAAe,GACf,iBAAoB,GACpB,SAAY,KAGpB,iBAAkB,CACdA,QAAS,CACL,WAAc,CAAC,aAAc,gBAC7B,SAAY,CAAC,WAAY,kBClC/BE,E,WAEF,WAAYC,EAAeL,GAAS,oBAChCM,KAAKD,cAAgBA,EACrBC,KAAKN,OAASA,E,wDAGNO,EAAOC,GAAU,IAAD,OACpBF,KAAKN,OAAOO,IAEhBD,KAAKN,OAAOO,GAAOE,SAAQ,SAAAC,GAAC,OAAI,EAAKL,cAAcK,GAAG,CAClDC,KAAMD,EACNF,mB,KCbCI,EAAW,CACpB,IAAK,MACL,IAAK,MACL,IAAK,MACL,EAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,OCXHC,E,WAEF,WAAYC,EAAcC,EAAUC,EAAWC,GAAe,oBAC1DX,KAAKY,MAAQJ,EACbR,KAAKa,YAAcJ,EACnBT,KAAKU,UAAYA,EACjBV,KAAKW,aAAeA,EACpBX,KAAKa,YAAY,CACbnC,SAAU,EACVoC,QAASN,EAAaM,QAAQC,YAAc,I,8DAiBhD,IAAMC,EAAe,GACjBJ,EAAQZ,KAAKY,MAkBjB,OAhBAK,OAAOC,KAAKN,GAAOT,SAAQ,SAAAgB,GACvB,IAAIC,EAAQR,EAAMO,GAClB,GAAoB,kBAAVC,EAAV,CAKA,IAAMC,EAAW,GACjBJ,OAAOC,KAAKE,GAAOjB,SAAQ,SAAAmB,GACvB,IAAIC,EAASH,EAAME,GACL,cAAXC,IACHF,EAASC,GAAyB,kBAAXC,EAAsBA,EAASA,EAAOrD,YAEjE8C,EAAaG,GAAKE,OAVdL,EAAaG,GAAKC,KAanBJ,I,6CAIP,IAAMQ,EAAMC,KAAKD,MACXE,EAAY1B,KAAKY,MAAMe,SAASD,UAAUxD,QAC1C0D,EAAWF,EAAY1B,KAAKY,MAAMe,SAASC,SAAS1D,QAAU,EAIpE,OAF8B,IADd8B,KAAKY,MAAME,QAAQ5C,QAAQA,SACPwD,GAAaF,GAAOI,EAAYJ,EAAM,I,sCAK7D,IAAD,OACRZ,EAAQZ,KAAK6B,kBACVC,EAAQlB,EAARkB,KACAf,EAAcH,EAAME,QAApBC,WAEPf,KAAK+B,cAAgBC,aAAY,WAC7B,IAAIR,EAAMC,KAAKD,MAEXI,EAAW,EAAKhB,MAAMe,SAASC,SAAS1D,QACxCwD,EAAY,EAAKd,MAAMe,SAASD,UAAUxD,SAAWsD,EACrDV,EAAU,EAAKF,MAAME,QAAQ5C,QAAQA,QACrC+D,EAAaP,EAAYE,EAAYJ,EAEzC,GAAGS,GD1ES,GCiFR,OANA,EAAKpB,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBE,QAASA,EAAQ,OAGvCoB,cAAc,EAAKH,eAEhBhB,GAAcD,EAAUC,EAAa,OACpC,EAAKoB,iBAIT,EAAKxB,aAAayB,YAAY,eAAgB,CAACN,cAE/C,EAAKjB,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBlC,SAAU,QAKpC,EAAKmC,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBlC,SAAUuD,EAAUL,SD/F9B,ICoGhB5B,KAAKW,aAAayB,YAAY,iBAAkB,CAC5CN,OACAO,KAAMZ,KAAKD,U,kCAIN,IAAD,OACJZ,EAAQZ,KAAK6B,kBACVC,EAA8ClB,EAA9CkB,KAAMQ,EAAwC1B,EAAxC0B,YAAaC,EAA2B3B,EAA3B2B,SAAUC,EAAiB5B,EAAjB4B,cAC7BZ,EAAYhB,EAAM6B,KAAlBb,SAEP5B,KAAK0C,UAAYC,YAAW,WACxB,EAAKhC,aAAayB,YAAY,eAAgB,CAC1CN,OACAS,WACAC,gBACAH,KAAMZ,KAAKD,QAGf,IAAIG,EAAW,EAAKf,MAAMe,SAASC,SAAS1D,QACxC0E,EAAsB,EAAKhC,MAAMe,SAASD,UAAUxD,QACpD4C,EAAU,EAAKF,MAAME,QAAQ5C,QAAQA,QAEzC,GAAGyD,EAAU,CAIT,GAHA,EAAKd,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBE,QAASA,EAAQ,OAEpC8B,EAAqB,OACxB,EAAKT,mBAGVP,GAEH5B,KAAKW,aAAayB,YAAY,aAAc,CACxCN,OACAQ,cACAV,WACAS,KAAMZ,KAAKD,U,qCAIH,IAAD,OACPZ,EAAQZ,KAAK6B,kBADN,EAE4BjB,EAAM6B,KAAtCf,EAFI,EAEJA,UAAWmB,EAFP,EAEOA,QAASjB,EAFhB,EAEgBA,SAFhB,EAG8BhB,EAAMkC,QAAxCC,EAHI,EAGJA,aAAcC,EAHV,EAGUA,UAAWC,EAHrB,EAGqBA,MACzBnB,EAA+BlB,EAA/BkB,KAAMQ,EAAyB1B,EAAzB0B,YAAaC,EAAY3B,EAAZ2B,SACpBW,EAAMtC,EAAMuC,eAAevB,SAE7BJ,EAAMC,KAAKD,MACX4B,EAAe,EACfC,EAAeL,EAEnB,GAAGtB,EAAW,CACVQ,cAAclC,KAAKsD,cACnB,IACMC,EADsBV,EAAUnB,GACkBF,EAAME,GACxD8B,EAAezE,KAAK0E,MAAMT,IAAcD,EAAeG,GAAKH,IAClEK,EAAerE,KAAK2E,IAAIH,EAAyC,GAAfR,GAIlDM,GAFuBtE,KAAK2E,IAAIT,EAAOO,GAK3C,IAAIG,EAAmB5E,KAAK6E,OAAOhC,EAASwB,GAAcC,GAE1DrD,KAAKsD,aAAetB,aAAY,WAE5B,IAAIR,EAAMC,KAAKD,MACXqB,EAAU,EAAKjC,MAAM6B,KAAKI,QAAQ3E,QAElC2F,EADgD,IAArC,EAAKjD,MAAMkC,QAAQG,MAAM/E,SACDkF,EAAgB,GAAW,EAGlE,OAAIP,GASJ,EAAKlC,aAAayB,YAAY,iBAAkB,CAC5CG,SAAWA,EAASS,EAAaa,EACjC/B,SAGDN,GAAOqB,GACNX,cAAc,EAAKoB,mBAEnB,EAAK3C,aAAayB,YAAY,cAAe,CACzCN,eAJR,IAbII,cAAc,EAAKoB,mBAEnB,EAAK3C,aAAayB,YAAY,cAAe,CACzCN,YAmBT6B,GAEH3D,KAAKW,aAAayB,YAAY,gBAAiB,CAC3CN,OACAQ,cACAV,SAAUA,EAAWwB,EACrBf,KAAMb,EACNsC,gBAAiBlC,EACjByB,mB,4CAIe,IAAD,OACdzC,EAAQZ,KAAK6B,kBADC,EAEYjB,EAAMuC,eAA7BvB,EAFW,EAEXA,SAAUF,EAFC,EAEDA,UAFC,EAGYd,EAAME,QAA7B5C,EAHW,EAGXA,QAAS6C,EAHE,EAGFA,WAEhB,GAAGH,EAAMe,SAASD,UAAW,CACzB,GAAGX,GAAc7C,EAAU6C,EAAa,EAAG,OAE3C,GADiBH,EAAMe,SAASD,UAAYd,EAAMe,SAASC,SAAYF,EACxDE,EAAU,OAG7B5B,KAAK+D,oBAAsB/B,aAAY,WACnC,IAAIR,EAAMC,KAAKD,MACXS,EAAaP,EAAYE,EAAYJ,EACzC,GAAGS,GD/NS,GCqOR,OALAC,cAAc,EAAK6B,0BACnB,EAAKlD,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBlC,SAAU,OAMjC,EAAKkC,MAAMe,SAASD,UAAUxD,SACjC,EAAK2C,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBlC,SAAUuD,EAAUL,SD1O9B,M,+BCgPhBM,cAAclC,KAAK+B,eACnBG,cAAclC,KAAK+D,qBACnB7B,cAAclC,KAAKsD,cACnBU,aAAahE,KAAK0C,c,8BAnORrC,EAAMG,EAAcC,EAAUC,EAAWuD,GACnD,IAAMtD,EFIuB,SAACmB,EAAMmC,GACxC,IAAMlE,EAAgB,GAStB,OAPAkE,EAAS9D,SAAQ,SAAA+D,GACDA,EAAQC,WACdhE,SAAQ,SAAAE,GACVX,EAAOW,GAAMF,SAAQ,SAAAC,GAAC,OAAIL,EAAcK,GAAK8D,EAAQA,iBAItD,IAAIpE,EAAaC,EAAeJ,EAAcmC,GAAMlC,SEdlCwE,CAAsB5D,EAAasB,KAAMmC,GAC9D,OAAO5D,GACH,IAAK,UACD,OAAO,IAAIgE,EAAe7D,EAAcC,EAAUC,EAAWC,GACjE,IAAK,OACD,OAAO,IAAI2D,EAAY9D,EAAcC,EAAUC,EAAWC,GAC9D,IAAK,UACD,OAAO,IAAI4D,EAAe/D,EAAcC,EAAUC,EAAWC,Q,KA+NvE0D,E,wKAGE,IAAGrE,KAAKY,MAAM4D,SAAStG,UACpB8B,KAAKY,MAAM6B,KAAKgC,QAAQvG,QAA3B,CACA,IAAI0C,EAAQZ,KAAK6B,kBACVC,EAAiClB,EAAjCkB,KAAMS,EAA2B3B,EAA3B2B,SAAUC,EAAiB5B,EAAjB4B,cAChBd,EAAad,EAAMe,SAAnBD,UALD,EAMwBd,EAAME,QAA7BC,EAND,EAMCA,WAAY7C,EANb,EAMaA,QAEhBwD,GAAyB,IAAZxD,IAChB8B,KAAKa,aAAY,SAAAD,GACb,OAAO,2BAAIA,GAAX,IAAkBE,QAAS5C,EAAQ,OAGvC8B,KAAKW,aAAayB,YAAY,eAAgB,CAC1CN,OACAS,WACAC,gBACAH,KAAMZ,KAAKD,QAGfxB,KAAKU,YACFK,GAAc7C,EAAU6C,GAC3Bf,KAAKmC,sB,GAxBgB5B,GA4BvB+D,E,wKAGE,IAAGtE,KAAKY,MAAM4D,SAAStG,UACpB8B,KAAKY,MAAM6B,KAAKgC,QAAQvG,QAA3B,CACA,IAAI0C,EAAQZ,KAAK6B,kBACVH,EAAad,EAAM6B,KAAnBf,UACAxD,EAAW0C,EAAME,QAAjB5C,QAEJwD,GAAyB,IAAZxD,IAChB8B,KAAK0E,YACL1E,KAAKU,kB,GAXaH,GAepBgE,E,wKAGE,IAAGvE,KAAKY,MAAM4D,SAAStG,UACpB8B,KAAKY,MAAM6B,KAAKgC,QAAQvG,QAA3B,CACA,IAHM,EAGM8B,KAAK6B,kBACmBF,SAA7BC,EAJD,EAICA,SAJD,EAIWF,YAGjB1B,KAAK2E,eACF/C,GACC5B,KAAKmC,gBAETnC,KAAKU,kB,GAbgBH,GAiBdA,ICxKAqE,EAtIS,SAAC5G,GAAW,IAEzB8D,EAAsR9D,EAAtR8D,KAAMQ,EAAgRtE,EAAhRsE,YAAauC,EAAmQ7G,EAAnQ6G,SAAUlD,EAAyP3D,EAAzP2D,SAAUwB,EAA+OnF,EAA/OmF,eAAgB2B,EAA+N9G,EAA/N8G,wBAAyBN,EAAsMxG,EAAtMwG,SAAU9C,EAA4L1D,EAA5L0D,UAAWqD,EAAiL/G,EAAjL+G,SAAUC,EAAuKhH,EAAvKgH,cAAeC,EAAwJjH,EAAxJiH,YAAaC,EAA2IlH,EAA3IkH,KAAMpB,EAAqI9F,EAArI8F,gBAAiBT,EAAoHrF,EAApHqF,aAAc8B,EAAsGnH,EAAtGmH,QAASV,EAA6FzG,EAA7FyG,QAASW,EAAoFpH,EAApFoH,UAAWC,EAAyErH,EAAzEqH,YAAa3E,EAA4D1C,EAA5D0C,UAAW4E,EAAiDtH,EAAjDsH,gBAAiBC,EAAgCvH,EAAhCuH,QAASC,EAAuBxH,EAAvBwH,aAAcC,EAASzH,EAATyH,MAFrP,EAMLC,mBAAS,IANJ,mBAMxB9E,EANwB,KAMjB+E,EANiB,KAQxBC,EAAoBT,EAApBS,IAAKC,EAAeV,EAAfU,YACLxF,EAAiDwE,EAAjDxE,KAAMkC,EAA2CsC,EAA3CtC,SAAUC,EAAiCqC,EAAjCrC,cAAe1B,EAAkB+D,EAAlB/D,QAASmC,EAAS4B,EAAT5B,MAGzC6C,EAAeC,iBAAOrE,GACtBsE,EAAcD,iBAAOpE,GAE3BmE,EAAa5H,QAAUwD,EACvBsE,EAAY9H,QAAUyD,EAGtB,IAAMsE,EAAmBF,iBAAOf,GAC1BkB,EAAiBH,iBAAOd,GACxBkB,EAAcJ,iBAAOhB,GACrBqB,EAAaL,iBAAOtB,GAE1BwB,EAAiB/H,QAAU8G,EAC3BkB,EAAehI,QAAU+G,EACzBkB,EAAYjI,QAAU6G,EACtBqB,EAAWlI,QAAUuG,EAGrB,IAAM4B,EAAqBN,iBAAOjC,GAC5BwC,EAAWP,iBAAO1C,GAExBgD,EAAmBnI,QAAU4F,EAC7BwC,EAASpI,QAAUmF,EAGnB,IAAMkD,EAAaR,iBAAOjF,GAAW,GAErCyF,EAAWrI,QAAU0C,EAAME,QAG3B,IAAM0F,EAAoBT,iBAAO5C,GAC3BsD,EAA6BV,iBAAOjB,GAE1C0B,EAAkBtI,QAAUiF,EAC5BsD,EAA2BvI,QAAU4G,EAGrC,IAAM4B,EAAcX,iBAAOvB,GAC3BkC,EAAYxI,QAAUsG,EAEtB,IAAMmC,EAAUZ,mBAEhBa,qBAAU,WACN,IAAM3C,EAAW,CAAC,CACdE,WAAY,CAAC,QACbD,QAASoB,GAEb,CACInB,WAAY,CAAC,WAAY,OAAQ,QACjCD,QAASsB,IAGPhF,EAAe,CACjBsB,OACAQ,cACAC,WACAC,gBACAgC,SAAUkC,EACV/E,SAAU,CACNC,SAAUoE,EACVtE,UAAWoE,GAEfrD,KAAM,CACFb,SAAUuE,EACVzE,UAAWuE,EACXpD,QAASqD,EACTzB,QAAS2B,GAEbtD,QAAS,CACLC,aAAcsD,EACdrD,UAAWC,EACXA,MAAOqD,GAEXxF,QAAS,CACLC,WAAYD,EACZ5C,QAASqI,GAEbpD,eAAgB,CACZvB,SAAU4E,EACV9E,UAAW+E,IAcnB,OAVAE,EAAQzI,QAAUqC,EAAQsG,OAAOxG,EAAMG,EAAcmF,EAAUjF,EAAWuD,GAE1EmB,EAAU,CACN0B,OAAQhF,EACRqD,QAASS,EACTmB,QAAS,kBAAMJ,EAAQzI,QAAQ6I,WAC/BC,OAAQ,kBAAML,EAAQzI,QAAQ+I,uBAC9BC,qBAAsB,kBAAMP,EAAQzI,QAAQgJ,0BAGzC,WACHP,EAAQzI,QAAQiJ,SAChB9B,EAAYvD,MAEjB,CAAC8D,EAAKH,IAMT,OACI,yBAAKrH,UAAU,8BACf,yBAAKA,UAAU,iCAAiCmH,QANhC,WAChBA,EAAQzD,GAAM,kBAAM6E,EAAQzI,QAAQgJ,0BAAwB,kBAAMP,EAAQzI,QAAQ6I,eAM9E,yBACI3I,UAAYoG,KAAc5D,EAAME,QAAU,GAAKA,IAAcgF,EAAa5H,QAAwB,cAAZ,UACtFkJ,IAAKlC,EACL3G,MArHC,GAsHDU,OAtHC,KAwHL,yBAAKb,UAAU,eAAe0C,EAAU,EAAIF,EAAME,QAAU,IAC3DgF,EAAa5H,SAAWsI,EAAkBtI,QAC3C,kBAAC,EAAD,CAAeO,KA1HV,GA0HsBC,SAAUkC,EAAMlC,WACzC,MAEN,6BAAMmH,KClHCwB,EApBQ,CAEnBC,MAAO,SAAC1F,EAAU4D,GACdA,EAAa,CACTnF,KAAM,wBACNH,QAAS,CACLgD,IAAKtB,EACLS,KAAMZ,KAAKD,SAKnBmB,YAAW,WACP6C,EAAa,CACTnF,KAAM,0BAEXuB,KCkCI2F,G,MA/CC,SAACvJ,GAAW,IAEjBqE,EAAgDrE,EAAhDqE,KAAMP,EAA0C9D,EAA1C8D,KAAMQ,EAAoCtE,EAApCsE,YAAaV,EAAuB5D,EAAvB4D,SAAU4F,EAAaxJ,EAAbwJ,UAFnB,EAOO9B,mBAAS,GAPhB,mBAOhBxH,EAPgB,KAOPuJ,EAPO,KASjBC,EAAU3B,iBAAO1D,GACjBsF,EAAc5B,iBAAO1D,GAiB3B,OAfAqF,EAAQxJ,QAAUmE,EAClBsF,EAAYzJ,QAAU0D,EAEtBgF,qBAAU,WACN,IAAMgB,EAAQ5F,aAAY,WACtB,IAAIR,EAAMC,KAAKD,MACfiG,GAAW,SAAAvJ,GAAO,OAAIsD,EAAMkG,EAAQxJ,aAb3B,IAgBb,OAAO,WACHgE,cAAc0F,GACdH,GAAW,SAAAvJ,GAAO,OAAI,QAE3B,CAAC4D,IAGA,yBAAK1D,UAAU,0BACX,yBAAKA,UAAU,2BACX,yBAAKA,UAAU,+BAA+BkE,GAC9C,yBAAKlE,UAAU,+BAA+BoJ,EAAS,WACjDtJ,EA5BN,KA4BmBG,QAAQ,GAD4B,aACpBuD,EA5BnC,KA4BiDvD,QAAQ,IADF,YAEhDsJ,EAAYzJ,QAAQA,GA7B3B,KA6ByCG,QAAQ,GAFM,aAEEsJ,EAAYzJ,QA7BrE,KA6BkFG,QAAQ,IAF1F,QAKJ,yBAAKD,UAAU,wBACXE,MAAO,CACHC,MAAgB,UAATiJ,GACDtJ,EAAQyJ,EAAYzJ,QAAQ,KAAKG,QAAQ,KACxCsJ,EAAYzJ,QAAQA,GAASyJ,EAAYzJ,QAAQ,KAAKG,QAAQ,GAFrD,WCqSrBwJ,G,MAvUI,SAAC7J,GAEhB,IACO8J,EAAuF9J,EAAvF8J,gBAAiBC,EAAsE/J,EAAtE+J,UAAWC,EAA2DhK,EAA3DgK,MAAOC,EAAoDjK,EAApDiK,WAAYzC,EAAwCxH,EAAxCwH,aAAc0C,EAA0BlK,EAA1BkK,gBAAiBzC,EAASzH,EAATyH,MAE/E0C,EAAWpC,iBAAOiC,GACxBG,EAASjK,QAAU8J,EAEnB,IAAMI,EAAgBrC,iBAAOkC,GAC7BG,EAAclK,QAAU+J,EAExB,IAAMI,EAAkBtC,mBAXE,EAyBQL,mBAAS,IAzBjB,mBAyBnB4C,EAzBmB,KAyBRC,EAzBQ,KA2BpBC,EAAezC,iBAAOuC,GAC5BE,EAAatK,QAAUoK,EAEvB,IAAMG,EAAe,CACjBtF,eAAgB,EAChBuF,UAnBqB,WACrB,IAAMA,EAAY,GAQlB,OAPAzH,OAAOC,KAAK6G,GAAW5H,SAAQ,SAAAgB,GACxB2G,EAAgB3G,IAAM2G,EAAgB3G,GAAGwH,WAC5CD,EAAUvH,GAAK,CACXO,UAAW,OAIZgH,EAUIE,GACXC,OAAQ,IAjCc,EAoCMnD,mBAASD,GApCf,mBAoCnBqD,EApCmB,KAoCTC,EApCS,KAsC1BnC,qBAAU,WAKN,OAJAoC,EAAgB,CACZ3I,KAAM,UAGH,kBAAM0I,EAAYtD,MAC1B,CAACA,IAEJmB,qBAAU,WACN,GAAGkC,IAAarD,EAAhB,CACA,IAAM3D,EAAO,aACP6E,EAAUmB,EAAgBhG,GAC1BF,EAAWqH,EAAmBnH,GAChCoH,EAAMvC,EAAQuC,KAAOjB,GAAe,EAAK,GAC7CtB,EAAQhF,UAAYuH,EAEpB,IAAMxH,EAAYd,EAAM8H,UAAU5G,GAAMJ,UACxC,GAAIA,EAAJ,CACAwH,EAAMD,EAAmBnH,GAAQF,EACjC,IAAMJ,EAAMC,KAAKD,MAKjBwH,EAAgB,CACZ3I,KAAM,yBACNH,QAAS,CACL4B,OACAO,KAAMX,GARKA,EAAYE,EAAYJ,GACRI,EACKsH,EAMCA,SAI1C,CAACjB,IAEJrB,qBAAU,WAIN,OAHAuC,SAASC,iBAAiB,UAAWC,GACrCF,SAASC,iBAAiB,WAAYC,GAE/B,WACHF,SAASG,oBAAoB,UAAWD,GACxCF,SAASG,oBAAoB,WAAYD,MAE9C,CAACnB,IAhFsB,MAkFOqB,sBAAW,SAACC,EAAUC,GACnD,IAAMC,EAAWC,KAAKC,MAAMD,KAAKE,UAAUL,IACrCtJ,EAAUuJ,EAAOvJ,QAEvB,OAAOuJ,EAAOpJ,MACV,IAAK,QACD,OAAOoI,EACX,IAAK,kBAAL,IACS3G,EAAQ5B,EAAR4B,KACL4H,EAASb,OAAO/G,GAAQ,UACxB,MACJ,IAAK,cACIA,EAAQ5B,EAAR4B,KACL4H,EAASb,OAAO/G,GAAQ,GACxB,MACJ,IAAK,uBACIA,EAAQ5B,EAAR4B,KACL,GAAGgG,EAAgB,aAAagC,SAAWJ,EAASjF,SAAoB,cAAT3C,GAAkD,cAA1B4H,EAASjF,QAAQ3C,KACpG,MAEJ4H,EAAShB,UAAU5G,GAAMkD,cAAgB,EACzC0E,EAAShB,UAAU5G,GAAMmD,YAAc,EAEpCyE,EAASjF,UACRiF,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMkD,cAAgB,EAC1D0E,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMmD,YAAc,SACjDyE,EAASjF,SAEpB,MACJ,IAAK,yBACI3C,EAAc5B,EAAd4B,KADT,IACeO,EAAQnC,EAARmC,KACXqH,EAAShB,UAAU5G,GAAMJ,UAAYW,EACrC,MACJ,IAAK,uBACIP,EAAQ5B,EAAR4B,KACL4H,EAAShB,UAAU5G,GAAMJ,UAAY,EACrC,MACJ,IAAK,qBACII,EAAqC5B,EAArC4B,KADT,IACeQ,EAA+BpC,EAA/BoC,YAAmBV,GAANS,EAAkBnC,EAAlBmC,KAAkBnC,EAAZ0B,UAC9B8H,EAAShB,UAAU5G,GAAMkD,cAAgB3C,EACzCqH,EAAShB,UAAU5G,GAAMmD,YAAc5C,EAAOT,EAC3C8H,EAASjF,UACRiF,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMkD,cAAgB,EAC1D0E,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMmD,YAAc,GAE5DyE,EAASjF,QAAU,CACf7C,WACAE,OACAQ,cACAkF,UAAW,EACXnF,QAEJ,MACJ,IAAK,wBACIP,EAAoE5B,EAApE4B,KAAMQ,EAA8DpC,EAA9DoC,YAAaD,EAAiDnC,EAAjDmC,KAAMT,EAA2C1B,EAA3C0B,SADlC,IAC4CkC,EAAiC5D,EAAjC4D,gBAAiBT,EAAgBnD,EAAhBmD,aACrDsD,EAAU+C,EAAShB,UAAU5G,GAEjC4H,EAAShB,UAAU5G,GAAnB,2BACO6E,GADP,IAEI3B,cAAe3C,EACf4C,YAAa5C,EAAOT,EACpBkC,kBACAT,iBAGDqG,EAASjF,SAAW3C,IAAS4H,EAASjF,QAAQ3C,OAC7C4H,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMkD,cAAgB,EAC1D0E,EAAShB,UAAUgB,EAASjF,QAAQ3C,MAAMmD,YAAc,GAE5DyE,EAASjF,QAAU,CACf7C,WACAE,OACAQ,cACAkF,UAAW,EACXnF,QAEJ,MACJ,IAAK,yBACIP,EAAQ5B,EAAR4B,KACL4H,EAAShB,UAAU5G,GAAMuB,eACzB,MACJ,IAAK,sBACIvB,EAAQ5B,EAAR4B,KACD6E,EAAU+C,EAAShB,UAAU5G,GAEjC4H,EAAShB,UAAU5G,GAAnB,2BACO6E,GADP,IAEI3B,cAAe,EACfC,YAAa,EACb5B,aAAc,IAEfqG,EAASjF,SAAW3C,IAAS4H,EAASjF,QAAQ3C,aAAa4H,EAASjF,QACvE,MACJ,IAAK,wBACDiF,EAASvG,eAAiBjD,EAAQgD,IAClCwG,EAAS5E,wBAA0B5E,EAAQmC,KAC3C,MACJ,IAAK,sBACDqH,EAAS5E,wBAA0B,EACnC,MACJ,QACIiF,QAAQC,MAAR,mCAA0CP,EAAOpJ,OAGzD,OAAOqJ,IAERjB,GA5LuB,mBAkFnB7H,EAlFmB,KAkFZoI,EAlFY,KA8LpBxC,EAAoBT,iBAAOnF,EAAMuC,gBACvCqD,EAAkBtI,QAAU0C,EAAMuC,eAElC,IAAMsD,EAA6BV,iBAAOnF,EAAMkE,yBAChD2B,EAA2BvI,QAAU0C,EAAMkE,wBAE3C,IAAMuE,EAAiB,SAACjJ,GACpB,IAAG8H,EAAH,CAEA,IAAM1G,EAAMC,KAAKD,MAEjBgH,EAAatK,QAAQiC,SAAQ,SAAA8J,GACzB,GAAGA,EAAE9E,UAAY/E,EAAEwF,IAAK,CACpBxF,EAAE8J,iBACF,IAAMC,EAA2BF,EAAE/C,uBAC7BkD,EAA0B5D,EAAkBtI,QAAUsI,EAAkBtI,SAAWsD,EAAMiF,EAA2BvI,SAAW,EAC/H+D,EAAYlD,KAAKd,IAAIkM,EAA0BC,GAErD,GAAGnI,ELrNa,IKqNiB,OAEjCoI,EAAaJ,EAAEnD,OAAQmD,EAAElD,QAAS9E,EAAY,UAKpDqI,EAAc,SAACxI,EAAMoF,EAAsBH,GAC7C,IAAMvF,EAAMC,KAAKD,MAEX2I,EAA2BjD,IAC3BkD,EAA0B5D,EAAkBtI,QAAUsI,EAAkBtI,SAAWsD,EAAMiF,EAA2BvI,SAAW,EAC/H+D,EAAYlD,KAAKd,IAAIkM,EAA0BC,GAElDnI,ELnOqB,KKqOxBoI,EAAavI,EAAMiF,EAAS9E,EAAY,KAGtCsI,EAAoB,SAAC5I,GACvB,OAAOA,EAASwG,EAASjK,SAGvBsM,EAAwB,WAC1B,IAAItH,EAAMnE,KAAKd,IAAIsM,EAtOL,MAsOmCE,KAEjDpD,EAAeC,MAAMpE,EAAK8F,GAE1BrG,YAAW,WACP6F,EAAatK,QAAQiC,SAAQ,SAAA8J,GAAC,OAAIA,EAAEjD,cACrC,IAGD5B,EAAY,SAACsF,GACfnC,GAAa,SAAA0B,GAAC,4BAAQA,GAAR,CAAWS,QAGvBrF,EAAc,SAACyB,GACjByB,GAAa,SAAAoC,GAAG,OAAIA,EAAIC,QAAO,SAAAX,GAAC,OAAIA,EAAEnD,SAAWA,SAG/CmC,EAAqB,SAAC9H,GACxB,IAAMwF,EAAUmB,EAAgB3G,GAC1BQ,EAAWgF,EAAQhF,SAEzB,OAAOgF,EAAQkE,OAASN,EAAkB5I,GAAYA,GAGpDmJ,EAAqB,SAAC3J,GACxB,IAAMwF,EAAUmB,EAAgB3G,GAC1B4D,EAAW4B,EAAQ5B,SAEzB,OAAO4B,EAAQoE,eAAiBhG,EAAWwF,EAAkBxF,IAG3DsF,EAAe,SAACvI,EAAMiF,EAAS9E,GAEjC+B,aAAaqE,EAAgBnK,SAE7BmK,EAAgBnK,QAAUyE,YAAW,WAC7B6F,EAAatK,QAAQ8M,MAAK,SAAAf,GAAC,OAAIA,EAAEnD,SAAWhF,MAChDiF,MACD9E,IASDgJ,EAAoB,SAAC9J,GACvB,OAAG4G,EAAU5G,GAAGwH,aACP,cAANxH,IAAsBiH,EAAclK,WAC9B,kBAANiD,IAAyBiH,EAAclK,WAY9C,OACA,yBAAKE,UAAU,yBACX,yBAAKA,UAAU,0BACVwC,EAAM6D,QAAU,kBAAC,EAAY7D,EAAM6D,SAAa,MAErD,yBAAKrG,UAAU,eAZK,SAAC2J,GACrB,OAAO9G,OAAOC,KAAK6G,GACd6C,OAAOK,GACPC,MAAK,SAACC,EAAI7J,GAAL,OAAYyG,EAAUoD,GAAIC,MAAQrD,EAAUzG,GAAI8J,SAUrDC,CAAgBtD,GAChBuD,KAAI,SAAAnK,GACD,OAAO,kBAAC,EAAD,eACHW,KAAMX,EACNyE,IAAG,kBAAazE,IACZ4G,EAAU5G,GACVP,EAAM8H,UAAUvH,GAJjB,CAKH0D,SAAUiD,EAAgB3G,GAC1BQ,SAAUsH,EAAmB9H,GAC7BgC,eAAgBvC,EAAMuC,eACtB2B,wBAAyBlE,EAAMkE,wBAC/BC,SAAU+F,EAAmB3J,GAC7BsD,QAAS7D,EAAM6D,SAAW7D,EAAM6D,QAAQpC,MAAQzB,EAAM6D,QAAQ+C,UAC9DpC,UAAWA,EACXC,YAAaA,EACb3E,UAAW8J,EACXlF,gBAAiB0D,EACjBzD,QAAS+E,EACT9E,aAAcA,EACdC,MAAOA,Y,OC5SZ8F,G,MAtBF,SAACvN,GAAW,IAEdkH,EAAoDlH,EAApDkH,KAAmBtD,GAAiC5D,EAA9CsE,YAA8CtE,EAAjC4D,UAAU4J,EAAuBxN,EAAvBwN,YAAaC,EAAUzN,EAAVyN,OAG3C/M,EAAWkD,IAAc4J,EAAY5J,GAAU4J,EAErD,OACI,yBAAKpN,UAAU,QACX,yBACIgJ,IAAKlC,EACL3G,MAPC,GAQDU,OARC,KAWL,yBAAKb,UAAU,aAAaqN,EAAS,EAAIA,EAAS,IACjD7J,EAAW,kBAAC,EAAD,CAAenD,KAAM,GAAIC,SAAUA,EAAUC,SAAS,IAAU,KAC3EX,EAAM0N,YCyJJC,EA3KW,SAAC3N,GAAW,IAE1BqC,EAAyErC,EAAzEqC,KAAMqB,EAAmE1D,EAAnE0D,UAAWsG,EAAwDhK,EAAxDgK,MAAOyD,EAAiDzN,EAAjDyN,OAAQxD,EAAyCjK,EAAzCiK,WAAYzC,EAA6BxH,EAA7BwH,aAAiBX,EAFpC,YAEgD7G,EAFhD,qEAUK0H,mBAFX,KARM,mBAU1B8F,EAV0B,KAUbI,EAVa,OAWDlG,mBAAS,GAXR,mBAW1B9D,EAX0B,KAWhBiK,EAXgB,KAa3BC,EAAY/F,iBAAO0F,GACzBK,EAAU5N,QAAUuN,EAEpB,IAAMrD,EAAgBrC,iBAAOkC,GAC7BG,EAAclK,QAAU+J,EAExB,IAAMnC,EAAeC,iBAAOrE,GAC5BoE,EAAa5H,QAAUwD,EAEvB,IAAMyG,EAAWpC,iBAAOiC,GACxBG,EAASjK,QAAU8J,EAEnB,IAAM+D,EAAa,SAACC,EAAoBC,EAAgBR,EAAQ7J,GAC5D,IAAIsK,EAAqBF,EAlBF,IAkB4CpK,EAanE,OAVAgK,GAAe,SAAAJ,GAAW,OAAIU,KAE9B1G,EAAa,CACTnF,KAAM,2BACNH,QAAS,CACL8H,MAAOG,EAASjK,QAAU+N,EAC1BR,YAID,CACHS,qBACAC,iBAdkB,IA0EpBC,EAAuB,SAACC,EAAeC,GACzC,OAAOvN,KAAKwN,KAAKF,EAAcC,IAkEnC,OAhBA1F,qBAAU,WACN,IAAIgB,EAEJ,OAAOvH,GACH,IAAK,SACDuH,EA/GQ,WAAO,IAEfhG,EAAiDiD,EAAjDjD,SAAUoK,EAAuCnH,EAAvCmH,mBAAoBC,EAAmBpH,EAAnBoH,eAElCrL,EAAQmL,EAAWC,EAAoBC,EAAgBH,EAAU5N,QAAS0D,GAExEgG,EAAQ5F,aAAY,WAEtB,IAAMR,EAAMC,KAAKD,MAKjB,GAHAuI,QAAQyC,IAAI,SAGT5L,EAAMuL,iBAAoB/D,EAAclK,QAO3C,OAAGsD,GAAOsE,EAAa5H,QAAU0C,EAAMsL,oBACnChK,cAAc0F,QACdpC,EAAa,CACTnF,KAAM,6BAMVO,EAAMuL,iBAAmB/D,EAAclK,UAEvC0C,EAAMuL,iBAAkB,EAErBH,IACCxG,EAAa,CACTnF,KAAM,eACNH,QAAS,CACL4B,KA9EX,oBA+EWO,KAAMb,KAGdoK,GAAe,SAAAJ,GAAW,OAAI5J,KAC9BhB,EAAMsL,mBAAqBtK,OAC3BiK,GAAY,SAAAjK,GAAQ,OAAI,WAKhCiK,GAAY,SAAAjK,GAAQ,OAAIJ,EAAMsE,EAAa5H,WAlCvC0C,EAAQmL,EAAWC,EAAoBC,EAAgBH,EAAU5N,QAAS0D,KAxDrE,KA8Fb,OAAOgG,EA2DS6E,GACR,MACJ,IAAK,QACD7E,EAvDO,WAAO,IAEd8E,EAA0B7H,EAA1B6H,UAAWJ,EAAezH,EAAfyH,WAEfK,EAAI,EAEJ/L,EAAQmL,GAAW,EAAM,EAAGK,EAAqBjE,EAASjK,QAASoO,IAEjE1E,EAAQ5F,aAAY,WAEtB2K,GA/GS,IAiHT,IAAMnL,EAAMC,KAAKD,MAEjB,OAAGZ,EAAMuL,kBAAoB/D,EAAclK,SACvC0C,EAAQmL,GAAW,EAAM,EAAGK,EAAqBjE,EAASjK,QAASoO,SACnEK,EAAI,IAKLb,EAAU5N,SAAW,GACpBgE,cAAc0F,QACdpC,EAAa,CACTnF,KAAM,6BAOXsM,EAAID,IAAc,GACjBlH,EAAa,CACTnF,KAAM,4BACNH,SAAuB,EAAdoM,KAIb1L,EAAMuL,iBAAmB/D,EAAclK,UAAS0C,EAAMuL,iBAAkB,QAE5EN,GAAY,SAAAjK,GAAQ,OAAIJ,EAAMsE,EAAa5H,cA7IlC,KAiJb,OAAO0J,EAWSgF,GAIhB,OAAO,kBAAM1K,cAAc0F,MAE5B,IAEI,kBAAC,EAAD,CAAM1C,KAjKA,gCAiKY5C,YAlKL,qBAkK+BV,SAAUA,EAAU4J,YAAaA,EAAaC,OAAQA,KC7F9FoB,EA3EE,SAAC7O,GAAW,IAEjB8O,EAA2F9O,EAA3F8O,UAAWC,EAAgF/O,EAAhF+O,WAAYC,EAAoEhP,EAApEgP,WAAYC,EAAwDjP,EAAxDiP,WAAYC,EAA4ClP,EAA5CkP,UAAWC,EAAiCnP,EAAjCmP,OAAQC,EAAyBpP,EAAzBoP,OAAQ5H,EAAiBxH,EAAjBwH,aAF1D,EAOIE,mBAAS,GAPb,mBAOjB+F,EAPiB,KAOT4B,EAPS,KASlBC,EAAYvH,iBAAOoH,GACzBG,EAAUpP,QAAUiP,EA8DpB,OAhBAvG,qBAAU,WACN,IAAIgB,EA7CM,WACV,IAAI2F,EAAI,EACJC,EAAYzO,KAAK6E,MAAM,IAEvB+I,EAAI,EAqCR,OAnCAnH,EAAa,CACTnF,KAAM,eACNH,QAAS,CACL4G,OAAQ,WACRkB,MAAOiF,EAAaD,KAIdhL,aAAY,WACtB,IACIyL,EADMC,IACGX,EAAaD,EAAYS,GAEtCZ,IAEKW,EAAUpP,UACXqP,GANMG,GAONlI,EAAa,CACTnF,KAAM,kBACNH,QAAS,CACLqC,UAAmB,EAATkL,MAKlBd,EAAIa,IAAc,KAAON,GAAaP,EAAIa,EAAYN,KAEtD1H,EAAa,CACTnF,KAAM,kBACNH,QAAS8M,IAEbK,GAAU,SAAA5B,GAAM,OAAIA,EAAS,QA7CxB,KAsDDnE,GAEZ,OAAO,WACHpF,cAAc0F,GAEdpC,EAAa,CACTnF,KAAM,eACNH,QAAS,CACLmC,KAAMZ,KAAKD,MACXmM,cAAeV,QAI5B,CAACG,IAEG,kBAAC,EAAD,CAAMlI,KAnEA,sBAmEY5C,YApEL,WAoE+BmJ,OAAQA,KCOhDmC,EA/EQ,SAAC5P,GAAW,IAExBkH,EAAuGlH,EAAvGkH,KAAMpD,EAAiG9D,EAAjG8D,KAAMQ,EAA2FtE,EAA3FsE,YAAaZ,EAA8E1D,EAA9E0D,UAAWqB,EAAmE/E,EAAnE+E,aAAcyI,EAAqDxN,EAArDwN,YAAavI,EAAwCjF,EAAxCiF,MAAOV,EAAiCvE,EAAjCuE,SAAUyF,EAAuBhK,EAAvBgK,MAAOxC,EAAgBxH,EAAhBwH,aAFhE,EAMEE,mBAAS,GANX,mBAMvB9D,EANuB,KAMbiK,EANa,KAQxB/F,EAAeC,iBAAOrE,GAC5BoE,EAAa5H,QAAUwD,EAEvB,IAAMmM,EAAiB9H,iBAAOyF,GAC9BqC,EAAe3P,QAAUsN,EAEzB,IAAMrD,EAAWpC,iBAAOiC,GACxBG,EAASjK,QAAU8J,EAEnB,IAAM8F,EAAwB,SAACtM,GAE3B,OAAQuB,EAAaE,EAAOkF,EAASjK,QAAUsD,GAyDnD,OArDAoF,qBAAU,WACN,IAAIU,EAAQ7F,KAAKD,MACbuM,EAAWD,EAAsBxG,GAErC9B,EAAa,CACTnF,KAAM,aACNH,QAAS,CACL4B,OACAF,SAAUmB,EACVV,KAAMiF,KAId,IAAMM,EAAQ5F,aAAY,WAEtB,IAAMR,EAAMC,KAAKD,MAEjB,GAAGA,GAAOsE,EAAa5H,QAAU2P,EAAe3P,QAc5C,OAbAgE,cAAc0F,GACdpC,EAAa,CACTnF,KAAM,kBACNH,QAAS,CACLqC,mBAGRiD,EAAa,CACTnF,KAAM,WACNH,QAAS,CACL4B,UAMTN,GAAOuM,IAENvI,EAAa,CACTnF,KAAM,kBACNH,QAAS,CACLqC,cAIRwL,EAAWD,EAAsBtM,IAGrCqK,GAAY,SAAAjK,GAAQ,OAAIJ,EAAMsE,EAAa5H,aAjElC,KAqEb,OAAO,kBAAMgE,cAAc0F,MAC5B,IAEI,kBAAC,EAAD,CAAM1C,KAAMA,EAAM5C,YAAaA,EAAaV,SAAUA,EAAU4J,YAAaqC,EAAe3P,WCxBxF8P,EAjDF,SAAChQ,GAAW,IAEdkH,EAA6DlH,EAA7DkH,KAAMpD,EAAuD9D,EAAvD8D,KAAMQ,EAAiDtE,EAAjDsE,YAAaZ,EAAoC1D,EAApC0D,UAAWuM,EAAyBjQ,EAAzBiQ,QAASzI,EAAgBxH,EAAhBwH,aAC7CzC,EAAgBkL,EAAhBlL,aAHa,EAOY2C,mBAAS,GAPrB,mBAOb9D,EAPa,KAOHiK,EAPG,KASd/F,EAAeC,iBAAOrE,GAqC5B,OApCAoE,EAAa5H,QAAUwD,EAEvBkF,qBAAU,WACN,IAAMjG,EXekB,SAACmB,EAAMoC,GACnC,IACMnE,EAAgB,GAMtB,MAPc,CAAC,OAAQ,WAAY,QAG7BI,SAAQ,SAAAE,GACVX,EAAOW,GAAMF,SAAQ,SAAAC,GAAC,OAAIL,EAAcK,GAAK8D,QAG1C,IAAIpE,EAAaC,EAAeF,EAAWiC,GAAMlC,SWvB/BsO,CAAiBpM,EAAM0D,GACtC8B,EAAQ7F,KAAKD,MAEnBb,EAAayB,YAAY,aAAzB,aACIN,OACAgF,OAAQhF,EACRF,SAAUmB,EACVV,KAAMiF,GACH2G,IAGP,IAAMrG,EAAQ5F,aAAY,WAEtB,IAAMR,EAAMC,KAAKD,MAEjB,GAAGA,GAAOsE,EAAa5H,QAAU6E,EAQ7B,OAPAb,cAAc0F,QAEdjH,EAAayB,YAAY,WAAY,CACjCN,OACAgF,OAAQhF,IAMhB+J,GAAY,SAAAjK,GAAQ,OAAIJ,EAAMsE,EAAa5H,aAlClC,KAsCb,OAAO,kBAAMgE,cAAc0F,MAC5B,IAEI,kBAAC,EAAD,CAAM1C,KAAMA,EAAM5C,YAAaA,EAAaV,SAAUA,EAAU4J,YAAazI,KClBlFoL,EAAgB,CAClBxM,SAAU,CACNiE,IAAK,WACLtD,YAAa,WACbjC,KAAM,OACN+N,OAtCM,mFAuCNC,KAAM,OAEVvN,QAAS,CACL8E,IAAK,UACLtD,YAAa,UACbjC,KAAM,SACN+N,OA5CK,uEA8CTvD,OAAQ,CACJjF,IAAK,SACLtD,YAAa,SACbjC,KAAM,UACN+N,OAjDI,gEAmDRE,aAAc,CACV1I,IAAK,WACLtD,YAAa,WACbjC,KAAM,SACN+N,OAtDU,0EAuDVC,KAAM,YAEVE,gBAAiB,CACb3I,IAAK,WACLtD,YAAa,WACbjC,KAAM,SACN+N,OA5Da,oFA6DbC,KAAM,YAEVG,KAAM,CACF5I,IAAK,WACLtD,YAAa,OACbjC,KAAM,SACN+N,OAhEE,wGAiEFC,KAAM,YAEVI,SAAU,CACN7I,IAAK,WACLtD,YAAa,YACbjC,KAAM,OACN+N,OAtEM,0EAuENC,KAAM,OAEVK,YAAa,CACT9I,IAAK,WACLtD,YAAa,eACbjC,KAAM,OACN+N,OA5ES,iFA6ETC,KAAM,OAEVpL,MAAO,CACH2C,IAAK,QACLtD,YAAa,QACbjC,KAAM,SACN+N,OAlFG,wEAoFPO,aAAc,CACV/I,IAAK,eACLtD,YAAa,WACbjC,KAAM,OACN+N,OArEU,oEAuEdQ,UAAW,CACPhJ,IAAK,QACLtD,YAAa,QACbjC,KAAM,SACN+N,OA1EO,0EA4EXS,aAAc,CACVjJ,IAAK,WACLtD,YAAa,WACbjC,KAAM,SACN+N,OAzGU,iFA8GLU,EAAiB,CAC1B,YAAa,CACTX,EAAcxM,SACdwM,EAActD,OACdsD,EAAcrN,QACdqN,EAAcG,aACd,CACI1I,IAAK,UACLtD,YAAa,SACbjC,KAAM,UACN+N,OAjHS,4HAmHb,CACIxI,IAAK,YACLtD,YAAa,gBACbjC,KAAM,OACN+N,OAtHW,mHAyHnB,gBAAiB,CACbD,EAAcM,SACd,CACI7I,IAAK,WACLtD,YAAa,qBACbjC,KAAM,SACN+N,OA9HW,mFAiInB,YAAa,CACTD,EAAcO,YACdP,EAAcI,gBACdJ,EAAclL,OAElB,YAAa,CACTkL,EAAcO,YACdP,EAAcI,gBACdJ,EAAclL,MACd,CACI2C,IAAK,cACLtD,YAAa,eACbjC,KAAM,SACN+N,OAjJa,uGAoJrB,aAAc,CACVD,EAAcxM,SACdwM,EAAcrN,QACdqN,EAAcM,SACdN,EAActD,OACdsD,EAAcG,aACd,CACI1I,IAAK,MACLtD,YAAa,8BACbjC,KAAM,OACN+N,OA1JmB,6FA6J3B,oBAAqB,CACjBD,EAAcxM,SACdwM,EAAcrN,QACdqN,EAActD,OACdsD,EAAcG,cAElB,eAAgB,CACZH,EAAcxM,SACdwM,EAAcO,YACdP,EAAcI,gBACdJ,EAAclL,MACd,CACI2C,IAAK,kBACLtD,YAAa,mBACbjC,KAAM,UACN+N,OA3KS,sDA8KjB,mBAAoB,CAChBD,EAAcG,cAElB,iBAAkB,CACdH,EAAcM,SACdN,EAAcG,cAElB,mBAAoB,CAChBH,EAAcxM,SACdwM,EAAcK,MAElB,YAAe,CACXL,EAAcxM,SACdwM,EAAcG,cAElB,iBAAkB,CACdH,EAAcxM,WAIToN,EAAc,CACvB,MAAS,CACL,CACInJ,IAAK,QACLtD,YAAa,QACbjC,KAAM,UACN+N,OAvMD,8GA0MP,SAAY,CACR,CACIxI,IAAK,aACLtD,YAAa,0BACbjC,KAAM,QACNgO,KAAM,OACND,OA/Me,iFAiNnB,CACIxI,IAAK,YACLtD,YAAa,sBACbjC,KAAM,QACNgO,KAAM,OACND,OArNW,6EAuNf,CACIxI,IAAK,aACLtD,YAAa,0BACbjC,KAAM,UACN+N,OA1Ne,8EA4NnB,CACIxI,IAAK,aACLtD,YAAa,2BACbjC,KAAM,UACN+N,OA/NY,yEAiOhB,CACIxI,IAAK,YACLtD,YAAa,0BACbjC,KAAM,SACN+N,OApOe,+GAuOvB,kBAAqB,CACjB,CACIxI,IAAK,OACLtD,YAAa,YACbjC,KAAM,SACN2O,QAAS,CAAC,CACN5N,MAAO,SACPkB,YAAa,UACf,CACElB,MAAO,QACPkB,YAAa,UAEjB8L,OAlPe,qLAoPnB,CACIxI,IAAK,WACLtD,YAAa,gBACbjC,KAAM,OACN+N,OAvPmB,iGAyPvB,CACIxI,IAAK,qBACLtD,YAAa,uBACbjC,KAAM,UACN+N,OA5P6B,8HA8PjC,CACIxI,IAAK,iBACLtD,YAAa,iBACbjC,KAAM,UACN+N,OAjQyB,iIAmQ7B,CACIxI,IAAK,YACLtD,YAAa,mBACbjC,KAAM,OACN+N,OAtQoB,6GAwQxB,CACIxI,IAAK,aACLtD,YAAa,qBACbjC,KAAM,UACN+N,OA3QqB,oHA8Q7B,mBAAoB,CAChBD,EAAcQ,aACdR,EAAcS,UACdT,EAAcU,cAElB,iBAAkB,CACdV,EAAcQ,aACdR,EAAcS,UACdT,EAAcU,cAElB,mBAAoB,CAChBV,EAAcQ,cAElB,YAAe,CACXR,EAAcU,cAElB,iBAAkB,CACdV,EAAcQ,aACd,CACI/I,IAAK,cACLtD,YAAa,sBACbjC,KAAM,UACN+N,OA1TY,wFCAlBa,EAAO,CACX,CACEnN,KAAM,mBACNoD,KAAM,8BACN5C,YAAa,qBAEf,CACER,KAAM,iBACNoD,KAAM,4BACN5C,YAAa,kBAEf,CACER,KAAM,mBACNoD,KAAM,8BACN5C,YAAa,oBAEf,CACER,KAAM,cACNoD,KAAM,yBACN5C,YAAa,gBAIX4M,EAAQ,CACZ,CACEpN,KAAM,iBACNoD,KAAM,4BACN5C,YAAa,mBAqDF6M,EAjDC,SAACnR,GAAW,IAEjBoR,EAAwCpR,EAAxCoR,MAAO5J,EAAiCxH,EAAjCwH,aAAcX,EAAmB7G,EAAnB6G,SAAUmD,EAAShK,EAATgK,MAC/BqH,EAA+BxK,EAA/BwK,kBAAmBlR,EAAY0G,EAAZ1G,SAHH,EAKWoL,sBAAW,SAAC3I,EAAO6I,OAL9B,6BASvB,OACI,yBAAKrL,UAAU,kBACZgR,EAAMjR,SAASiP,OACd,kBAAC,EAAD,iBACIjP,EACAiR,EAAMjR,SAFV,CAGAqH,aAAcA,KACd,KACD4J,EAAMC,kBAAkBjC,OACvB,kBAAC,EAAD,iBACIiC,EACAD,EAAMC,kBAFV,CAGApH,WAAYmH,EAAMjR,SAASiP,OAC3B5H,aAAcA,KACd,KACDyJ,EAAK3D,KAAI,SAAAgE,GAAG,OACXF,EAAME,EAAIxN,MAAMsL,OACd,kBAAC,EAAD,iBACMkC,EACAF,EAAME,EAAIxN,MACV+C,EAASyK,EAAIxN,MAHnB,CAIEkG,MAAOA,EACPxC,aAAcA,KAEhB,QAEH0J,EAAM5D,KAAI,SAAAiE,GAAI,OACbH,EAAMG,EAAKzN,MAAMsL,OACf,kBAAC,EAAD,iBACMmC,EACAH,EAAMG,EAAKzN,MAFjB,CAGEmM,QAASpJ,EAAS0K,EAAKzN,MACvB0D,aAAcA,KAEhB,UC3DCgK,G,KAjBD,SAACxR,GAAW,IAEfyR,EAA+EzR,EAA/EyR,MAAOC,EAAwE1R,EAAxE0R,aAAcjK,EAA0DzH,EAA1DyH,MAAOF,EAAmDvH,EAAnDuH,QAASoK,EAA0C3R,EAA1C2R,YAAaC,EAA6B5R,EAA7B4R,OAAQC,EAAqB7R,EAArB6R,WAAYvR,EAASN,EAATM,MAI7E,OCTsB,SAACwR,EAAQ1O,EAAO2O,GACtC,IAAMC,EAAMjK,mBAEZa,qBAAU,WACHoJ,EAAI9R,UAAY4R,GACfC,IAEJC,EAAI9R,QAAUkD,IACf,CAACA,IDDJ6O,CAAWR,EAAOC,EAAcjK,GAG5B,6BACI,yBAAKrH,UAAU,6BAA6BmH,QAAS,kBAAMA,EAAQkK,KAASG,GAC5E,yBAAKxR,UAAS,gBAAWyR,GAAcvR,MAAOA,GAC1C,4BAAQF,UAAU,iCAAiCmH,QAASoK,GAA5D,KACC3R,EAAM0N,a,QEuERwE,EAvFgB,CAC3B,YAAa,CACTvO,SAAU,EACVY,SAAU,GACVsI,QAAQ,EACR9F,SAAU,IACV9B,MAAO,EACP5C,KAAM,WAEV,YAAa,CACTsB,SAAU,EACVY,SAAU,EACVsI,QAAQ,EACR9F,SAAU,IACV9B,MAAO,EACPkN,YAAa,EACb9P,KAAM,WAEV,YAAa,CACTsB,SAAU,KACVY,SAAU,GACVsI,QAAQ,EACRf,SAAS,EACTzJ,KAAM,UACNS,QAAS,EACTsP,UAAW,KAEf,gBAAiB,CACbzO,SAAU,EACVtB,KAAM,OACN0E,SAAU,IACVxC,SAAU,GACVC,eAAe,GAEnB,aAAc,CACVb,SAAU,KACVY,SAAU,GACVsI,QAAQ,EACRxK,KAAM,OACN0E,SAAU,KACVjE,QAAS,EACToI,IAAK,MAET,oBAAqB,CACjBvH,SAAU,IACVY,SAAU,GACVsI,QAAQ,EACRxK,KAAM,UACNS,QAAS,GAEb,eAAgB,CACZa,SAAU,KACVY,SAAU,GACVlC,KAAM,UACN0E,SAAU,IACVgG,gBAAgB,EAChB9H,MAAO,GACPoN,iBAAiB,GAErB,mBAAoB,CAChB1O,SAAU,EACVY,SAAU,EACVlC,KAAM,WAEV,iBAAkB,CACdsB,SAAU,EACVY,SAAU,EACVlC,KAAM,OACN0E,SAAU,MAEd,mBAAoB,CAChBpD,SAAU,EACVY,SAAU,GACVC,eAAe,EACfnC,KAAM,WAEV,YAAe,CACXsB,SAAU,KACVY,SAAU,EACVlC,KAAM,WAEV,iBAAkB,CACdsB,SAAU,KACVtB,KAAM,YC7BCiQ,EAtDa,CACxBC,MAAO,CACHjO,YAAa,QACb0F,MAAO,GAEX7J,SAAU,CACNmE,YAAa,WACbyK,WAAY,EACZD,UAAW,IACXG,WAAY,EACZD,WAAY,KACZE,UAAW,GAEfmC,kBAAmB,CACf/M,YAAa,qBACbjC,KAAM,QACNuB,SAAU,IACVoK,oBAAoB,EACpBC,eAAgB,EAChBS,UAAW,IACXJ,WAAY,KAEhB,mBAAoB,CAChBhK,YAAa,oBACbS,aAAc,KACdE,MAAO,EACPV,SAAU,GAEd,iBAAkB,CACdD,YAAa,iBACbS,aAAc,KACdE,MAAO,EACPV,SAAU,GAEd,mBAAoB,CAChBD,YAAa,mBACbS,aAAc,KACdE,MAAO,EACPV,SAAU,GAEd,YAAe,CACXD,YAAa,cACbS,aAAc,KACdE,MAAO,GACPV,SAAU,GAEd,iBAAkB,CACdD,YAAa,iBACbS,aAAc,IACdiF,MAAO,IACPwI,YAAa,IC3BfC,EAAuB,SAAC1I,GAC1B,IAAI2I,EAAS,GAUb,OARAzP,OAAOC,KAAK4G,GAAiB3H,SAAQ,SAAAwQ,GACjC,IAAIhK,EAAUoB,EAAU4I,GAExB,IAAIhK,EAAS,MAAM,IAAIiK,MAAM,4BAE7BF,EAAOC,GA3BM,SAAChK,EAASf,GAC3B,IAAIiL,EAAiB/I,EAAgBlC,GAerC,OAda3E,OAAOC,KAAK2P,GAAgBC,QAAO,SAACC,EAAK5P,GAClD,IAAI6P,EAAcrK,EAAQxF,GAEtB8M,EAAU4C,EAAe1P,GAE7B,GAAmB,OAAhB6P,QAAwCC,IAAhBD,EAA2B,MAAM,IAAIJ,MAAM,oCAAsCzP,GAE5G,UAAU6P,WAAuB/C,EAAS,MAAM,IAAI2C,MAAM,sCAI1D,OAFAG,EAAI5P,GAAK6P,EAEFD,IACR,IAaaG,CAAavK,EAASgK,MAG/BD,GAqBLS,EAAoB,SAAC/B,GACvB,IAAIsB,EAAS,GASb,OARAzP,OAAOC,KAAKkQ,GAAcjR,SAAQ,SAAAwQ,GAC9B,IAAIU,EAAOjC,EAAMuB,GAEjB,IAAIU,EAAM,MAAM,IAAIT,MAAM,yBAE1BF,EAAOC,GAzBG,SAACU,EAAMzL,GACrB,IAAI0L,EAAcF,EAAaxL,GAc/B,OAZa3E,OAAOC,KAAKoQ,GAAaR,QAAO,SAACC,EAAK5P,GAC/C,IAAI6P,EAAcK,EAAKlQ,GACnB8M,EAAUqD,EAAYnQ,GAE1B,GAAmB,OAAhB6P,QAAwCC,IAAhBK,EAA2B,MAAM,IAAIV,MAAM,iCAAmCzP,GACzG,UAAU6P,WAAuB/C,EAAS,MAAM,IAAI2C,MAAM,mCAI1D,OAFAG,EAAI5P,GAAK6P,EAEFD,IACR,IAYaQ,CAAUF,EAAMV,MAGzBD,GAiCLc,EAAiC,SAAC3M,GAQpC,OAPa5D,OAAOC,KAAK2D,GAAUiM,QAAO,SAACC,EAAK5P,GAC5C,IAX4B8M,EAWxBtH,EAAU9B,EAAS1D,GACnBsQ,GAZwBxD,EAYsBtH,EAXzC1F,OAAOC,KAAK+M,GAAS6C,QAAO,SAACC,EAAK5P,GAE3C,OADA4P,EAAI5P,GAAK8M,EAAQ9M,GACV4P,IACR,KAUC,OADAA,EAAI5P,GAAKsQ,EACFV,IACR,KAKDW,EAAsB,SAAC7M,EAAU8M,EAAiBC,GAWpD,OAVa3Q,OAAOC,KAAK2D,GAAUiM,QAAO,SAACJ,EAAQvP,GAAO,IAAD,EACpB0D,EAAS1D,GAArCgE,EADgD,EAChDA,QAASwD,EADuC,EACvCA,SAAUyC,EAD6B,EAC7BA,MAMxB,OAJAsF,EAAOvP,GAAK,CAACwH,WAAYA,GACtBgJ,GAAmBxM,IAASuL,EAAOvP,GAAGgE,QAAUA,GAChDyM,GAAqBxG,IAAOsF,EAAOvP,GAAGiK,MAAQA,GAE1CsF,IACR,KAKMmB,EAAiB,SAACC,GAC3B,IAAIC,EAA2BP,EAA+BM,EAAgBhK,iBAC1EkK,EAAyBN,EAAoBI,EAAgB/J,WAAW,GAAM,GAE9EkK,EAAY,CACZnK,gBAAiBiK,EACjBX,aAAcU,EAAgBV,aAC9Bc,cAAeF,GAKnB,OAFaG,SAAOC,OAAOzI,KAAKE,UAAUoI,KChI/B,GACXI,KCHW,CACX/P,YAAa,OACbwF,gBAAgB,2BACToI,GADQ,IAEX,gBAAiB,CACbvO,SAAU,EACVtB,KAAM,OACN0E,SAAU,KACVxC,SAAU,GACVC,eAAe,GAEnB,aAAc,CACVb,SAAU,IACVY,SAAU,GACVsI,QAAQ,EACRxK,KAAM,OACN0E,SAAU,KACVjE,QAAS,EACToI,IAAK,MAET,oBAAqB,CACjBvH,SAAU,IACVY,SAAU,GACVlC,KAAM,UACNS,QAAS,GAEb,eAAgB,CACZa,SAAU,KACVY,SAAU,GACVlC,KAAM,UACN0E,SAAU,IACVgG,gBAAgB,EAChB9H,MAAO,IAEX,YAAe,CACXtB,SAAU,KACVY,SAAU,EACVlC,KAAM,aAGd+Q,aAAa,eACNd,GAEPvI,UAAW,CACP,YAAa,GACb,YAAa,GACb,YAAa,GACb,gBAAiB,GACjB,aAAc,GACd,oBAAqB,CAAEY,UAAU,GACjC,eAAgB,CAAEA,UAAU,GAC5B,mBAAoB,GACpB,iBAAkB,GAClB,mBAAoB,CAAEA,UAAU,GAChC,YAAe,KDlDnB2J,MEJW,CACXhQ,YAAa,oBACbwF,gBAAgB,2BACToI,GADQ,IAEX,YAAY,2BACLA,EAAuB,cAD9B,IAEIpG,SAAS,IAEb,gBAAiB,CACbnI,SAAU,EACVtB,KAAM,OACN0E,SAAU,IACVxC,SAAU,GACVC,eAAe,GAEnB,aAAc,CACVb,SAAU,IACVY,SAAU,GACVsI,QAAQ,EACRxK,KAAM,OACN0E,SAAU,KACVjE,QAAS,EACToI,IAAK,MAET,oBAAoB,2BACbgH,EAAuB,sBAD9B,IAEIvO,SAAU,IACVY,SAAU,EACVsI,QAAQ,MAGhBuG,aAAa,2BACNd,GADK,IAER,mBAAoB,CAChBhO,YAAa,mBACbS,aAAc,KACdE,MAAO,EACPV,SAAU,KAGlBwF,UAAW,CACP,YAAa,GACb,YAAa,GACb,YAAa,GACb,gBAAiB,GACjB,aAAc,GACd,oBAAqB,GACrB,eAAgB,CAAEY,UAAU,GAC5B,mBAAoB,GACpB,iBAAkB,GAClB,mBAAoB,GACpB,YAAe,KF9CnB4J,iBGLW,CACXjQ,YAAa,yBACbwF,gBAAgB,2BACToI,GADQ,IAEX,gBAAiB,CACbvO,SAAU,EACVtB,KAAM,OACN0E,SAAU,KACVxC,SAAU,GACVC,eAAe,GAEnB,eAAgB,CACZb,SAAU,IACVY,SAAU,EACVlC,KAAM,UACN0E,SAAU,IACVgG,gBAAgB,EAChB9H,MAAO,GACPoN,iBAAiB,GAErB,YAAe,CACX1O,SAAU,KACVY,SAAU,EACVlC,KAAM,aAGd+Q,aAAa,2BACNd,GADK,IAERnS,SAAU,CACNmE,YAAa,WACbyK,WAAY,EACZD,UAAW,IACXG,WAAY,EACZD,WAAY,IACZE,UAAW,GAEfmC,kBAAmB,CACf/M,YAAa,qBACbjC,KAAM,SACNuB,SAAU,IACVoK,oBAAoB,EACpBC,eAAgB,EAChBS,UAAW,IACXJ,WAAY,KAEhB,YAAe,CACXhK,YAAa,cACbS,aAAc,KACdE,MAAO,GACPV,SAAU,KAGlBwF,UAAW,CACP,YAAa,GACb,YAAa,GACb,YAAa,GACb,gBAAiB,GACjB,aAAc,GACd,oBAAqB,GACrB,eAAgB,GAChB,mBAAoB,GACpB,iBAAkB,GAClB,mBAAoB,CAAEY,UAAU,KHxDpC6J,cINW,CACXlQ,YAAa,kBACbwF,gBAAgB,2BACToI,GADQ,IAEX,gBAAiB,CACbvO,SAAU,EACVtB,KAAM,OACN0E,SAAU,KACVxC,SAAU,GACVC,eAAe,GAEnB,aAAc,CACVb,SAAU,KACVY,SAAU,GACVsI,QAAQ,EACRxK,KAAM,OACN0E,SAAU,KACVjE,QAAS,EACToI,IAAK,MAET,eAAgB,CACZvH,SAAU,IACVY,SAAU,EACVlC,KAAM,UACN0E,SAAU,IACVgG,gBAAgB,EAChB9H,MAAO,GACPoN,iBAAiB,GAErB,YAAe,CACX1O,SAAU,IACVY,SAAU,EACVlC,KAAM,aAGd+Q,aAAa,2BACNd,GADK,IAERC,MAAO,CACHjO,YAAa,QACb0F,MAAO,IAEX7J,SAAU,CACNmE,YAAa,WACbyK,WAAY,EACZD,UAAW,IACXG,WAAY,EACZD,WAAY,IACZE,UAAW,GAEfmC,kBAAmB,CACf/M,YAAa,qBACbjC,KAAM,QACNuB,SAAU,IACVoK,oBAAoB,EACpBC,eAAgB,EAChBS,UAAW,IACXJ,WAAY,KAEhB,YAAe,CACXhK,YAAa,cACbS,aAAc,KACdE,MAAO,GACPV,SAAU,KAGlBwF,UAAW,CACP,YAAa,GACb,YAAa,CAAEY,UAAU,GACzB,YAAa,GACb,gBAAiB,GACjB,aAAc,GACd,oBAAqB,GACrB,eAAgB,GAChB,mBAAoB,GACpB,iBAAkB,GAClB,mBAAoB,CAAEA,UAAU,GAChC,iBAAkB,CAAEA,UAAU,MCzEhC8J,EAAY,SAACzU,GAAW,IAEnB0U,EAAsB1U,EAAtB0U,SAAUC,EAAY3U,EAAZ2U,SAEjB,OACI,yBAAKrU,MAAO,CAACC,MAAO,QAChB,4BAAQH,UAAU,iBAAiBgD,MAAOuR,EAAUD,SAAUA,GAC1D,4BAAQtR,MAAO,UAAWuH,UAAQ,GAAlC,wBACC1H,OAAOC,KAAK0R,GAAWtH,KAAI,SAAAuH,GAAC,OAAI,4BAAQjN,IAAKiN,EAAGzR,MAAOyR,GAAID,EAAUC,GAAGvQ,gBACzE,4BAAQsD,IAAK,SAAUxE,MAAO,UAA9B,aAkHD0R,EA5GK,SAAC9U,GAAW,IAErB6G,EAAyD7G,EAAzD6G,SAAUkO,EAA+C/U,EAA/C+U,SAAUrD,EAAqC1R,EAArC0R,aAAcnK,EAAuBvH,EAAvBuH,QAASyN,EAAchV,EAAdgV,WAFvB,EAaStN,mBAAS,IAblB,mBAapBuN,EAboB,KAaRC,EAbQ,OAcOxN,mBAAS,IAdhB,mBAcpByN,EAdoB,KAcTC,EAdS,OAemB1N,oBAAS,GAf5B,mBAepBiM,EAfoB,KAeH0B,EAfG,OAgBuB3N,oBAAS,GAhBhC,mBAgBpBkM,EAhBoB,KAgBD0B,EAhBC,OAiBqB5N,mBARxB,WATG,mBAiBpB6N,EAjBoB,KAiBFC,EAjBE,KA4E3B,OACI,kBAAC,EAAD,CAAO/D,MAzEG,SAyEWC,aAAcA,EAAcjK,MATvC,WACVyN,EAAc,IACdE,EAAa,IACbC,GAAmB,GACnBC,GAAqB,GACrBE,EAhEoB,YAoE2CjO,QAASA,EAASoK,YAAaqD,EAAYpD,OAxE/F,yBAwE+GC,WAvE3G,aAuEmIvR,MAAO,CAACmV,UAAU,cAAD,OAzEzJ,WAyEyK/D,EAAyB,MAAO,SAAhD,OAC/J,yBAAKtR,UAAU,0BACX,yBAAKA,UAAU,2BACX,yBAAKA,UAAU,wBAAf,mBACA,kBAAC,EAAD,CAAWuU,SAAUY,EAAkBb,SAlD1B,SAACtS,GAC1B,IAAMwF,EAAMxF,EAAE0P,OAAO1O,MAIrB,GAFAoS,EAAoB5N,GAET,WAARA,EAAH,CALgC,MAUGgN,EAAUhN,GAAtB8N,GAVS,EAUzBpR,YAVyB,gCAY1BqR,EAAO9B,EAAe,eAAI6B,IAEhCN,EAAaO,QARTP,EAAa,OA6CL,8BAAUhV,UAAU,kBAAkBwV,KAxEzC,GAwEqDC,KAvErD,GAuEiEC,YA3EtD,0BA2EoF1S,MAAO+R,EAAWT,SApBpG,SAACtS,GACvB,IAAIuT,EAAOvT,EAAE0P,OAAO1O,MAEpBgS,EAAaO,MAkBD,yBAAKvV,UAAU,6BACX,mDACA,2BAAOiC,KAAK,WAAWqS,SAAU,kBAAMW,GAAoB1B,IAAkBoC,QAASpC,KAE1F,yBAAKvT,UAAU,6BACX,sDACA,2BAAOiC,KAAK,WAAWqS,SAAU,kBAAMY,GAAsB1B,IAAoBmC,QAASnC,KAE9F,yBAAKxT,UAAU,0BACX,4BAAQA,UAAU,kCAAkCmH,QAzEnD,WACjB,IAAMV,EN2BgB,SAACA,EAAU8M,EAAiBC,GAEtD,IACI,IAAIoC,EAAiBrK,KAAKC,MAAMuI,SAAO8B,OAAOpP,IAM9C,MAAO,CACHiD,gBALwB2I,EAAqBuD,EAAelM,iBAM5DsJ,aALqBD,EAAkB6C,EAAe5C,cAMtDc,cALgBR,EAAoBsC,EAAe9B,cAAeP,EAAiBC,IAS3F,MAAMxR,GACF,MAAM,IAAIwQ,MAAM,wDAA0DxQ,EAAE8T,UM5C3DC,CAAehB,EAAWxB,EAAiBC,GAC5DmB,EAASlO,GACTuO,EAAa,KAsE8EzK,UAAWwK,GAAtF,YAGR,yBAAK/U,UAAU,2BACX,yBAAKA,UAAU,wBAAf,mBACA,8BAAUgW,GAzFD,iBAyFuBhW,UAAU,kBAAkBwV,KAvF/D,GAuF2EC,KAtF3E,GAsFuFzS,MAAO6R,EAAYoB,UAAU,IACjH,yBAAKjW,UAAU,0BACX,4BAAQA,UAAU,kCAAkCmH,QA1EnD,WACjB,IAAMoO,EAAO9B,EAAehN,GAE5BqO,EAAcS,KAuEE,UACA,4BAAQvV,UAAU,kCAAkCmH,QApDhD,WACH4D,SAASmL,eAzCL,kBA2CZC,SAET,IACIpL,SAASqL,YAAY,QAGzB,MAAOC,MA2CuF9L,UAAWsK,GAAzF,a,QCvHlByB,GAAiB,SAAC1W,GAAW,IACxBoD,EAAmBpD,EAAnBoD,MAAOsR,EAAY1U,EAAZ0U,SADgB,EAGUhN,mBAAStE,EAAM,KAHzB,mBAGvBuT,EAHuB,KAGTC,EAHS,KAW9B,OAAO,8BAAM,2BAAOxW,UAAU,uBAAuBiC,KAAK,SAASe,MAAOuT,EAAcjR,IAAI,IAAImR,KAAK,KAAKnC,SANrF,SAACtS,GACdA,EAAE0P,OAAO1O,QACbsR,EAAoC,IAA3BoC,WAAW1U,EAAE0P,OAAO1O,QAC7BwT,EAAgBxU,EAAE0P,OAAO1O,WAGtB,QAGL2T,GAAmB,SAAC/W,GAAW,IAC1BoD,EAAyBpD,EAAzBoD,MAAOsR,EAAkB1U,EAAlB0U,SAAUrE,EAAQrQ,EAARqQ,KAOxB,OAAO,8BAAM,2BAAOjQ,UAAU,uBAAuBiC,KAAK,SAASe,MAAOA,EAAOsC,IAAI,IAAIgP,SALpE,SAACtS,GACdA,EAAE0P,OAAO1O,OACbsR,EAASsC,SAAS5U,EAAE0P,OAAO1O,WAGxB,IAA8GiN,IAGnH4G,GAAkB,SAACjX,GAAW,IACzBoD,EAAyBpD,EAAzBoD,MAAOsR,EAAkB1U,EAAlB0U,SAAUrE,EAAQrQ,EAARqQ,KAOxB,OAAO,8BAAM,2BAAOjQ,UAAU,uBAAuBiC,KAAK,SAASe,MAAOA,EAAOsC,IAAI,IAAImR,KAAK,MAAMnC,SAL/E,SAACtS,GACdA,EAAE0P,OAAO1O,OACbsR,EAASoC,WAAW1U,EAAE0P,OAAO1O,WAG1B,IAAyHiN,IAG9H6G,GAAoB,SAAClX,GAAW,IAC3BoD,EAAmBpD,EAAnBoD,MAAOsR,EAAY1U,EAAZ0U,SADmB,EAGOhN,mBAAe,IAANtE,GAHhB,mBAG1BuT,EAH0B,KAGZC,EAHY,KAWjC,OAAO,8BAAM,2BAAOxW,UAAU,uBAAuBiC,KAAK,SAASe,MAAOuT,EAAcjR,IAAI,IAAImR,KAAK,KAAKnC,SANrF,SAACtS,GACdA,EAAE0P,OAAO1O,QACbsR,EAASoC,WAAW1U,EAAE0P,OAAO1O,OAAO,KACpCwT,EAAgBxU,EAAE0P,OAAO1O,WAGtB,MAGL+T,GAAgB,SAACnX,GAAW,IACvBoD,EAAmBpD,EAAnBoD,MAAOsR,EAAY1U,EAAZ0U,SAMd,OAAO,2BAAOrS,KAAK,WAAW+U,eAAgBhU,EAAOsR,SAJhC,SAACtS,GAClBsS,EAAStS,EAAE0P,OAAOiE,aAMpBsB,GAAe,SAACrX,GAAW,IACtBoD,EAAkCpD,EAAlCoD,MAAOsR,EAA2B1U,EAA3B0U,SAAU5Q,EAAiB9D,EAAjB8D,KAAMkN,EAAWhR,EAAXgR,QAExBsG,EAAe,SAAClV,GAClBsS,EAAStS,EAAE0P,OAAO1O,QAGtB,OACI4N,EAAQ1D,KAAI,SAAArB,GAAC,OACT,6BACI,2BAAO5J,KAAK,QAAQ+T,GAAInK,EAAE7I,MAAOU,KAAMA,EAAMV,MAAO6I,EAAE7I,MAAOgU,eAAgBnL,EAAE7I,QAAUA,EAAOsR,SAAU4C,IAC1G,2BAAOC,QAAStL,EAAE7I,OAAQ6I,EAAE3H,kBAM7BkT,UAAS,SAACnV,EAAMe,EAAOsR,EAAU9M,EAAK9D,EAAM2T,GACvD,OAAOpV,GACH,IAAK,OACD,OAAO,kBAAC,GAAD,CAAgBuF,IAAKA,EAAKxE,MAAOA,EAAOsR,SAAUA,IAC7D,IAAK,SACD,OAAO,kBAAC,GAAD,eAAkB9M,IAAKA,EAAKxE,MAAOA,EAAOsR,SAAUA,GAAc+C,IAC7E,IAAK,QACD,OAAO,kBAAC,GAAD,eAAiB7P,IAAKA,EAAKxE,MAAOA,EAAOsR,SAAUA,GAAc+C,IAC5E,IAAK,UACD,OAAO,kBAAC,GAAD,CAAmB7P,IAAKA,EAAKxE,MAAOA,EAAOsR,SAAUA,IAChE,IAAK,UACD,OAAO,kBAAC,GAAD,CAAe9M,IAAKA,EAAKxE,MAAOA,EAAOsR,SAAUA,IAC5D,IAAK,SACD,OAAO,kBAAC,GAAD,eAAc9M,IAAKA,EAAKxE,MAAOA,EAAOU,KAAMA,EAAM4Q,SAAUA,GAAc+C,IACrF,QACI,OAAO,OC/DJC,I,YA1BO,SAAC1X,GAAW,IACvBoD,EAA2FpD,EAA3FoD,MAAOU,EAAoF9D,EAApF8D,KAAMzB,EAA8ErC,EAA9EqC,KAAM+N,EAAwEpQ,EAAxEoQ,OAAQ9L,EAAgEtE,EAAhEsE,YAAaoQ,EAAmD1U,EAAnD0U,SAAUiD,EAAyC3X,EAAzC2X,OAAQC,EAAiC5X,EAAjC4X,UAAWC,EAAsB7X,EAAtB6X,UAAcJ,EAD7D,YACqEzX,EADrE,4FAe7B,OACI,yBAAKI,UAAU,kBACX,6BACI,uBAAGA,UAAU,qCAAqC0X,aAXzC,SAAC1V,GAClB,IAAM2V,EAAM,CACRC,EAAG5V,EAAE0P,OAAOmG,WACZC,EAAG9V,EAAE0P,OAAOqG,WAEhBR,EAAOrT,EAAa8L,EAAQ2H,IAM0DK,aAAcR,KAEhG,yBAAKxX,UAAU,yBAAyBkE,GACvCkT,GAAOnV,EAAMe,GAlBI,SAACiV,GACvB3D,EAAS5Q,EAAMuU,KAiB6BR,EAAY,SAAU/T,EAAM2T,MCJjEa,GAnBA,SAACtY,GAAW,IAChB8D,EAA0B9D,EAA1B8D,KAAMyU,EAAoBvY,EAApBuY,KAAMC,EAAcxY,EAAdwY,KAAMC,EAAQzY,EAARyY,KAKnBnY,EAAQ,CACVoY,KAAK,GAAD,OAAKF,EAAL,MACJG,IAAI,GAAD,OAAKF,EAJU,GAIf,OAGP,OACI,yBAAKrY,UAAU,UAAUE,MAAOA,GAC5B,yBAAKF,UAAU,kBAAf,cAA4C0D,EAA5C,KACA,yBAAK1D,UAAU,uBAAuBmY,KC2BnCK,GAvCU,SAAC5Y,GAAW,IAE1B8D,EAAoC9D,EAApC8D,KAAMmM,EAA8BjQ,EAA9BiQ,QAASe,EAAqBhR,EAArBgR,QAAS0D,EAAY1U,EAAZ0U,SAFC,EAIIhN,oBAAS,GAJb,mBAIzBmR,EAJyB,KAIbC,EAJa,OAKJpR,mBAAS,IALL,mBAKzB0I,EALyB,KAKjB2I,EALiB,KAO1BzB,EAAe,SAAC0B,EAAWC,GAC7B,IAAMC,EAAU,2BAAOjJ,GAAP,mBAAiB+I,EAAYC,IAC7CvE,EAASwE,EAAYpV,IAGnBqV,EAAmB,SAACrV,EAAMyU,EAAMR,GAClCe,GAAc,GACdC,EAAU,CACNjV,OACAyU,OACAC,KAAMT,EAAIC,EACVS,KAAMV,EAAIG,KAIZkB,EAAc,WAChBN,GAAc,GACdC,EAAU,KAGd,OACI,yBAAK3Y,UAAU,qBACX,yBAAKA,UAAU,4BAA4B6P,EAAQ3L,aAClD0M,EAAQ1D,KAAI,SAAArB,GACb,OAAO,kBAAC,GAAD,iBAAmBA,EAAnB,CAAsBrE,IAAG,UAAK9D,EAAL,YAAamI,EAAErE,KAAOxE,MAAO6M,EAAQhE,EAAErE,KAAM9D,KAAMmI,EAAErE,IAAKiQ,UAAS,UAAK/T,EAAL,YAAamI,EAAErE,KAAO8M,SAAU4C,EAAcK,OAAQwB,EAAkBvB,UAAWwB,QAErLP,EAAa,kBAAC,GAAWzI,GAAY,OCgFnCiJ,GAhHO,SAACrZ,GAAW,IAEvB6G,EAAkF7G,EAAlF6G,SAAU6K,EAAwE1R,EAAxE0R,aAAc4H,EAA0DtZ,EAA1DsZ,SAAUC,EAAgDvZ,EAAhDuZ,aAAcC,EAAkCxZ,EAAlCwZ,UAAWjS,EAAuBvH,EAAvBuH,QAASyN,EAAchV,EAAdgV,WAEpEjL,EAAoBlD,EAApBkD,UAAWqH,EAASvK,EAATuK,MASZqI,EAAkB,mEAbK,EAiBmB/R,mBAASqC,GAjB5B,mBAiBtB2P,EAjBsB,KAiBJC,EAjBI,OAkBWjS,mBAAS0J,GAlBpB,mBAkBtBwI,EAlBsB,KAkBRC,EAlBQ,OAmB2BnS,mBAASzE,OAAOC,KAAK6G,GAAW,IAnB3D,mBAmBtB+P,EAnBsB,KAmBAC,EAnBA,OAoBqBrS,mBAASzE,OAAOC,KAAKkO,GAAO,IApBjD,mBAoBtB4I,EApBsB,KAoBHC,EApBG,OAqB6BvS,oBAAS,GArBtC,mBAqBtBwS,EArBsB,KAqBCC,EArBD,OAsBuBzS,oBAAS,GAtBhC,mBAsBtB0S,EAtBsB,KAsBFC,EAtBE,KAwB7BzR,qBAAU,WACNiR,EAAgBzI,GAChBuI,EAAoB5P,KACrB,CAACuP,IAEJ,IAsBMgB,EAAqB,SAAClY,GACxB,IAAMmY,EAAanY,EAAE0P,OAAO0I,aAAa,WACzCT,EAAwBQ,IAGtBE,EAAkB,SAACrY,GACrB,IAAMmY,EAAanY,EAAE0P,OAAO0I,aAAa,WACzCP,EAAqBM,IAYzB,OACI,kBAAC,EAAD,CAAO9I,MAjEG,WAiEWC,aAAcA,EAAcjK,MAVvC,WACVsS,EAAwB9W,OAAOC,KAAK6G,GAAW,IAC/CkQ,EAAqBhX,OAAOC,KAAKkO,GAAO,IACxCyI,EAAgBzI,GAChBuI,EAAoB5P,GACpBoQ,GAAyB,GACzBE,GAAsB,IAIyC9S,QAASA,EAASoK,YAAaqD,EAAYpD,OAhEhG,kBAgEgHC,WA/D3G,cA+DmIvR,MAAO,CAACmV,UAAU,cAAD,OAjEzJ,aAiEyK/D,EAAyB,MAAO,WAC/M,yBAAKtR,UAAU,0BACX,yBAAKA,UAAU,2BACX,yBAAKA,UAAU,wBAAf,uBACA,yBAAKA,UAAU,6BACV6C,OAAOC,KAAK6G,GAAWuD,KAAI,SAAAnK,GAAC,OACzB,yBAAKyE,IAAKzE,EAAG/C,UAAW0Z,IAAyB3W,EAAI,yBAA2B,kBAAmB8M,QAAS9M,EAAGoE,QAAS+S,GAAqBvQ,EAAU5G,GAAGmB,iBAGjKwV,EAAuB,kBAAC,GAAD,CAAkBhW,KAAMgW,EAAsB7J,QAASyJ,EAAiBI,GAAuB9I,QAASF,EAAegJ,GAAuBpF,SAnDnJ,SAACzE,EAASrI,GACzC,IAAM8S,EAAY,2BAAOhB,GAAP,mBAA0B9R,EAAMqI,IAClD0J,EAAoBe,GACpBP,GAAyB,MAgDmM,KAChN,yBAAK/Z,UAAU,+BACX,yBAAKA,UAAU,6BACV8Z,EAAwBT,EAAqB,MAElD,6BACI,4BAAQrZ,UAAU,eAAemH,QA7ChC,WACrBgS,EAAaG,GACbS,GAAyB,KAjCH,uBAgFd,yBAAK/Z,UAAU,2BACX,yBAAKA,UAAU,wBAAf,mBACI,yBAAKA,UAAU,6BACV6C,OAAOC,KAAKkO,GAAO9D,KAAI,SAAAnK,GAAC,OACrB,yBAAKyE,IAAKzE,EAAG/C,UAAW4Z,IAAsB7W,EAAI,yBAA2B,kBAAmB8M,QAAS9M,EAAGoE,QAASkT,GAAkBrJ,EAAMjO,GAAGmB,iBAGvJ0V,EAAoB,kBAAC,GAAD,CAAkBlW,KAAMkW,EAAmB/J,QAAS2J,EAAaI,GAAoBhJ,QAASD,EAAYiJ,GAAoBtF,SA9DvI,SAACzE,EAASrI,GACtC,IAAM+S,EAAQ,2BAAOf,GAAP,mBAAsBhS,EAAMqI,IAC1C4J,EAAgBc,GAChBN,GAAsB,MA2DoL,KAC1L,yBAAKja,UAAU,+BACX,yBAAKA,UAAU,6BACVga,EAAqBX,EAAqB,MAE/C,6BACI,4BAAQrZ,UAAU,eAAemH,QAzDvC,WAClBiS,EAAUI,GACVS,GAAsB,KArCH,sBCXrBO,I,MAAe,SAAC5a,GAAW,IAEtB8D,EAAgC9D,EAAhC8D,KAAM+W,EAA0B7a,EAA1B6a,MAAOnG,EAAmB1U,EAAnB0U,SAAUtR,EAASpD,EAAToD,MAM9B,OACI,6BACI,4BAAQhD,UAAU,iBAAiBgD,MAAOA,EAAOsR,SANpC,SAACtS,GAClBsS,EAASsC,SAAS5U,EAAE0P,OAAO1O,OAAQU,KAM1B,YAAIgX,MAAMD,GAAO3X,QAAQoK,KAAI,SAAAqB,GAAC,OAAI,4BAAQ/G,IAAG,UAAK9D,EAAL,kBAAmB6K,GAAKvL,MAAOuL,EAAE,GAAIA,EAAE,UAkJtFoM,GA5Ic,SAAC/a,GAAW,IAE9B+J,EAA+E/J,EAA/E+J,UAAW2H,EAAoE1R,EAApE0R,aAAcsJ,EAAsDhb,EAAtDgb,UAAWC,EAA2Cjb,EAA3Cib,SAAUC,EAAiClb,EAAjCkb,SAAU3T,EAAuBvH,EAAvBuH,QAASyN,EAAchV,EAAdgV,WAMlEvK,EACO,GADPA,EAEW,GAFXA,EAGc,GAXgB,EAcN/C,mBAAS+C,GAdH,mBAc7B0Q,EAd6B,KAcpBC,EAdoB,OAeE1T,mBAAS+C,GAfX,mBAe7B5C,EAf6B,KAehBwT,EAfgB,OAgBQ3T,mBAAS+C,GAhBjB,mBAgB7B6Q,EAhB6B,KAgBbC,EAhBa,OAiBb7T,mBAASzE,OAAOC,KAAK6G,GAAWyR,OAAO,GAAvDC,EAjB6B,oBA2B9BC,EAAoB3T,iBAAOuT,GACjCI,EAAkBxb,QAAUob,EAE5B,IAAMK,EAAc,SAACvZ,GACjBgZ,EAAWhZ,EAAE0P,OAAO8J,MAGlBC,EAAc,WAChBT,EAAW,KAGTU,EAAuB,SAAC1Z,GAC1B,IAAIuG,EAAUvG,EAAE0P,OAAO0I,aAAa,WACpCe,EAAkB5S,GAElB0S,EAAe,4BAAD,OAA6BtR,EAAUpB,GAASrE,cAE9D6G,SAASC,iBAAiB,UAAW2Q,EAAe,CAACC,MAAM,IAC3D7Q,SAASC,iBAAiB,WAAYC,EAAgB,CAAC2Q,MAAM,KAG3DD,EAAgB,SAAC9Z,GAAU,IAEtB2F,EAAO3F,EAAP2F,IAEHqU,EAAarU,KAEjB3F,EAAMiK,iBACNgQ,EAAYtU,KAOVyD,EAAiB,SAACjJ,GAAD,OAAO8Z,EAAY9Z,EAAEwF,MAEtCqU,EAAe,SAACrU,GAClB,QAAGA,EAAIuU,MAAM,gBAgBXD,EAAc,SAACtU,GACjBuD,SAASG,oBAAoB,WAAYD,GAEzC,IAAMlE,EAdiB,SAACS,GACxB,OAAGtF,EAASsF,GACD,CAACA,MAAKC,YAAavF,EAASsF,IACpCA,EAAIuU,MAAM,WACF,CAACvU,MAAKC,YAAaD,EAAIwU,eAC/BxU,EAAIuU,MAAM,WACF,CAACvU,MAAKC,YAAa,KAAOD,GAE9B,CAACA,MAAKC,YAAaD,GAMVyU,CAAmBzU,GAE/Be,EAAU+S,EAAkBxb,QAEhC8a,EAAU7T,EAASwB,GACnB0S,EAAe,GAAD,OAAItR,EAAUpB,GAASrE,YAAvB,iCAA2D6C,EAAQU,eAWrF,OACI,kBAAC,EAAD,CAAO4J,MAjGG,kBAiGWC,aAAcA,EAAcjK,MATvC,WACV0D,SAASG,oBAAoB,UAAWyQ,GACxC5Q,SAASG,oBAAoB,WAAYD,GACzC+P,EAAW3Q,GACX4Q,EAAe5Q,GACf8Q,EAAkB9Q,IAI6ClD,QAASA,EAASqK,OAhGtE,uBAgGsFtR,MAAO,CAACmV,UAAU,cAAD,OAjGxG,oBAiGwH/D,EAAyB,MAAO,UAAYG,WA/F/J,eA+FuLF,YAlFtL,WAChByJ,EAAW3Q,GACX4Q,EAAe5Q,GACf8Q,EAAkB9Q,GAElBuK,MA8EI,yBAAK5U,UAAU,4BACX,yBAAKA,UAAU,wBAAf,iCACA,yBAAKA,UAAU,WACX,0BAAMA,UAAU,eAAekc,cAAenB,GAASoB,YAClDpB,IAGT,yBAAK/a,UAAU,2BACX,yBAAKA,UAAU,0BAAf,eAGA,yBAAKA,UAAU,6BACV6C,OAAOC,KAAK6G,GAAWuD,KAAI,SAAAnK,GACxB,GAAS,kBAANA,EACH,OAAO,yBAAK/C,UAAU,0BAA0BwH,IAAKzE,GACjD,yBACI/C,UAAU,gBACVwb,IAAK7R,EAAU5G,GAAGmB,YAClBqE,QAASxF,EACTqZ,YAAab,EACbc,WAAYZ,EACZtU,QAASuU,EACT1S,IAAKW,EAAU5G,GAAG+D,KAClBjG,OAAQ,GACRV,MAAO,KAEX,4BAAQH,UAAS,UAAK2J,EAAU5G,GAAGwH,SAAW,yBAA2B,gBAAkBpD,QAAS,kBAAM2T,EAAS/X,KAAK4G,EAAU5G,GAAGwH,SAAW,SAAW,WAC3J,kBAAC,GAAD,CAAc7G,KAAMX,EAAG0X,MAAOY,EAAcrY,MAAO2G,EAAU5G,GAAGiK,MAAOsH,SAAUuG,UAKjG,6BAAMpT,GAA4B,SCvHnC6U,GAjCI,SAAC1c,GAAW,IACpB0R,EAAqC1R,EAArC0R,aAAcnK,EAAuBvH,EAAvBuH,QAASyN,EAAchV,EAAdgV,WAM9B,OACI,kBAAC,EAAD,CAAOvD,MALG,QAKWlK,QAASA,EAASoK,YAAaqD,EAAYpD,OAJtD,QAIsEC,WAHjE,eAIXvR,MAAO,CAACmV,UAAU,cAAD,OANX,UAM2B/D,EAAyB,MAAO,uBAEjE,yBAAKtR,UAAU,wBACX,yBAAKA,UAAU,wBAAf,SACA,yBAAKA,UAAU,4CACX,gFAGA,kgBAIyG,4CAJzG,KAMA,6IC5BL,I,MAAA,CACX,CACIwR,OAAQ,cACR+K,YAAa,mEAEjB,CACI/K,OAAQ,uBACR+K,YAAa,2PAGjB,CACI/K,OAAQ,kBACR+K,YAAa,0LAGjB,CACI/K,OAAQ,kBACR+K,YAAa,yQAIjB,CACI/K,OAAQ,oBACR+K,YAAa,+EAEjB,CACI/K,OAAQ,cACR+K,YAAa,oDAEjB,CACI/K,OAAQ,YACR+K,YAAa,0DAEjB,CACI/K,OAAQ,mBACR+K,YAAa,iFAEjB,CACI/K,OAAQ,cACR+K,YAAa,uFClCfC,GAAiB,CACnBC,UAAW,OACXC,aAAc,QAGZC,GAAY,CACdC,SAAU,QAGRC,GAAa,CACfD,SAAU,QAGRE,GAAW,SAACld,GACd,IAEOmd,EAAWnd,EAAXmd,QAEP,OACI,yBAAK/c,UAAU,SACX,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,cAPb,cAUF,6BACKgd,GAAS9P,KAAI,SAAA+P,GAAI,OACd,yBAAK/c,MAAOsc,IACR,uBAAGtc,MAAO2c,IAAaI,EAAKzL,QAC5B,yBAAKtR,MAAOyc,IACPM,EAAKV,kBAItB,6BACI,4BAAQvc,UAAU,eAAemH,QAAS4V,GAA1C,YAEJ,4BAAQ/c,UAAU,iCAAiCmH,QAAS4V,GAA5D,QAoBDG,GAdO,WAElB,IAFwB,EAIgB5V,oBAAS,GAJzB,mBAIjB6V,EAJiB,KAIHC,EAJG,KAMxB,OACI,6BACI,yBAAKpd,UAAU,6BAA6BmH,QAAS,kBAAMiW,GAAgB,KANpE,cAOND,EAAe,kBAAC,GAAD,CAAUJ,QAAS,kBAAMK,GAAgB,MAAa,OCuDnEC,GA/GU,CACrB,YAAa,CACTnZ,YAAa,YACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,wBAEV,YAAa,CACT5C,YAAa,YACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,wBAEV,aAAc,CACV5C,YAAa,aACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,yBAEV,YAAa,CACT5C,YAAa,YACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,wBAEV,gBAAiB,CACb5C,YAAa,gBACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,4BAEV,oBAAqB,CACjB5C,YAAa,qBACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,gCAEV,eAAgB,CACZ5C,YAAa,eACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,2BAEV,mBAAoB,CAChB5C,YAAa,oBACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,+BAEV,iBAAkB,CACd5C,YAAa,iBACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,6BAEV,mBAAoB,CAChB5C,YAAa,mBACb8I,MAAO,EACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,+BAEV,YAAe,CACX5C,YAAa,cACb8I,MAAO,GACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,0BAEV,iBAAkB,CACd5C,YAAa,iBACb8I,MAAO,GACPjG,QAAS,CACLS,IAAK,IACLC,YAAa,KAEjBX,KAAM,8BCzFCwW,GAhBW,SAAC1d,GAAW,IAE3BoD,EAAsDpD,EAAtDoD,MAAOgT,EAA+CpW,EAA/CoW,GAAIuH,EAA2C3d,EAA3C2d,MAAOvd,EAAoCJ,EAApCI,UAAWwd,EAAyB5d,EAAzB4d,YAAalJ,EAAY1U,EAAZ0U,SAIjD,OACI,yBAAKtU,UAAS,qBAAgBA,IAC1B,2BAAOmX,QAASnB,GAAKuH,GACrB,6BACI,8BAAUvd,UAAU,uCAAuCgW,GAAIA,EAAIhT,MAAOA,EAAO0S,YAAa8H,EAAaC,UAAU,EAAMnJ,SANlH,SAACtS,GAAD,OAAOsS,EAAS0B,EAAIhU,EAAE0P,OAAO1O,aCUvC0a,GAdO,SAAC9d,GAAW,IAEvBoD,EAAqDpD,EAArDoD,MAAOgT,EAA8CpW,EAA9CoW,GAAIuH,EAA0C3d,EAA1C2d,MAAOC,EAAmC5d,EAAnC4d,YAAalJ,EAAsB1U,EAAtB0U,SAAUmJ,EAAY7d,EAAZ6d,SAIhD,OACI,yBAAKzd,UAAU,mDACX,2BAAOA,UAAU,mBAAmBmX,QAASnB,GAAKuH,GAClD,2BAAOvd,UAAU,6BAA6BiC,KAAK,OAAO+T,GAAIA,EAAIhT,MAAOA,EAAO0S,YAAa8H,EAAaC,SAAUA,EAAUnJ,SALjH,SAACtS,GAAD,OAAOsS,EAAS0B,EAAIhU,EAAE0P,OAAO1O,Y,6BCNhD2a,GAAQC,OAAOC,MAEfC,GAAyB,SAACC,GAC5B,IAOMC,EAAU,CANU,iDAEK,0CACF,wCACP,gCAStB,MAdkB,+CASEnb,OAAOC,KAAKib,GAAMrL,QAAO,SAACuL,EAASzW,EAAK+G,GACxD,OAAIwP,EAAKvW,GACFyW,EAAQC,OAAO,CAACF,EAAQzP,GAAIwP,EAAKvW,KADlByW,IAEvB,IAAIE,KAAK,OAKVC,GAAa,yCAAG,WAAOC,EAAOJ,GAAd,kBAAA1L,EAAA,6DACZgD,EAAO,CACT+I,YAAaC,uCACbC,KAAMD,sCACNE,GAAIF,yBACJG,QAASL,EACTM,KAAMV,GANQ,SASGN,GAAMiB,KAAKrJ,GATd,UAWJ,QAFRjD,EATY,8BAWQ,IAAIE,MAAMF,GAXlB,2CAAH,wDAcNuM,GAAe,yCAAG,WAAOtJ,EAAMuJ,EAAWC,GAAxB,oBAAAxM,EAAA,6DAEpB8L,EAAkB9I,EAAlB8I,MAAUN,EAFU,YAEFxI,EAFE,WAIrB0I,EAAUH,GAAuBC,GAJZ,kBAOjBK,GAAc,SAAD,OAAUC,GAASJ,GAPf,OAQvBa,IARuB,gDAWvBnT,QAAQyC,IAAR,MACA2Q,IAZuB,yDAAH,0DC5BtBC,GAAS,CAAC,CACZhJ,GAAI,yBACJuH,MAAO,cACPvd,UAAW,oBAGf,CACIgW,GAAI,sBACJuH,MAAO,oBACPvd,UAAW,qBAGf,CACIgW,GAAI,oBACJuH,MAAO,kBACPvd,UAAW,sBAITif,GAAa,CACfjJ,GAAI,QACJuH,MAAO,SAGL2B,GAAe,CACjBlJ,GAAI,UACJuH,MAAO,sBA2DI4B,GAlDG,SAACvf,GAAW,IAEnBwf,EAAaxf,EAAbwf,UAFkB,EAGD9X,mBAAS,IAHR,mBAGlBiO,EAHkB,KAGZ8J,EAHY,OAIS/X,oBAAS,GAJlB,mBAIlBgY,EAJkB,KAIPC,EAJO,OAKiBjY,mBAAS,IAL1B,mBAKlBkY,EALkB,KAKHC,EALG,KAOnBnL,EAAW,SAAC0B,EAAIhT,GAClBqc,EAAQ,2BAAI9J,GAAL,mBAAYS,EAAKhT,MAqB5B,OAAO,yBAAKhD,UAAU,SAClB,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,cArCT,cAwCN,0BAAMA,UAAU,OAAO0f,SAvBd,SAAC1d,GACdA,EAAE8J,iBAEF,IAAMtC,EDLwB,SAAC2O,EAAMwH,GACzC,IACIpR,EAAI,EAYR,OAVAoR,EAAQxH,GAEMvU,aAAY,WACtB,IAAM6W,EAAQlM,EAAI,EAElBoR,EAAQ,GAAD,OAAIxH,GAAJ,OARC,IAQcyH,OAAOnF,KAE7BlM,MACD,KCPesR,CAlBA,aAkBsCJ,GAWpDZ,GAAgBtJ,GATE,WACdzR,cAAc0F,GACdiW,EArBU,yCAuBC,WACX3b,cAAc0F,GACdiW,EAxBO,kCA4BXF,GAAa,KASL,kBAAC,GAAD,eAAevc,MAAOuS,EAAK8I,OAAWY,GAAtC,CAAkDxB,UAAU,EAAMnJ,SAAUA,KAC3E0K,GAAO9R,KAAI,SAAA4S,GAAC,OAAI,kBAAC,GAAD,eAAmBtY,IAAKsY,EAAE9J,GAAIhT,MAAOuS,EAAKuK,EAAE9J,KAAS8J,EAArD,CAAwDxL,SAAUA,QACnF,kBAAC,GAAD,eAAetR,MAAOuS,EAAKwK,SAAab,GAAxC,CAAsDzB,UAAU,EAAOnJ,SAAUA,KACjF,6BACI,2BAAOtU,UAAU,eAAeiC,KAAK,SAASe,MAAM,SAASuH,UAAW+U,MAGhF,6BACKE,GAEL,4BAAQxf,UAAU,iCAAiCmH,QAASiY,GAA5D,QChEGY,GAZQ,SAACpgB,GAAW,IAExBwf,EAAaxf,EAAbwf,UAEP,OAAO,yBAAKpf,UAAU,SAClB,yBAAKA,UAAU,uBAAf,eAEI,4BAAQA,UAAU,iCAAiCmH,QAASiY,GAA5D,QCcGa,GAxBD,SAACrgB,GAAW,IAEfsgB,EAAkBtgB,EAAlBsgB,eAFc,EAIqB5Y,oBAAS,GAJ9B,mBAId6Y,EAJc,KAICC,EAJD,OAK+B9Y,oBAAS,GALxC,mBAKd+Y,EALc,KAKMC,EALN,KAOfC,EAAkB,SAACC,EAASC,GAC9BP,EAAeO,GACfD,EAAQC,IAGZ,OACI,yBAAKzgB,UAAU,mBACX,6BACI,4BAAQA,UAAU,eAAemH,QAAS,kBAAMoZ,EAAgBH,GAAkB,KAAlF,gBACA,4BAAQpgB,UAAU,eAAemH,QAAS,kBAAMoZ,EAAgBD,GAAuB,KAAvF,sBAECH,EAAgB,kBAAC,GAAD,CAAWf,UAAW,kBAAMmB,EAAgBH,GAAkB,MAAa,KAC3FC,EAAqB,kBAAC,GAAD,CAAgBjB,UAAW,kBAAMmB,EAAgBD,GAAuB,MAAa,OCXrHjW,GAAe,CACnBlG,SAAU,EACV6M,MAAO,CACLmB,MAAO,CACLvI,MAAO,GAET7J,SAAU,CACRiP,QAAQ,EACR3B,OAAQ,EACRzD,MAAO,EACPmF,QAAQ,GAEVkC,kBAAmB,CACjBjC,QAAQ,EACR3B,OAAQ,EACRzD,MAAO,GAET,mBAAoB,CAClBoF,QAAQ,GAEV,iBAAkB,CAChBA,QAAQ,GAEV,mBAAoB,CAClBA,QAAQ,GAEV,YAAe,CACbA,QAAQ,GAEV,iBAAkB,CAChBA,QAAQ,EACRpF,MAAO,IAGXD,UAAW,CACT,gBAAiB,CACfvD,UAAU,GAEZ,mBAAoB,CAClBA,UAAU,GAEZ,eAAgB,CACdA,SAAU0L,EAAuB,gBAAgBG,mBAsWxCyO,GAjWH,WAAO,IAAD,EAEUpZ,qBAFV,mBAET+J,EAFS,KAEFsP,EAFE,OAG8BrZ,mBAASwK,GAHvC,mBAGTpI,EAHS,KAGQkX,EAHR,OAIkBtZ,mBAAS+V,IAJ3B,mBAIT1T,EAJS,KAIEkX,EAJF,OAKwBvZ,mBAAS4K,GALjC,mBAKTc,EALS,KAKK8N,EALL,OAM8BxZ,oBAAS,GANvC,mBAMTwC,EANS,KAMQiX,EANR,OAOUzZ,oBAAS,GAPnB,mBAOTD,EAPS,KAOF2Z,EAPE,OAQwB1Z,oBAAS,GARjC,mBAQT2Z,EARS,KAQKC,EARL,OASU5Z,mBAAS,GATnB,mBASTsC,EATS,KASFuX,EATE,OAoBahW,sBAAW,SAAC3I,EAAO6I,GAE9C,IAAIxJ,EAAQwJ,EAAOpJ,KACfqJ,EAAWC,KAAKC,MAAMD,KAAKE,UAAUjJ,IAEnCzC,EAAWuL,EAAS0F,MAAMjR,SAC1BkR,EAAoB3F,EAAS0F,MAAMC,kBACnCmQ,EAAgB9V,EAAS0F,MAAM,kBAErC,OAAOnP,GACL,IAAK,QACH,OAAOwI,GACT,IAAK,kBACH,OAAO,2BAAIA,IAAX,IAAyB2G,MAAOxO,EAAMwO,QACxC,IAAK,cACH,OAAO,2BAAI1F,GAAX,IAAqB0F,MAAM,2BAAK3G,GAAa2G,OAAnB,IAA0BmB,MAAO3P,EAAMwO,MAAMmB,UACzE,IAAK,uBACH7G,EAAS3B,UAAU,gBAAgBvD,SAAWsD,EAAgB,gBAAgBuI,gBAC9E,MACF,IAAK,YAAL,MACwB5G,EAAOvJ,QAAxB4G,EADP,EACOA,OAAQkB,EADf,EACeA,MACb0B,EAAS0F,MAAMtI,GAAQkB,MAAQA,EAC/B,MACF,IAAK,eAAL,MACwByB,EAAOvJ,QAAxB4G,EADP,EACOA,OAAQkB,EADf,EACeA,MACb0B,EAAS0F,MAAMtI,GAAQkB,OAASA,EAChC,MACF,IAAK,cACElB,EAAU2C,EAAOvJ,QAAjB4G,OACL4C,EAAS0F,MAAMtI,GAAQkB,MAAQ,EAC/B,MACF,IAAK,kBACH7J,EAASsN,SACTtN,EAAS6J,OAASyB,EAAOvJ,QACzB,MACF,IAAK,iBACH/B,EAASiP,QAAS,EAClBjP,EAASsN,OAAS,EACA3D,EAAgB,gBACnBuI,kBACb3G,EAAS3B,UAAU,gBAAgBvD,UAAW,GAChD,MACF,IAAK,eAAL,MAC8BiF,EAAOvJ,QAA9BmC,EADP,EACOA,KAAMsL,EADb,EACaA,cACX0B,EAAkBjC,QAAS,EAC3BiC,EAAkB5D,OAAStN,EAASsN,OACpC4D,EAAkBrH,MAAQjJ,KAAK6E,MAAuC,KAAhCzF,EAAS6J,MAAQ2F,IAAqB,IAC5E0B,EAAkB3N,UAAYW,EAC9BlE,EAASsN,OAAS,EAClBtN,EAAS6J,MAAQ,EACjB0B,EAAS3B,UAAU,iBAAiBvD,UAAW,EAC/CkF,EAAS3B,UAAU,gBAAgBvD,SAAWsD,EAAgB,gBAAgBuI,gBAC9E,MACF,IAAK,2BAAL,MACwB5G,EAAOvJ,QAAjBuL,GAAPzD,EADP,EACOA,MADP,EACcyD,QACZ4D,EAAkBrH,MAAQA,EAC1BqH,EAAkB5D,OAASA,EAC3B,MACF,IAAK,4BACH4D,EAAkBrH,OAASyB,EAAOvJ,QAClCmP,EAAkB5D,SACf4D,EAAkBrH,OAAS,IAAGqH,EAAkBrH,MAAQ,GAC3D,MACF,IAAK,yBACHqH,EAAkBjC,QAAS,EAC3BiC,EAAkB5D,OAAS,EAC3B4D,EAAkBrH,MAAQ,EAC1BqH,EAAkB3N,UAAY,EAC9B,MACF,IAAK,kBAAL,MACwC+H,EAAOvJ,QAAxC4B,EADP,EACOA,KAAMS,EADb,EACaA,SAAUC,EADvB,EACuBA,cACjB2N,EAAuB,cAATrO,EAAuBgG,EAAgBhG,GAAMqO,YAAc,EAE7E5N,EAAYA,GAAYC,GAAkB,EAAK,GAAM2N,EAElDqP,EAAcpS,QAAU7K,EAAW,IACpCA,GAAaA,EAAW6O,EAAa,kBAAkBZ,aAEzDjO,EAAWxD,KAAKd,IAAIc,KAAK2E,IAAIgG,EAASnH,SAAWA,EAAU,KAAM,GACjEmH,EAASnH,SAAWA,EACjBA,GAAY,GAAKpE,EAASiP,SAC3BjP,EAASiP,QAAS,GAGpBnM,OAAOC,KAAK4G,GAAiB3H,SAAQ,SAAAgB,GACnC,IAAMwF,EAAUmB,EAAgB3G,GAC5BwF,EAAQnE,gBACZkH,EAAS3B,UAAU5G,GAAGqD,SAAWjC,EAAWoE,EAAQpE,aAEtD,MACF,IAAK,6BACHpE,EAASgP,QAAS,EAClB,MACF,IAAK,2BACHhP,EAASgP,QAAS,EAClB,MACF,IAAK,aAAL,MACqB1D,EAAOvJ,QACtBmR,GADCvP,EADP,EACOA,KAAMO,EADb,EACaA,KACAqH,EAAS0F,MAAMtN,IAE1BuP,EAAKjE,OA7GgB,SAACiE,EAAMtO,EAAcvB,GAC9C,IACMS,EADUoP,EAAK3P,UAAY2P,EAAK7F,YACVhK,EACtBie,EAAmB1gB,KAAK2E,IAAI,GAAKX,EAAcd,GAErDoP,EAAK7F,YAAczI,EAAe0c,EAClCpO,EAAK3P,UAAYF,EAuGCke,CAAmBrO,EAAMD,EAAatP,GAAMiB,aAAcV,GAAQgP,EAAKjE,QAAS,EAC9F,MACF,IAAK,aAAL,MAC+B3D,EAAOvJ,QAAnB0B,GAAZE,EADP,EACOA,KAAMO,EADb,EACaA,KADb,EACmBT,UACjB8H,EAAS0F,MAAMtN,GAAMJ,UAAYW,EACjCqH,EAAS0F,MAAMtN,GAAM0J,YAAc5J,EACnC,MACF,IAAK,eAAL,MACqB6H,EAAOvJ,QAArB4B,EADP,EACOA,KAAMO,EADb,EACaA,KACXqH,EAAS0F,MAAMtN,GAAMJ,UAAYW,EACjC,MACF,IAAK,WACEP,EAAQ2H,EAAOvJ,QAAf4B,KACL4H,EAAS0F,MAAMtN,GAAMsL,QAAS,EAC9B1D,EAAS0F,MAAMtN,GAAMJ,UAAY,EACjC,MACF,IAAK,aACH,IAAM0O,EAAYtI,EAAgB,aAAasI,UAClC,CAAC,mBAAoB,kBAC7BjQ,SAAQ,SAAAwf,GACX,IAAMrQ,EAAM5F,EAAS0F,MAAMuQ,GACvBrQ,EAAIlC,SACRkC,EAAI9D,aAAe4E,MAKzB,OAAO1G,IACNjB,IApJa,mBAoBT7H,EApBS,KAoBFC,EApBE,KAsJhB+F,qBAAU,WACR2Y,EAASK,KACR,CAAChf,EAAMwO,MAAMmB,MAAMvI,MACpBpH,EAAMwO,MAAMjR,SAAS6J,MACrBpH,EAAMwO,MAAMC,kBAAkBrH,MAC9BpH,EAAMwO,MAAM,kBAAkBpH,QAEhC,IAeM4X,EAAiB,WACrB,IAAMxQ,EAAQxO,EAAMwO,MACpB,OAAOnO,OAAOC,KAAKkO,GAAO0B,QAAO,SAAC9I,EAAOqJ,GACvC,OAAIjC,EAAMiC,GAAMrJ,MACTA,GAAS,EAAEoH,EAAMiC,GAAMrJ,OADAA,IAE7B,IAGC6X,EAAyB,SAACpQ,GAC9B0P,GAAmB,GACnBJ,EAAStP,IAGLqQ,EAAmB,WACvBX,GAAmB,GACnBJ,EAAS,OAgELgB,EAAkB,SAACC,GACvB,IAAIpf,EAAQK,OAAOC,KAAK6G,GAAW+I,QAAO,SAAClQ,EAAO+F,GAEhD,OADA/F,EAAM+F,GAAN,2BAAqBoB,EAAUpB,IAAaqZ,EAAkBrZ,IACvD/F,IACN,IAEHqe,EAAare,IAiBTqf,EAAgB,SAAC7O,GACrB8N,EAAgB9N,GAChB8O,IACA,IAAMlY,EAAQoJ,EAAab,MAAMvI,MACjCnH,EAAY,CACVR,KAAM,YACNH,QAAS,CACP4G,OAAQ,QACRkB,YAKAmY,EAAmB,SAACrY,GACxBkX,EAAmBlX,GACnBsY,KAGIA,EAAqB,WACzBvf,EAAY,CACVR,KAAM,oBAERQ,EAAY,CACVR,KAAM,kBACNH,QAAS,CACPqC,SAAU,KAGd1B,EAAY,CACVR,KAAM,yBAERif,GAAiBD,IAGba,EAAkB,WACtBrf,EAAY,CACVR,KAAM,gBAGRsC,YAAW,WACT9B,EAAY,CACVR,KAAM,6BAEP,IAGCggB,GAAc,WAClBH,IACAE,IACAhB,GAAU3Z,IAGZ,OACE,yBAAKrH,UAAU,OACb,4BAAQA,UAAU,2BAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,kBAAf,uBAIF,yBAAKA,UAAU,mBACb,kBAAC,GAAD,CAAeyG,SAAU,CAACkD,UAnEzB9G,OAAOC,KAAK4G,GAAiBgJ,QAAO,SAACwP,EAAQ3P,GAElD,OADA2P,EAAO3P,GAAP,2BAAgB7I,EAAgB6I,IAAhC,IAAoCrO,YAAamZ,GAAiB9K,GAAGrO,cAC9Dge,IACN,IAgE0ElR,MAAOgC,GAAekG,SAAU7R,EAAO8R,aAAc4I,EAAkB3I,UAAWyI,EAAevQ,aAAcD,EAAOlK,QAASsa,EAAwB7M,WAAY8M,IAC1O,kBAAC,GAAD,CAAsB/X,UAAWA,EAAW2H,aAAcD,EAAOuJ,UAzItD,SAAC7T,EAASwB,GAC3B,IAAI/F,EAAQ+I,KAAKC,MAAMD,KAAKE,UAAU9B,IAClCnC,EAAMT,EAAQS,IACd2a,EAAiC,cAAZ5Z,GAAuC,kBAAZA,EACpD1F,OAAOC,KAAKN,GAAOT,SAAQ,SAAAgB,GACJP,EAAMO,GAAGgE,QACZS,MAAQA,IAAKhF,EAAMO,GAAGgE,QAAU,CAAEU,YAAa,UAEhE0a,GACD3f,EAAM,aAAauE,QAAnB,eAAiCA,GACjCvE,EAAM,iBAAiBuE,QAAvB,eAAqCA,IAGrCvE,EAAM+F,GAASxB,QAAf,eAA6BA,GAG/B8Z,EAAare,IAyHiFqY,SAtHxE,SAAC7N,EAAOtJ,GAC9B,IAAMlB,EAAQ+I,KAAKC,MAAMD,KAAKE,UAAU9B,IAClCpB,EAAU/F,EAAMkB,GAChB0e,EAAe7Z,EAAQyE,MACvBqV,EAAQrV,EAAQoV,EAAe,QAAU,OAE3CD,EAA8B,cAATze,GAAiC,kBAATA,EAEjDb,OAAOC,KAAKN,GAAOT,SAAQ,SAAAgB,GACzB,IAAMuf,EAAe9f,EAAMO,GAAGiK,MAEjB,UAAVqV,GAAsBC,GAAgBtV,GAASsV,EAAeF,GAAe5f,EAAMO,GAAGiK,QAC5E,SAAVqV,GAAqBC,GAAgBtV,GAASsV,EAAeF,GAAe5f,EAAMO,GAAGiK,WAGvFmV,GACD3f,EAAM,aAAawK,MAAQA,EAC3BxK,EAAM,iBAAiBwK,MAAQA,GAG/BzE,EAAQyE,MAAQA,EAGlB6T,EAAare,IA+F4GsY,SAlJ/F,SAACvS,GAC3B,IAAIga,EAAchX,KAAKC,MAAMD,KAAKE,UAAU9B,IAE5C4Y,EAAYha,GAASgC,UAAYgY,EAAYha,GAASgC,SACvC,cAAZhC,IAAyBga,EAAY,iBAAiBhY,SAAWgY,EAAYha,GAASgC,UAEzFsW,EAAa0B,IA4I2Ipb,QAASsa,EAAwB7M,WAAY8M,IAC/L,kBAAC,EAAD,CAAajb,SAAU,CAACiD,kBAAiBsJ,eAAcrJ,aAAYgL,SA7FtD,SAAClO,GACpBkb,EAAgBlb,EAASqN,eACzBiO,EAAiBtb,EAASiD,iBAC1BmY,EAAcpb,EAASuM,cACvBiP,MAyFiG3Q,aAAcD,EAAOlK,QAASsa,EAAwB7M,WAAY8M,IAC7J,kBAAC,GAAD,CAAYpQ,aAAcD,EAAOlK,QAASsa,EAAwB7M,WAAY8M,IAC9E,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAOxB,eAAgBa,KAEzB,yBAAK/gB,UAAU,eACb,kBAAC,EAAD,CAASgR,MAAOxO,EAAMwO,MAAOvK,SAAUuM,EAAcpJ,MAAOA,EAAOxC,aAAc3E,IACjF,kBAAC,EAAD,CAAa3C,QAAS0C,EAAM2B,SAAUtE,IAAK,MAC3C,kBAAC,EAAD,CAAY6J,gBAAiBA,EAAiBC,UArF3C9G,OAAOC,KAAK6G,GAAW+I,QAAO,SAACwP,EAAQ3P,GAE5C,OADA2P,EAAO3P,GAAP,2BAAgB5I,EAAU4I,IAAO/P,EAAMmH,UAAU4I,IAC1C2P,IACN,IAkF4EtY,MAAOA,EAAOC,WAAYrH,EAAMwO,MAAMjR,SAASiP,OAAQ5H,aAAc3E,EAAaqH,gBAAiBA,EAAiBzC,MAAO4Z,IACtM,4BAAQjhB,UAAU,eAAemH,QAAS8a,IAA1C,YC7YYO,QACW,cAA7B5E,OAAO6E,SAASC,UAEe,UAA7B9E,OAAO6E,SAASC,UAEhB9E,OAAO6E,SAASC,SAAS3G,MACvB,2D,qBCXN4G,EAAOC,SAEPC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFhY,SAASmL,eAAe,SDsHpB,kBAAmB8M,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAA1X,GACLD,QAAQC,MAAMA,EAAMkK,c","file":"static/js/main.cd23c00d.chunk.js","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react';\r\nimport \"./ResourceBar.css\"\r\n\r\nconst ResourceBar = (props) => {\r\n    const {max, current, voidform} = props\r\n\r\n    return (\r\n        <div className=\"progress-bar-container\">\r\n            <div className=\"progress-text\">{(current/max*100).toFixed(0)}</div> \r\n            <div className=\"progress-bar resource-bar\" \r\n                style={{\r\n                    width: `${(current/max*100).toFixed(2)}%`\r\n            }}>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResourceBar","import React, {useState, useEffect, useRef} from 'react';\r\n\r\nimport \"./CooldownSweep.css\"\r\n\r\nconst CooldownSweep = (props) => {\r\n\r\n    const {size, progress, inverse} = props\r\n\r\n    const radius = size * 2\r\n    const stroke = size * 2\r\n\r\n    const normalizedRadius = radius - (stroke/2)\r\n    const circumference = normalizedRadius * 2 * Math.PI\r\n\r\n    return (\r\n        <svg width={size} height={size}>\r\n            <circle\r\n                fill=\"transparent\"\r\n                strokeWidth={stroke}\r\n                strokeOpacity={.7}\r\n                strokeDasharray={circumference + \" \" + circumference}\r\n                strokeDashoffset={inverse ? ((!progress ? circumference : 0) + (progress || 0) * circumference) : (circumference + (progress || 0) * circumference)}\r\n                stroke={\"rgb(0,0,0)\"}\r\n                cx={size/2}\r\n                cy={size/2}\r\n                r={normalizedRadius} />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default CooldownSweep","const events = {\r\n    \"CAST\": [\r\n        \"ABILITY_CAST_SUCCESS\",\r\n        \"ABILITY_COOLDOWN_START\",\r\n        \"ABILITY_COOLDOWN_END\",\r\n        \"ABILITY_CAST_START\",\r\n        \"ABILITY_CHANNEL_START\",\r\n        \"ABILITY_CHANNEL_UPDATE\",\r\n        \"ABILITY_CHANNEL_END\"\r\n    ],\r\n    \"RESOURCE\": [\r\n        \"RESOURCE_UPDATE\",\r\n        \"INSANITY_DRAIN_PAUSE_START\",\r\n        \"INSANITY_DRAIN_PAUSE_END\"\r\n    ],\r\n    \"AURA\": [\r\n        \"VOIDFORM_START\",\r\n        \"VOIDFORM_UPDATE\",\r\n        \"VOIDFORM_END\",\r\n        \"LINGERING_INSANITY_START\",\r\n        \"LINGERING_INSANITY_UPDATE\",\r\n        \"LINGERING_INSANITY_END\",\r\n        \"AURA_START\",\r\n        \"AURA_BEGIN\",\r\n        \"AURA_END\",\r\n        \"DOT_EXTEND\"\r\n    ],\r\n    \"STAT\": [\r\n        \"HASTE_UPDATE\", \r\n        \"HASTE_RESET\"\r\n    ]\r\n}\r\n\r\nexport default events","const abilityEvents = {\r\n    \"void-bolt\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\", \"DOT_EXTEND\"]\r\n        }\r\n    },\r\n    \"mind-flay\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [],\r\n            \"COOLDOWN_END\": [],\r\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\"],\r\n            \"CHANNEL_UPDATE\": [\"ABILITY_CHANNEL_UPDATE\", \"RESOURCE_UPDATE\"],\r\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\"]\r\n        }\r\n    },\r\n    \"mind-sear\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [],\r\n            \"COOLDOWN_END\": [],\r\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\"],\r\n            \"CHANNEL_UPDATE\": [\"ABILITY_CHANNEL_UPDATE\", \"RESOURCE_UPDATE\"],\r\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\"]\r\n        }\r\n    },\r\n    \"void-eruption\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"VOIDFORM_START\"]\r\n        }\r\n    },\r\n    \"mind-blast\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"],\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"]\r\n        }\r\n    },\r\n    \"shadow-word-death\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"void-torrent\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\", \"INSANITY_DRAIN_PAUSE_START\"],\r\n            \"CHANNEL_UPDATE\": [\"RESOURCE_UPDATE\"],\r\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\", \"INSANITY_DRAIN_PAUSE_END\"]\r\n        }\r\n    },\r\n    \"shadow-word-pain\": {\r\n        onEvent: {\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"vampiric-touch\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"devouring-plague\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"shadowfiend\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"power-infusion\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\"]\r\n        }\r\n    }\r\n}\r\n\r\nexport default abilityEvents","const auraEvents = {\r\n    \"voidform\": {\r\n        onEvent: {\r\n            \"AURA_START\": [\r\n                \"\"\r\n            ],\r\n            \"AURA_UPDATE\": [],\r\n            \"AURA_TIME_UPDATE\": [],\r\n            \"AURA_END\": []\r\n        }\r\n    },\r\n    \"lingeringInsanity\": {\r\n        onEvent: {\r\n            \"AURA_START\": [],\r\n            \"AURA_UPDATE\": [],\r\n            \"AURA_TIME_UPDATE\": [],\r\n            \"AURA_END\": []\r\n        }\r\n    },\r\n    \"shadow-word-pain\": {\r\n        onEvent: {\r\n            \"AURA_START\": [],\r\n            \"AURA_UPDATE\": [],\r\n            \"AURA_TIME_UPDATE\": [],\r\n            \"AURA_END\": []\r\n        }\r\n    },\r\n    \"vampiric-touch\": {\r\n        onEvent: {\r\n            \"AURA_START\": [],\r\n            \"AURA_UPDATE\": [],\r\n            \"AURA_TIME_UPDATE\": [],\r\n            \"AURA_END\": []\r\n        }\r\n    },\r\n    \"power-infusion\": {\r\n        onEvent: {\r\n            \"AURA_START\": [\"AURA_BEGIN\", \"HASTE_UPDATE\"],\r\n            \"AURA_END\": [\"AURA_END\", \"HASTE_RESET\"]\r\n        }\r\n    }\r\n}\r\n\r\nexport default auraEvents","import events from \"../lib/events\"\r\nimport abilityEvents from \"../lib/abilityEvents\"\r\nimport auraEvents from \"../lib/auraEvents\"\r\n\r\nclass EventHandler {\r\n\r\n    constructor(eventTriggers, events) {\r\n        this.eventTriggers = eventTriggers\r\n        this.events = events\r\n    }\r\n\r\n    handleEvent(event, payload) {\r\n        if(!this.events[event]) return\r\n\r\n        this.events[event].forEach(e => this.eventTriggers[e]({\r\n            type: e,\r\n            payload\r\n        }))\r\n    }\r\n}\r\n\r\nexport const constructEventHandler = (name, triggers) => {\r\n    const eventTriggers = {}\r\n\r\n    triggers.forEach(trigger => {\r\n        let types = trigger.eventTypes\r\n        types.forEach(type => {\r\n            events[type].forEach(e => eventTriggers[e] = trigger.trigger)\r\n        })\r\n    })\r\n\r\n    return new EventHandler(eventTriggers, abilityEvents[name].onEvent)\r\n}\r\n\r\nexport const auraEventHandler = (name, trigger) => {\r\n    const types = [\"AURA\", \"RESOURCE\", \"STAT\"]\r\n    const eventTriggers = {}\r\n\r\n    types.forEach(type => {\r\n        events[type].forEach(e => eventTriggers[e] = trigger)\r\n    })\r\n\r\n    return new EventHandler(eventTriggers, auraEvents[name].onEvent)\r\n}","export const interval = 20\r\nexport const lag = 50\r\nexport const spellQueueWindow = 250\r\nexport const keybinds = {\r\n    \"!\": \"S-1\",\r\n    \"@\": \"S-2\",\r\n    \"#\": \"S-3\",\r\n    \"$\": \"S-4\",\r\n    \"%\": \"S-5\",\r\n    \"^\": \"S-6\",\r\n    \"&\": \"S-7\",\r\n    \"*\": \"S-8\",\r\n    \"(\": \"S-9\",\r\n    \")\": \"S-0\",\r\n    \" \": \"SPC\"\r\n}","import {constructEventHandler} from \"./eventHandler\"\r\nimport {interval, lag} from \"../lib/constants\"\r\n\r\nclass Ability {\r\n\r\n    constructor(initialState, updateFn, onExecute, eventHandler) {\r\n        this.state = initialState\r\n        this.updateState = updateFn\r\n        this.onExecute = onExecute\r\n        this.eventHandler = eventHandler\r\n        this.updateState({\r\n            progress: 0,\r\n            charges: initialState.charges.maxCharges || 1\r\n        })       \r\n    }\r\n\r\n    static create(type, initialState, updateFn, onExecute, triggers) {\r\n        const eventHandler = constructEventHandler(initialState.name, triggers)\r\n        switch(type) {\r\n            case \"instant\":\r\n                return new InstantAbility(initialState, updateFn, onExecute, eventHandler)\r\n            case \"cast\":\r\n                return new CastAbility(initialState, updateFn, onExecute, eventHandler)\r\n            case \"channel\":\r\n                return new ChannelAbility(initialState, updateFn, onExecute, eventHandler)\r\n        }\r\n    }\r\n\r\n    getCurrentState() {\r\n        const currentState = {}\r\n        let state = this.state\r\n\r\n        Object.keys(state).forEach(k => {\r\n            let value = state[k]\r\n            if(typeof value !== \"object\") {\r\n                currentState[k] = value\r\n                return\r\n            }\r\n\r\n            const subState = {}\r\n            Object.keys(value).forEach(k2 => {\r\n                let value2 = value[k2]\r\n                if(value2 === \"undefined\") return\r\n                subState[k2] =  typeof value2 !== \"object\" ? value2 : value2.current\r\n            })\r\n            currentState[k] = subState\r\n        })\r\n\r\n        return currentState\r\n    }\r\n\r\n    getRemainingCooldown() {\r\n        const now = Date.now()\r\n        const startTime = this.state.cooldown.startTime.current\r\n        const duration = startTime ? this.state.cooldown.duration.current : 0\r\n        const charges = this.state.charges.current.current\r\n        const remaining = charges === 0 ? ((startTime || now) + duration) - now : 0\r\n\r\n        return remaining\r\n    }\r\n\r\n    startCooldown() {\r\n        let state = this.getCurrentState()\r\n        const {name} = state\r\n        const {maxCharges} = state.charges\r\n\r\n        this.cooldownTimer = setInterval(() => {\r\n            let now = Date.now()\r\n\r\n            let duration = this.state.cooldown.duration.current\r\n            let startTime = this.state.cooldown.startTime.current || now\r\n            let charges = this.state.charges.current.current\r\n            let remaining = (startTime + duration) - now\r\n\r\n            if(remaining <= interval) {\r\n                this.updateState(state => {\r\n                    return {...state, charges: charges+1}\r\n                })\r\n\r\n                clearInterval(this.cooldownTimer)\r\n\r\n                if(maxCharges && charges < maxCharges - 1) {\r\n                    this.startCooldown()\r\n                    return\r\n                }\r\n\r\n                this.eventHandler.handleEvent(\"COOLDOWN_END\", {name})\r\n\r\n                this.updateState(state => {\r\n                    return {...state, progress: 0}\r\n                })\r\n\r\n                return\r\n            }\r\n            this.updateState(state => {\r\n                return {...state, progress: remaining/duration}\r\n            })\r\n\r\n        }, interval)\r\n\r\n        this.eventHandler.handleEvent(\"COOLDOWN_START\", {\r\n            name,\r\n            time: Date.now()\r\n        })\r\n    }\r\n\r\n    startCast() {\r\n        let state = this.getCurrentState()\r\n        const {name, displayName, resource, costsResource} = state\r\n        const {duration} = state.cast\r\n\r\n        this.castTimer = setTimeout(() => {\r\n            this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\r\n                name,\r\n                resource,\r\n                costsResource,\r\n                time: Date.now()\r\n            })\r\n\r\n            let cooldown = this.state.cooldown.duration.current\r\n            let currentlyOnCooldown = this.state.cooldown.startTime.current\r\n            let charges = this.state.charges.current.current\r\n\r\n            if(cooldown) {\r\n                this.updateState(state => {\r\n                    return {...state, charges: charges-1}\r\n                })\r\n                if(currentlyOnCooldown) return               \r\n                this.startCooldown()\r\n            }\r\n\r\n        }, duration)\r\n\r\n        this.eventHandler.handleEvent(\"CAST_START\", {\r\n            name,\r\n            displayName,\r\n            duration,\r\n            time: Date.now()\r\n        })\r\n    }\r\n\r\n    startChannel() {\r\n        let state = this.getCurrentState()\r\n        const {startTime, endTime, duration} = state.cast\r\n        const {baseDuration, baseTicks, ticks} = state.channel\r\n        const {name, displayName, resource} = state\r\n        const gcd = state.globalCooldown.duration\r\n\r\n        let now = Date.now()\r\n        let pandemicTime = 0\r\n        let currentTicks = baseTicks\r\n\r\n        if(startTime) {\r\n            clearInterval(this.channelTimer)\r\n            const previousChannelTime = endTime - startTime\r\n            const previousChannelRemaining = previousChannelTime - (now - startTime)\r\n            const maximumTicks = Math.floor(baseTicks * ((baseDuration - gcd)/baseDuration))      \r\n            pandemicTime = Math.min(previousChannelRemaining, baseDuration * .3)\r\n\r\n            const remainingTicks = Math.min(ticks, maximumTicks)\r\n\r\n            currentTicks += remainingTicks\r\n        }\r\n\r\n        let channelFrequency = Math.round((duration+pandemicTime)/currentTicks)\r\n\r\n        this.channelTimer = setInterval(() => {\r\n\r\n            let now = Date.now()\r\n            let endTime = this.state.cast.endTime.current\r\n            let lastTick = this.state.channel.ticks.current === 1\r\n            let tickResourceModifier = lastTick ? (pandemicTime && .3 || 1) : 1\r\n\r\n            //another cast has stopped this channel, don't update\r\n            if(!endTime) {\r\n                clearInterval(this.channelTimer)\r\n\r\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\r\n                    name\r\n                })\r\n                return\r\n            }\r\n\r\n            this.eventHandler.handleEvent(\"CHANNEL_UPDATE\", {\r\n                resource: (resource/baseTicks) * tickResourceModifier,\r\n                name\r\n            })\r\n\r\n            if(now >= endTime) {\r\n                clearInterval(this.channelTimer)\r\n\r\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\r\n                    name\r\n                })\r\n                return\r\n            }\r\n\r\n        }, channelFrequency)\r\n\r\n        this.eventHandler.handleEvent(\"CHANNEL_START\", {\r\n            name,\r\n            displayName,\r\n            duration: duration + pandemicTime,\r\n            time: now,\r\n            baseChannelTime: duration,\r\n            currentTicks\r\n        })\r\n    }\r\n\r\n    beginGlobalCooldown() {\r\n        let state = this.getCurrentState()\r\n        const {duration, startTime} = state.globalCooldown\r\n        const {current, maxCharges} = state.charges\r\n\r\n        if(state.cooldown.startTime) {\r\n            if(maxCharges && current < maxCharges - 1) return\r\n            let remaining = (state.cooldown.startTime + state.cooldown.duration) - startTime\r\n            if(remaining > duration) return\r\n        }\r\n\r\n        this.globalCooldownTimer = setInterval(() => {\r\n            let now = Date.now()\r\n            let remaining = (startTime + duration) - now\r\n            if(remaining <= interval) {\r\n                clearInterval(this.globalCooldownTimer)\r\n                this.updateState(state => {\r\n                    return {...state, progress: 0}\r\n                })\r\n                             \r\n                return\r\n            }\r\n\r\n            if(this.state.cooldown.startTime.current) return\r\n            this.updateState(state => {\r\n                return {...state, progress: remaining/duration}\r\n            })\r\n        }, interval)\r\n    }\r\n\r\n    remove() {\r\n        clearInterval(this.cooldownTimer)\r\n        clearInterval(this.globalCooldownTimer)\r\n        clearInterval(this.channelTimer)\r\n        clearTimeout(this.castTimer)\r\n    }\r\n}\r\n\r\nclass InstantAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable.current) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {name, resource, costsResource} = state\r\n        const {startTime} = state.cooldown\r\n        const {maxCharges, current} = state.charges\r\n\r\n        if(startTime && current === 0) return      \r\n        this.updateState(state => {\r\n            return {...state, charges: current-1}\r\n        })\r\n\r\n        this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\r\n            name,\r\n            resource,\r\n            costsResource,\r\n            time: Date.now()\r\n        })\r\n\r\n        this.onExecute()\r\n        if(maxCharges && current < maxCharges) return\r\n        this.startCooldown()\r\n    }\r\n}\r\n\r\nclass CastAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable.current) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {startTime} = state.cast\r\n        const {current} = state.charges\r\n\r\n        if(startTime || current === 0) return\r\n        this.startCast()\r\n        this.onExecute()\r\n    }\r\n}\r\n\r\nclass ChannelAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable.current) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {duration, startTime} = state.cooldown\r\n\r\n        if(startTime) return\r\n        this.startChannel()\r\n        if(duration) {\r\n            this.startCooldown()\r\n        }\r\n        this.onExecute()\r\n    }\r\n}\r\n\r\nexport default Ability","import React, {useState, useEffect, useRef} from 'react';\r\nimport \"./ProgressAbility.css\"\r\nimport CooldownSweep from \"./CooldownSweep\"\r\nimport Ability from \"../utils/ability\"\r\n\r\nconst ProgressAbility = (props) => {\r\n\r\n    const {name, displayName, settings, cooldown, globalCooldown, globalCooldownStartTime, unusable, startTime, casttime, castStartTime, castEndTime, icon, baseChannelTime, currentTicks, keybind, casting, subscribe, unsubscribe, onExecute, onAbilityUpdate, onClick, triggerEvent, reset} = props\r\n\r\n    const size = 50\r\n\r\n    const [state, setState] = useState({})\r\n\r\n    const {key, keybindText} = keybind\r\n    const {type, resource, costsResource, charges, ticks} = settings\r\n\r\n    //cooldown states\r\n    const startTimeRef = useRef(startTime)\r\n    const cooldownRef = useRef(cooldown)\r\n\r\n    startTimeRef.current = startTime\r\n    cooldownRef.current = cooldown\r\n\r\n    //cast states\r\n    const castStartTimeRef = useRef(castStartTime)\r\n    const castEndTimeRef = useRef(castEndTime)\r\n    const casttimeRef = useRef(casttime)\r\n    const castingRef = useRef(casting)\r\n\r\n    castStartTimeRef.current = castStartTime\r\n    castEndTimeRef.current = castEndTime\r\n    casttimeRef.current = casttime\r\n    castingRef.current = casting\r\n\r\n    //channel states\r\n    const baseChannelTimeRef = useRef(baseChannelTime)\r\n    const ticksRef = useRef(currentTicks)\r\n\r\n    baseChannelTimeRef.current = baseChannelTime\r\n    ticksRef.current = currentTicks\r\n\r\n    //charge states\r\n    const chargesRef = useRef(charges || 1)\r\n\r\n    chargesRef.current = state.charges\r\n\r\n    //gcd states\r\n    const globalCooldownRef = useRef(globalCooldown)\r\n    const globalCooldownStartTimeRef = useRef(globalCooldownStartTime)\r\n\r\n    globalCooldownRef.current = globalCooldown\r\n    globalCooldownStartTimeRef.current = globalCooldownStartTime\r\n\r\n    //other states\r\n    const unusableRef = useRef(unusable)\r\n    unusableRef.current = unusable\r\n\r\n    const ability = useRef()\r\n\r\n    useEffect(() => {\r\n        const triggers = [{\r\n            eventTypes: [\"CAST\"],\r\n            trigger: onAbilityUpdate \r\n        },\r\n        {\r\n            eventTypes: [\"RESOURCE\", \"AURA\", \"STAT\"],\r\n            trigger: triggerEvent\r\n        }]\r\n\r\n        const initialState = {\r\n            name,\r\n            displayName,\r\n            resource,\r\n            costsResource,\r\n            unusable: unusableRef,\r\n            cooldown: {\r\n                duration: cooldownRef,\r\n                startTime: startTimeRef\r\n            },\r\n            cast: {\r\n                duration: casttimeRef,\r\n                startTime: castStartTimeRef,\r\n                endTime: castEndTimeRef,\r\n                casting: castingRef\r\n            },\r\n            channel: {\r\n                baseDuration: baseChannelTimeRef,\r\n                baseTicks: ticks,\r\n                ticks: ticksRef\r\n            },\r\n            charges: {\r\n                maxCharges: charges,\r\n                current: chargesRef\r\n            },\r\n            globalCooldown: {\r\n                duration: globalCooldownRef,\r\n                startTime: globalCooldownStartTimeRef\r\n            }\r\n        }\r\n\r\n        ability.current = Ability.create(type, initialState, setState, onExecute, triggers)\r\n        \r\n        subscribe({\r\n            source: name,\r\n            keybind: key,\r\n            execute: () => ability.current.execute(),\r\n            notify: () => ability.current.beginGlobalCooldown(),\r\n            getRemainingCooldown: () => ability.current.getRemainingCooldown()\r\n        })\r\n\r\n        return () => {\r\n            ability.current.remove()\r\n            unsubscribe(name)\r\n        }\r\n    }, [key, reset])\r\n\r\n    const handleClick = () => {\r\n        onClick(name, () => ability.current.getRemainingCooldown(), () => ability.current.execute())\r\n    }\r\n\r\n    return (\r\n        <div className=\"progress-ability-container\">\r\n        <div className=\"progress-ability hover-pointer\" onClick={handleClick}>\r\n            <img\r\n                className={!unusable && ((state.charges > 0 && charges) || (!startTimeRef.current)) ? \"colored\" : \"desaturated\"}\r\n                src={icon}\r\n                width={size}\r\n                height={size}\r\n            />\r\n            <div className=\"charge-text\">{charges > 1 ? state.charges : \"\"}</div>\r\n            {startTimeRef.current || globalCooldownRef.current ? \r\n            <CooldownSweep size={size} progress={state.progress}/>\r\n            : null}\r\n        </div>\r\n        <div>{keybindText}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressAbility;","const GlobalCooldown = {\r\n\r\n    start: (duration, triggerEvent) => {\r\n        triggerEvent({\r\n            type: \"GLOBAL_COOLDOWN_START\",\r\n            payload: {\r\n                gcd: duration,\r\n                time: Date.now()\r\n\r\n            }\r\n        })\r\n\r\n        setTimeout(() => {\r\n            triggerEvent({\r\n                type: \"GLOBAL_COOLDOWN_END\"\r\n            })    \r\n        }, duration);\r\n    }\r\n}\r\n\r\nexport default GlobalCooldown","import React, {useState, useEffect, useRef} from 'react';\r\nimport \"./CastBar.css\"\r\n\r\nconst CastBar = (props) => {\r\n\r\n    const {time, name, displayName, duration, direction} = props\r\n\r\n    const sec = 1000\r\n    const interval = 50\r\n\r\n    const [current, setCurrent] = useState(0)\r\n\r\n    const timeRef = useRef(time)\r\n    const durationRef = useRef(time)\r\n\r\n    timeRef.current = time\r\n    durationRef.current = duration\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            let now = Date.now()\r\n            setCurrent(current => now - timeRef.current)\r\n        }, interval)\r\n\r\n        return () => {\r\n            clearInterval(timer)\r\n            setCurrent(current => 0)\r\n        }\r\n    }, [name])\r\n\r\n    return (\r\n        <div className=\"progress-bar-container\">\r\n            <div className=\"cast-bar-text-container\">\r\n                <div className=\"progress-text cast-bar-text\">{displayName}</div>\r\n                <div className=\"progress-text cast-bar-text\">{direction \r\n                ? `${(current/sec).toFixed(1)}/${((duration/sec).toFixed(1))}`\r\n                : `${((durationRef.current-current)/sec).toFixed(1)}/${((durationRef.current/sec).toFixed(1))}`}sec\r\n                </div> \r\n            </div>\r\n            <div className=\"progress-bar cast-bar\" \r\n                style={{\r\n                    width: direction \r\n                    ? `${(current/durationRef.current*100).toFixed(2)}%`\r\n                    : `${((durationRef.current-current)/durationRef.current*100).toFixed(2)}%`\r\n            }}>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CastBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport ProgressAbility from \"./ProgressAbility\"\r\nimport GlobalCooldown from \"./GlobalCooldown\"\r\nimport CastBar from \"./CastBar\"\r\nimport {spellQueueWindow} from \"../lib/constants\"\r\nimport \"./AbilityBar.css\"\r\n\r\nconst AbilityBar = (props) => {\r\n\r\n    const gcdLength = 1500\r\n    const {abilitySettings, abilities, haste, inVoidform, triggerEvent, keyEventsPaused, reset} = props\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const inVoidformRef = useRef(inVoidform)\r\n    inVoidformRef.current = inVoidform \r\n\r\n    const spellQueueTimer = useRef()\r\n\r\n    const defaultCooldowns = () => {\r\n        const cooldowns = {}\r\n        Object.keys(abilities).forEach(k => {\r\n            if(abilitySettings[k] && abilitySettings[k].disabled) return\r\n            cooldowns[k] = {\r\n                startTime: 0\r\n            }\r\n        })\r\n\r\n        return cooldowns\r\n    }\r\n\r\n    const [observers, setObservers] = useState([])\r\n\r\n    const observersRef = useRef(observers)\r\n    observersRef.current = observers\r\n\r\n    const defaultState = {\r\n        globalCooldown: 0,\r\n        cooldowns: defaultCooldowns(),\r\n        status: {}\r\n    }\r\n\r\n    const [hasReset, setHasReset] = useState(reset)\r\n\r\n    useEffect(() => {\r\n        triggerCooldown({\r\n            type: \"RESET\"\r\n        })\r\n\r\n        return () => setHasReset(reset)\r\n    }, [reset])\r\n\r\n    useEffect(() => {\r\n        if(hasReset === reset) return\r\n        const name = \"mind-blast\"\r\n        const ability = abilitySettings[name]\r\n        const duration = getAbilityCooldown(name)\r\n        let cdr = ability.cdr * (inVoidform && -1 || 1)\r\n        ability.cooldown += cdr\r\n\r\n        const startTime = state.cooldowns[name].startTime\r\n        if(!startTime) return\r\n        cdr = getAbilityCooldown(name) - duration\r\n        const now = Date.now()\r\n        const remaining = (startTime + duration) - now\r\n        const remainingPercent = remaining/duration\r\n        const remainingCdr = remainingPercent * cdr\r\n\r\n        triggerCooldown({\r\n            type: \"ABILITY_COOLDOWN_START\",\r\n            payload: {\r\n                name,\r\n                time: startTime + remainingCdr - cdr\r\n            }\r\n        })\r\n\r\n    }, [inVoidform])\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleKeyPress)\r\n        document.addEventListener(\"keypress\", handleKeyPress)\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleKeyPress)\r\n            document.removeEventListener(\"keypress\", handleKeyPress)\r\n        }\r\n    }, [keyEventsPaused])\r\n\r\n    const [state, triggerCooldown] = useReducer((oldState, action) => {\r\n        const newState = JSON.parse(JSON.stringify(oldState))\r\n        const payload = action.payload\r\n\r\n        switch(action.type) {\r\n            case \"RESET\":\r\n                return defaultState\r\n            case \"EXECUTE_PENDING\":\r\n                var {name} = payload\r\n                newState.status[name] = \"PENDING\"\r\n                break\r\n            case \"EXECUTE_END\":\r\n                var {name} = payload\r\n                newState.status[name] = \"\"\r\n                break\r\n            case \"ABILITY_CAST_SUCCESS\":\r\n                var {name} = payload\r\n                if(abilitySettings[\"void-bolt\"].rankTwo && newState.casting && name === \"void-bolt\" && newState.casting.name === \"mind-flay\") {\r\n                    break\r\n                }\r\n                newState.cooldowns[name].castStartTime = 0\r\n                newState.cooldowns[name].castEndTime = 0\r\n\r\n                if(newState.casting) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                    delete newState.casting\r\n                }\r\n                break\r\n            case \"ABILITY_COOLDOWN_START\":\r\n                var {name, time} = payload\r\n                newState.cooldowns[name].startTime = time\r\n                break\r\n            case \"ABILITY_COOLDOWN_END\":\r\n                var {name} = payload\r\n                newState.cooldowns[name].startTime = 0\r\n                break\r\n            case \"ABILITY_CAST_START\":\r\n                var {name, displayName, time, duration} = payload\r\n                newState.cooldowns[name].castStartTime = time\r\n                newState.cooldowns[name].castEndTime = time + duration\r\n                if(newState.casting) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                }\r\n                newState.casting = {\r\n                    duration,\r\n                    name,\r\n                    displayName,\r\n                    direction: 1,\r\n                    time\r\n                }\r\n                break\r\n            case \"ABILITY_CHANNEL_START\":\r\n                var {name, displayName, time, duration, baseChannelTime, currentTicks} = payload\r\n                var ability = newState.cooldowns[name]\r\n\r\n                newState.cooldowns[name] = {\r\n                    ...ability,\r\n                    castStartTime: time,\r\n                    castEndTime: time + duration,\r\n                    baseChannelTime,\r\n                    currentTicks\r\n                }\r\n\r\n                if(newState.casting && name !== newState.casting.name) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                }\r\n                newState.casting = {\r\n                    duration,\r\n                    name,\r\n                    displayName,\r\n                    direction: 0,\r\n                    time\r\n                }\r\n                break\r\n            case \"ABILITY_CHANNEL_UPDATE\":\r\n                var {name} = payload\r\n                newState.cooldowns[name].currentTicks--\r\n                break\r\n            case \"ABILITY_CHANNEL_END\":\r\n                var {name} = payload\r\n                var ability = newState.cooldowns[name]\r\n\r\n                newState.cooldowns[name] = {\r\n                    ...ability,\r\n                    castStartTime: 0,\r\n                    castEndTime: 0,\r\n                    currentTicks: 0\r\n                }\r\n                if(newState.casting && name === newState.casting.name) delete newState.casting\r\n                break\r\n            case \"GLOBAL_COOLDOWN_START\":\r\n                newState.globalCooldown = payload.gcd\r\n                newState.globalCooldownStartTime = payload.time\r\n                break\r\n            case \"GLOBAL_COOLDOWN_END\":\r\n                newState.globalCooldownStartTime = 0\r\n                break\r\n            default:\r\n                console.error(`Invalid action provided: ${action.type}`)\r\n        }\r\n\r\n        return newState\r\n\r\n    }, defaultState)\r\n\r\n    const globalCooldownRef = useRef(state.globalCooldown)\r\n    globalCooldownRef.current = state.globalCooldown\r\n\r\n    const globalCooldownStartTimeRef = useRef(state.globalCooldownStartTime)\r\n    globalCooldownStartTimeRef.current = state.globalCooldownStartTime\r\n\r\n    const handleKeyPress = (e) => {\r\n        if(keyEventsPaused) return\r\n\r\n        const now = Date.now()\r\n\r\n        observersRef.current.forEach(o => {\r\n            if(o.keybind === e.key) {\r\n                e.preventDefault()\r\n                const abilityCooldownRemaining = o.getRemainingCooldown()\r\n                const globalCooldownRemaining = globalCooldownRef.current ? globalCooldownRef.current - (now - globalCooldownStartTimeRef.current) : 0\r\n                const remaining = Math.max(abilityCooldownRemaining, globalCooldownRemaining)\r\n\r\n                if(remaining > spellQueueWindow) return\r\n\r\n                queueAbility(o.source, o.execute, remaining + 15)\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleClick = (name, getRemainingCooldown, execute) => {\r\n        const now = Date.now()\r\n\r\n        const abilityCooldownRemaining = getRemainingCooldown()\r\n        const globalCooldownRemaining = globalCooldownRef.current ? globalCooldownRef.current - (now - globalCooldownStartTimeRef.current) : 0\r\n        const remaining = Math.max(abilityCooldownRemaining, globalCooldownRemaining)\r\n\r\n        if(remaining > spellQueueWindow) return\r\n\r\n        queueAbility(name, execute, remaining + 15)\r\n    }\r\n\r\n    const calculateCooldown = (cooldown) => {\r\n        return cooldown/hasteRef.current\r\n    }\r\n\r\n    const triggerGlobalCooldown = () => {\r\n        let gcd = Math.max(calculateCooldown(gcdLength), gcdLength/2)\r\n\r\n        GlobalCooldown.start(gcd, triggerCooldown)\r\n\r\n        setTimeout(() => {\r\n            observersRef.current.forEach(o => o.notify())\r\n        }, 0)\r\n    }\r\n\r\n    const subscribe = (observer) => {\r\n        setObservers(o => [...o, observer])\r\n    }\r\n\r\n    const unsubscribe = (source) => {\r\n        setObservers(obs => obs.filter(o => o.source !== source))\r\n    }\r\n\r\n    const getAbilityCooldown = (k) => {\r\n        const ability = abilitySettings[k]\r\n        const cooldown = ability.cooldown\r\n\r\n        return ability.hasted ? calculateCooldown(cooldown) : cooldown\r\n    }\r\n\r\n    const getAbilityCastTime = (k) => {\r\n        const ability = abilitySettings[k]\r\n        const casttime = ability.casttime\r\n\r\n        return ability.staticCastTime ? casttime : calculateCooldown(casttime)\r\n    }\r\n\r\n    const queueAbility = (name, execute, remaining) => {\r\n\r\n        clearTimeout(spellQueueTimer.current)\r\n\r\n        spellQueueTimer.current = setTimeout(() => {\r\n            if(!observersRef.current.find(o => o.source === name)) return\r\n            execute()\r\n        }, remaining)\r\n    }\r\n\r\n    const makeGroupChunks = (size) => (chunks, curr, i) => {\r\n        const index = Math.floor(i/size)\r\n        chunks[index] = [...chunks[index] || [], curr]\r\n        return chunks\r\n    }\r\n\r\n    const disabledAbilities = (k) => {\r\n        if(abilities[k].disabled) return false\r\n        if(k === \"void-bolt\" && !inVoidformRef.current) return false\r\n        if(k === \"void-eruption\" && inVoidformRef.current) return false\r\n\r\n        return true\r\n    }\r\n\r\n    const buildAbilityBar = (abilities) => {\r\n        return Object.keys(abilities)\r\n            .filter(disabledAbilities)\r\n            .sort((k1, k2) => abilities[k1].index - abilities[k2].index)\r\n            //.reduce(makeGroupChunks(8), [])\r\n    }\r\n\r\n    return (\r\n    <div className=\"ability-bar-container\">\r\n        <div className=\"progress-bar-container\">\r\n            {state.casting ? <CastBar {...state.casting}/> : null}\r\n        </div>\r\n        <div className=\"ability-bar\">\r\n            {buildAbilityBar(abilities)\r\n            .map(k => {\r\n                return <ProgressAbility\r\n                    name={k}\r\n                    key={`ability-${k}`}\r\n                    {...abilities[k]}\r\n                    {...state.cooldowns[k]}\r\n                    settings={abilitySettings[k]}\r\n                    cooldown={getAbilityCooldown(k)}\r\n                    globalCooldown={state.globalCooldown}\r\n                    globalCooldownStartTime={state.globalCooldownStartTime}\r\n                    casttime={getAbilityCastTime(k)}\r\n                    casting={state.casting && state.casting.time && state.casting.direction}\r\n                    subscribe={subscribe}\r\n                    unsubscribe={unsubscribe}\r\n                    onExecute={triggerGlobalCooldown}\r\n                    onAbilityUpdate={triggerCooldown}\r\n                    onClick={handleClick}\r\n                    triggerEvent={triggerEvent}\r\n                    reset={reset}\r\n                    />\r\n                })}\r\n        </div>        \r\n    </div>\r\n    )\r\n}\r\n\r\nexport default AbilityBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport CooldownSweep from \"../CooldownSweep\"\r\nimport \"./Aura.css\"\r\n\r\nconst Aura = (props) => {\r\n\r\n    const {icon, displayName, duration, maxDuration, stacks} = props\r\n\r\n    const size = 30\r\n    const progress = duration && ((maxDuration-duration)/maxDuration)\r\n\r\n    return (\r\n        <div className=\"aura\">\r\n            <img\r\n                src={icon}\r\n                width={size}\r\n                height={size}\r\n            >\r\n            </img>\r\n            <div className=\"aura-text\">{stacks > 0 ? stacks : \"\"}</div>\r\n            {duration ? <CooldownSweep size={30} progress={progress} inverse={true}/> : null}\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Aura","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst LingeringInsanity = (props) => {\r\n\r\n    const { type, startTime, haste, stacks, inVoidform, triggerEvent, ...settings} = props\r\n\r\n    const interval = 100\r\n    const name = \"lingeringInsanity\"\r\n    const displayName = \"Lingering Insanity\"\r\n    const icon = \"images/lingering-insanity.jpg\"\r\n    const defaultMaxDuration = 60000\r\n\r\n    const [maxDuration, setMaxDuration] = useState(defaultMaxDuration)\r\n    const [duration, setDuration] = useState(0)\r\n\r\n    const stacksRef = useRef(stacks)\r\n    stacksRef.current = stacks\r\n\r\n    const inVoidformRef = useRef(inVoidform)\r\n    inVoidformRef.current = inVoidform\r\n\r\n    const startTimeRef = useRef(startTime)\r\n    startTimeRef.current = startTime\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const initialize = (afterVoidformEntry, hasteRetention, stacks, duration) => {\r\n        let currentMaxDuration = afterVoidformEntry ? defaultMaxDuration : duration\r\n        let voidformEntered = false\r\n\r\n        setMaxDuration(maxDuration => currentMaxDuration)\r\n\r\n        triggerEvent({\r\n            type: \"LINGERING_INSANITY_START\",\r\n            payload: {\r\n                haste: hasteRef.current * hasteRetention,\r\n                stacks\r\n            }\r\n        })\r\n\r\n        return {\r\n            currentMaxDuration,\r\n            voidformEntered\r\n        }\r\n\r\n    }\r\n\r\n    const startStatic = () => {\r\n\r\n        const { duration, afterVoidformEntry, hasteRetention } = settings\r\n        \r\n        let state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            const now = Date.now()\r\n\r\n            console.log(\"here\")\r\n\r\n            //just left voidform\r\n            if(state.voidformEntered && !inVoidformRef.current) {\r\n                state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\r\n\r\n                return\r\n            }\r\n\r\n            //timed out\r\n            if(now >= startTimeRef.current + state.currentMaxDuration) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_END\"\r\n                })\r\n\r\n                return\r\n            }\r\n\r\n            if(!state.voidformEntered && inVoidformRef.current) \r\n            {\r\n                state.voidformEntered = true\r\n\r\n                if(afterVoidformEntry) {\r\n                    triggerEvent({\r\n                        type: \"AURA_REFRESH\",\r\n                        payload: {\r\n                            name,\r\n                            time: now\r\n                        }\r\n                    })\r\n                    setMaxDuration(maxDuration => duration)\r\n                    state.currentMaxDuration = duration\r\n                    setDuration(duration => 0)\r\n                    return\r\n                }\r\n           }            \r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    const calculateDecayStacks = (voidformHaste, hasteDecay) => {\r\n        return Math.ceil(voidformHaste/hasteDecay)\r\n    }\r\n\r\n    const startDecay = () => {\r\n\r\n        const { decayRate, hasteDecay } = settings\r\n\r\n        let i = 0\r\n\r\n        let state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            i += interval\r\n\r\n            const now = Date.now()\r\n\r\n            if(state.voidformEntered && !inVoidformRef.current) {\r\n                state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\r\n                i = 0\r\n\r\n                return\r\n            }\r\n\r\n            if(stacksRef.current <= 0) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_END\"\r\n                })\r\n\r\n                return\r\n            }\r\n\r\n            //lose stack\r\n            if(i % decayRate === 0) {\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_UPDATE\",\r\n                    payload: hasteDecay * -1\r\n                })\r\n            }\r\n\r\n            if(!state.voidformEntered && inVoidformRef.current) state.voidformEntered = true\r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    useEffect(() => {\r\n        let timer\r\n\r\n        switch(type) {\r\n            case \"static\":\r\n                timer = startStatic()\r\n                break\r\n            case \"decay\":\r\n                timer = startDecay()\r\n                break\r\n        }\r\n\r\n        return () => clearInterval(timer)\r\n\r\n    }, [])\r\n\r\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDuration} stacks={stacks}/>\r\n}\r\n\r\nexport default LingeringInsanity","import React, { useState, useEffect, useRef } from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst Voidform = (props) => {\r\n\r\n    const { drainRate, drainStart, hasteStack, hasteStart, maxStacks, paused, active, triggerEvent } = props\r\n    const interval = 100\r\n    const displayName = \"Voidform\"\r\n    const icon = \"images/voidform.jpg\"\r\n\r\n    const [stacks, setStacks] = useState(1)\r\n\r\n    const pausedRef = useRef(paused)\r\n    pausedRef.current = paused\r\n\r\n    const start = () => {\r\n        let n = 0\r\n        let frequency = Math.round(1000 / interval)\r\n\r\n        let i = 0\r\n\r\n        triggerEvent({\r\n            type: \"HASTE_UPDATE\",\r\n            payload: {\r\n                source: \"voidform\",\r\n                haste: hasteStart + hasteStack\r\n            }\r\n        })\r\n\r\n        const timer = setInterval(() => {\r\n            let sec = interval / 1000\r\n            let drain = (drainStart + drainRate * n) * sec\r\n\r\n            i++\r\n\r\n            if (!pausedRef.current) {\r\n                n += sec\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource: drain * -1\r\n                    }\r\n                })\r\n            }\r\n\r\n            if (i % frequency === 0 && (!maxStacks || i / frequency < maxStacks)) {\r\n                //gain a stack of vf\r\n                triggerEvent({\r\n                    type: \"VOIDFORM_UPDATE\",\r\n                    payload: hasteStack\r\n                })\r\n                setStacks(stacks => stacks + 1)\r\n            }\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    useEffect(() => {\r\n        let timer = start()\r\n\r\n        return () => {\r\n            clearInterval(timer)\r\n\r\n            triggerEvent({\r\n                type: \"VOIDFORM_END\",\r\n                payload: {\r\n                    time: Date.now(),\r\n                    startingHaste: hasteStart\r\n                }\r\n            })\r\n        }\r\n    }, [active])\r\n\r\n    return <Aura icon={icon} displayName={displayName} stacks={stacks} />\r\n}\r\n\r\nexport default Voidform","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst DamageOverTime = (props) => {\r\n\r\n    const {icon, name, displayName, startTime, baseDuration, maxDuration, ticks, resource, haste, triggerEvent} = props\r\n\r\n    const interval = 100\r\n\r\n    const [duration, setDuration] = useState(0)\r\n\r\n    const startTimeRef = useRef(startTime)\r\n    startTimeRef.current = startTime\r\n\r\n    const maxDurationRef = useRef(maxDuration)\r\n    maxDurationRef.current = maxDuration\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const calculateNextTickTime = (now) => {\r\n        //console.log(\"Haste: \" + hasteRef.current)\r\n        return (baseDuration/ticks)/hasteRef.current + now\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        let start = Date.now()\r\n        let tickTime = calculateNextTickTime(start)\r\n\r\n        triggerEvent({\r\n            type: \"AURA_BEGIN\",\r\n            payload: {\r\n                name,\r\n                duration: baseDuration,\r\n                time: start\r\n            }\r\n        })\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            const now = Date.now()\r\n\r\n            if(now >= startTimeRef.current + maxDurationRef.current) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource\r\n                    }\r\n                })\r\n                triggerEvent({\r\n                    type: \"AURA_END\",\r\n                    payload: {\r\n                        name\r\n                    }\r\n                })\r\n                return\r\n            }\r\n\r\n            if(now >= tickTime) {\r\n                //console.log(\"Tick!\")\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource\r\n                    }\r\n                })\r\n\r\n                tickTime = calculateNextTickTime(now)\r\n            }\r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return () => clearInterval(timer)\r\n    }, [])\r\n\r\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDurationRef.current}/>\r\n}\r\n\r\nexport default DamageOverTime","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Aura from \"./Aura\"\r\nimport {auraEventHandler} from \"../../utils/eventHandler\"\r\n\r\n//import \r\n\r\nconst Buff = (props) => {\r\n\r\n    const {icon, name, displayName, startTime, setting, triggerEvent} = props\r\n    const {baseDuration} = setting\r\n\r\n    const interval = 100\r\n\r\n    const [duration, setDuration] = useState(0)\r\n\r\n    const startTimeRef = useRef(startTime)\r\n    startTimeRef.current = startTime\r\n\r\n    useEffect(() => {\r\n        const eventHandler = auraEventHandler(name, triggerEvent)\r\n        const start = Date.now()\r\n\r\n        eventHandler.handleEvent(\"AURA_START\", {\r\n            name,\r\n            source: name,\r\n            duration: baseDuration,\r\n            time: start,\r\n            ...setting\r\n        })\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            const now = Date.now()\r\n\r\n            if(now >= startTimeRef.current + baseDuration) {\r\n                clearInterval(timer)\r\n\r\n                eventHandler.handleEvent(\"AURA_END\", {\r\n                    name,\r\n                    source: name\r\n                })\r\n\r\n                return\r\n            }\r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return () => clearInterval(timer)\r\n    }, [])\r\n\r\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={baseDuration}/>\r\n}\r\n\r\nexport default Buff","const whatIs = {\r\n    cooldown: \"The amount of time, in seconds, it takes for an ability to be able to be recast.\",\r\n    charges: \"The number of times an ability may be cast while it is on cooldown.\",\r\n    hasted: \"An ability that is hasted has its cooldown reduced by haste.\",\r\n    resourceCast: \"The amount of resource an ability will generate upon a successful cast.\",\r\n    resourceChannel: \"The amount of resource an ability will generate over its complete channel period.\",\r\n    resourceAura: \"The amount of resource an aura will generate every time its effect triggers.\",\r\n    resourceGeneration: \"Increases the amount of resource generated from abilities while an aura is active.\",\r\n    cost: \"The amount of resource required to cast an ability. Casting the ability will spend the resource cost.\",\r\n    castTime: \"The amount of time, in seconds, it takes for an ability to be executed.\",\r\n    channelTime: \"The amount of time, in seconds, it takes for an ability's channel to complete.\",\r\n    ticks: \"The number of times a channel generates resources over its duration.\",\r\n    mindSearTargetCount: \"The number of targets Mind Sear will hit. Mind Sear generates more resource per additional target.\",\r\n    voidBoltRankTwo: \"An extra rank coming to Void Bolt in Shadowlands. It allows Void Bolt to be cast during Mind Flay, without canceling it.\",\r\n    voidBoltExtension: \"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast.\",\r\n    voidformThreshold: \"The amount of Insanity that is required to cast Void Eruption out of Voidform.\",\r\n    voidformCooldownReduction: \"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform.\",\r\n    requireVoidform: \"Must be in Voidform in order to cast the ability.\",\r\n    haste: \"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate.\",\r\n    voidformStartingDrain: \"The starting amount of Insanity being drained every second while in Voidform.\",\r\n    voidformDrainRate: \"The amount of increasing Insanity drained every second while in Voidform.\",\r\n    voidformStartingHaste: \"The amount of haste, in percent, that is granted at the start of Voidform.\",\r\n    voidformHasteStack: \"The amount of haste, in percent, that every stack of Voidform grants.\",\r\n    voidformMaximumStacks: \"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing.\",\r\n    lingeringInsanityType: \"Lingering Insanity has two types.\\nStatic - The length of the aura and haste from stacks are constant.\\nDecay - Haste stacks are lost over the aura's duration at a certain rate.\",\r\n    lingeringInsanityDuration: \"An option for type 'Static'. This is the amount of time, in seconds, that the aura will last.\",\r\n    lingeringInsanityAfterVoidformEntry: \"An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform.\",\r\n    lingeringInsanityHasteRetention: \"An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform.\",\r\n    lingeringInsanityDecayRate: \"An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost.\",\r\n    lingeringInsanityHasteDecay: \"An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack.\",\r\n    auraDuration: \"The amount of time, in seconds, that an aura's effect will last.\",\r\n    auraTicks: \"The number of times an aura will trigger its effect over its duration.\"\r\n}\r\n\r\nconst commonOptions = {\r\n    cooldown: {\r\n        key: \"cooldown\",\r\n        displayName: \"Cooldown\",\r\n        type: \"time\",\r\n        whatIs: whatIs.cooldown,\r\n        unit: \"sec\"\r\n    },\r\n    charges: {\r\n        key: \"charges\",\r\n        displayName: \"Charges\",\r\n        type: \"number\",\r\n        whatIs: whatIs.charges\r\n    },\r\n    hasted: {\r\n        key: \"hasted\",\r\n        displayName: \"Hasted\",\r\n        type: \"boolean\",\r\n        whatIs: whatIs.hasted\r\n    },\r\n    resourceCast: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceCast,\r\n        unit: \"insanity\"\r\n    },\r\n    resourceChannel: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceChannel,\r\n        unit: \"insanity\"\r\n    },\r\n    cost: {\r\n        key: \"resource\",\r\n        displayName: \"Cost\",\r\n        type: \"number\",\r\n        whatIs: whatIs.cost,\r\n        unit: \"insanity\"\r\n    },\r\n    castTime: {\r\n        key: \"casttime\",\r\n        displayName: \"Cast Time\",\r\n        type: \"time\",\r\n        whatIs: whatIs.castTime,\r\n        unit: \"sec\"\r\n    },\r\n    channelTime: {\r\n        key: \"casttime\",\r\n        displayName: \"Channel Time\",\r\n        type: \"time\",\r\n        whatIs: whatIs.channelTime,\r\n        unit: \"sec\"\r\n    },\r\n    ticks: {\r\n        key: \"ticks\",\r\n        displayName: \"Ticks\",\r\n        type: \"number\",\r\n        whatIs: whatIs.ticks\r\n    },\r\n    auraDuration: {\r\n        key: \"baseDuration\",\r\n        displayName: \"Duration\",\r\n        type: \"time\",\r\n        whatIs: whatIs.auraDuration\r\n    },\r\n    auraTicks: {\r\n        key: \"ticks\",\r\n        displayName: \"Ticks\",\r\n        type: \"number\",\r\n        whatIs: whatIs.auraTicks\r\n    },\r\n    auraResource: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceAura\r\n    }\r\n}\r\n\r\n\r\nexport const abilityOptions = {\r\n    \"void-bolt\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.hasted,\r\n        commonOptions.charges,\r\n        commonOptions.resourceCast,\r\n        {\r\n            key: \"rankTwo\",\r\n            displayName: \"Rank 2\",\r\n            type: \"boolean\",\r\n            whatIs: whatIs.voidBoltRankTwo\r\n        },\r\n        {\r\n            key: \"extension\",\r\n            displayName: \"DoT Extension\",\r\n            type: \"time\",\r\n            whatIs: whatIs.voidBoltExtension\r\n        }\r\n    ],\r\n    \"void-eruption\": [\r\n        commonOptions.castTime,\r\n        {\r\n            key: \"resource\",\r\n            displayName: \"Insanity Threshold\",\r\n            type: \"number\",\r\n            whatIs: whatIs.voidformThreshold\r\n        }\r\n    ],\r\n    \"mind-flay\": [\r\n        commonOptions.channelTime,\r\n        commonOptions.resourceChannel,\r\n        commonOptions.ticks\r\n    ],\r\n    \"mind-sear\": [\r\n        commonOptions.channelTime,\r\n        commonOptions.resourceChannel,\r\n        commonOptions.ticks,\r\n        {\r\n            key: \"targetCount\",\r\n            displayName: \"Target Count\",\r\n            type: \"number\",\r\n            whatIs: whatIs.mindSearTargetCount\r\n        }\r\n    ],\r\n    \"mind-blast\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.charges,\r\n        commonOptions.castTime,\r\n        commonOptions.hasted,\r\n        commonOptions.resourceCast,\r\n        {\r\n            key: \"cdr\",\r\n            displayName: \"Voidform Cooldown Reduction\",\r\n            type: \"time\",\r\n            whatIs: whatIs.voidformCooldownReduction\r\n        }\r\n    ],\r\n    \"shadow-word-death\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.charges,\r\n        commonOptions.hasted,\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"void-torrent\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.channelTime,\r\n        commonOptions.resourceChannel,\r\n        commonOptions.ticks,\r\n        {\r\n            key: \"requireVoidform\",\r\n            displayName: \"Require Voidform\",\r\n            type: \"boolean\",\r\n            whatIs: whatIs.requireVoidform\r\n        }\r\n    ],\r\n    \"shadow-word-pain\": [\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"vampiric-touch\": [\r\n        commonOptions.castTime,\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"devouring-plague\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.cost\r\n    ],\r\n    \"shadowfiend\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"power-infusion\": [\r\n        commonOptions.cooldown\r\n    ]\r\n}\r\n\r\nexport const auraOptions = {\r\n    \"stats\": [\r\n        {\r\n            key: \"haste\",\r\n            displayName: \"Haste\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.haste\r\n        }\r\n    ],\r\n    \"voidform\": [\r\n        {\r\n            key: \"drainStart\",\r\n            displayName: \"Starting Insanity Drain\",\r\n            type: \"float\",\r\n            unit: \"/sec\",\r\n            whatIs: whatIs.voidformStartingDrain,\r\n        },\r\n        {\r\n            key: \"drainRate\",\r\n            displayName: \"Insanity Drain Rate\",\r\n            type: \"float\",\r\n            unit: \"/sec\",\r\n            whatIs: whatIs.voidformDrainRate\r\n        },\r\n        {\r\n            key: \"hasteStart\",\r\n            displayName: \"Voidform Starting Haste\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.voidformStartingHaste\r\n        },\r\n        {\r\n            key: \"hasteStack\",\r\n            displayName: \"Voidform Haste Per Stack\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.voidformHasteStack\r\n        },\r\n        {\r\n            key: \"maxStacks\",\r\n            displayName: \"Maximum Voidform Stacks\",\r\n            type: \"number\",\r\n            whatIs: whatIs.voidformMaximumStacks\r\n        }\r\n    ],\r\n    \"lingeringInsanity\": [\r\n        {\r\n            key: \"type\",\r\n            displayName: \"Aura Type\",\r\n            type: \"select\",\r\n            options: [{\r\n                value: \"static\",\r\n                displayName: \"Static\"\r\n            },{\r\n                value: \"decay\",\r\n                displayName: \"Decay\"\r\n            }],\r\n            whatIs: whatIs.lingeringInsanityType\r\n        },\r\n        {\r\n            key: \"duration\",\r\n            displayName: \"Aura Duration\",\r\n            type: \"time\",\r\n            whatIs: whatIs.lingeringInsanityDuration\r\n        },\r\n        {\r\n            key: \"afterVoidformEntry\",\r\n            displayName: \"After Voidform Entry\",\r\n            type: \"boolean\",\r\n            whatIs: whatIs.lingeringInsanityAfterVoidformEntry\r\n        },\r\n        {\r\n            key: \"hasteRetention\",\r\n            displayName: \"Haste Retained\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.lingeringInsanityHasteRetention\r\n        },\r\n        {\r\n            key: \"decayRate\",\r\n            displayName: \"Stack Decay Rate\",\r\n            type: \"time\",\r\n            whatIs: whatIs.lingeringInsanityDecayRate\r\n        },\r\n        {\r\n            key: \"hasteDecay\",\r\n            displayName: \"Haste Decay Amount\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.lingeringInsanityHasteDecay\r\n        }\r\n    ],\r\n    \"shadow-word-pain\": [\r\n        commonOptions.auraDuration,\r\n        commonOptions.auraTicks,\r\n        commonOptions.auraResource\r\n    ],\r\n    \"vampiric-touch\": [\r\n        commonOptions.auraDuration,\r\n        commonOptions.auraTicks,\r\n        commonOptions.auraResource\r\n    ],\r\n    \"devouring-plague\": [\r\n        commonOptions.auraDuration\r\n    ],\r\n    \"shadowfiend\": [\r\n        commonOptions.auraResource\r\n    ],\r\n    \"power-infusion\": [\r\n        commonOptions.auraDuration,\r\n        {\r\n            key: \"resourceGen\",\r\n            displayName: \"Resource Generation\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.resourceGeneration\r\n        }\r\n    ]\r\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport LingeringInsanity from \"./LingeringInsanity\"\r\nimport Voidform from \"./Voidform\"\r\nimport DamageOverTime from './DamageOverTime';\r\nimport Buff from \"./Buff\"\r\nimport { auraOptions } from '../../lib/options';\r\n\r\nconst dots = [\r\n  {\r\n    name: \"shadow-word-pain\",\r\n    icon: \"images/shadow-word-pain.jpg\",\r\n    displayName: \"Shadow Word: Pain\"\r\n  },\r\n  {\r\n    name: \"vampiric-touch\",\r\n    icon: \"images/vampiric-touch.jpg\",\r\n    displayName: \"Vampiric Touch\"\r\n  },\r\n  {\r\n    name: \"devouring-plague\",\r\n    icon: \"images/devouring-plague.jpg\",\r\n    displayName: \"Devouring Plague\"\r\n  },\r\n  {\r\n    name: \"shadowfiend\",\r\n    icon: \"images/shadowfiend.jpg\",\r\n    displayName: \"Shadowfiend\"\r\n  }\r\n]\r\n\r\nconst buffs = [\r\n  {\r\n    name: \"power-infusion\",\r\n    icon: \"images/power-infusion.jpg\",\r\n    displayName: \"Power Infusion\"\r\n  }\r\n]\r\n\r\nconst AuraBar = (props) => {\r\n\r\n    const {auras, triggerEvent, settings, haste} = props\r\n    const {lingeringInsanity, voidform} = settings \r\n\r\n    const [state, triggerAuraEvent] = useReducer((state, action) => {\r\n\r\n    })\r\n\r\n    return (\r\n        <div className=\"aura-container\">\r\n          {auras.voidform.active \r\n          ? <Voidform \r\n            {...voidform}\r\n            {...auras.voidform}\r\n            triggerEvent={triggerEvent}/> \r\n          : null}\r\n          {auras.lingeringInsanity.active\r\n          ? <LingeringInsanity \r\n            {...lingeringInsanity}\r\n            {...auras.lingeringInsanity} \r\n            inVoidform={auras.voidform.active} \r\n            triggerEvent={triggerEvent}/>\r\n          : null}\r\n          {dots.map(dot => \r\n            auras[dot.name].active\r\n            ? <DamageOverTime\r\n                {...dot}\r\n                {...auras[dot.name]}\r\n                {...settings[dot.name]}\r\n                haste={haste}\r\n                triggerEvent={triggerEvent} \r\n              />\r\n            : null\r\n          )}\r\n          {buffs.map(buff => \r\n            auras[buff.name].active\r\n            ? <Buff\r\n                {...buff}\r\n                {...auras[buff.name]}\r\n                setting={settings[buff.name]}\r\n                triggerEvent={triggerEvent} \r\n              />\r\n            : null\r\n          )}\r\n        </div>       \r\n    )\r\n}\r\n\r\nexport default AuraBar\r\n\r\n\r\n","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport {useCleanup} from \"../../utils/hooks\"\r\n\r\nimport \"./Panel.css\"\r\n\r\nconst Panel = (props) => {\r\n\r\n    const {panel, currentPanel, reset, onClick, handleClose, header, panelClass, style} = props\r\n\r\n    useCleanup(panel, currentPanel, reset)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"panel-header hover-pointer\" onClick={() => onClick(panel)}>{header}</div>\r\n            <div className={`panel ${panelClass}`} style={style}>\r\n                <button className=\"panel-button panel-exit-button\" onClick={handleClose}>x</button>\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Panel","import {useEffect, useRef} from \"react\"\r\n\r\nexport const useCleanup = (target, value, cleanup) => {\r\n    const ref = useRef()\r\n\r\n    useEffect(() => {\r\n        if(ref.current === target) {\r\n            cleanup()\r\n        }       \r\n        ref.current = value\r\n    }, [value])\r\n}","const defaultAbilitySettings = {\r\n    \"mind-flay\": {\r\n        cooldown: 0,\r\n        resource: 12,\r\n        hasted: true,\r\n        casttime: 3000,\r\n        ticks: 4,\r\n        type: \"channel\",\r\n    },\r\n    \"mind-sear\": {\r\n        cooldown: 0,\r\n        resource: 5,\r\n        hasted: true,\r\n        casttime: 3000,\r\n        ticks: 4,\r\n        targetCount: 1,\r\n        type: \"channel\",\r\n    },\r\n    \"void-bolt\": {\r\n        cooldown: 4500,\r\n        resource: 20,\r\n        hasted: true,\r\n        rankTwo: false,\r\n        type: \"instant\",\r\n        charges: 1,\r\n        extension: 3000\r\n    },\r\n    \"void-eruption\": {\r\n        cooldown: 0,\r\n        type: \"cast\",\r\n        casttime: 2000,\r\n        resource: 90,\r\n        costsResource: true\r\n    },\r\n    \"mind-blast\": {\r\n        cooldown: 7500,\r\n        resource: 12,\r\n        hasted: true,\r\n        type: \"cast\",\r\n        casttime: 1500,\r\n        charges: 1,\r\n        cdr: 1500\r\n    },\r\n    \"shadow-word-death\": {\r\n        cooldown: 9000,\r\n        resource: 15,\r\n        hasted: false,\r\n        type: \"instant\",\r\n        charges: 1,\r\n    },\r\n    \"void-torrent\": {\r\n        cooldown: 45000,\r\n        resource: 30,\r\n        type: \"channel\",\r\n        casttime: 4000,\r\n        staticCastTime: true,\r\n        ticks: 10,\r\n        requireVoidform: false\r\n    },\r\n    \"shadow-word-pain\": {\r\n        cooldown: 0,\r\n        resource: 4,\r\n        type: \"instant\"\r\n    },\r\n    \"vampiric-touch\": {\r\n        cooldown: 0,\r\n        resource: 6,\r\n        type: \"cast\",\r\n        casttime: 1500\r\n    },\r\n    \"devouring-plague\": {\r\n        cooldown: 0,\r\n        resource: 50,\r\n        costsResource: true,\r\n        type: \"instant\"\r\n    },\r\n    \"shadowfiend\": {\r\n        cooldown: 180000,\r\n        resource: 3,\r\n        type: \"instant\"\r\n    },\r\n    \"power-infusion\": {\r\n        cooldown: 120000,\r\n        type: \"instant\"\r\n    }\r\n}\r\n\r\nexport default defaultAbilitySettings","const defaultAuraSettings = {\r\n    stats: {\r\n        displayName: \"Stats\",\r\n        haste: 0\r\n    },\r\n    voidform: {\r\n        displayName: \"Voidform\",\r\n        drainStart: 6,\r\n        drainRate: .68,\r\n        hasteStart: 0,\r\n        hasteStack: .005,\r\n        maxStacks: 0\r\n    },\r\n    lingeringInsanity: {\r\n        displayName: \"Lingering Insanity\",\r\n        type: \"decay\",\r\n        duration: 60000,\r\n        afterVoidformEntry: false,\r\n        hasteRetention: 1,\r\n        decayRate: 3000,\r\n        hasteDecay: .01\r\n    },\r\n    \"shadow-word-pain\": {\r\n        displayName: \"Shadow Word: Pain\",\r\n        baseDuration: 16000,\r\n        ticks: 8,\r\n        resource: 0\r\n    },\r\n    \"vampiric-touch\": {\r\n        displayName: \"Vampiric Touch\",\r\n        baseDuration: 21000,\r\n        ticks: 7,\r\n        resource: 0\r\n    },\r\n    \"devouring-plague\": {\r\n        displayName: \"Devouring Plague\",\r\n        baseDuration: 12000,\r\n        ticks: 4,\r\n        resource: 0\r\n    },\r\n    \"shadowfiend\": {\r\n        displayName: \"Shadowfiend\",\r\n        baseDuration: 15000,\r\n        ticks: 10,\r\n        resource: 3\r\n    },\r\n    \"power-infusion\": {\r\n        displayName: \"Power Infusion\",\r\n        baseDuration: 20000,\r\n        haste: .25,\r\n        resourceGen: 0\r\n    }\r\n}\r\n\r\nexport default defaultAuraSettings","import {Base64} from \"js-base64\"\r\nimport abilitySettings from \"../lib/abilitySettings\"\r\nimport auraSettings from \"../lib/auraSettings\"\r\n\r\nconst parseAbility = (ability, key) => {\r\n    let abilitySetting = abilitySettings[key]\r\n    let result = Object.keys(abilitySetting).reduce((obj, k) => {\r\n        let userSetting = ability[k]\r\n        //might want to look at options\r\n        let setting = abilitySetting[k]\r\n\r\n        if(userSetting === null || userSetting === undefined) throw new Error(\"Missing ability setting in input \" + k)\r\n\r\n        if(typeof userSetting !== typeof setting) throw new Error(\"Ability setting has invalid format\")\r\n        \r\n        obj[k] = userSetting\r\n\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst parseAbilitySettings = (abilities) => {\r\n    let result = {}\r\n\r\n    Object.keys(abilitySettings).forEach(a => {\r\n        let ability = abilities[a]\r\n\r\n        if(!ability) throw new Error(\"Missing ability in input\")\r\n\r\n        result[a] = parseAbility(ability, a)\r\n    })\r\n\r\n    return result\r\n}\r\n\r\nconst parseAura = (aura, key) => {\r\n    let auraSetting = auraSettings[key]\r\n\r\n    let result = Object.keys(auraSetting).reduce((obj, k) => {\r\n        let userSetting = aura[k]\r\n        let setting = auraSetting[k]\r\n\r\n        if(userSetting === null || auraSetting === undefined) throw new Error(\"Missing aura setting in input \" + k)\r\n        if(typeof userSetting !== typeof setting) throw new Error(\"Aura setting has invalid format\")\r\n\r\n        obj[k] = userSetting\r\n\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst parseAuraSettings = (auras) => {\r\n    let result = {}\r\n    Object.keys(auraSettings).forEach(a => {\r\n        let aura = auras[a]\r\n\r\n        if(!aura) throw new Error(\"Missing aura in input\")\r\n\r\n        result[a] = parseAura(aura, a)\r\n    })\r\n\r\n    return result\r\n}\r\n\r\nexport const importSettings = (settings, includeKeybinds, includeSpellOrder) => {\r\n\r\n    try {\r\n        let parsedSettings = JSON.parse(Base64.decode(settings))\r\n\r\n        let parsedAbilitySettings = parseAbilitySettings(parsedSettings.abilitySettings)\r\n        let parsedAuraSettings = parseAuraSettings(parsedSettings.auraSettings)\r\n        let abilityConfig = formatAbilityConfig(parsedSettings.abilityConfig, includeKeybinds, includeSpellOrder)\r\n\r\n        return {\r\n            abilitySettings: parsedAbilitySettings, \r\n            auraSettings: parsedAuraSettings,\r\n            abilityConfig\r\n        }\r\n    }\r\n\r\n    catch(e) {\r\n        throw new Error(\"An error occurred while parsing input data.\\nReason: \" + e.message)\r\n    }\r\n}\r\n\r\nconst formatSingleAbilitySetting = (setting) => {\r\n    let result = Object.keys(setting).reduce((obj, k) => {\r\n        obj[k] = setting[k]\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst formatAbilitySettingsForExport = (settings) => {\r\n    let result = Object.keys(settings).reduce((obj, k) => {\r\n        let ability = settings[k]\r\n        let formattedAbility = formatSingleAbilitySetting(ability)\r\n        obj[k] = formattedAbility\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst formatAbilityConfig = (settings, includeKeybinds, includeSpellOrder) => {\r\n    let result = Object.keys(settings).reduce((result, k) => {\r\n        let {keybind, disabled, index} = settings[k]\r\n\r\n        result[k] = {disabled: !!disabled}\r\n        if(includeKeybinds && keybind) result[k].keybind = keybind\r\n        if(includeSpellOrder && index) result[k].index = index\r\n        \r\n        return result\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nexport const exportSettings = (currentSettings) => {\r\n    let formattedAbilitySettings = formatAbilitySettingsForExport(currentSettings.abilitySettings)\r\n    let formattedAbilityConfig = formatAbilityConfig(currentSettings.abilities, true, true)\r\n\r\n    let combined =  {\r\n        abilitySettings: formattedAbilitySettings,\r\n        auraSettings: currentSettings.auraSettings,\r\n        abilityConfig: formattedAbilityConfig\r\n    }\r\n\r\n    let result = Base64.encode(JSON.stringify(combined))\r\n\r\n    return result\r\n}","import live from \"./live\"\r\nimport alpha from \"./alpha\"\r\nimport legionENVoidlord from \"./legionENVoidlord\"\r\nimport legionAntorus from \"./legionAntorus\"\r\n\r\nexport default {\r\n    live,\r\n    alpha,\r\n    legionENVoidlord,\r\n    legionAntorus\r\n}","import defaultAbilitySettings from \"../abilitySettings\"\r\nimport defaultAuraSettings from \"../auraSettings\"\r\n\r\nexport default {\r\n    displayName: \"Live\",\r\n    abilitySettings: {\r\n        ...defaultAbilitySettings,\r\n        \"void-eruption\": {\r\n            cooldown: 0,\r\n            type: \"cast\",\r\n            casttime: 1500,\r\n            resource: 90,\r\n            costsResource: true\r\n        },\r\n        \"mind-blast\": {\r\n            cooldown: 9000,\r\n            resource: 15,\r\n            hasted: true,\r\n            type: \"cast\",\r\n            casttime: 1500,\r\n            charges: 1,\r\n            cdr: 1500\r\n        },\r\n        \"shadow-word-death\": {\r\n            cooldown: 9000,\r\n            resource: 15,\r\n            type: \"instant\",\r\n            charges: 2,\r\n        },\r\n        \"void-torrent\": {\r\n            cooldown: 45000,\r\n            resource: 30,\r\n            type: \"channel\",\r\n            casttime: 4000,\r\n            staticCastTime: true,\r\n            ticks: 10,\r\n        },\r\n        \"shadowfiend\": {\r\n            cooldown: 180000,\r\n            resource: 3,\r\n            type: \"instant\"\r\n        }\r\n    },\r\n    auraSettings: {\r\n        ...defaultAuraSettings\r\n    },\r\n    abilities: {\r\n        \"mind-flay\": {},\r\n        \"mind-sear\": {},\r\n        \"void-bolt\": {},\r\n        \"void-eruption\": {},\r\n        \"mind-blast\": {},\r\n        \"shadow-word-death\": { disabled: true },\r\n        \"void-torrent\": { disabled: true },\r\n        \"shadow-word-pain\": {},\r\n        \"vampiric-touch\": {},\r\n        \"devouring-plague\": { disabled: true },\r\n        \"shadowfiend\": {}\r\n    }\r\n}","import defaultAbilitySettings from \"../abilitySettings\"\r\nimport defaultAuraSettings from \"../auraSettings\"\r\n\r\nexport default {\r\n    displayName: \"Shadowlands Alpha\",\r\n    abilitySettings: {\r\n        ...defaultAbilitySettings,\r\n        \"void-bolt\": {\r\n            ...defaultAbilitySettings[\"void-bolt\"],\r\n            rankTwo: true\r\n        },\r\n        \"void-eruption\": {\r\n            cooldown: 0,\r\n            type: \"cast\",\r\n            casttime: 2000,\r\n            resource: 90,\r\n            costsResource: true\r\n        },\r\n        \"mind-blast\": {\r\n            cooldown: 8000,\r\n            resource: 12,\r\n            hasted: true,\r\n            type: \"cast\",\r\n            casttime: 1500,\r\n            charges: 1,\r\n            cdr: 1500\r\n        },\r\n        \"shadow-word-death\": {\r\n            ...defaultAbilitySettings[\"shadow-word-death\"],\r\n            cooldown: 20000,\r\n            resource: 0,\r\n            hasted: true,\r\n        }\r\n    },\r\n    auraSettings: {\r\n        ...defaultAuraSettings,\r\n        \"devouring-plague\": {\r\n            displayName: \"Devouring Plague\",\r\n            baseDuration: 12000,\r\n            ticks: 4,\r\n            resource: 0\r\n        }\r\n    },\r\n    abilities: {\r\n        \"mind-flay\": {},\r\n        \"mind-sear\": {},\r\n        \"void-bolt\": {},\r\n        \"void-eruption\": {},\r\n        \"mind-blast\": {},\r\n        \"shadow-word-death\": {},\r\n        \"void-torrent\": { disabled: true },\r\n        \"shadow-word-pain\": {},\r\n        \"vampiric-touch\": {},\r\n        \"devouring-plague\": {},\r\n        \"shadowfiend\": {}\r\n    }\r\n}","import defaultAbilitySettings from \"../abilitySettings\"\r\nimport defaultAuraSettings from \"../auraSettings\"\r\n\r\nexport default {\r\n    displayName: \"Legion: EN + Void Lord\",\r\n    abilitySettings: {\r\n        ...defaultAbilitySettings,\r\n        \"void-eruption\": {\r\n            cooldown: 0,\r\n            type: \"cast\",\r\n            casttime: 2500,\r\n            resource: 90,\r\n            costsResource: true\r\n        },\r\n        \"void-torrent\": {\r\n            cooldown: 60000,\r\n            resource: 0,\r\n            type: \"channel\",\r\n            casttime: 4000,\r\n            staticCastTime: true,\r\n            ticks: 10,\r\n            requireVoidform: true\r\n        },\r\n        \"shadowfiend\": {\r\n            cooldown: 180000,\r\n            resource: 0,\r\n            type: \"instant\"\r\n        }\r\n    },\r\n    auraSettings: {\r\n        ...defaultAuraSettings,\r\n        voidform: {\r\n            displayName: \"Voidform\",\r\n            drainStart: 6,\r\n            drainRate: .66,\r\n            hasteStart: 0,\r\n            hasteStack: .01,\r\n            maxStacks: 0\r\n        },\r\n        lingeringInsanity: {\r\n            displayName: \"Lingering Insanity\",\r\n            type: \"static\",\r\n            duration: 8000,\r\n            afterVoidformEntry: true,\r\n            hasteRetention: 1,\r\n            decayRate: 1000,\r\n            hasteDecay: .01\r\n        },\r\n        \"shadowfiend\": {\r\n            displayName: \"Shadowfiend\",\r\n            baseDuration: 15000,\r\n            ticks: 10,\r\n            resource: 0\r\n        }\r\n    },\r\n    abilities: {\r\n        \"mind-flay\": {},\r\n        \"mind-sear\": {},\r\n        \"void-bolt\": {},\r\n        \"void-eruption\": {},\r\n        \"mind-blast\": {},\r\n        \"shadow-word-death\": {},\r\n        \"void-torrent\": {},\r\n        \"shadow-word-pain\": {},\r\n        \"vampiric-touch\": {},\r\n        \"devouring-plague\": { disabled: true }\r\n    }\r\n\r\n}","import defaultAbilitySettings from \"../abilitySettings\"\r\nimport defaultAuraSettings from \"../auraSettings\"\r\n\r\nexport default {\r\n    displayName: \"Legion: Antorus\",\r\n    abilitySettings: {\r\n        ...defaultAbilitySettings,\r\n        \"void-eruption\": {\r\n            cooldown: 0,\r\n            type: \"cast\",\r\n            casttime: 1500,\r\n            resource: 65,\r\n            costsResource: true\r\n        },\r\n        \"mind-blast\": {\r\n            cooldown: 7500,\r\n            resource: 12,\r\n            hasted: true,\r\n            type: \"cast\",\r\n            casttime: 1500,\r\n            charges: 2,\r\n            cdr: 1500\r\n        },\r\n        \"void-torrent\": {\r\n            cooldown: 60000,\r\n            resource: 0,\r\n            type: \"channel\",\r\n            casttime: 4000,\r\n            staticCastTime: true,\r\n            ticks: 10,\r\n            requireVoidform: true\r\n        },\r\n        \"shadowfiend\": {\r\n            cooldown: 60000,\r\n            resource: 6,\r\n            type: \"instant\"\r\n        }\r\n    },\r\n    auraSettings: {\r\n        ...defaultAuraSettings,\r\n        stats: {\r\n            displayName: \"Stats\",\r\n            haste: .4\r\n        },\r\n        voidform: {\r\n            displayName: \"Voidform\",\r\n            drainStart: 6,\r\n            drainRate: .66,\r\n            hasteStart: 0,\r\n            hasteStack: .01,\r\n            maxStacks: 0\r\n        },\r\n        lingeringInsanity: {\r\n            displayName: \"Lingering Insanity\",\r\n            type: \"decay\",\r\n            duration: 60000,\r\n            afterVoidformEntry: false,\r\n            hasteRetention: 1,\r\n            decayRate: 1000,\r\n            hasteDecay: .01\r\n        },\r\n        \"shadowfiend\": {\r\n            displayName: \"Shadowfiend\",\r\n            baseDuration: 24000,\r\n            ticks: 16,\r\n            resource: 6\r\n        }\r\n    },\r\n    abilities: {\r\n        \"mind-flay\": {},\r\n        \"mind-sear\": { disabled: true },\r\n        \"void-bolt\": {},\r\n        \"void-eruption\": {},\r\n        \"mind-blast\": {},\r\n        \"shadow-word-death\": {},\r\n        \"void-torrent\": {},\r\n        \"shadow-word-pain\": {},\r\n        \"vampiric-touch\": {},\r\n        \"devouring-plague\": { disabled: true },\r\n        \"power-infusion\": { disabled: true }\r\n    }\r\n\r\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport { exportSettings, importSettings } from \"../../utils/importExport\"\r\nimport templates from \"../../lib/templates\"\r\nimport \"./Panel.css\"\r\n\r\nconst Templates = (props) => {\r\n\r\n    const {onChange, selected} = props\r\n\r\n    return (\r\n        <div style={{width: \"60%\"}}>\r\n            <select className=\"panel-dropdown\" value={selected} onChange={onChange}>\r\n                <option value={\"default\"} disabled>Choose a template...</option>\r\n                {Object.keys(templates).map(t => <option key={t} value={t}>{templates[t].displayName}</option>)}\r\n                <option key={\"custom\"} value={\"custom\"}>Custom</option>\r\n            </select>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ExportPanel = (props) => {\r\n\r\n    const {settings, onImport, currentPanel, onClick, closePanel} = props\r\n\r\n    const panel = \"export\"\r\n    const header = \"Import/Export Settings\"\r\n    const panelClass = \"left-panel\"\r\n    const placeholderText = \"Import settings here...\"\r\n    const exportTextAreaId = \"export-content\"\r\n    const defaultSelected = \"default\"\r\n    const rows = 20\r\n    const cols = 25\r\n\r\n    const [exportData, setExportData] = useState(\"\")\r\n    const [inputData, setInputData] = useState(\"\")\r\n    const [includeKeybinds, setIncludeKeybinds] = useState(false)\r\n    const [includeSpellOrder, setIncludeSpellOrder] = useState(false)\r\n    const [selectedTemplate, setSelectedTemplate] = useState(defaultSelected)\r\n\r\n    const handleImport = () => {\r\n        const settings = importSettings(inputData, includeKeybinds, includeSpellOrder)\r\n        onImport(settings)\r\n        setInputData(\"\")\r\n    }\r\n\r\n    const handleExport = () => {\r\n        const data = exportSettings(settings)\r\n\r\n        setExportData(data)\r\n    }\r\n\r\n    const handleTemplateChange = (e) => {\r\n        const key = e.target.value\r\n\r\n        setSelectedTemplate(key)\r\n\r\n        if(key === \"custom\") {\r\n            setInputData(\"\")\r\n            return\r\n        }\r\n\r\n        const {displayName, ...template} = templates[key]\r\n\r\n        const data = exportSettings({...template})\r\n\r\n        setInputData(data)\r\n    }\r\n\r\n    const copyToClipBoard = () => {\r\n        const textArea = document.getElementById(exportTextAreaId)\r\n\r\n        textArea.select()\r\n\r\n        try {\r\n            document.execCommand(\"copy\")\r\n\r\n        }\r\n        catch (err) {\r\n            //set the message\r\n        }\r\n    }\r\n\r\n    const handleInputChange = (e) => {\r\n        let data = e.target.value\r\n\r\n        setInputData(data)\r\n    }\r\n\r\n    const reset = () => {\r\n        setExportData(\"\")\r\n        setInputData(\"\")\r\n        setIncludeKeybinds(false)\r\n        setIncludeSpellOrder(false)\r\n        setSelectedTemplate(defaultSelected)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"-350px\"})`}}>\r\n            <div className=\"vertical-panel-content\">\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Import Settings</div>\r\n                    <Templates selected={selectedTemplate} onChange={handleTemplateChange} />\r\n                    <textarea className=\"panel-text-area\" rows={rows} cols={cols} placeholder={placeholderText} value={inputData} onChange={handleInputChange}></textarea>\r\n                    <div className=\"panel-info-text-container\">\r\n                        <label>Include keybinds</label>\r\n                        <input type=\"checkbox\" onChange={() => setIncludeKeybinds(!includeKeybinds)} checked={includeKeybinds} />\r\n                    </div>\r\n                    <div className=\"panel-info-text-container\">\r\n                        <label>Include spell order</label>\r\n                        <input type=\"checkbox\" onChange={() => setIncludeSpellOrder(!includeSpellOrder)} checked={includeSpellOrder} />\r\n                    </div>\r\n                    <div className=\"panel-button-container\">\r\n                        <button className=\"panel-button panel-input-button\" onClick={handleImport} disabled={!inputData}>Import</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Export Settings</div>\r\n                    <textarea id={exportTextAreaId} className=\"panel-text-area\" rows={rows} cols={cols} value={exportData} readOnly={true}></textarea>\r\n                    <div className=\"panel-button-container\">\r\n                        <button className=\"panel-button panel-input-button\" onClick={handleExport}>Export</button>\r\n                        <button className=\"panel-button panel-input-button\" onClick={copyToClipBoard} disabled={!exportData}>Copy</button>\r\n                    </div>\r\n                </div>      \r\n            </div> \r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default ExportPanel","import React, { useState } from \"react\"\r\n\r\nconst TimeTextOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const [displayValue, setDisplayValue] = useState(value/1000)\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value) return\r\n        onChange(parseFloat(e.target.value)*1000)\r\n        setDisplayValue(e.target.value)\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={displayValue} min=\"0\" step=\".1\" onChange={handleChange} />sec</span>\r\n}\r\n\r\nconst NumberTextOption = (props) => {\r\n    const {value, onChange, unit} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value) return\r\n        onChange(parseInt(e.target.value))\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" onChange={handleChange} /> {unit}</span>\r\n}\r\n\r\nconst FloatTextOption = (props) => {\r\n    const {value, onChange, unit} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value) return\r\n        onChange(parseFloat(e.target.value))\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" step=\".01\" onChange={handleChange} /> {unit}</span>\r\n}\r\n\r\nconst PercentTextOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const [displayValue, setDisplayValue] = useState(value*100)\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value) return\r\n        onChange(parseFloat(e.target.value)/100)\r\n        setDisplayValue(e.target.value)\r\n    }\r\n\r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={displayValue} min=\"0\" step=\".5\" onChange={handleChange} />%</span>\r\n}\r\n\r\nconst BooleanOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const handleChange = (e) => {\r\n        onChange(e.target.checked)\r\n    }\r\n\r\n    return <input type=\"checkbox\" defaultChecked={value} onChange={handleChange} />\r\n}\r\n\r\nconst SelectOption = (props) => {\r\n    const {value, onChange, name, options} = props\r\n\r\n    const handleChange = (e) => {\r\n        onChange(e.target.value)\r\n    }\r\n\r\n    return (\r\n        options.map(o => (\r\n            <div>\r\n                <input type=\"radio\" id={o.value} name={name} value={o.value} defaultChecked={o.value === value} onChange={handleChange} />\r\n                <label htmlFor={o.value}>{o.displayName}</label>\r\n            </div>\r\n        ))\r\n    )\r\n}\r\n\r\nexport default Option = (type, value, onChange, key, name, rest) => {\r\n    switch(type) {\r\n        case \"time\":\r\n            return <TimeTextOption key={key} value={value} onChange={onChange} />\r\n        case \"number\":\r\n            return <NumberTextOption key={key} value={value} onChange={onChange} {...rest} />\r\n        case \"float\":\r\n            return <FloatTextOption key={key} value={value} onChange={onChange} {...rest} />\r\n        case \"percent\":\r\n            return <PercentTextOption key={key} value={value} onChange={onChange} />\r\n        case \"boolean\":\r\n            return <BooleanOption key={key} value={value} onChange={onChange} />\r\n        case \"select\":\r\n            return <SelectOption key={key} value={value} name={name} onChange={onChange} {...rest} />\r\n        default:\r\n            return null\r\n    }\r\n}","import React from \"react\"\r\nimport Option from \"./optionFactory\"\r\nimport \"./WhatIs.css\"\r\nimport \"./SettingOption.css\"\r\n\r\nconst SettingOption = (props) => {\r\n    const {value, name, type, whatIs, displayName, onChange, onHelp, closeHelp, parentKey, ...rest} = props\r\n\r\n    const handleInputChange = (v) => {\r\n        onChange(name, v)\r\n    }\r\n\r\n    const handleOnHelp = (e) => {\r\n        const pos = {\r\n            x: e.target.offsetLeft,\r\n            y: e.target.offsetTop\r\n        }\r\n        onHelp(displayName, whatIs, pos)\r\n    }\r\n\r\n    return (\r\n        <div className=\"setting-option\">\r\n            <div>\r\n                <i className=\"fa fa-question-circle what-is-icon\" onMouseEnter={handleOnHelp} onMouseLeave={closeHelp}></i>\r\n            </div>\r\n            <div className=\"setting-option-header\">{displayName}</div>\r\n            {Option(type, value, handleInputChange, parentKey + \"-input\", name, rest)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SettingOption","import React from \"react\"\r\nimport \"./WhatIs.css\"\r\n\r\nconst WhatIs = (props) => {\r\n    const {name, text, xPos, yPos} = props\r\n\r\n    //console.log(xPos, yPos)\r\n    const minimumHeight = 30\r\n\r\n    const style = {\r\n        left: `${xPos}px`,\r\n        top: `${yPos+minimumHeight}px`\r\n    }\r\n    \r\n    return (\r\n        <div className=\"what-is\" style={style}>\r\n            <div className=\"what-is-header\">What is... {name}?</div>\r\n            <div className=\"what-is-description\">{text}</div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WhatIs","import React, {useState} from \"react\"\r\nimport SettingOption from \"./SettingOption\"\r\nimport WhatIs from \"./WhatIs\"\r\nimport \"./Panel.css\"\r\n\r\nconst CustomizeSection = (props) => {\r\n\r\n    const {name, setting, options, onChange} = props\r\n\r\n    const [showWhatIs, setShowWhatIs] = useState(false)\r\n    const [whatIs, setWhatIs] = useState({})\r\n\r\n    const handleChange = (optionKey, option) => {\r\n        const newSetting = {...setting, [optionKey]: option}\r\n        onChange(newSetting, name)\r\n    }\r\n\r\n    const handleShowWhatIs = (name, text, pos) => {\r\n        setShowWhatIs(true)\r\n        setWhatIs({\r\n            name,\r\n            text,\r\n            xPos: pos.x,\r\n            yPos: pos.y\r\n        })    \r\n    }\r\n\r\n    const closeWhatIs = () => {\r\n        setShowWhatIs(false)\r\n        setWhatIs({})\r\n    }\r\n\r\n    return (\r\n        <div className=\"customize-section\">\r\n            <div className=\"customoze-section-header\">{setting.displayName}</div>\r\n            {options.map(o => {\r\n            return <SettingOption {...o} key={`${name}-${o.key}`} value={setting[o.key]} name={o.key} parentKey={`${name}-${o.key}`} onChange={handleChange} onHelp={handleShowWhatIs} closeHelp={closeWhatIs}/>\r\n            })}\r\n            {showWhatIs ? <WhatIs {...whatIs}/> : null}\r\n        </div>\r\n            \r\n    )\r\n}\r\n\r\nexport default CustomizeSection","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport CustomizeSection from \"./CustomizeSection\"\r\nimport {abilityOptions, auraOptions} from \"../../lib/options\"\r\nimport \"./Panel.css\"\r\n\r\nconst SettingsPanel = (props) => {\r\n\r\n    const {settings, currentPanel, didReset, onAbilitySet, onAuraSet, onClick, closePanel} = props\r\n\r\n    const {abilities, auras} = settings\r\n\r\n    const panel = \"settings\"\r\n    const header= \"Custom Settings\"\r\n    const panelClass = \"right-panel\"\r\n\r\n    const abilityButtonText = \"Update Abilities\"\r\n    const auraButtonText = \"Update Auras\"\r\n\r\n    const changesPendingText =\r\n`Changes pending...\r\nClick the button below to apply your changes`\r\n\r\n    const [currentAbilities, setCurrentAbilities] = useState(abilities)\r\n    const [currentAuras, setCurrentAuras] = useState(auras)\r\n    const [activeAbilitySection, setActiveAbilitySection] = useState(Object.keys(abilities)[0])\r\n    const [activeAuraSection, setActiveAuraSection] = useState(Object.keys(auras)[0])\r\n    const [abilityChangesPending, setAbilityChangesPending] = useState(false)\r\n    const [auraChangesPending, setAuraChangesPending] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setCurrentAuras(auras)\r\n        setCurrentAbilities(abilities)\r\n    }, [didReset])\r\n\r\n    const handleAbilitySettingChange = (setting, key) => {\r\n        const newAbilities = {...currentAbilities, [key]: setting}\r\n        setCurrentAbilities(newAbilities)\r\n        setAbilityChangesPending(true)\r\n    }\r\n\r\n    const handleAuraSettingChange = (setting, key) => {\r\n        const newAuras = {...currentAuras, [key]: setting}\r\n        setCurrentAuras(newAuras)\r\n        setAuraChangesPending(true)\r\n    }\r\n\r\n    const handleAbilitySet = () => {\r\n        onAbilitySet(currentAbilities)\r\n        setAbilityChangesPending(false)\r\n    }\r\n\r\n    const handleAuraSet = () => {\r\n        onAuraSet(currentAuras)\r\n        setAuraChangesPending(false)\r\n    }\r\n\r\n    const showAbilityOptions = (e) => {\r\n        const settingKey = e.target.getAttribute(\"setting\")\r\n        setActiveAbilitySection(settingKey)\r\n    }\r\n\r\n    const showAuraOptions = (e) => {\r\n        const settingKey = e.target.getAttribute(\"setting\")\r\n        setActiveAuraSection(settingKey)\r\n    }\r\n\r\n    const reset = () => {\r\n        setActiveAbilitySection(Object.keys(abilities)[0])\r\n        setActiveAuraSection(Object.keys(auras)[0])\r\n        setCurrentAuras(auras)\r\n        setCurrentAbilities(abilities)\r\n        setAbilityChangesPending(false)\r\n        setAuraChangesPending(false)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"350px\"}`}}>\r\n            <div className=\"vertical-panel-content\">\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Customize Abilities</div>\r\n                    <div className=\"settings-header-container\">\r\n                        {Object.keys(abilities).map(k => \r\n                            <div key={k} className={activeAbilitySection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAbilityOptions}>{abilities[k].displayName}</div>    \r\n                        )}\r\n                    </div>\r\n                    {activeAbilitySection ? <CustomizeSection name={activeAbilitySection} setting={currentAbilities[activeAbilitySection]} options={abilityOptions[activeAbilitySection]} onChange={handleAbilitySettingChange}/> : null}\r\n                    <div className=\"panel-text-button-container\">\r\n                        <div className=\"panel-info-text-container\">\r\n                            {abilityChangesPending ? changesPendingText : null}\r\n                        </div>                  \r\n                        <div>\r\n                            <button className=\"panel-button\" onClick={handleAbilitySet}>{abilityButtonText}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Customize Auras</div>\r\n                        <div className=\"settings-header-container\">\r\n                            {Object.keys(auras).map(k => \r\n                                <div key={k} className={activeAuraSection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAuraOptions}>{auras[k].displayName}</div>    \r\n                            )}\r\n                        </div>\r\n                        {activeAuraSection ? <CustomizeSection name={activeAuraSection} setting={currentAuras[activeAuraSection]} options={auraOptions[activeAuraSection]} onChange={handleAuraSettingChange}/> : null}\r\n                        <div className=\"panel-text-button-container\">\r\n                            <div className=\"panel-info-text-container\">\r\n                                {auraChangesPending ? changesPendingText : null}    \r\n                            </div>\r\n                            <div>\r\n                                <button className=\"panel-button\" onClick={handleAuraSet}>{auraButtonText}</button>   \r\n                            </div>  \r\n                        </div>            \r\n                </div>\r\n            </div>\r\n        </Panel>      \r\n    )\r\n}\r\n\r\nexport default SettingsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport {keybinds} from \"../../lib/constants\"\r\nimport \"./Panel.css\"\r\nimport \"./Tooltip.css\"\r\n\r\nconst AbilityIndex = (props) => {\r\n\r\n    const {name, count, onChange, value} = props\r\n\r\n    const handleChange = (e) => {\r\n        onChange(parseInt(e.target.value), name)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <select className=\"panel-dropdown\" value={value} onChange={handleChange}>\r\n                {[...Array(count).keys()].map(i => <option key={`${name}-index-${i}`} value={i+1}>{i+1}</option>)}\r\n            </select>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst AbilityKeybindsPanel = (props) => {\r\n\r\n    const {abilities, currentPanel, onKeybind, setOrder, onToggle, onClick, closePanel} = props\r\n\r\n    const panel = \"abilitykeybinds\"\r\n    const header = \"Ability and Keybinds\"\r\n    const panelClass = \"bottom-panel\"\r\n\r\n    const defaultState = {\r\n        tooltip: \"\",\r\n        keybindText: \"\",\r\n        currentAbility: \"\"\r\n    }\r\n\r\n    const [tooltip, setTooltip] = useState(defaultState.tooltip)\r\n    const [keybindText, setKeybindText] = useState(defaultState.keybindText)\r\n    const [currentAbility, setCurrentAbility] = useState(defaultState.currentAbility)\r\n    const [abilityCount] = useState(Object.keys(abilities).length-1)\r\n\r\n    const handleClose = () => {\r\n        setTooltip(defaultState.tooltip)\r\n        setKeybindText(defaultState.keybindText)\r\n        setCurrentAbility(defaultState.currentAbility)\r\n\r\n        closePanel()\r\n    }\r\n\r\n    const currentAbilityRef = useRef(currentAbility)\r\n    currentAbilityRef.current = currentAbility\r\n\r\n    const showToolTip = (e) => {\r\n        setTooltip(e.target.alt)\r\n    }\r\n\r\n    const hideToolTip = () => {\r\n        setTooltip(\"\")\r\n    }\r\n\r\n    const prepareToBindAbility = (e) => {\r\n        let ability = e.target.getAttribute(\"ability\")\r\n        setCurrentAbility(ability)\r\n\r\n        setKeybindText(`Press any key to bind to ${abilities[ability].displayName}`)\r\n\r\n        document.addEventListener(\"keydown\", handleKeyDown, {once: true})\r\n        document.addEventListener(\"keypress\", handleKeyPress, {once: true})\r\n    }\r\n\r\n    const handleKeyDown = (event) => {\r\n        //check to see if we prevent default or not\r\n        const {key} = event\r\n\r\n        if(!isKeydownKey(key)) return\r\n\r\n        event.preventDefault()\r\n        bindAbility(key)\r\n\r\n        //if keybind was found, prevent default and bind ability\r\n\r\n        //if keybind was not found, return\r\n    }\r\n\r\n    const handleKeyPress = (e) => bindAbility(e.key)\r\n\r\n    const isKeydownKey = (key) => {     \r\n        if(key.match(/F[1-9]{1,2}/)) return true\r\n\r\n        return false\r\n    }\r\n\r\n    const formKeybindFromKey = (key) => {\r\n        if(keybinds[key]) \r\n            return {key, keybindText: keybinds[key]}\r\n        if(key.match(/^[a-z]$/)) \r\n            return {key, keybindText: key.toUpperCase() }\r\n        if(key.match(/^[A-Z]$/)) \r\n            return {key, keybindText: \"S-\" + key }\r\n        \r\n        return {key, keybindText: key}\r\n    }\r\n\r\n    const bindAbility = (key) => {\r\n        document.removeEventListener(\"keypress\", handleKeyPress)\r\n        \r\n        const keybind = formKeybindFromKey(key)\r\n        \r\n        let ability = currentAbilityRef.current \r\n\r\n        onKeybind(keybind, ability)\r\n        setKeybindText(`${abilities[ability].displayName} successfuly bound to ${keybind.keybindText}`)\r\n    }\r\n\r\n    const reset = () => {\r\n        document.removeEventListener(\"keydown\", handleKeyDown)\r\n        document.removeEventListener(\"keypress\", handleKeyPress)\r\n        setTooltip(defaultState.tooltip)\r\n        setKeybindText(defaultState.keybindText)\r\n        setCurrentAbility(defaultState.currentAbility)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} header={header} style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"250px\"}`}} panelClass={panelClass} handleClose={handleClose}>\r\n            <div className=\"horizontal-panel-content\">\r\n                <div className=\"panel-content-header\">Change Abilities and Keybinds</div>\r\n                <div className=\"tooltip\">\r\n                    <span className=\"tooltip-text\" visibility={(!!tooltip).toString()}>\r\n                        {tooltip}\r\n                    </span>\r\n                </div>\r\n                <div className=\"panel-abilities-content\">\r\n                    <div className=\"panel-abilities-header\">\r\n                        Spell Order\r\n                    </div>\r\n                    <div className=\"panel-abilities-container\">\r\n                        {Object.keys(abilities).map(k => {\r\n                            if(k === \"void-eruption\") return\r\n                            return <div className=\"panel-ability-container\" key={k}>\r\n                                <img  \r\n                                    className=\"hover-pointer\" \r\n                                    alt={abilities[k].displayName}\r\n                                    ability={k} \r\n                                    onMouseOver={showToolTip}\r\n                                    onMouseOut={hideToolTip}\r\n                                    onClick={prepareToBindAbility}\r\n                                    src={abilities[k].icon}\r\n                                    height={50}\r\n                                    width={50}\r\n                                />\r\n                                <button className={`${abilities[k].disabled ? \"panel-button-secondary\" : \"panel-button\"}`} onClick={() => onToggle(k)}>{abilities[k].disabled ? \"Enable\" : \"Disable\"}</button>\r\n                                <AbilityIndex name={k} count={abilityCount} value={abilities[k].index} onChange={setOrder} />\r\n                            </div>\r\n                    })}\r\n                    </div>\r\n                </div>\r\n                <div>{keybindText ? keybindText : null}</div>\r\n            </div>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default AbilityKeybindsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\n\r\nimport \"./Panel.css\"\r\n\r\nconst AboutPanel = (props) => {\r\n    const {currentPanel, onClick, closePanel} = props\r\n\r\n    const panel = \"about\"\r\n    const header= \"About\"\r\n    const panelClass = \"middle-panel\"\r\n\r\n    return (\r\n        <Panel panel={panel} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass}\r\n            style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"min(-685px,-70vh)\"}`}}\r\n        >\r\n            <div className=\"middle-panel-content\">\r\n                <div className=\"panel-content-header\">About</div>\r\n                <div className=\"medium-text left-text panel-text-content\">\r\n                    <p>\r\n                    Voidform Optimizer is a thought experiment I had.\r\n                    </p>\r\n                    <p>\r\n                    I am convinced that many, although not all, players' grievances with Voidform are caused by the\r\n                    implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others\r\n                    to experience Voidform in a myriad of ways; in hope that they realize it isn't inherently flawed, find what they most enjoy about it, and \r\n                    share those findings with others. Then, just maybe, as a community we can come to an agreement on how to <b>#savevoidform</b>.\r\n                    </p>\r\n                    <p>\r\n                    If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711.\r\n                    </p>\r\n\r\n                </div>\r\n            </div>\r\n        </Panel>      \r\n    )\r\n}\r\n\r\nexport default AboutPanel","export default [\r\n    {\r\n        header: \"New Domain!\",\r\n        description: \"Voidform Optimizer is now registered at voidform-optimizer.com.\"\r\n    },\r\n    {\r\n        header: \"Function Key Binding\",\r\n        description: \"Due to popular demand, function keys are now a valid keybind option. Just make sure to unbind should you wish to \\\r\n        perform any browser function key events (such as refreshing the page), since the settings will override that default behavior.\"\r\n    },\r\n    {\r\n        header: \"Spell Ordering!\",\r\n        description: \"You can now manually set the order of spells shown through the keybinds panel. You can also preserve these changes \\\r\n        by toggling include spell order while importing a template.\"\r\n    },\r\n    {\r\n        header: \"Power Infusion!\",\r\n        description: \"Customizable Power Infusion ability has been added! The ability's cooldown may be changed \\\r\n        and the aura's duration and resource generation can be changed. If desired, you can create alpha StM, Lucid, \\\r\n        and Legion Power Infusion from these settings.\"\r\n    },\r\n    {\r\n        header: \"Legion Templates!\",\r\n        description: \"New templates to satiate your Legion nostalgia. More to come in the future.\"\r\n    },\r\n    {\r\n        header: \"Shadowfiend\",\r\n        description: \"Customizable Shadowfiend ability has been added!\"\r\n    },\r\n    {\r\n        header: \"Templates\",\r\n        description: \"Premade templates may now be selected on import panel!\"\r\n    },\r\n    {\r\n        header: \"Devouring Plague\",\r\n        description: \"The recent Shadowlands Devouring Plague addition is now available to try out!\"\r\n    },\r\n    {\r\n        header: \"What's New?\",\r\n        description: \"Added a what's new dialogue to inform about recent changes to Voidform Optimizer.\"\r\n    }\r\n]","import React, {useState} from 'react';\r\nimport \"../forms/Form.css\"\r\nimport \"./Panel.css\"\r\nimport whatsNew from \"../../lib/whatsNew\"\r\n\r\nconst containerStyle = {\r\n    textAlign: \"left\",\r\n    marginBottom: \"20px\"\r\n}\r\n\r\nconst smallText = {\r\n    fontSize: \"15px\"\r\n}\r\n\r\nconst mediumText = {\r\n    fontSize: \"20px\"\r\n}\r\n\r\nconst WhatsNew = (props) => {\r\n    const title = \"What's New\"\r\n\r\n    const {onClose} = props\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <div className=\"modal-content panel\">\r\n                <div className=\"form-title\">\r\n                    {title}\r\n                </div>           \r\n                <div>\r\n                    {whatsNew.map(item => \r\n                        <div style={containerStyle}>\r\n                            <b style={mediumText}>{item.header}</b>\r\n                            <div style={smallText}>\r\n                                {item.description}\r\n                            </div>\r\n                        </div>)}\r\n                </div>\r\n                <div>\r\n                    <button className=\"panel-button\" onClick={onClose}>Got it!</button>\r\n                </div>\r\n                <button className=\"panel-button panel-exit-button\" onClick={onClose}>x</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst WhatsNewPanel = () => {\r\n\r\n    const header = \"What's New\"\r\n\r\n    const [showWhatsNew, setShowWhatsNew] = useState(false)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"panel-header hover-pointer\" onClick={() => setShowWhatsNew(true)}>{header}</div>\r\n            {showWhatsNew ? <WhatsNew onClose={() => setShowWhatsNew(false)} /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WhatsNewPanel","const defaultAbilities = {\r\n    \"mind-flay\": {\r\n        displayName: \"Mind Flay\",\r\n        index: 1,\r\n        keybind: {\r\n            key: \"1\",\r\n            keybindText: \"1\"\r\n        },\r\n        icon: \"images/mind-flay.jpg\"\r\n    },\r\n    \"mind-sear\": {\r\n        displayName: \"Mind Sear\",\r\n        index: 2,\r\n        keybind: {\r\n            key: \"2\",\r\n            keybindText: \"2\"\r\n        },\r\n        icon: \"images/mind-sear.jpg\"\r\n    },\r\n    \"mind-blast\": {\r\n        displayName: \"Mind Blast\",\r\n        index: 3,\r\n        keybind: {\r\n            key: \"3\",\r\n            keybindText: \"3\"\r\n        },\r\n        icon: \"images/mind-blast.jpg\"\r\n    },\r\n    \"void-bolt\": {\r\n        displayName: \"Void Bolt\",\r\n        index: 4,\r\n        keybind: {\r\n            key: \"4\",\r\n            keybindText: \"4\"\r\n        },\r\n        icon: \"images/void-bolt.jpg\"\r\n    },\r\n    \"void-eruption\": {\r\n        displayName: \"Void Eruption\",\r\n        index: 4,\r\n        keybind: {\r\n            key: \"4\",\r\n            keybindText: \"4\"\r\n        },\r\n        icon: \"images/void-eruption.jpg\"\r\n    },\r\n    \"shadow-word-death\": {\r\n        displayName: \"Shadow Word: Death\",\r\n        index: 5,\r\n        keybind: {\r\n            key: \"5\",\r\n            keybindText: \"5\"\r\n        },\r\n        icon: \"images/shadow-word-death.jpg\"\r\n    },\r\n    \"void-torrent\": {\r\n        displayName: \"Void Torrent\",\r\n        index: 6,\r\n        keybind: {\r\n            key: \"6\",\r\n            keybindText: \"6\"\r\n        },\r\n        icon: \"images/void-torrent.jpg\"\r\n    },\r\n    \"shadow-word-pain\": {\r\n        displayName: \"Shadow Word: Pain\",\r\n        index: 7,\r\n        keybind: {\r\n            key: \"7\",\r\n            keybindText: \"7\"\r\n        },\r\n        icon: \"images/shadow-word-pain.jpg\"\r\n    },\r\n    \"vampiric-touch\": {\r\n        displayName: \"Vampiric Touch\",\r\n        index: 8,\r\n        keybind: {\r\n            key: \"8\",\r\n            keybindText: \"8\"\r\n        },\r\n        icon: \"images/vampiric-touch.jpg\"\r\n    },\r\n    \"devouring-plague\": {\r\n        displayName: \"Devouring Plague\",\r\n        index: 9,\r\n        keybind: {\r\n            key: \"9\",\r\n            keybindText: \"9\"\r\n        },\r\n        icon: \"images/devouring-plague.jpg\"\r\n    },\r\n    \"shadowfiend\": {\r\n        displayName: \"Shadowfiend\",\r\n        index: 10,\r\n        keybind: {\r\n            key: \"0\",\r\n            keybindText: \"0\"\r\n        },\r\n        icon: \"images/shadowfiend.jpg\"\r\n    },\r\n    \"power-infusion\": {\r\n        displayName: \"Power Infusion\",\r\n        index: 11,\r\n        keybind: {\r\n            key: \"-\",\r\n            keybindText: \"-\"\r\n        },\r\n        icon: \"images/power-infusion.jpg\"\r\n    }\r\n}\r\n\r\nexport default defaultAbilities","import React from \"react\"\r\n\r\nconst FormTextAreaField = (props) => {\r\n\r\n    const {value, id, label, className, placeHolder, onChange} = props\r\n\r\n    const handleChange = (e) => onChange(id, e.target.value)\r\n\r\n    return (\r\n        <div className={`form-field ${className}`}>\r\n            <label htmlFor={id}>{label}</label>\r\n            <div>\r\n                <textarea className=\"panel-text-area form-input-container\" id={id} value={value} placeholder={placeHolder} required={true} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormTextAreaField","import React from \"react\"\r\n\r\nconst FormTextField = (props) => {\r\n\r\n    const {value, id, label, placeHolder, onChange, required} = props\r\n\r\n    const handleChange = (e) => onChange(id, e.target.value)\r\n\r\n    return (\r\n        <div className=\"form-text-field form-title form-input-container\">\r\n            <label className=\"form-input-title\" htmlFor={id}>{label}</label>\r\n            <input className=\"panel-text-area form-input\" type=\"text\" id={id} value={value} placeholder={placeHolder} required={required} onChange={handleChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormTextField","const email = window.Email\r\n\r\nconst formatBugReportContent = (body) => {\r\n    const appHeader = \"<h1>Bug Report for Voidform Optimizer</h1>\\n\"\r\n    const descriptionHeader = \"<h3>Give a brief description of the issue</h3>\"\r\n    //const reproductionHeader = \"### How can this issue be reproduced?\"\r\n    const expectedBehaviorHeader = \"<h3>What is the expected behavior?</h3>\"\r\n    const actualBehaviorHeader = \"<h3>What is the actual behavior?</h3>\"\r\n    const contactHeader = \"<h3>Contact Information</h3>\"\r\n\r\n    const headers = [descriptionHeader, expectedBehaviorHeader, actualBehaviorHeader, contactHeader]\r\n\r\n    const userContent = Object.keys(body).reduce((content, key, i) => {\r\n        if(!body[key]) return content\r\n        return content.concat([headers[i], body[key]])\r\n    }, []).join(\"\\n\")\r\n\r\n    return appHeader + userContent\r\n}\r\n\r\nconst sendBugReport = async (title, content) => {\r\n    const data = {\r\n        SecureToken: process.env.REACT_APP_SMTP_ACCESS_TOKEN,\r\n        From: process.env.REACT_APP_SENDER_GMAIL_USER,\r\n        To: process.env.REACT_APP_RECEIVER_GMAIL_USER,\r\n        Subject: title,\r\n        Body: content\r\n    }\r\n\r\n    const result = await email.send(data)\r\n\r\n    if(result !== \"OK\") throw new Error(result)\r\n}\r\n\r\nexport const submitBugReport = async (data, onSuccess, onFail) => {\r\n\r\n    const {title, ...body} = data\r\n\r\n    const content = formatBugReportContent(body)\r\n\r\n    try {\r\n        await sendBugReport(`[BUG] ${title}`, content)\r\n        onSuccess()\r\n    }\r\n    catch(err){\r\n        console.log(err)\r\n        onFail()\r\n    }\r\n}\r\n\r\nexport const createPendingTextTimer = (text, setText) => {\r\n    const dot = \".\"\r\n    let i = 1\r\n\r\n    setText(text)\r\n    \r\n    const timer = setInterval(() => {\r\n        const count = i % 4\r\n\r\n        setText(`${text}${dot.repeat(count)}`)\r\n\r\n        i++\r\n    }, 500);\r\n\r\n    return timer\r\n}\r\n","import React, {useState} from \"react\"\r\nimport Form from \"./Form\"\r\nimport FormTextAreaField from \"./FormTextAreaField\"\r\nimport FormTextField from \"./FormTextField\"\r\nimport {submitBugReport, createPendingTextTimer} from \"../../utils/bugreport\"\r\n\r\nconst fields = [{\r\n    id: \"bug-report-description\",\r\n    label: \"Description\",\r\n    className: \"form-field-small\"\r\n    // placeHolder: \"Enter a description of the bug...\"\r\n},\r\n{\r\n    id: \"bug-report-expected\",\r\n    label: \"Expected Behavior\",\r\n    className: \"form-field-medium\"\r\n    // placeHolder: \"Enter the expected behavior...\"\r\n},\r\n{\r\n    id: \"bug-report-actual\",\r\n    label: \"Actual Behavior\",\r\n    className: \"form-field-medium\"\r\n    // placeHolder: \"Enter the actual behavior...\"\r\n}]\r\n\r\nconst titleField = {\r\n    id: \"title\",\r\n    label: \"Title\"\r\n}\r\n\r\nconst contactField = {\r\n    id: \"contact\",\r\n    label: \"Contact (Optional)\"\r\n}\r\n\r\nconst formTitle = \"Bug Report\"\r\n\r\nconst submitPending = \"Submitting\"\r\nconst submitSuccess = \"Bug report successfully submitted!\"\r\nconst submitFail = \"Failed to submit bug report\"\r\n\r\nconst BugReport = (props) => {\r\n\r\n    const {closeForm} = props\r\n    const [data, setData] = useState({})\r\n    const [canSubmit, setCanSubmit] = useState(true)\r\n    const [submitMessage, setSubmitMessage] = useState(\"\")\r\n\r\n    const onChange = (id, value) => {\r\n        setData({...data, [id]: value})\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        const timer = createPendingTextTimer(submitPending, setSubmitMessage)\r\n\r\n        const onSuccess = () => {\r\n            clearInterval(timer)\r\n            setSubmitMessage(submitSuccess)\r\n        }\r\n        const onFail = () => {\r\n            clearInterval(timer)\r\n            setSubmitMessage(submitFail)\r\n        }\r\n\r\n        submitBugReport(data, onSuccess, onFail)\r\n        setCanSubmit(false)\r\n    }\r\n\r\n    return <div className=\"modal\">\r\n        <div className=\"modal-content panel\">\r\n            <div className=\"form-title\">\r\n                {formTitle}\r\n            </div>\r\n            <form className=\"form\" onSubmit={onSubmit}>\r\n                <FormTextField value={data.title} {...titleField} required={true} onChange={onChange} />\r\n                {fields.map(f => <FormTextAreaField key={f.id} value={data[f.id]} {...f} onChange={onChange} />)}\r\n                <FormTextField value={data.contact} {...contactField} required={false} onChange={onChange} />\r\n                <div>\r\n                    <input className=\"panel-button\" type=\"submit\" value=\"Submit\" disabled={!canSubmit} />\r\n                </div>\r\n            </form>\r\n            <div>\r\n                {submitMessage}\r\n            </div>\r\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default BugReport","import React, {useState} from \"react\"\r\nimport Form from \"./Form\"\r\nimport FormTextAreaField from \"./FormTextAreaField\"\r\nimport FormTextField from \"./FormTextField\"\r\n\r\nconst fields = []\r\n\r\nconst submitSuccess = \"Feature request successfully submitted!\"\r\nconst submitFail = \"Failed to submit feature request\"\r\n\r\nconst FeatureRequest = (props) => {\r\n\r\n    const {closeForm} = props\r\n\r\n    return <div className=\"modal\">\r\n        <div className=\"modal-content panel\">\r\n            Coming soon!\r\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default FeatureRequest","import React, {useState} from \"react\"\r\nimport BugReport from \"./BugReport\"\r\nimport FeatureRequest from \"./FeatureRequest\"\r\nimport \"./Form.css\"\r\nimport \"../panels/Panel.css\"\r\nimport \"../panels/SettingOption.css\"\r\n\r\nconst Forms = (props) => {\r\n\r\n    const {pauseKeyEvents} = props\r\n\r\n    const [showBugReport, setShowBugReport] = useState(false)\r\n    const [showFeatureRequest, setShowFeatureRequest] = useState(false)\r\n\r\n    const handleFormClick = (setShow, show) => {\r\n        pauseKeyEvents(show)\r\n        setShow(show)\r\n    }\r\n\r\n    return (\r\n        <div className=\"forms-container\">\r\n            <div>\r\n                <button className=\"panel-button\" onClick={() => handleFormClick(setShowBugReport, true)}>Report a Bug</button>\r\n                <button className=\"panel-button\" onClick={() => handleFormClick(setShowFeatureRequest, true)}>Request a Feature</button>\r\n            </div>\r\n                {showBugReport ? <BugReport closeForm={() => handleFormClick(setShowBugReport, false)} /> : null} \r\n                {showFeatureRequest ? <FeatureRequest closeForm={() => handleFormClick(setShowFeatureRequest, false)} /> : null} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Forms","import React, {useState, useEffect, useReducer} from 'react';\r\nimport './App.css';\r\nimport ResourceBar from \"./components/ResourceBar\"\r\nimport AbilityBar from \"./components/AbilityBar\"\r\nimport AuraBar from \"./components/auras/AuraBar\"\r\nimport ExportPanel from \"./components/panels/ExportPanel\"\r\nimport SettingsPanel from \"./components/panels/SettingsPanel\"\r\nimport AbilityKeybindsPanel from \"./components/panels/AbilityKeybindsPanel\"\r\nimport AboutPanel from \"./components/panels/AboutPanel\"\r\nimport WhatsNewPanel from \"./components/panels/WhatsNewPanel\"\r\nimport defaultAbilities from \"./lib/abilities\"\r\nimport defaultAbilitySettings from \"./lib/abilitySettings\"\r\nimport defaultAuraSettings from \"./lib/auraSettings\"\r\nimport Forms from \"./components/forms/Forms\"\r\n\r\nconst defaultState = {\r\n  resource: 0,\r\n  auras: {\r\n    stats: {\r\n      haste: 0\r\n    },\r\n    voidform: {\r\n      active: false,\r\n      stacks: 0,\r\n      haste: 0,\r\n      paused: false,\r\n    },\r\n    lingeringInsanity: {\r\n      active: false,\r\n      stacks: 0,\r\n      haste: 0\r\n    },\r\n    \"shadow-word-pain\": {\r\n      active: false\r\n    },\r\n    \"vampiric-touch\": {\r\n      active: false\r\n    },\r\n    \"devouring-plague\": {\r\n      active: false\r\n    },\r\n    \"shadowfiend\": {\r\n      active: false\r\n    },\r\n    \"power-infusion\": {\r\n      active: false,\r\n      haste: 0\r\n    }\r\n  },\r\n  abilities: {\r\n    \"void-eruption\": {\r\n      unusable: true\r\n    },\r\n    \"devouring-plague\": {\r\n      unusable: true\r\n    },\r\n    \"void-torrent\": {\r\n      unusable: defaultAbilitySettings[\"void-torrent\"].requireVoidform\r\n    }\r\n  }\r\n}\r\n\r\nconst App = () => {\r\n\r\n  const [panel, setPanel] = useState()\r\n  const [abilitySettings, setAbilitySettings] = useState(defaultAbilitySettings)\r\n  const [abilities, setAbilities] = useState(defaultAbilities)\r\n  const [auraSettings, setAuraSettings] = useState(defaultAuraSettings)\r\n  const [keyEventsPaused, setKeyEventsPaused] = useState(false)\r\n  const [reset, setReset] = useState(false)\r\n  const [abilityReset, setAbilityReset] = useState(false)\r\n  const [haste, setHaste] = useState(0)\r\n\r\n  const handleAuraPandemic = (aura, baseDuration, now) => {\r\n    const endTime = aura.startTime + aura.maxDuration\r\n    const remaining = endTime - now\r\n    const pandemicDuration = Math.min(.3 * baseDuration, remaining)\r\n\r\n    aura.maxDuration = baseDuration + pandemicDuration\r\n    aura.startTime = now\r\n  }\r\n\r\n  const [state, updateState] = useReducer((state, action) => {\r\n\r\n    let event = action.type\r\n    let newState = JSON.parse(JSON.stringify(state))\r\n\r\n    const voidform = newState.auras.voidform\r\n    const lingeringInsanity = newState.auras.lingeringInsanity\r\n    const powerInfusion = newState.auras[\"power-infusion\"]\r\n\r\n    switch(event) {\r\n      case \"RESET\":\r\n        return defaultState\r\n      case \"RESET_ABILITIES\":\r\n        return {...defaultState, auras: state.auras}\r\n      case \"RESET_AURAS\":\r\n        return {...newState, auras: {...defaultState.auras, stats: state.auras.stats} }\r\n      case \"UPDATE_ABILITY_STATE\":\r\n        newState.abilities[\"void-torrent\"].unusable = abilitySettings[\"void-torrent\"].requireVoidform\r\n        break\r\n      case \"HASTE_SET\":\r\n        var {source, haste} = action.payload\r\n        newState.auras[source].haste = haste\r\n        break\r\n      case \"HASTE_UPDATE\":\r\n        var {source, haste} = action.payload\r\n        newState.auras[source].haste += haste\r\n        break\r\n      case \"HASTE_RESET\":\r\n        var {source} = action.payload\r\n        newState.auras[source].haste = 0\r\n        break\r\n      case \"VOIDFORM_UPDATE\":\r\n        voidform.stacks++\r\n        voidform.haste += action.payload\r\n        break;\r\n      case \"VOIDFORM_START\":\r\n        voidform.active = true\r\n        voidform.stacks = 1\r\n        var voidTorrent = abilitySettings[\"void-torrent\"]\r\n        if(voidTorrent.requireVoidform)\r\n          newState.abilities[\"void-torrent\"].unusable = false\r\n        break;\r\n      case \"VOIDFORM_END\":\r\n        var {time, startingHaste} = action.payload\r\n        lingeringInsanity.active = true\r\n        lingeringInsanity.stacks = voidform.stacks\r\n        lingeringInsanity.haste = Math.round((voidform.haste - startingHaste)*1000)/1000\r\n        lingeringInsanity.startTime = time\r\n        voidform.stacks = 0\r\n        voidform.haste = 0\r\n        newState.abilities[\"void-eruption\"].unusable = true\r\n        newState.abilities[\"void-torrent\"].unusable = abilitySettings[\"void-torrent\"].requireVoidform\r\n        break;\r\n      case \"LINGERING_INSANITY_START\":\r\n        var {haste, stacks} = action.payload\r\n        lingeringInsanity.haste = haste\r\n        lingeringInsanity.stacks = stacks\r\n        break;\r\n      case \"LINGERING_INSANITY_UPDATE\":\r\n        lingeringInsanity.haste += action.payload\r\n        lingeringInsanity.stacks--\r\n        if(lingeringInsanity.haste <= 0) lingeringInsanity.haste = 0\r\n        break;\r\n      case \"LINGERING_INSANITY_END\":\r\n        lingeringInsanity.active = false\r\n        lingeringInsanity.stacks = 0\r\n        lingeringInsanity.haste = 0\r\n        lingeringInsanity.startTime = 0\r\n        break;\r\n      case \"RESOURCE_UPDATE\":\r\n        var {name, resource, costsResource} = action.payload\r\n        let targetCount = name === \"mind-sear\" ? abilitySettings[name].targetCount : 1\r\n\r\n        resource = (resource * (costsResource && -1 || 1)) * targetCount\r\n\r\n        if(powerInfusion.active && resource > 0)\r\n          resource += (resource * auraSettings[\"power-infusion\"].resourceGen)\r\n\r\n        resource = Math.max(Math.min(newState.resource + resource, 100), 0)\r\n        newState.resource = resource\r\n        if(resource <= 0 && voidform.active) {\r\n          voidform.active = false\r\n        }\r\n        //whenever we get resource need to calculate if an ability is usable or not\r\n        Object.keys(abilitySettings).forEach(k => {\r\n          const ability = abilitySettings[k]\r\n          if(!ability.costsResource) return\r\n          newState.abilities[k].unusable = resource < ability.resource\r\n        })\r\n        break;\r\n      case \"INSANITY_DRAIN_PAUSE_START\":\r\n        voidform.paused = true\r\n        break\r\n      case \"INSANITY_DRAIN_PAUSE_END\":\r\n        voidform.paused = false\r\n        break\r\n      case \"AURA_START\":\r\n        var {name, time} = action.payload\r\n        var aura = newState.auras[name]\r\n\r\n        aura.active ? handleAuraPandemic(aura, auraSettings[name].baseDuration, time) : aura.active = true\r\n        break\r\n      case \"AURA_BEGIN\":\r\n        var {name, time, duration} = action.payload\r\n        newState.auras[name].startTime = time\r\n        newState.auras[name].maxDuration = duration\r\n        break\r\n      case \"AURA_REFRESH\":\r\n        var {name, time} = action.payload\r\n        newState.auras[name].startTime = time\r\n        break\r\n      case \"AURA_END\":\r\n        var {name} = action.payload\r\n        newState.auras[name].active = false\r\n        newState.auras[name].startTime = 0\r\n        break\r\n      case \"DOT_EXTEND\":\r\n        const extension = abilitySettings[\"void-bolt\"].extension\r\n        const dots = [\"shadow-word-pain\", \"vampiric-touch\"]\r\n        dots.forEach(d => {\r\n          const dot = newState.auras[d]\r\n          if(!dot.active) return\r\n          dot.maxDuration += extension\r\n        })\r\n        break\r\n    }\r\n\r\n    return newState\r\n  }, defaultState)\r\n\r\n  useEffect(() => {\r\n    setHaste(calculateHaste)\r\n  }, [state.auras.stats.haste,\r\n    state.auras.voidform.haste,\r\n    state.auras.lingeringInsanity.haste,\r\n    state.auras[\"power-infusion\"].haste])\r\n\r\n  const enterVoidform = () => {\r\n    updateState({\r\n      type: \"VOIDFORM_START\"\r\n    })\r\n  }\r\n\r\n  const gainInsanity = () => {\r\n    updateState({\r\n      type: \"RESOURCE_UPDATE\",\r\n      payload: {\r\n        resource: 10\r\n      }\r\n    })\r\n  }\r\n\r\n  const calculateHaste = () => {\r\n    const auras = state.auras\r\n    return Object.keys(auras).reduce((haste, aura) => {\r\n      if(!auras[aura].haste) return haste\r\n      return haste * (1+auras[aura].haste)\r\n    }, 1)\r\n  }\r\n\r\n  const handlePanelHeaderClick = (panel) => {\r\n    setKeyEventsPaused(true)\r\n    setPanel(panel)\r\n  }\r\n\r\n  const handlePanelClose = () => {\r\n    setKeyEventsPaused(false)\r\n    setPanel(null)\r\n  }\r\n\r\n  const handleAbilityToggle = (ability) => {\r\n    let newSettings = JSON.parse(JSON.stringify(abilities))\r\n\r\n    newSettings[ability].disabled = !newSettings[ability].disabled\r\n    if(ability === \"void-bolt\") newSettings[\"void-eruption\"].disabled = newSettings[ability].disabled\r\n\r\n    setAbilities(newSettings)\r\n  }\r\n\r\n  const setKeyBind = (keybind, ability) => {\r\n    let state = JSON.parse(JSON.stringify(abilities))\r\n    let key = keybind.key\r\n    let voidBoltOrEruption = ability === \"void-bolt\" || ability === \"void-eruption\"\r\n    Object.keys(state).forEach(k => {\r\n      let abilityKeybind = state[k].keybind\r\n      if(abilityKeybind.key === key) state[k].keybind = { keybindText: \"--\"}\r\n    })\r\n    if(voidBoltOrEruption) {\r\n      state[\"void-bolt\"].keybind = {...keybind}\r\n      state[\"void-eruption\"].keybind = {...keybind}\r\n    }\r\n    else {\r\n      state[ability].keybind = {...keybind}\r\n    }\r\n\r\n    setAbilities(state)\r\n  }\r\n\r\n  const setAbilityOrder = (index, name) => {\r\n    const state = JSON.parse(JSON.stringify(abilities))\r\n    const ability = state[name]\r\n    const abilityIndex = ability.index\r\n    const shift = index < abilityIndex ? \"right\" : \"left\"\r\n\r\n    let voidBoltOrEruption = name === \"void-bolt\" || name === \"void-eruption\"\r\n\r\n    Object.keys(state).forEach(k => {\r\n      const currentIndex = state[k].index\r\n\r\n      if(shift === \"right\" && (currentIndex >= index && currentIndex < abilityIndex)) state[k].index++\r\n      if(shift === \"left\" && (currentIndex <= index && currentIndex > abilityIndex)) state[k].index--\r\n    })\r\n    \r\n    if(voidBoltOrEruption) {\r\n      state[\"void-bolt\"].index = index\r\n      state[\"void-eruption\"].index = index\r\n    }\r\n    else {\r\n      ability.index = index\r\n    }\r\n\r\n    setAbilities(state)\r\n  }\r\n\r\n  const handleImport = (settings) => {\r\n    setAllAbilities(settings.abilityConfig)\r\n    handleAbilitySet(settings.abilitySettings)\r\n    handleAuraSet(settings.auraSettings)\r\n    handleReset()\r\n  }\r\n\r\n  const setAllAbilities = (importedAbilities) => {\r\n    let state = Object.keys(abilities).reduce((state, ability) => {\r\n      state[ability] = {...abilities[ability], ...importedAbilities[ability]}\r\n      return state\r\n    }, {})\r\n\r\n    setAbilities(state)\r\n  }\r\n\r\n  const mergeAbilities = () => {\r\n    return Object.keys(abilities).reduce((merged, a) => {\r\n      merged[a] = {...abilities[a], ...state.abilities[a]}\r\n      return merged\r\n    }, {})\r\n  }\r\n\r\n  const abilitySettingsWithDisplayName = () => {\r\n    return Object.keys(abilitySettings).reduce((merged, a) => {\r\n      merged[a] = {...abilitySettings[a], displayName: defaultAbilities[a].displayName}\r\n      return merged\r\n    }, {}) \r\n  }\r\n\r\n  const handleAuraSet = (auraSettings) => {\r\n    setAuraSettings(auraSettings)\r\n    handleAuraReset()\r\n    const haste = auraSettings.stats.haste\r\n    updateState({\r\n      type: \"HASTE_SET\",\r\n      payload: {\r\n        source: \"stats\",\r\n        haste\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleAbilitySet = (abilitySettings) => {\r\n    setAbilitySettings(abilitySettings)\r\n    handleAbilityReset()\r\n  }\r\n\r\n  const handleAbilityReset = () => {\r\n    updateState({\r\n      type: \"RESET_ABILITIES\"\r\n    })\r\n    updateState({\r\n      type: \"RESOURCE_UPDATE\",\r\n      payload: {\r\n        resource: 0\r\n      }\r\n    })\r\n    updateState({\r\n      type: \"UPDATE_ABILITY_STATE\"\r\n    })\r\n    setAbilityReset(!abilityReset)\r\n  }\r\n\r\n  const handleAuraReset = () => {\r\n    updateState({\r\n      type: \"RESET_AURAS\"\r\n    })\r\n\r\n    setTimeout(() => {\r\n      updateState({\r\n        type: \"LINGERING_INSANITY_END\"\r\n      })\r\n    }, 0)\r\n  }\r\n\r\n  const handleReset = () => {\r\n    handleAuraReset()\r\n    handleAbilityReset()\r\n    setReset(!reset)\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header header-panel\">\r\n        <div className=\"App-title\">\r\n          <div className=\"App-title-text\">\r\n            Voidform Optimizer\r\n          </div>\r\n        </div>\r\n        <div className=\"panel-container\">\r\n          <SettingsPanel settings={{abilities: abilitySettingsWithDisplayName(), auras: auraSettings}} didReset={reset} onAbilitySet={handleAbilitySet} onAuraSet={handleAuraSet} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n          <AbilityKeybindsPanel abilities={abilities} currentPanel={panel} onKeybind={setKeyBind} setOrder={setAbilityOrder} onToggle={handleAbilityToggle} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n          <ExportPanel settings={{abilitySettings, auraSettings, abilities}} onImport={handleImport} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose}/>\r\n          <AboutPanel currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n          <WhatsNewPanel />\r\n        </div>\r\n        <Forms pauseKeyEvents={setKeyEventsPaused} />\r\n      </header>\r\n      <div className=\"App-content\">\r\n        <AuraBar auras={state.auras} settings={auraSettings} haste={haste} triggerEvent={updateState} />\r\n        <ResourceBar current={state.resource} max={100}/>\r\n        <AbilityBar abilitySettings={abilitySettings} abilities={mergeAbilities()} haste={haste} inVoidform={state.auras.voidform.active} triggerEvent={updateState} keyEventsPaused={keyEventsPaused} reset={abilityReset} />\r\n        <button className=\"panel-button\" onClick={handleReset}>Reset</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport dotenv from \"dotenv\"\r\n\r\ndotenv.config()\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}