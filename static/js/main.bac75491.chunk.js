(this["webpackJsonpvoidform-optimizer"]=this["webpackJsonpvoidform-optimizer"]||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},35:function(e,t,a){e.exports=a(88)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},6:function(e,t,a){},85:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),i=a.n(o),c=(a(40),a(2)),s=a(1),l=(a(41),a(42),function(e){var t=e.max,a=e.current;e.voidform;return r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-text"},(a/t*100).toFixed(0)),r.a.createElement("div",{className:"progress-bar resource-bar",style:{width:"".concat((a/t*100).toFixed(2),"%")}}))}),u=a(34),d=(a(43),a(44),function(e){var t=e.size,a=e.progress,n=e.inverse,o=2*t,i=2*t-o/2,c=2*i*Math.PI;return r.a.createElement("svg",{width:t,height:t},r.a.createElement("circle",{fill:"transparent",strokeWidth:o,strokeOpacity:.7,strokeDasharray:c+" "+c,strokeDashoffset:n?(a?0:c)+(a||0)*c:c+(a||0)*c,stroke:"rgb(0,0,0)",cx:t/2,cy:t/2,r:i}))}),m=a(17),p=a(16),b=a(7),h=a(8),f={CAST:["ABILITY_CAST_SUCCESS","ABILITY_COOLDOWN_START","ABILITY_COOLDOWN_END","ABILITY_CAST_START","ABILITY_CHANNEL_START","ABILITY_CHANNEL_UPDATE","ABILITY_CHANNEL_END"],RESOURCE:["RESOURCE_UPDATE","INSANITY_DRAIN_PAUSE_START","INSANITY_DRAIN_PAUSE_END"],AURA:["VOIDFORM_START","VOIDFORM_UPDATE","VOIDFORM_END","LINGERING_INSANITY_START","LINGERING_INSANITY_UPDATE","LINGERING_INSANITY_END","AURA_START","AURA_END","DOT_EXTEND"],STAT:["HASTE_UPDATE"]},v={"void-bolt":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE","DOT_EXTEND"]}},"mind-flay":{onEvent:{COOLDOWN_START:[],COOLDOWN_END:[],CHANNEL_START:["ABILITY_CHANNEL_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END"]}},"void-eruption":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","VOIDFORM_START"]}},"mind-blast":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"],COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"]}},"shadow-word-death":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","RESOURCE_UPDATE"]}},"void-torrent":{onEvent:{COOLDOWN_START:["ABILITY_COOLDOWN_START"],COOLDOWN_END:["ABILITY_COOLDOWN_END"],CHANNEL_START:["ABILITY_CHANNEL_START","INSANITY_DRAIN_PAUSE_START"],CHANNEL_UPDATE:["RESOURCE_UPDATE"],CHANNEL_END:["ABILITY_CHANNEL_END","INSANITY_DRAIN_PAUSE_END"]}},"shadow-word-pain":{onEvent:{CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}},"vampiric-touch":{onEvent:{CAST_START:["ABILITY_CAST_START"],CAST_SUCCESS:["ABILITY_CAST_SUCCESS","AURA_START","RESOURCE_UPDATE"]}}},y=function(){function e(t,a){Object(b.a)(this,e),this.eventTriggers=t,this.events=a}return Object(h.a)(e,[{key:"handleEvent",value:function(e,t){var a=this;this.events[e]&&this.events[e].forEach((function(e){return a.eventTriggers[e]({type:e,payload:t})}))}}]),e}(),E={"!":"S-1","@":"S-2","#":"S-3",$:"S-4","%":"S-5","^":"S-6","&":"S-7","*":"S-8","(":"S-9",")":"S-0"},g=function(){function e(t,a,n,r){Object(b.a)(this,e),this.state=t,this.updateState=a,this.onExecute=n,this.eventHandler=r,this.updateState({progress:0,charges:t.charges.maxCharges||1})}return Object(h.a)(e,[{key:"getCurrentState",value:function(){var e={},t=this.state;return Object.keys(t).forEach((function(a){var n=t[a];if("object"===typeof n){var r={};Object.keys(n).forEach((function(e){var t=n[e];"undefined"!==t&&(r[e]="object"!==typeof t?t:t.current)})),e[a]=r}else e[a]=n})),e}},{key:"startCooldown",value:function(){var e=this,t=this.getCurrentState(),a=t.name,n=t.charges.maxCharges;this.cooldownTimer=setInterval((function(){var t=Date.now(),r=e.state.cooldown.duration.current,o=e.state.cooldown.startTime.current||t,i=e.state.charges.current.current,s=o+r-t;if(s<=70)return e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:i+1})})),clearInterval(e.cooldownTimer),n&&i<n-1?void e.startCooldown():(e.eventHandler.handleEvent("COOLDOWN_END",{name:a}),void e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:0})})));e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:s/r})}))}),20),this.eventHandler.handleEvent("COOLDOWN_START",{name:a,time:Date.now()})}},{key:"startCast",value:function(){var e=this,t=this.getCurrentState(),a=t.name,n=t.displayName,r=t.resource,o=t.cast.duration;this.castTimer=setTimeout((function(){console.log("Cast success!"),e.eventHandler.handleEvent("CAST_SUCCESS",{name:a,resource:r,time:Date.now()});var t=e.state.cooldown.duration.current,n=e.state.cooldown.startTime.current,o=e.state.charges.current.current;if(t){if(e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:o-1})})),n)return;e.startCooldown()}}),o),this.eventHandler.handleEvent("CAST_START",{name:a,displayName:n,duration:o,time:Date.now()})}},{key:"startChannel",value:function(){var e=this,t=this.getCurrentState(),a=t.cast,n=a.startTime,r=a.endTime,o=a.duration,i=t.channel,c=i.baseDuration,s=i.ticks,l=t.name,u=t.displayName,d=t.resource,m=Date.now(),p=0,b=s;if(n){clearInterval(this.channelTimer);var h=r-n-(m-n),f=c/b;p=Math.min(h,.3*c),b+=Math.floor(p/f)}var v=Math.round((o+p)/b);this.channelTimer=setInterval((function(){var t=Date.now(),a=e.state.cast.endTime.current;return a?(e.eventHandler.handleEvent("CHANNEL_UPDATE",{resource:d/s}),t>=a?(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:l})):void 0):(clearInterval(e.channelTimer),void e.eventHandler.handleEvent("CHANNEL_END",{name:l}))}),v),this.eventHandler.handleEvent("CHANNEL_START",{name:l,displayName:u,duration:o+p,time:m,baseChannelTime:o})}},{key:"beginGlobalCooldown",value:function(){var e=this,t=this.getCurrentState(),a=t.globalCooldown,n=a.duration,r=a.startTime;if(t.cooldown.startTime&&t.cooldown.startTime+t.cooldown.duration-r>n)return;this.globalCooldownTimer=setInterval((function(){var t=Date.now(),a=r+n-t;a<=20?clearInterval(e.globalCooldownTimer):e.state.cooldown.startTime.current||e.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{progress:a/n})}))}),20)}},{key:"remove",value:function(){clearInterval(this.cooldownTimer),clearInterval(this.globalCooldownTimer),clearInterval(this.channelTimer),clearTimeout(this.castTimer)}}],[{key:"create",value:function(e,t,a,n,r){var o=function(e,t){var a={};return t.forEach((function(e){e.eventTypes.forEach((function(t){f[t].forEach((function(t){return a[t]=e.trigger}))}))})),new y(a,v[e].onEvent)}(t.name,r);switch(e){case"instant":return new T(t,a,n,o);case"cast":return new O(t,a,n,o);case"channel":return new N(t,a,n,o)}}}]),e}(),T=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"execute",value:function(){if(!this.state.globalCooldown.duration.current&&!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=e.name,a=e.resource,n=e.cooldown.startTime,r=e.charges,o=r.maxCharges,i=r.current;n&&0===i||(this.updateState((function(e){return Object(c.a)(Object(c.a)({},e),{},{charges:i-1})})),this.eventHandler.handleEvent("CAST_SUCCESS",{name:t,resource:a,time:Date.now()}),this.onExecute(),o&&i<o||this.startCooldown())}}}]),a}(g),O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"execute",value:function(){if(!this.state.globalCooldown.duration.current&&!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState(),t=e.cast.startTime,a=e.charges.current;t||0===a||(this.startCast(),this.onExecute())}}}]),a}(g),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"execute",value:function(){if(!this.state.globalCooldown.duration.current&&!this.state.unusable&&!this.state.cast.casting.current){var e=this.getCurrentState().cooldown,t=e.duration;e.startTime||(this.startChannel(),t&&this.startCooldown(),this.onExecute())}}}]),a}(g),S=g,k=function(e){var t=e.name,a=e.displayName,o=e.settings,i=e.cooldown,c=e.globalCooldown,l=e.globalCooldownStartTime,u=e.unusable,m=e.startTime,p=e.casttime,b=e.castStartTime,h=e.castEndTime,f=e.icon,v=e.baseChannelTime,y=e.keybind,E=e.casting,g=e.subscribe,T=e.unsubscribe,O=e.onExecute,N=e.onAbilityUpdate,k=e.triggerEvent,C=e.reset,A=Object(n.useState)({}),w=Object(s.a)(A,2),I=w[0],j=w[1],_=y.key,R=y.keybindText,D=o.type,x=o.resource,L=o.charges,U=o.ticks,P=Object(n.useRef)(m),B=Object(n.useRef)(i);P.current=m,B.current=i;var H=Object(n.useRef)(b),Y=Object(n.useRef)(h),V=Object(n.useRef)(p),F=Object(n.useRef)(E);H.current=b,Y.current=h,V.current=p,F.current=E;var M=Object(n.useRef)(v);M.current=v;var W=Object(n.useRef)(L||1);W.current=I.charges;var G=Object(n.useRef)(c),z=Object(n.useRef)(l);G.current=c,z.current=l;var J=Object(n.useRef)();return Object(n.useEffect)((function(){var e=[{eventTypes:["CAST"],trigger:N},{eventTypes:["RESOURCE","AURA","STAT"],trigger:k}],n={name:t,displayName:a,resource:x,unusable:u,cooldown:{duration:B,startTime:P},cast:{duration:V,startTime:H,endTime:Y,casting:F},channel:{baseDuration:M,ticks:U},charges:{maxCharges:L,current:W},globalCooldown:{duration:G,startTime:z}};return J.current=S.create(D,n,j,O,e),console.log("Inside ability use effect"),console.log(t),console.log(_),g({source:t,keybind:_,notify:function(){return J.current.beginGlobalCooldown()},execute:function(){return J.current.execute()}}),function(){J.current.remove(),T(t)}}),[u,_,C]),r.a.createElement("div",{className:"progress-ability-container"},r.a.createElement("div",{className:"progress-ability",onClick:function(){return J.current.execute()}},r.a.createElement("img",{className:u||!(I.charges>0&&L)&&P.current?"desaturated":"colored",src:f,width:50,height:50}),r.a.createElement("div",{className:"charge-text"},L>1?I.charges:""),P.current||G.current?r.a.createElement(d,{size:50,progress:I.progress}):null),r.a.createElement("div",null,R))},C=function(e){var t=e.duration,a=e.triggerEvent;return Object(n.useEffect)((function(){setTimeout((function(){a({type:"GLOBAL_COOLDOWN_END"})}),t)}),[]),null},A=(a(45),function(e){var t=e.time,a=e.name,o=e.displayName,i=e.duration,c=e.direction,l=Object(n.useState)(0),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(n.useRef)(t),b=Object(n.useRef)(t);return p.current=t,b.current=i,Object(n.useEffect)((function(){var e=setInterval((function(){var e=Date.now();m((function(t){return e-p.current}))}),50);return function(){clearInterval(e),m((function(e){return 0}))}}),[a]),r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"cast-bar-text-container"},r.a.createElement("div",{className:"progress-text cast-bar-text"},o),r.a.createElement("div",{className:"progress-text cast-bar-text"},c?"".concat((d/1e3).toFixed(1),"/").concat((i/1e3).toFixed(1)):"".concat(((b.current-d)/1e3).toFixed(1),"/").concat((b.current/1e3).toFixed(1)),"sec")),r.a.createElement("div",{className:"progress-bar cast-bar",style:{width:"".concat(c?(d/b.current*100).toFixed(2):((b.current-d)/b.current*100).toFixed(2),"%")}}))}),w=(a(46),function(e){var t=e.abilitySettings,a=e.abilities,o=e.haste,i=e.inVoidform,c=e.triggerEvent,l=e.keyEventsPaused,d=e.reset,m=Object(n.useRef)(o);m.current=o;var p=Object(n.useRef)(i);p.current=i;var b=Object(n.useState)([]),h=Object(s.a)(b,2),f=h[0],v=h[1],y=Object(n.useState)(!1),E=Object(s.a)(y,2),g=E[0],T=E[1],O=Object(n.useRef)(f);O.current=f;var N={globalCooldown:0,cooldowns:function(){var e={};return Object.keys(a).forEach((function(a){t[a]&&t[a].disabled||(e[a]={startTime:0})})),e}()};Object(n.useEffect)((function(){j({type:"RESET"})}),[d]),Object(n.useEffect)((function(){return document.addEventListener("keypress",R),function(){document.removeEventListener("keypress",R)}}),[l]);var S=Object(n.useReducer)((function(e,a){var n=JSON.parse(JSON.stringify(e)),r=a.payload;switch(a.type){case"RESET":return N;case"ABILITY_CAST_SUCCESS":var o=r.name;if(t["void-bolt"].rankTwo&&n.casting&&"void-bolt"===o&&"mind-flay"===n.casting.name)break;n.cooldowns[o].castStartTime=0,n.cooldowns[o].castEndTime=0,n.casting&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0,delete n.casting);break;case"ABILITY_COOLDOWN_START":o=r.name;var i=r.time;n.cooldowns[o].startTime=i;break;case"ABILITY_COOLDOWN_END":o=r.name;n.cooldowns[o].startTime=0;break;case"ABILITY_CAST_START":o=r.name;var c=r.displayName,s=(i=r.time,r.duration);n.cooldowns[o].castStartTime=i,n.cooldowns[o].castEndTime=i+s,n.casting&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0),n.casting={duration:s,name:o,displayName:c,direction:1,time:i};break;case"ABILITY_CHANNEL_START":o=r.name,c=r.displayName,i=r.time,s=r.duration;var l=r.baseChannelTime;n.cooldowns[o].castStartTime=i,n.cooldowns[o].castEndTime=i+s,n.cooldowns[o].baseChannelTime=l,n.casting&&o!==n.casting.name&&(n.cooldowns[n.casting.name].castStartTime=0,n.cooldowns[n.casting.name].castEndTime=0),n.casting={duration:s,name:o,displayName:c,direction:0,time:i};break;case"ABILITY_CHANNEL_UPDATE":o=r.name;n.cooldowns[o].ticks--;break;case"ABILITY_CHANNEL_END":o=r.name;n.cooldowns[o].castStartTime=0,n.cooldowns[o].castEndTime=0,n.cooldowns[o].ticks=0,n.casting&&o===n.casting.name&&delete n.casting;break;case"GLOBAL_COOLDOWN_START":n.globalCooldown=r.gcd,n.globalCooldownStartTime=r.time;break;case"GLOBAL_COOLDOWN_END":n.globalCooldown=0,n.globalCooldownStartTime=0;break;default:console.error("Invalid action provided: ".concat(a.type))}return n}),N),w=Object(s.a)(S,2),I=w[0],j=w[1],_=Object(n.useRef)(I.globalCooldown);_.current=I.globalCooldown;var R=function(e){l||_.current||O.current.forEach((function(t){t.keybind===e.key&&t.execute()}))},D=function(e){return e/m.current},x=function(){var e=Math.max(D(1500),750);j({type:"GLOBAL_COOLDOWN_START",payload:{gcd:e,time:Date.now()}}),setTimeout((function(){O.current.forEach((function(e){return e.notify()}))}),0)},L=function(e){v((function(t){return[].concat(Object(u.a)(t),[e])}))},U=function(e){v((function(t){return t.filter((function(t){return t.source!==e}))}))},P=function(e){var a=t[e],n=a.cooldown;if(p.current&&"mind-blast"===e){var r=a.cdr;if(!g){T(!0);var o=Date.now(),i=I.cooldowns[e].startTime;r*=(i?o-i:n)/n}n-=r}return!p.current&&g&&T(!1),a.hasted?D(n):n};return r.a.createElement("div",{className:"ability-bar-container"},I.casting?r.a.createElement(A,I.casting):null,r.a.createElement("div",{className:"ability-bar"},Object.keys(a).map((function(e,n){if(!a[e].disabled&&("void-bolt"!==e||p.current)&&("void-eruption"!==e||!p.current))return r.a.createElement(k,Object.assign({name:e,key:n},a[e],I.cooldowns[e],{settings:t[e],cooldown:P(e),globalCooldown:I.globalCooldown,globalCooldownStartTime:I.globalCooldownStartTime,casttime:D(t[e].casttime),casting:!!(I.casting&&I.casting.time&&I.casting.direction),subscribe:L,unsubscribe:U,onExecute:x,onAbilityUpdate:j,triggerEvent:c,reset:d}))}))),I.globalCooldown?r.a.createElement(C,{duration:I.globalCooldown,triggerEvent:j}):null)}),I=a(9),j=(a(47),function(e){var t=e.icon,a=(e.displayName,e.duration),n=e.maxDuration,o=e.stacks,i=a&&(n-a)/n;return r.a.createElement("div",{className:"aura"},r.a.createElement("img",{src:t,width:30,height:30}),r.a.createElement("div",{className:"aura-text"},o>0?o:""),a?r.a.createElement(d,{size:30,progress:i,inverse:!0}):null,e.children)}),_=function(e){var t=e.type,a=e.startTime,o=e.haste,i=e.stacks,c=e.inVoidform,l=e.triggerEvent,u=Object(I.a)(e,["type","startTime","haste","stacks","inVoidform","triggerEvent"]),d=Object(n.useState)(6e4),m=Object(s.a)(d,2),p=m[0],b=m[1],h=Object(n.useState)(0),f=Object(s.a)(h,2),v=f[0],y=f[1],E=Object(n.useRef)(i);E.current=i;var g=Object(n.useRef)(c);g.current=c;var T=Object(n.useRef)(a);T.current=a;var O=Object(n.useRef)(o);O.current=o;var N=function(e,t,a,n){var r=e?6e4:n;return b((function(e){return r})),l({type:"LINGERING_INSANITY_START",payload:{haste:O.current*t,stacks:a}}),{currentMaxDuration:r,voidformEntered:!1}},S=function(e,t){return Math.ceil(e/t)};return Object(n.useEffect)((function(){var e;switch(t){case"static":e=function(){var e=u.duration,t=u.afterVoidformEntry,a=u.hasteRetention,n=N(t,a,E.current,e),r=setInterval((function(){var o=Date.now();if(console.log("here"),!n.voidformEntered||g.current)return console.log("Start time: "+T.current),o>=T.current+n.currentMaxDuration?(clearInterval(r),void l({type:"LINGERING_INSANITY_END"})):!n.voidformEntered&&g.current&&(n.voidformEntered=!0,t)?(l({type:"AURA_REFRESH",payload:{name:"lingeringInsanity",time:o}}),b((function(t){return e})),n.currentMaxDuration=e,void y((function(e){return 0}))):void y((function(e){return o-T.current}));n=N(t,a,E.current,e)}),100);return r}();break;case"decay":e=function(){var e=u.decayRate,t=u.hasteDecay,a=0,n=N(!0,1,S(O.current,t)),r=setInterval((function(){a+=100;var o=Date.now();return n.voidformEntered&&!g.current?(n=N(!0,1,S(O.current,t)),void(a=0)):E.current<=0?(clearInterval(r),void l({type:"LINGERING_INSANITY_END"})):(a%e===0&&l({type:"LINGERING_INSANITY_UPDATE",payload:-1*t}),!n.voidformEntered&&g.current&&(n.voidformEntered=!0),void y((function(e){return o-T.current})))}),100);return r}()}return function(){return clearInterval(e)}}),[]),r.a.createElement(j,{icon:"images/lingering-insanity.jpg",displayName:"Lingering Insanity",duration:v,maxDuration:p,stacks:i})},R=function(e){var t=e.drainRate,a=e.drainStart,o=e.hasteStack,i=e.hasteStart,c=e.maxStacks,l=e.paused,u=e.active,d=e.triggerEvent,m=Object(n.useState)(0),p=Object(s.a)(m,2),b=p[0],h=p[1],f=Object(n.useRef)(l);f.current=l;return Object(n.useEffect)((function(){var e=function(){var e=0,n=Math.round(10),r=n-1;return i&&d({type:"HASTE_UPDATE",payload:{source:"voidform",haste:i}}),d({type:"VOIDFORM_UPDATE",payload:o}),h((function(e){return e+1})),setInterval((function(){var i=.1*(a+t*e);e+=.1,r++,f.current||d({type:"RESOURCE_UPDATE",payload:{resource:-1*i}}),r%n===0&&(r/n<c||!c)&&(d({type:"VOIDFORM_UPDATE",payload:o}),h((function(e){return e+1})))}),100)}();return function(){clearInterval(e),d({type:"VOIDFORM_END",payload:{time:Date.now(),startingHaste:i}})}}),[u]),r.a.createElement(j,{icon:"images/voidform.jpg",displayName:"Voidform",stacks:b})},D=function(e){var t=e.icon,a=e.name,o=e.displayName,i=e.startTime,c=e.baseDuration,l=e.maxDuration,u=e.ticks,d=e.resource,m=e.haste,p=e.triggerEvent,b=Object(n.useState)(0),h=Object(s.a)(b,2),f=h[0],v=h[1],y=Object(n.useRef)(i);y.current=i;var E=Object(n.useRef)(l);E.current=l;var g=Object(n.useRef)(m);g.current=m;var T=function(e){return console.log("Haste: "+g.current),c/u/g.current+e};return Object(n.useEffect)((function(){console.log("Inside use effect for: "+a),console.log("Resource: "+d),console.log("Haste: "+m);var e=Date.now(),t=T(e);p({type:"AURA_BEGIN",payload:{name:a,duration:c,time:e}});var n=setInterval((function(){var e=Date.now();if(e>=y.current+E.current)return clearInterval(n),p({type:"RESOURCE_UPDATE",payload:{resource:d}}),void p({type:"AURA_END",payload:{name:a}});e>=t&&(console.log("Tick!"),p({type:"RESOURCE_UPDATE",payload:{resource:d}}),t=T(e)),v((function(t){return e-y.current}))}),100);return function(){return clearInterval(n)}}),[]),r.a.createElement(j,{icon:t,displayName:o,duration:f,maxDuration:E.current})},x={cooldown:{key:"cooldown",displayName:"Cooldown",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be able to be recast.",unit:"sec"},charges:{key:"charges",displayName:"Charges",type:"number",whatIs:"The number of times an ability may be cast while it is on cooldown."},hasted:{key:"hasted",displayName:"Hasted",type:"boolean",whatIs:"An ability that is hasted has its cooldown reduced by haste."},resourceCast:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate upon a successful cast.",unit:"insanity"},resourceChannel:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an ability will generate over its complete channel period.",unit:"insanity"},castTime:{key:"casttime",displayName:"Cast Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability to be executed.",unit:"sec"},channelTime:{key:"casttime",displayName:"Channel Time",type:"time",whatIs:"The amount of time, in seconds, it takes for an ability's channel to complete.",unit:"sec"},ticks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times a channel generates resources over its duration."},auraDuration:{key:"baseDuration",displayName:"Duration",type:"time",whatIs:"The amount of time, in seconds, that an aura's effect will last."},auraTicks:{key:"ticks",displayName:"Ticks",type:"number",whatIs:"The number of times an aura will trigger its effect over its duration."},auraResource:{key:"resource",displayName:"Resource",type:"number",whatIs:"The amount of resource an aura will generate every time its effect triggers."}},L={"void-bolt":[x.cooldown,x.hasted,x.charges,x.resourceCast,{key:"rankTwo",displayName:"Rank 2",type:"boolean",whatIs:"An extra rank coming to Void Bolt in Shadowlands. It allows Void Bolt to be cast during Mind Flay, without canceling it."},{key:"extension",displayName:"DoT Extension",type:"time",whatIs:"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast."}],"void-eruption":[x.castTime,{key:"threshold",displayName:"Insanity Threshold",type:"number",whatIs:"The amount of Insanity that is required to cast Void Eruption out of Voidform."}],"mind-flay":[x.channelTime,x.resourceChannel,x.ticks],"mind-blast":[x.cooldown,x.charges,x.castTime,x.hasted,x.resourceCast,{key:"cdr",displayName:"Voidform Cooldown Reduction",type:"time",whatIs:"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform."}],"shadow-word-death":[x.cooldown,x.charges,x.hasted,x.resourceCast],"void-torrent":[x.cooldown,x.channelTime,x.resourceChannel,x.ticks],"shadow-word-pain":[x.resourceCast],"vampiric-touch":[x.castTime,x.resourceCast]},U={stats:[{key:"haste",displayName:"Haste",type:"percent",whatIs:"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate."}],voidform:[{key:"drainStart",displayName:"Starting Insanity Drain",type:"float",unit:"/sec",whatIs:"The starting amount of Insanity being drained every second while in Voidform."},{key:"drainRate",displayName:"Insanity Drain Rate",type:"float",unit:"/sec",whatIs:"The amount of increasing Insanity drained every second while in Voidform."},{key:"hasteStart",displayName:"Voidform Starting Haste",type:"percent",whatIs:"The amount of haste, in percent, that is granted at the start of Voidform."},{key:"hasteStack",displayName:"Voidform Haste Per Stack",type:"percent",whatIs:"The amount of haste, in percent, that every stack of Voidform grants."},{key:"maxStacks",displayName:"Maximum Voidform Stacks",type:"number",whatIs:"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing."}],lingeringInsanity:[{key:"type",displayName:"Aura Type",type:"select",options:[{value:"static",displayName:"Static"},{value:"decay",displayName:"Decay"}],whatIs:"Lingering Insanity has two types.\nStatic - The length of the aura and haste from stacks are constant.\nDecay - Haste stacks are lost over the aura's duration at a certain rate."},{key:"duration",displayName:"Aura Duration",type:"time",whatIs:"An option for type 'Static'. This is the amount of time, in seconds, that the aura will last."},{key:"afterVoidformEntry",displayName:"After Voidform Entry",type:"boolean",whatIs:"An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform."},{key:"hasteRetention",displayName:"Haste Retained",type:"percent",whatIs:"An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform."},{key:"decayRate",displayName:"Stack Decay Rate",type:"time",whatIs:"An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost."},{key:"hasteDecay",displayName:"Haste Decay Amount",type:"percent",whatIs:"An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack."}],"shadow-word-pain":[x.auraDuration,x.auraTicks,x.auraResource],"vampiric-touch":[x.auraDuration,x.auraTicks,x.auraResource]},P=function(e){var t=e.auras,a=e.triggerEvent,o=e.settings,i=e.haste,c=o.lingeringInsanity,l=o.voidform,u="shadow-word-pain",d="vampiric-touch",m=Object(n.useReducer)((function(e,t){})),p=Object(s.a)(m,2);p[0],p[1];return r.a.createElement("div",{className:"aura-container"},t.voidform.active?r.a.createElement(R,Object.assign({},l,t.voidform,{triggerEvent:a})):null,t.lingeringInsanity.active?r.a.createElement(_,Object.assign({},c,t.lingeringInsanity,{inVoidform:t.voidform.active,triggerEvent:a})):null,t[u].active?r.a.createElement(D,Object.assign({icon:"images/shadow-word-pain.jpg",name:u,displayName:"Shadow Word: Pain"},t[u],o[u],{haste:i,triggerEvent:a})):null,t[d].active?r.a.createElement(D,Object.assign({icon:"images/vampiric-touch.jpg",name:d,displayName:"Vampiric Touch"},t[d],o[d],{haste:i,triggerEvent:a})):null)},B=(a(6),function(e){var t=e.panel,a=e.currentPanel,o=e.reset,i=e.onClick,c=e.handleClose,s=e.header,l=e.panelClass,u=e.style;return function(e,t,a){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current===e&&a(),r.current=t}),[t])}(t,a,o),r.a.createElement("div",null,r.a.createElement("div",{className:"panel-header hover-pointer",onClick:function(){return i(t)}},s),r.a.createElement("div",{className:"panel ".concat(l),style:u},r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:c},"x"),e.children))}),H=a(11),Y={"mind-flay":{cooldown:0,resource:12,hasted:!0,casttime:3e3,ticks:4,type:"channel"},"void-bolt":{cooldown:4500,resource:20,hasted:!0,rankTwo:!1,type:"instant",charges:1,extension:3e3},"void-eruption":{cooldown:0,type:"cast",casttime:2e3,threshold:90},"mind-blast":{cooldown:7500,resource:12,hasted:!0,type:"cast",casttime:1500,charges:1,cdr:1500},"shadow-word-death":{cooldown:9e3,resource:15,type:"instant",charges:1},"void-torrent":{cooldown:45e3,resource:30,type:"channel",casttime:4e3,ticks:10},"shadow-word-pain":{cooldown:0,resource:4,type:"instant"},"vampiric-touch":{cooldown:0,resource:6,type:"cast",casttime:1500}},V={stats:{displayName:"Stats",haste:0},voidform:{displayName:"Voidform",drainStart:6,drainRate:.72,hasteStart:0,hasteStack:.005,maxStacks:0},lingeringInsanity:{displayName:"Lingering Insanity",type:"decay",duration:6e4,afterVoidformEntry:!1,hasteRetention:1,decayRate:3e3,hasteDecay:.01},"shadow-word-pain":{displayName:"Shadow Word: Pain",baseDuration:16e3,ticks:8,resource:0},"vampiric-touch":{displayName:"Vampiric Touch",baseDuration:21e3,ticks:7,resource:0}},F=function(e){var t={};return console.log(e),Object.keys(Y).forEach((function(a){var n=e[a];if(!n)throw new Error("Missing ability in input");t[a]=function(e,t){var a=Y[t];return Object.keys(a).reduce((function(t,n){var r=e[n],o=a[n];if(null===r||void 0===r)throw new Error("Missing ability setting in input "+n);if(typeof r!==typeof o)throw new Error("Ability setting has invalid format");return t[n]=r,t}),{})}(n,a)})),t},M=function(e){var t={};return Object.keys(V).forEach((function(a){var n=e[a];if(!n)throw new Error("Missing aura in input");t[a]=function(e,t){var a=V[t];return Object.keys(a).reduce((function(t,n){var r=e[n],o=a[n];if(null===r||void 0===a)throw new Error("Missing aura setting in input "+n);if(typeof r!==typeof o)throw new Error("Aura setting has invalid format");return t[n]=r,t}),{})}(n,a)})),t},W=function(e){return Object.keys(e).reduce((function(t,a){var n,r=e[a],o=(n=r,Object.keys(n).reduce((function(e,t){return e[t]=n[t],e}),{}));return t[a]=o,t}),{})},G=function(e,t){return Object.keys(e).reduce((function(a,n){var r=e[n],o=r.keybind,i=r.disabled;return a[n]={disabled:!!i},t&&(a[n].keybind=o),a}),{})},z=function(e){var t=e.settings,a=e.onImport,o=e.currentPanel,i=e.onClick,c=e.closePanel,l=Object(n.useState)(""),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(""),b=Object(s.a)(p,2),h=b[0],f=b[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),E=y[0],g=y[1];return r.a.createElement(B,{panel:"export",currentPanel:o,reset:function(){m(""),f(""),g(!1)},onClick:i,handleClose:c,header:"Import/Export Settings",panelClass:"left-panel",style:{transform:"translateX(".concat("export"===o?"0px":"-350px",")")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Import Settings"),r.a.createElement("textarea",{className:"panel-text-area",rows:20,cols:25,placeholder:"Import custom settings here...",value:h,onChange:function(e){var t=e.target.value;f(t)}}),r.a.createElement("div",null,r.a.createElement("label",null,"Include keybinds"),r.a.createElement("input",{type:"checkbox",onChange:function(){return g(!E)},checked:E})),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){var e=function(e,t){try{var a=JSON.parse(H.Base64.decode(e));return console.log(a),{abilitySettings:F(a.abilitySettings),auraSettings:M(a.auraSettings),abilityConfig:G(a.abilityConfig,t)}}catch(n){throw new Error("An error occurred while parsing input data.\nReason: "+n.message)}}(h,E);a(e),f("")},disabled:!h},"Import"))),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Export Settings"),r.a.createElement("textarea",{id:"export-content",className:"panel-text-area",rows:20,cols:25,value:d,readOnly:!0}),r.a.createElement("div",{className:"panel-button-container"},r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){var e=function(e){var t=W(e.abilitySettings),a=G(e.abilities,!0),n={abilitySettings:t,auraSettings:e.auraSettings,abilityConfig:a};return console.log(n),H.Base64.encode(JSON.stringify(n))}(t);m(e)}},"Export"),r.a.createElement("button",{className:"panel-button panel-input-button",onClick:function(){document.getElementById("export-content").select();try{document.execCommand("copy")}catch(e){}},disabled:!d},"Copy")))))},J=a(5),K=function(e){var t=e.value,a=e.onChange;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t/1e3,min:"0",step:".1",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(1e3*parseFloat(e.target.value))}}),"sec")},q=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseInt(e.target.value))}})," ",n)},X=function(e){var t=e.value,a=e.onChange,n=e.unit;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:t,min:"0",step:".01",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseFloat(e.target.value))}})," ",n)},$=function(e){var t=e.value,a=e.onChange;return r.a.createElement("span",null,r.a.createElement("input",{className:"setting-option-input",type:"number",value:100*t,min:"0",step:".5",onChange:function(e){!e.target.value||parseFloat(e.target.value)<0||a(parseFloat(e.target.value)/100)}}),"%")},Z=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"checkbox",defaultChecked:t,onChange:function(e){a(e.target.checked)}})},Q=function(e){var t=e.value,a=e.onChange,n=e.name,o=e.options,i=function(e){a(e.target.value)};return o.map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:e.value,name:n,value:e.value,defaultChecked:e.value===t,onChange:i}),r.a.createElement("label",{htmlFor:e.value},e.displayName))}))},ee=Option=function(e,t,a,n,o,i){switch(e){case"time":return r.a.createElement(K,{key:n,value:t,onChange:a});case"number":return r.a.createElement(q,Object.assign({key:n,value:t,onChange:a},i));case"float":return r.a.createElement(X,Object.assign({key:n,value:t,onChange:a},i));case"percent":return r.a.createElement($,{key:n,value:t,onChange:a});case"boolean":return r.a.createElement(Z,{key:n,value:t,onChange:a});case"select":return r.a.createElement(Q,Object.assign({key:n,value:t,name:o,onChange:a},i));default:return null}},te=(a(21),a(22),function(e){var t=e.value,a=e.name,n=e.type,o=e.whatIs,i=e.displayName,c=e.onChange,s=e.onHelp,l=e.closeHelp,u=e.parentKey,d=Object(I.a)(e,["value","name","type","whatIs","displayName","onChange","onHelp","closeHelp","parentKey"]);return r.a.createElement("div",{className:"setting-option"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-question-circle what-is-icon",onMouseEnter:function(e){var t={x:e.target.offsetLeft,y:e.target.offsetTop};s(i,o,t)},onMouseLeave:l})),r.a.createElement("div",{className:"setting-option-header"},i),ee(n,t,(function(e){c(a,e)}),u+"-input",a,d))}),ae=function(e){var t=e.name,a=e.text,n=e.xPos,o=e.yPos,i={left:"".concat(n,"px"),top:"".concat(o+30,"px")};return r.a.createElement("div",{className:"what-is",style:i},r.a.createElement("div",{className:"what-is-header"},"What is... ",t,"?"),r.a.createElement("div",{className:"what-is-description"},a))},ne=function(e){var t=e.name,a=e.setting,o=e.options,i=e.onChange,l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)({}),b=Object(s.a)(p,2),h=b[0],f=b[1],v=function(e,n){var r=Object(c.a)(Object(c.a)({},a),{},Object(J.a)({},e,n));i(r,t)},y=function(e,t,a){m(!0),f({name:e,text:t,xPos:a.x,yPos:a.y})},E=function(){m(!1),f({})};return r.a.createElement("div",{className:"customize-section"},r.a.createElement("div",{className:"customoze-section-header"},a.displayName),o.map((function(e){return r.a.createElement(te,Object.assign({},e,{key:"".concat(t,"-").concat(e.key),value:a[e.key],name:e.key,parentKey:"".concat(t,"-").concat(e.key),onChange:v,onHelp:y,closeHelp:E}))})),d?r.a.createElement(ae,h):null)},re=function(e){var t=e.settings,a=e.currentPanel,o=e.onAbilitySet,i=e.onAuraSet,l=e.onClick,u=e.closePanel,d=t.abilities,m=t.auras,p=Object(n.useState)(d),b=Object(s.a)(p,2),h=b[0],f=b[1],v=Object(n.useState)(m),y=Object(s.a)(v,2),E=y[0],g=y[1],T=Object(n.useState)(Object.keys(d)[0]),O=Object(s.a)(T,2),N=O[0],S=O[1],k=Object(n.useState)(Object.keys(m)[0]),C=Object(s.a)(k,2),A=C[0],w=C[1],I=function(e){var t=e.target.getAttribute("setting");S(t)},j=function(e){var t=e.target.getAttribute("setting");w(t)};return r.a.createElement(B,{panel:"settings",currentPanel:a,reset:function(){S(Object.keys(d)[0]),w(Object.keys(m)[0]),g(m),f(d)},onClick:l,handleClose:u,header:"Custom Settings",panelClass:"right-panel",style:{transform:"translateX(".concat("settings"===a?"0px":"350px")}},r.a.createElement("div",{className:"vertical-panel-content"},r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Abilities"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(d).map((function(e){return r.a.createElement("div",{key:e,className:N===e?"settings-header-active":"settings-header",setting:e,onClick:I},d[e].displayName)}))),N?r.a.createElement(ne,{name:N,setting:h[N],options:L[N],onChange:function(e,t){var a=Object(c.a)(Object(c.a)({},h),{},Object(J.a)({},t,e));f(a)}}):null,r.a.createElement("button",{className:"panel-button",onClick:function(){o(h)}},"Apply")),r.a.createElement("div",{className:"panel-content-container"},r.a.createElement("div",{className:"panel-content-header"},"Customize Auras"),r.a.createElement("div",{className:"settings-header-container"},Object.keys(m).map((function(e){return r.a.createElement("div",{key:e,className:A===e?"settings-header-active":"settings-header",setting:e,onClick:j},m[e].displayName)}))),A?r.a.createElement(ne,{name:A,setting:E[A],options:U[A],onChange:function(e,t){var a=Object(c.a)(Object(c.a)({},E),{},Object(J.a)({},t,e));g(a)}}):null,r.a.createElement("button",{className:"panel-button",onClick:function(){i(E)}},"Apply"))))},oe=(a(48),function(e){var t=e.abilities,a=e.currentPanel,o=e.onKeybind,i=e.onToggle,c=e.onClick,l=(e.onPause,e.closePanel),u="",d="",m="",p=Object(n.useState)(u),b=Object(s.a)(p,2),h=b[0],f=b[1],v=Object(n.useState)(d),y=Object(s.a)(v,2),g=y[0],T=y[1],O=Object(n.useState)(m),N=Object(s.a)(O,2),S=N[0],k=N[1],C=Object(n.useRef)(S);C.current=S;var A=function(e){f(e.target.alt)},w=function(){f("")},I=function(e){var a=e.target.getAttribute("ability");k(a),T("Press any key to bind to ".concat(t[a].displayName)),document.addEventListener("keypress",j,{once:!0})},j=function e(a){document.removeEventListener("keypress",e);var n={key:a.key,keybindText:a.key};E[n.key]&&(n.keybindText=E[n.key]),n.key.match(/[a-z]/)&&(n.keybindText=n.key.toUpperCase()),n.key.match(/[A-Z]/)&&(n.keybindText="S-"+n.key);var r=C.current;o(n,r),T("".concat(t[r].displayName," successfuly bound to ").concat(n.keybindText))};return r.a.createElement(B,{panel:"abilitykeybinds",currentPanel:a,reset:function(){document.removeEventListener("keypress",j),f(u),T(d),k(m)},onClick:c,header:"Ability and Keybinds",style:{transform:"translateY(".concat("abilitykeybinds"===a?"0px":"250px")},panelClass:"bottom-panel",handleClose:function(){f(u),T(d),k(m),l()}},r.a.createElement("div",{className:"horizontal-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"Change Abilities and Keybinds"),r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{className:"tooltip-text",visibility:(!!h).toString()},h)),r.a.createElement("div",{className:"panel-abilities-container"},Object.keys(t).map((function(e){if("void-eruption"!==e)return r.a.createElement("div",{className:"panel-ability-container",key:e},r.a.createElement("img",{className:"hover-pointer",alt:t[e].displayName,ability:e,onMouseOver:A,onMouseOut:w,onClick:I,src:t[e].icon,height:50,width:50}),r.a.createElement("button",{className:"panel-button",onClick:function(){return i(e)}},t[e].disabled?"Enable":"Disable"))}))),r.a.createElement("div",null,g||null)))}),ie=function(e){var t=e.currentPanel,a=e.onClick,n=e.closePanel;return r.a.createElement(B,{panel:"about",onClick:a,handleClose:n,header:"About",panelClass:"middle-panel",style:{transform:"translateY(".concat("about"===t?"0px":"-685px")}},r.a.createElement("div",{className:"middle-panel-content"},r.a.createElement("div",{className:"panel-content-header"},"About"),r.a.createElement("div",{className:"medium-text left-text panel-text-content"},r.a.createElement("p",null,"Voidform Optimizer is a thought experiment I had."),r.a.createElement("p",null,"I am convinced that many, although not all, players' grievances with Voidform are caused by the implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others to experience Voidform in a myriad of ways, in hope that they will find what they most enjoy about it, share it with others, and maybe as a community come to an agreement on the best ways to make Voidform be the best it can be."),r.a.createElement("p",null,"If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711."))))},ce={"mind-flay":{displayName:"Mind Flay",keybind:{key:"1",keybindText:"1"},icon:"images/mind-flay.jpg"},"mind-blast":{displayName:"Mind Blast",keybind:{key:"2",keybindText:"2"},icon:"images/mind-blast.jpg"},"void-bolt":{displayName:"Void Bolt",keybind:{key:"3",keybindText:"3"},icon:"images/void-bolt.jpg"},"void-eruption":{displayName:"Void Eruption",keybind:{key:"3",keybindText:"3"},icon:"images/void-eruption.jpg"},"shadow-word-death":{displayName:"Shadow Word: Death",keybind:{key:"4",keybindText:"4"},icon:"images/shadow-word-death.jpg"},"void-torrent":{displayName:"Void Torrent",keybind:{key:"5",keybindText:"5"},icon:"images/void-torrent.jpg"},"shadow-word-pain":{displayName:"Shadow Word: Pain",keybind:{key:"6",keybindText:"6"},icon:"images/shadow-word-pain.jpg"},"vampiric-touch":{displayName:"Vampiric Touch",keybind:{key:"7",keybindText:"7"},icon:"images/vampiric-touch.jpg"}},se=function(e){var t=e.value,a=e.id,n=e.label,o=e.className,i=e.placeHolder,c=e.onChange;return r.a.createElement("div",{className:"form-field ".concat(o)},r.a.createElement("label",{htmlFor:a},n),r.a.createElement("div",{className:"form-input-container"},r.a.createElement("textarea",{className:"panel-text-area form-input-field",id:a,value:t,placeholder:i,required:!0,onChange:function(e){return c(a,e.target.value)}})))},le=function(e){var t=e.value,a=e.id,n=e.label,o=e.placeHolder,i=e.onChange;return r.a.createElement("div",{className:"form-text-field form-title"},r.a.createElement("label",{className:"form-input-title",htmlFor:a},n),r.a.createElement("input",{className:"panel-text-area form-input-field",type:"text",id:a,value:t,placeholder:o,required:!0,onChange:function(e){return i(a,e.target.value)}}))},ue=a(13),de=a.n(ue),me=a(19),pe=a(32),be=new(a.n(pe).a)({token:""}).getIssues("ryeshot","voidform-optimizer"),he=function(e){var t=["### Give a brief description of the issue","### What is the expected behavior?","### What is the actual behavior?"];return Object.keys(e).reduce((function(a,n,r){return a.concat([t[r],e[n]])}),[]).join("\n")},fe=function(){var e=Object(me.a)(de.a.mark((function e(t){var a;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(c.a)({},t),e.next=3,be.createIssue(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(me.a)(de.a.mark((function e(t,a,n){var r,o,i;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,o=Object(I.a)(t,["title"]),console.log("About to format content"),i=he(o),console.log("Formatted content"),console.log(i),e.prev=5,e.next=8,fe({title:"[BUG] ".concat(r),body:i});case 8:a(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0),n();case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),ye=[{id:"bug-report-description",label:"Description",className:"form-field-small"},{id:"bug-report-expected",label:"Expected Behavior",className:"form-field-medium"},{id:"bug-report-actual",label:"Actual Behavior",className:"form-field-medium"}],Ee={id:"title",label:"Title"},ge=function(e){var t=e.closeForm,a=Object(n.useState)({}),o=Object(s.a)(a,2),i=o[0],l=o[1],u=Object(n.useState)(!0),d=Object(s.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),f=h[0],v=h[1],y=function(e,t){l(Object(c.a)(Object(c.a)({},i),{},Object(J.a)({},e,t)))};return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},r.a.createElement("div",{className:"form-title"},"Bug Report"),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault();ve(i,(function(){return v("Bug report successfully submitted!")}),(function(){return v("Failed to submit bug report")})),p(!1)}},r.a.createElement(le,Object.assign({value:i.title},Ee,{onChange:y})),ye.map((function(e){return r.a.createElement(se,Object.assign({key:e.id,value:i[e.id]},e,{onChange:y}))})),r.a.createElement("div",null,r.a.createElement("input",{className:"panel-button",type:"submit",value:"Submit",disabled:!m}))),r.a.createElement("div",null,f),r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},Te=function(e){var t=e.closeForm;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content panel"},"Coming soon!",r.a.createElement("button",{className:"panel-button panel-exit-button",onClick:t},"x")))},Oe=(a(85),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1];return r.a.createElement("div",{className:"forms-container"},r.a.createElement("div",null,r.a.createElement("button",{className:"panel-button",onClick:function(){return o(!0)}},"Report a Bug"),r.a.createElement("button",{className:"panel-button",onClick:function(){return u(!0)}},"Request a Feature")),a?r.a.createElement(ge,{closeForm:function(){return o(!1)}}):null,l?r.a.createElement(Te,{closeForm:function(){return u(!1)}}):null)}),Ne=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(Y),u=Object(s.a)(i,2),d=u[0],m=u[1],p=Object(n.useState)(ce),b=Object(s.a)(p,2),h=b[0],f=b[1],v=Object(n.useState)(V),y=Object(s.a)(v,2),E=y[0],g=y[1],T=Object(n.useState)(!1),O=Object(s.a)(T,2),N=O[0],S=O[1],k=Object(n.useState)(!1),C=Object(s.a)(k,2),A=C[0],I=C[1],j=Object(n.useState)(0),_=Object(s.a)(j,2),R=_[0],D=_[1],x={resource:0,auras:{stats:{haste:R},voidform:{active:!1,stacks:0,haste:0,paused:!1},lingeringInsanity:{active:!1,stacks:0,haste:0},"shadow-word-pain":{active:!1,maxDuration:16e3},"vampiric-touch":{active:!1,maxDuration:24e3}},abilities:{"void-eruption":{unusable:!0}}},L=Object(n.useReducer)((function(e,t){var a=t.type,n=JSON.parse(JSON.stringify(e)),r=n.auras.voidform,o=n.auras.lingeringInsanity;switch(a){case"RESET":return x;case"RESET_ABILITIES":return Object(c.a)(Object(c.a)({},x),{},{auras:e.auras});case"RESET_AURAS":var i=Object(c.a)(Object(c.a)({},n),{},{auras:Object(c.a)(Object(c.a)({},x.auras),{},{stats:e.auras.stats})});return console.log(i),Object(c.a)(Object(c.a)({},n),{},{auras:Object(c.a)(Object(c.a)({},x.auras),{},{stats:e.auras.stats})});case"HASTE_SET":var s=t.payload,l=s.source,u=s.haste;n.auras[l].haste=u;break;case"HASTE_UPDATE":var m=t.payload;l=m.source,u=m.haste;n.auras[l].haste+=u;break;case"VOIDFORM_UPDATE":r.stacks++,r.haste+=t.payload;break;case"VOIDFORM_START":r.active=!0,r.stacks=1;break;case"VOIDFORM_END":var p=t.payload,b=p.time,h=p.startingHaste;o.active=!0,o.stacks=r.stacks,o.haste=Math.round(1e3*(r.haste-h))/1e3,o.startTime=b,r.stacks=0,r.haste=0,n.abilities["void-eruption"].unusable=!0;break;case"LINGERING_INSANITY_START":var f=t.payload,v=(u=f.haste,f.stacks);o.haste=u,o.stacks=v;break;case"LINGERING_INSANITY_UPDATE":o.haste+=t.payload,o.stacks--,o.haste<=0&&(o.haste=0);break;case"LINGERING_INSANITY_END":o.active=!1,o.stacks=0,o.haste=0,o.startTime=0;break;case"RESOURCE_UPDATE":var y=Math.max(Math.min(n.resource+t.payload.resource,100),0);n.resource=y,y<=0&&r.active&&(r.active=!1),!r.active&&y>=d["void-eruption"].threshold&&(n.abilities["void-eruption"].unusable=!1);break;case"INSANITY_DRAIN_PAUSE_START":r.paused=!0;break;case"INSANITY_DRAIN_PAUSE_END":r.paused=!1;break;case"AURA_START":var g=t.payload,T=g.name,O=(b=g.time,n.auras[T]);O.active?function(e,t,a){var n=e.startTime+e.maxDuration-a,r=Math.min(.3*t,n);e.maxDuration=t+r,e.startTime=a}(O,E[T].baseDuration,b):O.active=!0;break;case"AURA_BEGIN":var N=t.payload,S=(T=N.name,b=N.time,N.duration);n.auras[T].startTime=b,n.auras[T].maxDuration=S;break;case"AURA_REFRESH":var k=t.payload;T=k.name,b=k.time;n.auras[T].startTime=b;break;case"AURA_END":T=t.payload.name;n.auras[T].active=!1,n.auras[T].startTime=0;break;case"DOT_EXTEND":var C=d["void-bolt"].extension;["shadow-word-pain","vampiric-touch"].forEach((function(e){var t=n.auras[e];t.active&&(t.maxDuration+=C)}))}return n}),x),U=Object(s.a)(L,2),B=U[0],H=U[1];Object(n.useEffect)((function(){D(F)}),[B.auras.stats.haste,B.auras.voidform.haste,B.auras.lingeringInsanity.haste]);var F=function(){var e=B.auras;return Object.keys(e).reduce((function(t,a){return e[a].haste?t*(1+e[a].haste):t}),1)},M=function(e){S(!0),o(e)},W=function(){S(!1),o(null)},G=function(e){var t=Object.keys(h).reduce((function(t,a){return t[a]=Object(c.a)(Object(c.a)({},h[a]),e[a]),t}),{});f(t)},J=function(e){X(),g(e);var t=e.stats.haste;H({type:"HASTE_SET",payload:{source:"stats",haste:t}})},K=function(e){q(),m(e)},q=function(){I(!A),H({type:"RESET_ABILITIES"}),H({type:"RESOURCE_UPDATE",payload:{resource:0}})},X=function(){H({type:"RESET_AURAS"})};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header header-panel"},r.a.createElement("div",{className:"App-title"},r.a.createElement("div",{className:"App-title-text"},"Voidform Optimizer")),r.a.createElement("div",{className:"panel-container"},r.a.createElement(re,{settings:{abilities:Object.keys(d).reduce((function(e,t){return e[t]=Object(c.a)(Object(c.a)({},d[t]),{},{displayName:ce[t].displayName}),e}),{}),auras:E},onAbilitySet:K,onAuraSet:J,currentPanel:a,onClick:M,closePanel:W}),r.a.createElement(oe,{abilities:h,currentPanel:a,onKeybind:function(e,t){var a=JSON.parse(JSON.stringify(h)),n=e.key,r="void-bolt"===t||"void-eruption"===t;Object.keys(a).forEach((function(e){a[e].keybind.key===n&&(a[e].keybind={keybindText:"--"})})),r?(a["void-bolt"].keybind=Object(c.a)({},e),a["void-eruption"].keybind=Object(c.a)({},e)):a[t].keybind=Object(c.a)({},e),f(a)},onToggle:function(e){var t=JSON.parse(JSON.stringify(h));t[e].disabled=!t[e].disabled,"void-bolt"===e&&(t["void-eruption"].disabled=t[e].disabled),f(t)},onClick:M,closePanel:W}),r.a.createElement(z,{settings:{abilitySettings:d,auraSettings:E,abilities:h},onImport:function(e){G(e.abilityConfig),K(e.abilitySettings),J(e.auraSettings)},currentPanel:a,onClick:M,closePanel:W}),r.a.createElement(ie,{currentPanel:a,onClick:M,closePanel:W})),r.a.createElement(Oe,null)),r.a.createElement("div",{className:"App-content"},r.a.createElement(P,{auras:B.auras,settings:E,haste:R,triggerEvent:H}),r.a.createElement(l,{current:B.resource,max:100}),r.a.createElement(w,{abilitySettings:d,abilities:Object.keys(h).reduce((function(e,t){return e[t]=Object(c.a)(Object(c.a)({},h[t]),B.abilities[t]),e}),{}),haste:R,inVoidform:B.auras.voidform.active,triggerEvent:H,keyEventsPaused:N,reset:A}),r.a.createElement("button",{className:"panel-button",onClick:function(){q(),X()}},"Reset")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Se=a(33);a.n(Se).a.config(),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.bac75491.chunk.js.map