{"version":3,"sources":["components/ResourceBar.js","components/CooldownSweep.js","lib/events.js","lib/abilityEvents.js","utils/eventHandler.js","lib/constants.js","utils/ability.js","components/ProgressAbility.js","components/GlobalCooldown.js","components/CastBar.js","components/AbilityBar.js","components/auras/Aura.js","components/auras/LingeringInsanity.js","components/auras/Voidform.js","components/auras/DamageOverTime.js","lib/options.js","components/auras/AuraBar.js","components/panels/Panel.js","utils/hooks.js","lib/abilitySettings.js","lib/auraSettings.js","utils/importExport.js","components/panels/ExportPanel.js","components/panels/optionFactory.js","components/panels/SettingOption.js","components/panels/WhatIs.js","components/panels/CustomizeSection.js","components/panels/SettingsPanel.js","components/panels/AbilityKeybindsPanel.js","components/panels/AboutPanel.js","lib/abilities.js","components/forms/FormTextAreaField.js","components/forms/FormTextField.js","utils/bugreport.js","components/forms/BugReport.js","components/forms/FeatureRequest.js","components/forms/Forms.js","App.js","serviceWorker.js","index.js"],"names":["ResourceBar","props","max","current","voidform","className","toFixed","style","width","CooldownSweep","size","progress","inverse","stroke","normalizedRadius","circumference","Math","PI","height","fill","strokeWidth","strokeOpacity","strokeDasharray","strokeDashoffset","cx","cy","r","events","abilityEvents","onEvent","EventHandler","eventTriggers","this","event","payload","forEach","e","type","keybinds","Ability","initialState","updateFn","onExecute","eventHandler","state","updateState","charges","maxCharges","currentState","Object","keys","k","value","subState","k2","value2","getCurrentState","name","cooldownTimer","setInterval","now","Date","duration","cooldown","startTime","remaining","interval","clearInterval","startCooldown","handleEvent","time","displayName","resource","cast","castTimer","setTimeout","console","log","currentlyOnCooldown","endTime","channel","baseDuration","ticks","pandemicTime","currentTicks","channelTimer","previousChannelRemaining","previousChannelFrequency","min","floor","channelFrequency","round","baseChannelTime","globalCooldown","globalCooldownTimer","clearTimeout","triggers","trigger","eventTypes","constructEventHandler","InstantAbility","CastAbility","ChannelAbility","unusable","casting","startCast","startChannel","ProgressAbility","settings","globalCooldownStartTime","casttime","castStartTime","castEndTime","icon","keybind","subscribe","unsubscribe","onAbilityUpdate","triggerEvent","reset","useState","setState","key","keybindText","startTimeRef","useRef","cooldownRef","castStartTimeRef","castEndTimeRef","casttimeRef","castingRef","baseChannelTimeRef","chargesRef","globalCooldownRef","globalCooldownStartTimeRef","ability","useEffect","create","source","execute","notify","beginGlobalCooldown","remove","onClick","src","GlobalCooldown","start","gcd","CastBar","direction","setCurrent","timeRef","durationRef","timer","AbilityBar","abilitySettings","abilities","haste","inVoidform","keyEventsPaused","hasteRef","inVoidformRef","spellQueueTimer","observers","setObservers","voidformEntered","setVoidformEntered","observersRef","defaultState","cooldowns","disabled","defaultCooldowns","status","triggerCooldown","document","addEventListener","handleKeyPress","removeEventListener","useReducer","oldState","action","newState","JSON","parse","stringify","rankTwo","error","o","queueAbility","calculateCooldown","triggerGlobalCooldown","gcdLength","observer","obs","filter","getAbilityCooldown","cdr","hasted","map","i","Aura","maxDuration","stacks","children","LingeringInsanity","setMaxDuration","setDuration","stacksRef","initialize","afterVoidformEntry","hasteRetention","currentMaxDuration","calculateDecayStacks","voidformHaste","hasteDecay","ceil","startStatic","decayRate","startDecay","Voidform","drainRate","drainStart","hasteStack","hasteStart","maxStacks","paused","active","setStacks","pausedRef","n","frequency","drain","startingHaste","DamageOverTime","maxDurationRef","calculateNextTickTime","tickTime","commonOptions","whatIs","unit","resourceCast","resourceChannel","castTime","channelTime","auraDuration","auraTicks","auraResource","abilityOptions","auraOptions","options","AuraBar","auras","lingeringInsanity","swpName","vtName","Panel","panel","currentPanel","handleClose","header","panelClass","target","cleanup","ref","useCleanup","defaultAbilitySettings","extension","threshold","defaultAuraSettings","stats","parseAbilitySettings","result","a","Error","abilitySetting","reduce","obj","userSetting","setting","undefined","parseAbility","parseAuraSettings","auraSettings","aura","auraSetting","parseAura","formatAbilitySettingsForExport","formattedAbility","formatAbilityConfig","includeKeybinds","ExportPanel","onImport","closePanel","exportData","setExportData","inputData","setInputData","setIncludeKeybinds","transform","rows","cols","placeholder","onChange","data","checked","parsedSettings","Base64","decode","abilityConfig","message","importSettings","id","readOnly","currentSettings","formattedAbilitySettings","formattedAbilityConfig","combined","encode","exportSettings","getElementById","select","execCommand","err","TimeTextOption","step","parseFloat","NumberTextOption","parseInt","FloatTextOption","PercentTextOption","BooleanOption","defaultChecked","SelectOption","handleChange","htmlFor","Option","rest","SettingOption","onHelp","closeHelp","parentKey","onMouseEnter","pos","x","offsetLeft","y","offsetTop","onMouseLeave","v","WhatIs","text","xPos","yPos","left","top","CustomizeSection","showWhatIs","setShowWhatIs","setWhatIs","optionKey","option","newSetting","handleShowWhatIs","closeWhatIs","SettingsPanel","onAbilitySet","onAuraSet","currentAbilities","setCurrentAbilities","currentAuras","setCurrentAuras","activeAbilitySection","setActiveAbilitySection","activeAuraSection","setActiveAuraSection","showAbilityOptions","settingKey","getAttribute","showAuraOptions","newAbilities","newAuras","AbilityKeybindsPanel","onKeybind","onToggle","onPause","tooltip","setTooltip","setKeybindText","currentAbility","setCurrentAbility","currentAbilityRef","showToolTip","alt","hideToolTip","prepareToBindAbility","bindAbility","once","match","toUpperCase","visibility","toString","onMouseOver","onMouseOut","AboutPanel","defaultAbilities","FormTextAreaField","label","placeHolder","required","FormTextField","issues","Github","token","process","getIssues","formatBugReportContent","body","headers","content","concat","join","sendBugReport","report","createIssue","submitBugReport","success","fail","title","fields","titleField","BugReport","closeForm","setData","canSubmit","setCanSubmit","submitMessage","setSubmitMessage","onSubmit","preventDefault","f","FeatureRequest","Forms","showBugReport","setShowBugReport","showFeatureRequest","setShowFeatureRequest","App","setPanel","setAbilitySettings","setAbilities","setAuraSettings","setKeyEventsPaused","setReset","setHaste","pandemicDuration","handleAuraPandemic","d","dot","calculateHaste","handlePanelHeaderClick","handlePanelClose","setAllAbilities","importedAbilities","handleAuraSet","handleAuraReset","handleAbilitySet","handleAbilityReset","merged","voidBoltOrEruption","newSettings","Boolean","window","location","hostname","dotenv","config","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.b907c423.chunk.js","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react';\r\nimport \"./ResourceBar.css\"\r\n\r\nconst ResourceBar = (props) => {\r\n    const {max, current, voidform} = props\r\n\r\n    return (\r\n        <div className=\"progress-bar-container\">\r\n            <div className=\"progress-text\">{(current/max*100).toFixed(0)}</div> \r\n            <div className=\"progress-bar resource-bar\" \r\n                style={{\r\n                    width: `${(current/max*100).toFixed(2)}%`\r\n            }}>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResourceBar","import React, {useState, useEffect, useRef} from 'react';\r\n\r\nimport \"./CooldownSweep.css\"\r\n\r\nconst CooldownSweep = (props) => {\r\n\r\n    const {size, progress, inverse} = props\r\n\r\n    const radius = size * 2\r\n    const stroke = size * 2\r\n\r\n    const normalizedRadius = radius - (stroke/2)\r\n    const circumference = normalizedRadius * 2 * Math.PI\r\n\r\n    return (\r\n        <svg width={size} height={size}>\r\n            <circle\r\n                fill=\"transparent\"\r\n                strokeWidth={stroke}\r\n                strokeOpacity={.7}\r\n                strokeDasharray={circumference + \" \" + circumference}\r\n                strokeDashoffset={inverse ? ((!progress ? circumference : 0) + (progress || 0) * circumference) : (circumference + (progress || 0) * circumference)}\r\n                stroke={\"rgb(0,0,0)\"}\r\n                cx={size/2}\r\n                cy={size/2}\r\n                r={normalizedRadius} />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default CooldownSweep","const events = {\r\n    \"CAST\": [\r\n        \"ABILITY_CAST_SUCCESS\",\r\n        \"ABILITY_COOLDOWN_START\",\r\n        \"ABILITY_COOLDOWN_END\",\r\n        \"ABILITY_CAST_START\",\r\n        \"ABILITY_CHANNEL_START\",\r\n        \"ABILITY_CHANNEL_UPDATE\",\r\n        \"ABILITY_CHANNEL_END\"\r\n    ],\r\n    \"RESOURCE\": [\r\n        \"RESOURCE_UPDATE\",\r\n        \"INSANITY_DRAIN_PAUSE_START\",\r\n        \"INSANITY_DRAIN_PAUSE_END\"\r\n    ],\r\n    \"AURA\": [\r\n        \"VOIDFORM_START\",\r\n        \"VOIDFORM_UPDATE\",\r\n        \"VOIDFORM_END\",\r\n        \"LINGERING_INSANITY_START\",\r\n        \"LINGERING_INSANITY_UPDATE\",\r\n        \"LINGERING_INSANITY_END\",\r\n        \"AURA_START\",\r\n        \"AURA_END\",\r\n        \"DOT_EXTEND\"\r\n    ],\r\n    \"STAT\": [\"HASTE_UPDATE\"]\r\n}\r\n\r\nexport default events","const abilityEvents = {\r\n    \"void-bolt\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\", \"DOT_EXTEND\"]\r\n        }\r\n    },\r\n    \"mind-flay\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [],\r\n            \"COOLDOWN_END\": [],\r\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\"],\r\n            \"CHANNEL_UPDATE\": [\"RESOURCE_UPDATE\"],\r\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\"]\r\n        }\r\n    },\r\n    \"void-eruption\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"VOIDFORM_START\"]\r\n        }\r\n    },\r\n    \"mind-blast\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"],\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"]\r\n        }\r\n    },\r\n    \"shadow-word-death\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"void-torrent\": {\r\n        onEvent: {\r\n            \"COOLDOWN_START\": [\"ABILITY_COOLDOWN_START\"],\r\n            \"COOLDOWN_END\": [\"ABILITY_COOLDOWN_END\"],\r\n            \"CHANNEL_START\": [\"ABILITY_CHANNEL_START\", \"INSANITY_DRAIN_PAUSE_START\"],\r\n            \"CHANNEL_UPDATE\": [\"RESOURCE_UPDATE\"],\r\n            \"CHANNEL_END\": [\"ABILITY_CHANNEL_END\", \"INSANITY_DRAIN_PAUSE_END\"]\r\n        }\r\n    },\r\n    \"shadow-word-pain\": {\r\n        onEvent: {\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    },\r\n    \"vampiric-touch\": {\r\n        onEvent: {\r\n            \"CAST_START\": [\"ABILITY_CAST_START\"],\r\n            \"CAST_SUCCESS\": [\"ABILITY_CAST_SUCCESS\", \"AURA_START\", \"RESOURCE_UPDATE\"]\r\n        }\r\n    }\r\n}\r\n\r\nexport default abilityEvents","import events from \"../lib/events\"\r\nimport abilityEvents from \"../lib/abilityEvents\"\r\n\r\nclass EventHandler {\r\n\r\n    constructor(eventTriggers, events) {\r\n        this.eventTriggers = eventTriggers\r\n        this.events = events\r\n    }\r\n\r\n    handleEvent(event, payload) {\r\n        if(!this.events[event]) return\r\n        //console.log(event)\r\n        this.events[event].forEach(e => this.eventTriggers[e]({\r\n            type: e,\r\n            payload\r\n        }))\r\n    }\r\n}\r\n\r\nexport const constructEventHandler = (name, triggers) => {\r\n    const eventTriggers = {}\r\n\r\n    triggers.forEach(trigger => {\r\n        let types = trigger.eventTypes\r\n        types.forEach(type => {\r\n            events[type].forEach(e => eventTriggers[e] = trigger.trigger)\r\n        })\r\n    })\r\n\r\n    return new EventHandler(eventTriggers, abilityEvents[name].onEvent)\r\n}","export const interval = 20\r\nexport const lag = 50\r\nexport const spellQueueWindow = 250\r\nexport const keybinds = {\r\n    \"!\": \"S-1\",\r\n    \"@\": \"S-2\",\r\n    \"#\": \"S-3\",\r\n    \"$\": \"S-4\",\r\n    \"%\": \"S-5\",\r\n    \"^\": \"S-6\",\r\n    \"&\": \"S-7\",\r\n    \"*\": \"S-8\",\r\n    \"(\": \"S-9\",\r\n    \")\": \"S-0\"\r\n}","import {constructEventHandler} from \"./eventHandler\"\r\nimport {interval, lag} from \"../lib/constants\"\r\n\r\nclass Ability {\r\n\r\n    constructor(initialState, updateFn, onExecute, eventHandler) {\r\n        this.state = initialState\r\n        this.updateState = updateFn\r\n        this.onExecute = onExecute\r\n        this.eventHandler = eventHandler\r\n        this.updateState({\r\n            progress: 0,\r\n            charges: initialState.charges.maxCharges || 1\r\n        })       \r\n    }\r\n\r\n    static create(type, initialState, updateFn, onExecute, triggers) {\r\n        const eventHandler = constructEventHandler(initialState.name, triggers)\r\n        switch(type) {\r\n            case \"instant\":\r\n                return new InstantAbility(initialState, updateFn, onExecute, eventHandler)\r\n            case \"cast\":\r\n                return new CastAbility(initialState, updateFn, onExecute, eventHandler)\r\n            case \"channel\":\r\n                return new ChannelAbility(initialState, updateFn, onExecute, eventHandler)\r\n        }\r\n    }\r\n\r\n    getCurrentState() {\r\n        const currentState = {}\r\n        let state = this.state\r\n\r\n        Object.keys(state).forEach(k => {\r\n            let value = state[k]\r\n            if(typeof value !== \"object\") {\r\n                currentState[k] = value\r\n                return\r\n            }\r\n\r\n            const subState = {}\r\n            Object.keys(value).forEach(k2 => {\r\n                let value2 = value[k2]\r\n                if(value2 === \"undefined\") return\r\n                subState[k2] =  typeof value2 !== \"object\" ? value2 : value2.current\r\n            })\r\n            currentState[k] = subState\r\n        })\r\n\r\n        return currentState\r\n    }\r\n\r\n    startCooldown() {\r\n        let state = this.getCurrentState()\r\n        const {name} = state\r\n        const {maxCharges} = state.charges\r\n\r\n        this.cooldownTimer = setInterval(() => {\r\n            let now = Date.now()\r\n\r\n            let duration = this.state.cooldown.duration.current\r\n            let startTime = this.state.cooldown.startTime.current || now\r\n            let charges = this.state.charges.current.current\r\n            let remaining = (startTime + duration) - now\r\n\r\n            if(remaining <= interval + lag) {\r\n                this.updateState(state => {\r\n                    return {...state, charges: charges+1}\r\n                })\r\n\r\n                clearInterval(this.cooldownTimer)\r\n\r\n                if(maxCharges && charges < maxCharges - 1) {\r\n                    this.startCooldown()\r\n                    return\r\n                }\r\n\r\n                this.eventHandler.handleEvent(\"COOLDOWN_END\", {name})\r\n\r\n                this.updateState(state => {\r\n                    return {...state, progress: 0}\r\n                })\r\n\r\n                return\r\n            }\r\n            this.updateState(state => {\r\n                return {...state, progress: remaining/duration}\r\n            })\r\n\r\n        }, interval)\r\n\r\n        this.eventHandler.handleEvent(\"COOLDOWN_START\", {\r\n            name,\r\n            time: Date.now()\r\n        })\r\n    }\r\n\r\n    startCast() {\r\n        let state = this.getCurrentState()\r\n        const {name, displayName, resource} = state\r\n        const {duration} = state.cast\r\n\r\n        this.castTimer = setTimeout(() => {\r\n            console.log(\"Cast success!\")\r\n            this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\r\n                name,\r\n                resource,\r\n                time: Date.now()\r\n            })\r\n\r\n            let cooldown = this.state.cooldown.duration.current\r\n            let currentlyOnCooldown = this.state.cooldown.startTime.current\r\n            let charges = this.state.charges.current.current\r\n\r\n            if(cooldown) {\r\n                this.updateState(state => {\r\n                    return {...state, charges: charges-1}\r\n                })\r\n                if(currentlyOnCooldown) return               \r\n                this.startCooldown()\r\n            }\r\n\r\n        }, duration)\r\n\r\n        this.eventHandler.handleEvent(\"CAST_START\", {\r\n            name,\r\n            displayName,\r\n            duration,\r\n            time: Date.now()\r\n        })\r\n    }\r\n\r\n    startChannel() {\r\n        let state = this.getCurrentState()\r\n        const {startTime, endTime, duration} = state.cast\r\n        const {baseDuration, ticks} = state.channel\r\n        const {name, displayName, resource} = state\r\n\r\n        let now = Date.now()\r\n        let pandemicTime = 0\r\n        let currentTicks = ticks\r\n\r\n        if(startTime) {\r\n            clearInterval(this.channelTimer)\r\n            let previousChannelTime = endTime - startTime\r\n            let previousChannelRemaining = previousChannelTime - (now - startTime)\r\n            let previousChannelFrequency = (baseDuration/currentTicks)        \r\n            pandemicTime = Math.min(previousChannelRemaining, baseDuration * .3)\r\n            let remainingTicks = Math.floor(pandemicTime/previousChannelFrequency)\r\n            currentTicks += remainingTicks\r\n        }\r\n\r\n        let channelFrequency = Math.round((duration+pandemicTime)/currentTicks)\r\n\r\n        this.channelTimer = setInterval(() => {\r\n\r\n            let now = Date.now()\r\n            let endTime = this.state.cast.endTime.current\r\n\r\n            //another cast has stopped this channel, don't update\r\n            if(!endTime) {\r\n                clearInterval(this.channelTimer)\r\n\r\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\r\n                    name\r\n                })\r\n                return\r\n            }\r\n\r\n            this.eventHandler.handleEvent(\"CHANNEL_UPDATE\", {\r\n                resource: resource/ticks\r\n            })\r\n\r\n            if(now >= endTime) {\r\n                clearInterval(this.channelTimer)\r\n\r\n                this.eventHandler.handleEvent(\"CHANNEL_END\", {\r\n                    name\r\n                })\r\n                return\r\n            }\r\n\r\n        }, channelFrequency)\r\n\r\n        this.eventHandler.handleEvent(\"CHANNEL_START\", {\r\n            name,\r\n            displayName,\r\n            duration: duration + pandemicTime,\r\n            time: now,\r\n            baseChannelTime: duration\r\n        })\r\n    }\r\n\r\n    beginGlobalCooldown() {\r\n        let state = this.getCurrentState()\r\n        const {duration, startTime} = state.globalCooldown\r\n\r\n        if(state.cooldown.startTime) {\r\n            let remaining = (state.cooldown.startTime + state.cooldown.duration) - startTime\r\n            if(remaining > duration) return\r\n        }\r\n\r\n        this.globalCooldownTimer = setInterval(() => {\r\n            let now = Date.now()\r\n            let remaining = (startTime + duration) - now\r\n            if(remaining <= interval) {\r\n                clearInterval(this.globalCooldownTimer)\r\n                             \r\n                return\r\n            }\r\n\r\n            if(this.state.cooldown.startTime.current) return\r\n            this.updateState(state => {\r\n                return {...state, progress: remaining/duration}\r\n            })\r\n        }, interval)\r\n    }\r\n\r\n    remove() {\r\n        clearInterval(this.cooldownTimer)\r\n        clearInterval(this.globalCooldownTimer)\r\n        clearInterval(this.channelTimer)\r\n        clearTimeout(this.castTimer)\r\n    }\r\n}\r\n\r\nclass InstantAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {name, resource} = state\r\n        const {startTime} = state.cooldown\r\n        const {maxCharges, current} = state.charges\r\n\r\n        if(startTime && current === 0) return      \r\n        this.updateState(state => {\r\n            return {...state, charges: current-1}\r\n        })\r\n\r\n        this.eventHandler.handleEvent(\"CAST_SUCCESS\", {\r\n            name,\r\n            resource,\r\n            time: Date.now()\r\n        })\r\n\r\n        this.onExecute()\r\n        if(maxCharges && current < maxCharges) return\r\n        this.startCooldown()\r\n    }\r\n}\r\n\r\nclass CastAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {startTime} = state.cast\r\n        const {current} = state.charges\r\n\r\n        if(startTime || current === 0) return\r\n        this.startCast()\r\n        this.onExecute()\r\n    }\r\n}\r\n\r\nclass ChannelAbility extends Ability {\r\n\r\n    execute() {\r\n        if(this.state.unusable) return\r\n        if(this.state.cast.casting.current) return\r\n        let state = this.getCurrentState()\r\n        const {duration, startTime} = state.cooldown\r\n\r\n        if(startTime) return\r\n        this.startChannel()\r\n        if(duration) {\r\n            this.startCooldown()\r\n        }\r\n        this.onExecute()\r\n    }\r\n}\r\n\r\nexport default Ability","import React, {useState, useEffect, useRef} from 'react';\r\nimport \"./ProgressAbility.css\"\r\nimport CooldownSweep from \"./CooldownSweep\"\r\nimport Ability from \"../utils/ability\"\r\n\r\nconst ProgressAbility = (props) => {\r\n\r\n    const {name, displayName, settings, cooldown, globalCooldown, globalCooldownStartTime, unusable, startTime, casttime, castStartTime, castEndTime, icon, baseChannelTime, keybind, casting, subscribe, unsubscribe, onExecute, onAbilityUpdate, triggerEvent, reset} = props\r\n\r\n    const size = 50\r\n\r\n    const [state, setState] = useState({})\r\n\r\n    const {key, keybindText} = keybind\r\n    const {type, resource, charges, ticks} = settings\r\n\r\n    //cooldown states\r\n    const startTimeRef = useRef(startTime)\r\n    const cooldownRef = useRef(cooldown)\r\n\r\n    startTimeRef.current = startTime\r\n    cooldownRef.current = cooldown\r\n\r\n    //cast states\r\n    const castStartTimeRef = useRef(castStartTime)\r\n    const castEndTimeRef = useRef(castEndTime)\r\n    const casttimeRef = useRef(casttime)\r\n    const castingRef = useRef(casting)\r\n\r\n    castStartTimeRef.current = castStartTime\r\n    castEndTimeRef.current = castEndTime\r\n    casttimeRef.current = casttime\r\n    castingRef.current = casting\r\n\r\n    //channel states\r\n    const baseChannelTimeRef = useRef(baseChannelTime)\r\n\r\n    baseChannelTimeRef.current = baseChannelTime\r\n\r\n    //charge states\r\n    const chargesRef = useRef(charges || 1)\r\n\r\n    chargesRef.current = state.charges\r\n\r\n    //gcd states\r\n    const globalCooldownRef = useRef(globalCooldown)\r\n    const globalCooldownStartTimeRef = useRef(globalCooldownStartTime)\r\n\r\n    globalCooldownRef.current = globalCooldown\r\n    globalCooldownStartTimeRef.current = globalCooldownStartTime\r\n\r\n    const ability = useRef()\r\n\r\n    useEffect(() => {\r\n        const triggers = [{\r\n            eventTypes: [\"CAST\"],\r\n            trigger: onAbilityUpdate \r\n        },\r\n        {\r\n            eventTypes: [\"RESOURCE\", \"AURA\", \"STAT\"],\r\n            trigger: triggerEvent\r\n        }]\r\n\r\n        const initialState = {\r\n            name,\r\n            displayName,\r\n            resource,\r\n            unusable,\r\n            cooldown: {\r\n                duration: cooldownRef,\r\n                startTime: startTimeRef\r\n            },\r\n            cast: {\r\n                duration: casttimeRef,\r\n                startTime: castStartTimeRef,\r\n                endTime: castEndTimeRef,\r\n                casting: castingRef\r\n            },\r\n            channel: {\r\n                baseDuration: baseChannelTimeRef,\r\n                ticks\r\n            },\r\n            charges: {\r\n                maxCharges: charges,\r\n                current: chargesRef\r\n            },\r\n            globalCooldown: {\r\n                duration: globalCooldownRef,\r\n                startTime: globalCooldownStartTimeRef\r\n            }\r\n        }\r\n\r\n        ability.current = Ability.create(type, initialState, setState, onExecute, triggers)\r\n        \r\n        subscribe({\r\n            source: name,\r\n            keybind: key,\r\n            execute: () => ability.current.execute(),\r\n            notify: () => ability.current.beginGlobalCooldown()\r\n        })\r\n\r\n        return () => {\r\n            ability.current.remove()\r\n            unsubscribe(name)\r\n        }\r\n    }, [unusable, key, reset])\r\n\r\n    return (\r\n        <div className=\"progress-ability-container\">\r\n        <div className=\"progress-ability\" onClick={() => {}}>\r\n            <img\r\n                className={!unusable && ((state.charges > 0 && charges) || (!startTimeRef.current)) ? \"colored\" : \"desaturated\"}\r\n                src={icon}\r\n                width={size}\r\n                height={size}\r\n            />\r\n            <div className=\"charge-text\">{charges > 1 ? state.charges : \"\"}</div>\r\n            {startTimeRef.current || globalCooldownRef.current ? \r\n            <CooldownSweep size={size} progress={state.progress}/>\r\n            : null}\r\n        </div>\r\n        <div>{keybindText}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressAbility;","const GlobalCooldown = {\r\n\r\n    start: (duration, triggerEvent) => {\r\n        console.log(\"End time for gcd: \" + (Date.now() + duration))\r\n\r\n        triggerEvent({\r\n            type: \"GLOBAL_COOLDOWN_START\",\r\n            payload: {\r\n                gcd: duration,\r\n                time: Date.now()\r\n\r\n            }\r\n        })\r\n\r\n        setTimeout(() => {\r\n            console.log(\"Gcd ended\")\r\n            triggerEvent({\r\n                type: \"GLOBAL_COOLDOWN_END\"\r\n            })    \r\n        }, duration);\r\n    }\r\n}\r\n\r\nexport default GlobalCooldown","import React, {useState, useEffect, useRef} from 'react';\r\nimport \"./CastBar.css\"\r\n\r\nconst CastBar = (props) => {\r\n\r\n    const {time, name, displayName, duration, direction} = props\r\n\r\n    const sec = 1000\r\n    const interval = 50\r\n\r\n    const [current, setCurrent] = useState(0)\r\n\r\n    const timeRef = useRef(time)\r\n    const durationRef = useRef(time)\r\n\r\n    timeRef.current = time\r\n    durationRef.current = duration\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            let now = Date.now()\r\n            setCurrent(current => now - timeRef.current)\r\n        }, interval)\r\n\r\n        return () => {\r\n            clearInterval(timer)\r\n            setCurrent(current => 0)\r\n        }\r\n    }, [name])\r\n\r\n    return (\r\n        <div className=\"progress-bar-container\">\r\n            <div className=\"cast-bar-text-container\">\r\n                <div className=\"progress-text cast-bar-text\">{displayName}</div>\r\n                <div className=\"progress-text cast-bar-text\">{direction \r\n                ? `${(current/sec).toFixed(1)}/${((duration/sec).toFixed(1))}`\r\n                : `${((durationRef.current-current)/sec).toFixed(1)}/${((durationRef.current/sec).toFixed(1))}`}sec\r\n                </div> \r\n            </div>\r\n            <div className=\"progress-bar cast-bar\" \r\n                style={{\r\n                    width: direction \r\n                    ? `${(current/durationRef.current*100).toFixed(2)}%`\r\n                    : `${((durationRef.current-current)/durationRef.current*100).toFixed(2)}%`\r\n            }}>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CastBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport ProgressAbility from \"./ProgressAbility\"\r\nimport GlobalCooldown from \"./GlobalCooldown\"\r\nimport CastBar from \"./CastBar\"\r\nimport {spellQueueWindow} from \"../lib/constants\"\r\nimport \"./AbilityBar.css\"\r\n\r\nconst AbilityBar = (props) => {\r\n\r\n    const gcdLength = 1500\r\n    const {abilitySettings, abilities, haste, inVoidform, triggerEvent, keyEventsPaused, reset} = props\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const inVoidformRef = useRef(inVoidform)\r\n    inVoidformRef.current = inVoidform \r\n\r\n    const spellQueueTimer = useRef()\r\n\r\n    const defaultCooldowns = () => {\r\n        const cooldowns = {}\r\n        Object.keys(abilities).forEach(k => {\r\n            if(abilitySettings[k] && abilitySettings[k].disabled) return\r\n            cooldowns[k] = {\r\n                startTime: 0\r\n            }\r\n        })\r\n\r\n        return cooldowns\r\n    }\r\n\r\n    const [observers, setObservers] = useState([])\r\n    const [voidformEntered, setVoidformEntered] = useState(false)\r\n\r\n    const observersRef = useRef(observers)\r\n    observersRef.current = observers\r\n\r\n    const defaultState = {\r\n        globalCooldown: 0,\r\n        cooldowns: defaultCooldowns(),\r\n        status: {}\r\n    }\r\n\r\n    useEffect(() => {\r\n        triggerCooldown({\r\n            type: \"RESET\"\r\n        })\r\n    }, [reset])\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keypress\", handleKeyPress)\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keypress\", handleKeyPress)\r\n        }\r\n    }, [keyEventsPaused])\r\n\r\n    const [state, triggerCooldown] = useReducer((oldState, action) => {\r\n        const newState = JSON.parse(JSON.stringify(oldState))\r\n        const payload = action.payload\r\n\r\n        switch(action.type) {\r\n            case \"RESET\":\r\n                return defaultState\r\n            case \"EXECUTE_PENDING\":\r\n                var {name} = payload\r\n                newState.status[name] = \"PENDING\"\r\n                break\r\n            case \"EXECUTE_END\":\r\n                var {name} = payload\r\n                newState.status[name] = \"\"\r\n                break\r\n            case \"ABILITY_CAST_SUCCESS\":\r\n                var {name} = payload\r\n                if(abilitySettings[\"void-bolt\"].rankTwo && newState.casting && name === \"void-bolt\" && newState.casting.name === \"mind-flay\") {\r\n                    break\r\n                }\r\n                newState.cooldowns[name].castStartTime = 0\r\n                newState.cooldowns[name].castEndTime = 0\r\n\r\n                if(newState.casting) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                    delete newState.casting\r\n                }\r\n                break\r\n            case \"ABILITY_COOLDOWN_START\":\r\n                var {name, time} = payload\r\n                newState.cooldowns[name].startTime = time\r\n                break\r\n            case \"ABILITY_COOLDOWN_END\":\r\n                var {name} = payload\r\n                newState.cooldowns[name].startTime = 0\r\n                break\r\n            case \"ABILITY_CAST_START\":\r\n                var {name, displayName, time, duration} = payload\r\n                newState.cooldowns[name].castStartTime = time\r\n                newState.cooldowns[name].castEndTime = time + duration\r\n                if(newState.casting) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                }\r\n                newState.casting = {\r\n                    duration,\r\n                    name,\r\n                    displayName,\r\n                    direction: 1,\r\n                    time\r\n                }\r\n                break\r\n            case \"ABILITY_CHANNEL_START\":\r\n                var {name, displayName, time, duration, baseChannelTime} = payload\r\n                newState.cooldowns[name].castStartTime = time\r\n                newState.cooldowns[name].castEndTime = time + duration\r\n                newState.cooldowns[name].baseChannelTime = baseChannelTime\r\n                if(newState.casting && name !== newState.casting.name) {\r\n                    newState.cooldowns[newState.casting.name].castStartTime = 0\r\n                    newState.cooldowns[newState.casting.name].castEndTime = 0\r\n                }\r\n                newState.casting = {\r\n                    duration,\r\n                    name,\r\n                    displayName,\r\n                    direction: 0,\r\n                    time\r\n                }\r\n                break\r\n            case \"ABILITY_CHANNEL_UPDATE\":\r\n                var {name} = payload\r\n                newState.cooldowns[name].ticks--\r\n                break\r\n            case \"ABILITY_CHANNEL_END\":\r\n                var {name} = payload\r\n                newState.cooldowns[name].castStartTime = 0\r\n                newState.cooldowns[name].castEndTime = 0\r\n                newState.cooldowns[name].ticks = 0\r\n                if(newState.casting && name === newState.casting.name) delete newState.casting\r\n                break\r\n            case \"GLOBAL_COOLDOWN_START\":\r\n                console.log(\"Starting gcd...\")\r\n                newState.globalCooldown = payload.gcd\r\n                newState.globalCooldownStartTime = payload.time\r\n                break\r\n            case \"GLOBAL_COOLDOWN_END\":\r\n                console.log(\"Ending gcd...\")\r\n                newState.globalCooldown = 0\r\n                newState.globalCooldownStartTime = 0\r\n                break\r\n            default:\r\n                console.error(`Invalid action provided: ${action.type}`)\r\n        }\r\n\r\n        return newState\r\n\r\n    }, defaultState)\r\n\r\n    const globalCooldownRef = useRef(state.globalCooldown)\r\n    globalCooldownRef.current = state.globalCooldown\r\n\r\n    const globalCooldownStartTimeRef = useRef(state.globalCooldownStartTime)\r\n    globalCooldownStartTimeRef.current = state.globalCooldownStartTime\r\n\r\n    const handleKeyPress = (e) => {\r\n\r\n        if(keyEventsPaused) return\r\n        \r\n        const now = Date.now()\r\n        const remaining = globalCooldownRef.current ? globalCooldownRef.current - (now - globalCooldownStartTimeRef.current - 15) : 0\r\n\r\n        if(remaining > spellQueueWindow) return\r\n\r\n        observersRef.current.forEach(o => {\r\n            if(o.keybind === e.key) {\r\n                queueAbility(o.source, o.execute, remaining)\r\n            }\r\n        })\r\n    }\r\n\r\n    const calculateCooldown = (cooldown) => {\r\n        return cooldown/hasteRef.current\r\n    }\r\n\r\n    const triggerGlobalCooldown = () => {\r\n        let gcd = Math.max(calculateCooldown(gcdLength), gcdLength/2)\r\n\r\n        GlobalCooldown.start(gcd, triggerCooldown)\r\n\r\n        setTimeout(() => {\r\n            observersRef.current.forEach(o => o.notify())\r\n        }, 0)\r\n    }\r\n\r\n    const subscribe = (observer) => {\r\n        setObservers(o => [...o, observer])\r\n    }\r\n\r\n    const unsubscribe = (source) => {\r\n        setObservers(obs => obs.filter(o => o.source !== source))\r\n    }\r\n\r\n    const getAbilityCooldown = (k) => {\r\n        const ability = abilitySettings[k]\r\n        let cooldown = ability.cooldown\r\n\r\n        if(inVoidformRef.current && k === \"mind-blast\") {\r\n            let cdr = ability.cdr \r\n            if(!voidformEntered) {\r\n                setVoidformEntered(true)\r\n                const now = Date.now()\r\n                const startTime = state.cooldowns[k].startTime\r\n                const remaining = startTime ? now - startTime : cooldown\r\n                cdr *= remaining/cooldown\r\n            }\r\n            cooldown -= cdr\r\n        }\r\n\r\n        if(!inVoidformRef.current && voidformEntered)\r\n            setVoidformEntered(false)\r\n\r\n        return ability.hasted ? calculateCooldown(cooldown) : cooldown\r\n    }\r\n\r\n    const queueAbility = (name, execute, remaining) => {\r\n\r\n        clearTimeout(spellQueueTimer.current)\r\n\r\n        console.log(\"End time for ability queue: \" + (Date.now() + remaining))\r\n\r\n        spellQueueTimer.current = setTimeout(execute, remaining)\r\n    }\r\n\r\n    return (\r\n        <div className=\"ability-bar-container\">\r\n        {state.casting ? <CastBar {...state.casting}/> : null}\r\n        <div className=\"ability-bar\">\r\n            {Object.keys(abilities)\r\n            .map((k,i) => {\r\n                if(abilities[k].disabled) return\r\n                if(k === \"void-bolt\" && !inVoidformRef.current) return\r\n                if(k === \"void-eruption\" && inVoidformRef.current) return\r\n                return <ProgressAbility\r\n                    name={k}\r\n                    key={i}\r\n                    {...abilities[k]}\r\n                    {...state.cooldowns[k]}\r\n                    settings={abilitySettings[k]}\r\n                    cooldown={getAbilityCooldown(k)}\r\n                    globalCooldown={state.globalCooldown}\r\n                    globalCooldownStartTime={state.globalCooldownStartTime}\r\n                    casttime={calculateCooldown(abilitySettings[k].casttime)}\r\n                    casting={state.casting && state.casting.time && state.casting.direction}\r\n                    subscribe={subscribe}\r\n                    unsubscribe={unsubscribe}\r\n                    onExecute={triggerGlobalCooldown}\r\n                    onAbilityUpdate={triggerCooldown}\r\n                    triggerEvent={triggerEvent}\r\n                    reset={reset}\r\n                />\r\n            })}\r\n            </div>        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AbilityBar","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport CooldownSweep from \"../CooldownSweep\"\r\nimport \"./Aura.css\"\r\n\r\nconst Aura = (props) => {\r\n\r\n    const {icon, displayName, duration, maxDuration, stacks} = props\r\n\r\n    const size = 30\r\n    const progress = duration && ((maxDuration-duration)/maxDuration)\r\n\r\n    return (\r\n        <div className=\"aura\">\r\n            <img\r\n                src={icon}\r\n                width={size}\r\n                height={size}\r\n            >\r\n            </img>\r\n            <div className=\"aura-text\">{stacks > 0 ? stacks : \"\"}</div>\r\n            {duration ? <CooldownSweep size={30} progress={progress} inverse={true}/> : null}\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Aura","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst LingeringInsanity = (props) => {\r\n\r\n    const { type, startTime, haste, stacks, inVoidform, triggerEvent, ...settings} = props\r\n\r\n    const interval = 100\r\n    const name = \"lingeringInsanity\"\r\n    const displayName = \"Lingering Insanity\"\r\n    const icon = \"images/lingering-insanity.jpg\"\r\n    const defaultMaxDuration = 60000\r\n\r\n    const [maxDuration, setMaxDuration] = useState(defaultMaxDuration)\r\n    const [duration, setDuration] = useState(0)\r\n\r\n    const stacksRef = useRef(stacks)\r\n    stacksRef.current = stacks\r\n\r\n    const inVoidformRef = useRef(inVoidform)\r\n    inVoidformRef.current = inVoidform\r\n\r\n    const startTimeRef = useRef(startTime)\r\n    startTimeRef.current = startTime\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const initialize = (afterVoidformEntry, hasteRetention, stacks, duration) => {\r\n        let currentMaxDuration = afterVoidformEntry ? defaultMaxDuration : duration\r\n        let voidformEntered = false\r\n\r\n        setMaxDuration(maxDuration => currentMaxDuration)\r\n\r\n        triggerEvent({\r\n            type: \"LINGERING_INSANITY_START\",\r\n            payload: {\r\n                haste: hasteRef.current * hasteRetention,\r\n                stacks\r\n            }\r\n        })\r\n\r\n        return {\r\n            currentMaxDuration,\r\n            voidformEntered\r\n        }\r\n\r\n    }\r\n\r\n    const startStatic = () => {\r\n\r\n        const { duration, afterVoidformEntry, hasteRetention } = settings\r\n        \r\n        let state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            const now = Date.now()\r\n\r\n            console.log(\"here\")\r\n\r\n            //just left voidform\r\n            if(state.voidformEntered && !inVoidformRef.current) {\r\n                state = initialize(afterVoidformEntry, hasteRetention, stacksRef.current, duration)\r\n\r\n                return\r\n            }\r\n\r\n            //timed out\r\n            if(now >= startTimeRef.current + state.currentMaxDuration) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_END\"\r\n                })\r\n\r\n                return\r\n            }\r\n\r\n            if(!state.voidformEntered && inVoidformRef.current) \r\n            {\r\n                state.voidformEntered = true\r\n\r\n                if(afterVoidformEntry) {\r\n                    triggerEvent({\r\n                        type: \"AURA_REFRESH\",\r\n                        payload: {\r\n                            name,\r\n                            time: now\r\n                        }\r\n                    })\r\n                    setMaxDuration(maxDuration => duration)\r\n                    state.currentMaxDuration = duration\r\n                    setDuration(duration => 0)\r\n                    return\r\n                }\r\n           }            \r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    const calculateDecayStacks = (voidformHaste, hasteDecay) => {\r\n        return Math.ceil(voidformHaste/hasteDecay)\r\n    }\r\n\r\n    const startDecay = () => {\r\n\r\n        const { decayRate, hasteDecay } = settings\r\n\r\n        let i = 0\r\n\r\n        let state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            i += interval\r\n\r\n            const now = Date.now()\r\n\r\n            if(state.voidformEntered && !inVoidformRef.current) {\r\n                state = initialize(true, 1, calculateDecayStacks(hasteRef.current, hasteDecay))\r\n                i = 0\r\n\r\n                return\r\n            }\r\n\r\n            if(stacksRef.current <= 0) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_END\"\r\n                })\r\n\r\n                return\r\n            }\r\n\r\n            //lose stack\r\n            if(i % decayRate === 0) {\r\n                triggerEvent({\r\n                    type: \"LINGERING_INSANITY_UPDATE\",\r\n                    payload: hasteDecay * -1\r\n                })\r\n            }\r\n\r\n            if(!state.voidformEntered && inVoidformRef.current) state.voidformEntered = true\r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    useEffect(() => {\r\n        let timer\r\n\r\n        switch(type) {\r\n            case \"static\":\r\n                timer = startStatic()\r\n                break\r\n            case \"decay\":\r\n                timer = startDecay()\r\n                break\r\n        }\r\n\r\n        return () => clearInterval(timer)\r\n\r\n    }, [])\r\n\r\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDuration} stacks={stacks}/>\r\n}\r\n\r\nexport default LingeringInsanity","import React, { useState, useEffect, useRef } from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst Voidform = (props) => {\r\n\r\n    const { drainRate, drainStart, hasteStack, hasteStart, maxStacks, paused, active, triggerEvent } = props\r\n    const interval = 100\r\n    const displayName = \"Voidform\"\r\n    const icon = \"images/voidform.jpg\"\r\n\r\n    const [stacks, setStacks] = useState(0)\r\n\r\n    const pausedRef = useRef(paused)\r\n    pausedRef.current = paused\r\n\r\n    const start = () => {\r\n        let n = 0\r\n        let frequency = Math.round(1000 / interval)\r\n\r\n        let i = frequency - 1\r\n\r\n        if (hasteStart) triggerEvent({\r\n            type: \"HASTE_UPDATE\",\r\n            payload: {\r\n                source: \"voidform\",\r\n                haste: hasteStart\r\n            }\r\n        })\r\n\r\n        triggerEvent({\r\n            type: \"VOIDFORM_UPDATE\",\r\n            payload: hasteStack\r\n        })\r\n        setStacks(stacks => stacks + 1)\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            let sec = interval / 1000\r\n            let drain = (drainStart + drainRate * n) * sec\r\n\r\n            n += sec\r\n            i++\r\n\r\n            if (!pausedRef.current)\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource: drain * -1\r\n                    }\r\n                })\r\n\r\n            if (i % frequency === 0 && (i / frequency < maxStacks || !maxStacks)) {\r\n                //gain a stack of vf\r\n                triggerEvent({\r\n                    type: \"VOIDFORM_UPDATE\",\r\n                    payload: hasteStack\r\n                })\r\n                setStacks(stacks => stacks + 1)\r\n            }\r\n\r\n        }, interval)\r\n\r\n        return timer\r\n    }\r\n\r\n    useEffect(() => {\r\n        let timer = start()\r\n\r\n        return () => {\r\n            clearInterval(timer)\r\n\r\n            triggerEvent({\r\n                type: \"VOIDFORM_END\",\r\n                payload: {\r\n                    time: Date.now(),\r\n                    startingHaste: hasteStart\r\n                }\r\n            })\r\n        }\r\n    }, [active])\r\n\r\n    return <Aura icon={icon} displayName={displayName} stacks={stacks} />\r\n}\r\n\r\nexport default Voidform","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Aura from \"./Aura\"\r\n\r\nconst DamageOverTime = (props) => {\r\n\r\n    const {icon, name, displayName, startTime, baseDuration, maxDuration, ticks, resource, haste, triggerEvent} = props\r\n\r\n    const interval = 100\r\n\r\n    const [duration, setDuration] = useState(0)\r\n\r\n    const startTimeRef = useRef(startTime)\r\n    startTimeRef.current = startTime\r\n\r\n    const maxDurationRef = useRef(maxDuration)\r\n    maxDurationRef.current = maxDuration\r\n\r\n    const hasteRef = useRef(haste)\r\n    hasteRef.current = haste\r\n\r\n    const calculateNextTickTime = (now) => {\r\n        //console.log(\"Haste: \" + hasteRef.current)\r\n        return (baseDuration/ticks)/hasteRef.current + now\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        // console.log(\"Inside use effect for: \" + name)\r\n        // console.log(\"Resource: \" + resource)\r\n        // console.log(\"Haste: \" + haste)\r\n        let start = Date.now()\r\n        let tickTime = calculateNextTickTime(start)\r\n\r\n        triggerEvent({\r\n            type: \"AURA_BEGIN\",\r\n            payload: {\r\n                name,\r\n                duration: baseDuration,\r\n                time: start\r\n            }\r\n        })\r\n\r\n        const timer = setInterval(() => {\r\n\r\n            const now = Date.now()\r\n\r\n            if(now >= startTimeRef.current + maxDurationRef.current) {\r\n                clearInterval(timer)\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource\r\n                    }\r\n                })\r\n                triggerEvent({\r\n                    type: \"AURA_END\",\r\n                    payload: {\r\n                        name\r\n                    }\r\n                })\r\n                return\r\n            }\r\n\r\n            if(now >= tickTime) {\r\n                //console.log(\"Tick!\")\r\n                triggerEvent({\r\n                    type: \"RESOURCE_UPDATE\",\r\n                    payload: {\r\n                        resource\r\n                    }\r\n                })\r\n\r\n                tickTime = calculateNextTickTime(now)\r\n            }\r\n\r\n            setDuration(duration => now - startTimeRef.current)\r\n\r\n        }, interval)\r\n\r\n        return () => clearInterval(timer)\r\n    }, [])\r\n\r\n    return <Aura icon={icon} displayName={displayName} duration={duration} maxDuration={maxDurationRef.current}/>\r\n}\r\n\r\nexport default DamageOverTime","const whatIs = {\r\n    cooldown: \"The amount of time, in seconds, it takes for an ability to be able to be recast.\",\r\n    charges: \"The number of times an ability may be cast while it is on cooldown.\",\r\n    hasted: \"An ability that is hasted has its cooldown reduced by haste.\",\r\n    resourceCast: \"The amount of resource an ability will generate upon a successful cast.\",\r\n    resourceChannel: \"The amount of resource an ability will generate over its complete channel period.\",\r\n    resourceAura: \"The amount of resource an aura will generate every time its effect triggers.\",\r\n    castTime: \"The amount of time, in seconds, it takes for an ability to be executed.\",\r\n    channelTime: \"The amount of time, in seconds, it takes for an ability's channel to complete.\",\r\n    ticks: \"The number of times a channel generates resources over its duration.\",\r\n    voidBoltRankTwo: \"An extra rank coming to Void Bolt in Shadowlands. It allows Void Bolt to be cast during Mind Flay, without canceling it.\",\r\n    voidBoltExtension: \"The amount of time, in seconds, that Shadow Word: Pain and Vampiric Touch are extended when Void Bolt is cast.\",\r\n    voidformThreshold: \"The amount of Insanity that is required to cast Void Eruption out of Voidform.\",\r\n    voidformCooldownReduction: \"The amount of time, in seconds, that Mind Blast's cooldown is reduced while in Voidform.\",\r\n    haste: \"Increases the rate at which spells cast and the global cooldown, and certain spell cooldowns, regenerate.\",\r\n    voidformStartingDrain: \"The starting amount of Insanity being drained every second while in Voidform.\",\r\n    voidformDrainRate: \"The amount of increasing Insanity drained every second while in Voidform.\",\r\n    voidformStartingHaste: \"The amount of haste, in percent, that is granted at the start of Voidform.\",\r\n    voidformHasteStack: \"The amount of haste, in percent, that every stack of Voidform grants.\",\r\n    voidformMaximumStacks: \"The maximum number of Voidform stacks. Note that reaching the maximum does not stop drain from increasing.\",\r\n    lingeringInsanityType: \"Lingering Insanity has two types.\\nStatic - The length of the aura and haste from stacks are constant.\\nDecay - Haste stacks are lost over the aura's duration at a certain rate.\",\r\n    lingeringInsanityDuration: \"An option for type 'Static'. This is the amount of time, in seconds, that the aura will last.\",\r\n    lingeringInsanityAfterVoidformEntry: \"An option for type 'Static'. If enabled, then the duration for Lingering Insanity will only start after entering Voidform.\",\r\n    lingeringInsanityHasteRetention: \"An option for type 'Static. The amount of haste, in percent, that is retained from the final stacks of the previous Voidform.\",\r\n    lingeringInsanityDecayRate: \"An option for type 'Decay'. The amount of time, in seconds it takes for one stack of the aura to be lost.\",\r\n    lingeringInsanityHasteDecay: \"An option for type 'Decay'. The amount of haste, in percent, that is removed every time the aura loses a stack.\",\r\n    auraDuration: \"The amount of time, in seconds, that an aura's effect will last.\",\r\n    auraTicks: \"The number of times an aura will trigger its effect over its duration.\"\r\n}\r\n\r\nconst commonOptions = {\r\n    cooldown: {\r\n        key: \"cooldown\",\r\n        displayName: \"Cooldown\",\r\n        type: \"time\",\r\n        whatIs: whatIs.cooldown,\r\n        unit: \"sec\"\r\n    },\r\n    charges: {\r\n        key: \"charges\",\r\n        displayName: \"Charges\",\r\n        type: \"number\",\r\n        whatIs: whatIs.charges\r\n    },\r\n    hasted: {\r\n        key: \"hasted\",\r\n        displayName: \"Hasted\",\r\n        type: \"boolean\",\r\n        whatIs: whatIs.hasted\r\n    },\r\n    resourceCast: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceCast,\r\n        unit: \"insanity\"\r\n    },\r\n    resourceChannel: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceChannel,\r\n        unit: \"insanity\"\r\n    },\r\n    castTime: {\r\n        key: \"casttime\",\r\n        displayName: \"Cast Time\",\r\n        type: \"time\",\r\n        whatIs: whatIs.castTime,\r\n        unit: \"sec\"\r\n    },\r\n    channelTime: {\r\n        key: \"casttime\",\r\n        displayName: \"Channel Time\",\r\n        type: \"time\",\r\n        whatIs: whatIs.channelTime,\r\n        unit: \"sec\"\r\n    },\r\n    ticks: {\r\n        key: \"ticks\",\r\n        displayName: \"Ticks\",\r\n        type: \"number\",\r\n        whatIs: whatIs.ticks\r\n    },\r\n    auraDuration: {\r\n        key: \"baseDuration\",\r\n        displayName: \"Duration\",\r\n        type: \"time\",\r\n        whatIs: whatIs.auraDuration\r\n    },\r\n    auraTicks: {\r\n        key: \"ticks\",\r\n        displayName: \"Ticks\",\r\n        type: \"number\",\r\n        whatIs: whatIs.auraTicks\r\n    },\r\n    auraResource: {\r\n        key: \"resource\",\r\n        displayName: \"Resource\",\r\n        type: \"number\",\r\n        whatIs: whatIs.resourceAura\r\n    }\r\n}\r\n\r\n\r\nexport const abilityOptions = {\r\n    \"void-bolt\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.hasted,\r\n        commonOptions.charges,\r\n        commonOptions.resourceCast,\r\n        {\r\n            key: \"rankTwo\",\r\n            displayName: \"Rank 2\",\r\n            type: \"boolean\",\r\n            whatIs: whatIs.voidBoltRankTwo\r\n        },\r\n        {\r\n            key: \"extension\",\r\n            displayName: \"DoT Extension\",\r\n            type: \"time\",\r\n            whatIs: whatIs.voidBoltExtension\r\n        }\r\n    ],\r\n    \"void-eruption\": [\r\n        commonOptions.castTime,\r\n        {\r\n            key: \"threshold\",\r\n            displayName: \"Insanity Threshold\",\r\n            type: \"number\",\r\n            whatIs: whatIs.voidformThreshold\r\n        }\r\n    ],\r\n    \"mind-flay\": [\r\n        commonOptions.channelTime,\r\n        commonOptions.resourceChannel,\r\n        commonOptions.ticks\r\n    ],\r\n    \"mind-blast\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.charges,\r\n        commonOptions.castTime,\r\n        commonOptions.hasted,\r\n        commonOptions.resourceCast,\r\n        {\r\n            key: \"cdr\",\r\n            displayName: \"Voidform Cooldown Reduction\",\r\n            type: \"time\",\r\n            whatIs: whatIs.voidformCooldownReduction\r\n        }\r\n    ],\r\n    \"shadow-word-death\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.charges,\r\n        commonOptions.hasted,\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"void-torrent\": [\r\n        commonOptions.cooldown,\r\n        commonOptions.channelTime,\r\n        commonOptions.resourceChannel,\r\n        commonOptions.ticks\r\n    ],\r\n    \"shadow-word-pain\": [\r\n        commonOptions.resourceCast\r\n    ],\r\n    \"vampiric-touch\": [\r\n        commonOptions.castTime,\r\n        commonOptions.resourceCast\r\n    ]\r\n}\r\n\r\nexport const auraOptions = {\r\n    \"stats\": [\r\n        {\r\n            key: \"haste\",\r\n            displayName: \"Haste\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.haste\r\n        }\r\n    ],\r\n    \"voidform\": [\r\n        {\r\n            key: \"drainStart\",\r\n            displayName: \"Starting Insanity Drain\",\r\n            type: \"float\",\r\n            unit: \"/sec\",\r\n            whatIs: whatIs.voidformStartingDrain,\r\n        },\r\n        {\r\n            key: \"drainRate\",\r\n            displayName: \"Insanity Drain Rate\",\r\n            type: \"float\",\r\n            unit: \"/sec\",\r\n            whatIs: whatIs.voidformDrainRate\r\n        },\r\n        {\r\n            key: \"hasteStart\",\r\n            displayName: \"Voidform Starting Haste\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.voidformStartingHaste\r\n        },\r\n        {\r\n            key: \"hasteStack\",\r\n            displayName: \"Voidform Haste Per Stack\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.voidformHasteStack\r\n        },\r\n        {\r\n            key: \"maxStacks\",\r\n            displayName: \"Maximum Voidform Stacks\",\r\n            type: \"number\",\r\n            whatIs: whatIs.voidformMaximumStacks\r\n        }\r\n    ],\r\n    \"lingeringInsanity\": [\r\n        {\r\n            key: \"type\",\r\n            displayName: \"Aura Type\",\r\n            type: \"select\",\r\n            options: [{\r\n                value: \"static\",\r\n                displayName: \"Static\"\r\n            },{\r\n                value: \"decay\",\r\n                displayName: \"Decay\"\r\n            }],\r\n            whatIs: whatIs.lingeringInsanityType\r\n        },\r\n        {\r\n            key: \"duration\",\r\n            displayName: \"Aura Duration\",\r\n            type: \"time\",\r\n            whatIs: whatIs.lingeringInsanityDuration\r\n        },\r\n        {\r\n            key: \"afterVoidformEntry\",\r\n            displayName: \"After Voidform Entry\",\r\n            type: \"boolean\",\r\n            whatIs: whatIs.lingeringInsanityAfterVoidformEntry\r\n        },\r\n        {\r\n            key: \"hasteRetention\",\r\n            displayName: \"Haste Retained\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.lingeringInsanityHasteRetention\r\n        },\r\n        {\r\n            key: \"decayRate\",\r\n            displayName: \"Stack Decay Rate\",\r\n            type: \"time\",\r\n            whatIs: whatIs.lingeringInsanityDecayRate\r\n        },\r\n        {\r\n            key: \"hasteDecay\",\r\n            displayName: \"Haste Decay Amount\",\r\n            type: \"percent\",\r\n            whatIs: whatIs.lingeringInsanityHasteDecay\r\n        }\r\n    ],\r\n    \"shadow-word-pain\": [\r\n        commonOptions.auraDuration,\r\n        commonOptions.auraTicks,\r\n        commonOptions.auraResource\r\n    ],\r\n    \"vampiric-touch\": [\r\n        commonOptions.auraDuration,\r\n        commonOptions.auraTicks,\r\n        commonOptions.auraResource\r\n    ]\r\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport LingeringInsanity from \"./LingeringInsanity\"\r\nimport Voidform from \"./Voidform\"\r\nimport DamageOverTime from './DamageOverTime';\r\nimport { auraOptions } from '../../lib/options';\r\n\r\nconst AuraBar = (props) => {\r\n\r\n    const {auras, triggerEvent, settings, haste} = props\r\n    const {lingeringInsanity, voidform} = settings \r\n    \r\n    //TODO: Move to lib\r\n    const swpIcon = \"images/shadow-word-pain.jpg\"\r\n    const vtIcon = \"images/vampiric-touch.jpg\"\r\n\r\n    const swpName = \"shadow-word-pain\"\r\n    const vtName = \"vampiric-touch\"\r\n\r\n    const swpDisplayName = \"Shadow Word: Pain\"\r\n    const vtDisplayName = \"Vampiric Touch\"\r\n\r\n    const [state, triggerAuraEvent] = useReducer((state, action) => {\r\n\r\n    })\r\n\r\n    return (\r\n        <div className=\"aura-container\">\r\n          {auras.voidform.active \r\n          ? <Voidform \r\n            {...voidform}\r\n            {...auras.voidform}\r\n            triggerEvent={triggerEvent}/> \r\n          : null}\r\n          {auras.lingeringInsanity.active\r\n          ? <LingeringInsanity \r\n            {...lingeringInsanity}\r\n            {...auras.lingeringInsanity} \r\n            inVoidform={auras.voidform.active} \r\n            triggerEvent={triggerEvent}/>\r\n          : null}\r\n          {auras[swpName].active\r\n          ? <DamageOverTime \r\n            icon={swpIcon}\r\n            name={swpName}\r\n            displayName={swpDisplayName}\r\n            {...auras[swpName]}\r\n            {...settings[swpName]}\r\n            haste={haste}\r\n            triggerEvent={triggerEvent}/>\r\n          : null}\r\n          {auras[vtName].active\r\n          ? <DamageOverTime\r\n            icon={vtIcon}\r\n            name={vtName}\r\n            displayName={vtDisplayName}\r\n            {...auras[vtName]}\r\n            {...settings[vtName]}\r\n            haste={haste}\r\n            triggerEvent={triggerEvent}/>\r\n          : null}\r\n        </div>       \r\n    )\r\n}\r\n\r\nexport default AuraBar\r\n\r\n\r\n","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport {useCleanup} from \"../../utils/hooks\"\r\n\r\nimport \"./Panel.css\"\r\n\r\nconst Panel = (props) => {\r\n\r\n    const {panel, currentPanel, reset, onClick, handleClose, header, panelClass, style} = props\r\n\r\n    useCleanup(panel, currentPanel, reset)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"panel-header hover-pointer\" onClick={() => onClick(panel)}>{header}</div>\r\n            <div className={`panel ${panelClass}`} style={style}>\r\n                <button className=\"panel-button panel-exit-button\" onClick={handleClose}>x</button>\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Panel","import {useEffect, useRef} from \"react\"\r\n\r\nexport const useCleanup = (target, value, cleanup) => {\r\n    const ref = useRef()\r\n\r\n    useEffect(() => {\r\n        if(ref.current === target) {\r\n            cleanup()\r\n        }       \r\n        ref.current = value\r\n    }, [value])\r\n}","const defaultAbilitySettings = {\r\n    \"mind-flay\": {\r\n        cooldown: 0,\r\n        resource: 12,\r\n        hasted: true,\r\n        casttime: 3000,\r\n        ticks: 4,\r\n        type: \"channel\",\r\n    },\r\n    \"void-bolt\": {\r\n        cooldown: 4500,\r\n        resource: 20,\r\n        hasted: true,\r\n        rankTwo: false,\r\n        type: \"instant\",\r\n        charges: 1,\r\n        extension: 3000\r\n    },\r\n    \"void-eruption\": {\r\n        cooldown: 0,\r\n        type: \"cast\",\r\n        casttime: 2000,\r\n        threshold: 90\r\n    },\r\n    \"mind-blast\": {\r\n        cooldown: 7500,\r\n        resource: 12,\r\n        hasted: true,\r\n        type: \"cast\",\r\n        casttime: 1500,\r\n        charges: 1,\r\n        cdr: 1500\r\n    },\r\n    \"shadow-word-death\": {\r\n        cooldown: 9000,\r\n        resource: 15,\r\n        type: \"instant\",\r\n        charges: 1,\r\n    },\r\n    \"void-torrent\": {\r\n        cooldown: 45000,\r\n        resource: 30,\r\n        type: \"channel\",\r\n        casttime: 4000,\r\n        ticks: 10,\r\n    },\r\n    \"shadow-word-pain\": {\r\n        cooldown: 0,\r\n        resource: 4,\r\n        type: \"instant\"\r\n    },\r\n    \"vampiric-touch\": {\r\n        cooldown: 0,\r\n        resource: 6,\r\n        type: \"cast\",\r\n        casttime: 1500\r\n    }\r\n}\r\n\r\nexport default defaultAbilitySettings","const defaultAuraSettings = {\r\n    stats: {\r\n        displayName: \"Stats\",\r\n        haste: 0\r\n    },\r\n    voidform: {\r\n        displayName: \"Voidform\",\r\n        drainStart: 6,\r\n        drainRate: .72,\r\n        hasteStart: 0,\r\n        hasteStack: .005,\r\n        maxStacks: 0\r\n    },\r\n    lingeringInsanity: {\r\n        displayName: \"Lingering Insanity\",\r\n        type: \"decay\",\r\n        duration: 60000,\r\n        afterVoidformEntry: false,\r\n        hasteRetention: 1,\r\n        decayRate: 3000,\r\n        hasteDecay: .01\r\n    },\r\n    \"shadow-word-pain\": {\r\n        displayName: \"Shadow Word: Pain\",\r\n        baseDuration: 16000,\r\n        ticks: 8,\r\n        resource: 0\r\n    },\r\n    \"vampiric-touch\": {\r\n        displayName: \"Vampiric Touch\",\r\n        baseDuration: 21000,\r\n        ticks: 7,\r\n        resource: 0\r\n    }\r\n}\r\n\r\nexport default defaultAuraSettings","import {Base64} from \"js-base64\"\r\nimport abilitySettings from \"../lib/abilitySettings\"\r\nimport auraSettings from \"../lib/auraSettings\"\r\n\r\nconst parseAbility = (ability, key) => {\r\n    let abilitySetting = abilitySettings[key]\r\n    let result = Object.keys(abilitySetting).reduce((obj, k) => {\r\n        let userSetting = ability[k]\r\n        //might want to look at options\r\n        let setting = abilitySetting[k]\r\n\r\n        // console.log(key)\r\n        // console.log(k)\r\n\r\n        if(userSetting === null || userSetting === undefined) throw new Error(\"Missing ability setting in input \" + k)\r\n\r\n        // console.log(key)\r\n        // console.log(userSetting)\r\n        // console.log(setting.value)\r\n\r\n        if(typeof userSetting !== typeof setting) throw new Error(\"Ability setting has invalid format\")\r\n        \r\n        obj[k] = userSetting\r\n\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst parseAbilitySettings = (abilities) => {\r\n    let result = {}\r\n\r\n    console.log(abilities)\r\n\r\n    Object.keys(abilitySettings).forEach(a => {\r\n        let ability = abilities[a]\r\n        //either default or throw\r\n\r\n        if(!ability) throw new Error(\"Missing ability in input\")\r\n\r\n        result[a] = parseAbility(ability, a)\r\n    })\r\n\r\n    return result\r\n}\r\n\r\nconst parseAura = (aura, key) => {\r\n    let auraSetting = auraSettings[key]\r\n\r\n    let result = Object.keys(auraSetting).reduce((obj, k) => {\r\n        let userSetting = aura[k]\r\n        let setting = auraSetting[k]\r\n\r\n        if(userSetting === null || auraSetting === undefined) throw new Error(\"Missing aura setting in input \" + k)\r\n        if(typeof userSetting !== typeof setting) throw new Error(\"Aura setting has invalid format\")\r\n\r\n        obj[k] = userSetting\r\n\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst parseAuraSettings = (auras) => {\r\n    let result = {}\r\n    Object.keys(auraSettings).forEach(a => {\r\n        let aura = auras[a]\r\n\r\n        if(!aura) throw new Error(\"Missing aura in input\")\r\n\r\n        result[a] = parseAura(aura, a)\r\n    })\r\n\r\n    return result\r\n}\r\n\r\nexport const importSettings = (settings, includeKeybinds) => {\r\n\r\n    try {\r\n        let parsedSettings = JSON.parse(Base64.decode(settings))\r\n\r\n        console.log(parsedSettings)\r\n\r\n        let parsedAbilitySettings = parseAbilitySettings(parsedSettings.abilitySettings)\r\n        let parsedAuraSettings = parseAuraSettings(parsedSettings.auraSettings)\r\n        let abilityConfig = formatAbilityConfig(parsedSettings.abilityConfig, includeKeybinds)\r\n\r\n        return {\r\n            abilitySettings: parsedAbilitySettings, \r\n            auraSettings: parsedAuraSettings,\r\n            abilityConfig\r\n        }\r\n    }\r\n\r\n    catch(e) {\r\n        throw new Error(\"An error occurred while parsing input data.\\nReason: \" + e.message)\r\n    }\r\n}\r\n\r\nconst formatSingleAbilitySetting = (setting) => {\r\n    let result = Object.keys(setting).reduce((obj, k) => {\r\n        obj[k] = setting[k]\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst formatAbilitySettingsForExport = (settings) => {\r\n    let result = Object.keys(settings).reduce((obj, k) => {\r\n        let ability = settings[k]\r\n        let formattedAbility = formatSingleAbilitySetting(ability)\r\n        obj[k] = formattedAbility\r\n        return obj\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nconst formatAbilityConfig = (settings, includeKeybinds) => {\r\n    let result = Object.keys(settings).reduce((result, k) => {\r\n        let {keybind, disabled} = settings[k]\r\n\r\n        result[k] = {disabled: !!disabled}\r\n        if(includeKeybinds) result[k].keybind = keybind\r\n        \r\n        return result\r\n    }, {})\r\n\r\n    return result\r\n}\r\n\r\nexport const exportSettings = (currentSettings) => {\r\n    let formattedAbilitySettings = formatAbilitySettingsForExport(currentSettings.abilitySettings)\r\n    let formattedAbilityConfig = formatAbilityConfig(currentSettings.abilities, true)\r\n\r\n    let combined =  {\r\n        abilitySettings: formattedAbilitySettings,\r\n        auraSettings: currentSettings.auraSettings,\r\n        abilityConfig: formattedAbilityConfig\r\n    }\r\n\r\n    console.log(combined)\r\n\r\n    let result = Base64.encode(JSON.stringify(combined))\r\n\r\n    return result\r\n}","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport { exportSettings, importSettings } from \"../../utils/importExport\"\r\n\r\nimport \"./Panel.css\"\r\n\r\nconst ExportPanel = (props) => {\r\n\r\n    const {settings, onImport, currentPanel, onClick, closePanel} = props\r\n\r\n    const panel = \"export\"\r\n    const header = \"Import/Export Settings\"\r\n    const panelClass = \"left-panel\"\r\n    const placeholderText = \"Import custom settings here...\"\r\n    const exportTextAreaId = \"export-content\"\r\n    const rows = 20\r\n    const cols = 25\r\n\r\n    const [exportData, setExportData] = useState(\"\")\r\n    const [inputData, setInputData] = useState(\"\")\r\n    const [includeKeybinds, setIncludeKeybinds] = useState(false)\r\n\r\n    const handleImport = () => {\r\n        const settings = importSettings(inputData, includeKeybinds)\r\n        onImport(settings)\r\n        setInputData(\"\")\r\n    }\r\n\r\n    const handleExport = () => {\r\n        const data = exportSettings(settings)\r\n\r\n        setExportData(data)\r\n    }\r\n\r\n    const copyToClipBoard = () => {\r\n        const textArea = document.getElementById(exportTextAreaId)\r\n\r\n        textArea.select()\r\n\r\n        try {\r\n            document.execCommand(\"copy\")\r\n\r\n        }\r\n        catch (err) {\r\n            //set the message\r\n        }\r\n    }\r\n\r\n    const handleInputChange = (e) => {\r\n        let data = e.target.value\r\n\r\n        setInputData(data)\r\n    }\r\n\r\n    const reset = () => {\r\n        setExportData(\"\")\r\n        setInputData(\"\")\r\n        setIncludeKeybinds(false)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"-350px\"})`}}>\r\n            <div className=\"vertical-panel-content\">\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Import Settings</div>\r\n                    <textarea className=\"panel-text-area\" rows={rows} cols={cols} placeholder={placeholderText} value={inputData} onChange={handleInputChange}></textarea>\r\n                    <div>\r\n                        <label>Include keybinds</label>\r\n                        <input type=\"checkbox\" onChange={() => setIncludeKeybinds(!includeKeybinds)} checked={includeKeybinds} />\r\n                    </div>\r\n                    <div className=\"panel-button-container\">\r\n                        <button className=\"panel-button panel-input-button\" onClick={handleImport} disabled={!inputData}>Import</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Export Settings</div>\r\n                    <textarea id={exportTextAreaId} className=\"panel-text-area\" rows={rows} cols={cols} value={exportData} readOnly={true}></textarea>\r\n                    <div className=\"panel-button-container\">\r\n                        <button className=\"panel-button panel-input-button\" onClick={handleExport}>Export</button>\r\n                        <button className=\"panel-button panel-input-button\" onClick={copyToClipBoard} disabled={!exportData}>Copy</button>\r\n                    </div>\r\n                </div>      \r\n            </div> \r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default ExportPanel","import React, { useState } from \"react\"\r\n\r\nconst TimeTextOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value || parseFloat(e.target.value) < 0) return\r\n        onChange(parseFloat(e.target.value)*1000)\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value/1000} min=\"0\" step=\".1\" onChange={handleChange} />sec</span>\r\n}\r\n\r\nconst NumberTextOption = (props) => {\r\n    const {value, onChange, unit} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value || parseFloat(e.target.value) < 0) return\r\n        onChange(parseInt(e.target.value))\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" onChange={handleChange} /> {unit}</span>\r\n}\r\n\r\nconst FloatTextOption = (props) => {\r\n    const {value, onChange, unit} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value || parseFloat(e.target.value) < 0) return\r\n        onChange(parseFloat(e.target.value))\r\n    }\r\n    \r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value} min=\"0\" step=\".01\" onChange={handleChange} /> {unit}</span>\r\n}\r\n\r\nconst PercentTextOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const handleChange = (e) => {\r\n        if(!e.target.value || parseFloat(e.target.value) < 0) return\r\n        onChange(parseFloat(e.target.value)/100)\r\n    }\r\n\r\n    return <span><input className=\"setting-option-input\" type=\"number\" value={value*100} min=\"0\" step=\".5\" onChange={handleChange} />%</span>\r\n}\r\n\r\nconst BooleanOption = (props) => {\r\n    const {value, onChange} = props\r\n\r\n    const handleChange = (e) => {\r\n        onChange(e.target.checked)\r\n    }\r\n\r\n    return <input type=\"checkbox\" defaultChecked={value} onChange={handleChange} />\r\n}\r\n\r\nconst SelectOption = (props) => {\r\n    const {value, onChange, name, options} = props\r\n\r\n    const handleChange = (e) => {\r\n        onChange(e.target.value)\r\n    }\r\n\r\n    return (\r\n        options.map(o => (\r\n            <div>\r\n                <input type=\"radio\" id={o.value} name={name} value={o.value} defaultChecked={o.value === value} onChange={handleChange} />\r\n                <label htmlFor={o.value}>{o.displayName}</label>\r\n            </div>\r\n        ))\r\n    )\r\n}\r\n\r\nexport default Option = (type, value, onChange, key, name, rest) => {\r\n    switch(type) {\r\n        case \"time\":\r\n            return <TimeTextOption key={key} value={value} onChange={onChange} />\r\n        case \"number\":\r\n            return <NumberTextOption key={key} value={value} onChange={onChange} {...rest} />\r\n        case \"float\":\r\n            return <FloatTextOption key={key} value={value} onChange={onChange} {...rest} />\r\n        case \"percent\":\r\n            return <PercentTextOption key={key} value={value} onChange={onChange} />\r\n        case \"boolean\":\r\n            return <BooleanOption key={key} value={value} onChange={onChange} />\r\n        case \"select\":\r\n            return <SelectOption key={key} value={value} name={name} onChange={onChange} {...rest} />\r\n        default:\r\n            return null\r\n    }\r\n}","import React from \"react\"\r\nimport Option from \"./optionFactory\"\r\nimport \"./WhatIs.css\"\r\nimport \"./SettingOption.css\"\r\n\r\nconst SettingOption = (props) => {\r\n    const {value, name, type, whatIs, displayName, onChange, onHelp, closeHelp, parentKey, ...rest} = props\r\n\r\n    const handleInputChange = (v) => {\r\n        onChange(name, v)\r\n    }\r\n\r\n    const handleOnHelp = (e) => {\r\n        const pos = {\r\n            x: e.target.offsetLeft,\r\n            y: e.target.offsetTop\r\n        }\r\n        //console.log(e.target.offsetLeft)\r\n        //console.log(e.target.offsetTop)\r\n        onHelp(displayName, whatIs, pos)\r\n    }\r\n\r\n    return (\r\n        <div className=\"setting-option\">\r\n            <div>\r\n                <i className=\"fa fa-question-circle what-is-icon\" onMouseEnter={handleOnHelp} onMouseLeave={closeHelp}></i>\r\n            </div>\r\n            <div className=\"setting-option-header\">{displayName}</div>\r\n            {Option(type, value, handleInputChange, parentKey + \"-input\", name, rest)}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default SettingOption","import React from \"react\"\r\nimport \"./WhatIs.css\"\r\n\r\nconst WhatIs = (props) => {\r\n    const {name, text, xPos, yPos} = props\r\n\r\n    //console.log(xPos, yPos)\r\n    const minimumHeight = 30\r\n\r\n    const style = {\r\n        left: `${xPos}px`,\r\n        top: `${yPos+minimumHeight}px`\r\n    }\r\n    \r\n    return (\r\n        <div className=\"what-is\" style={style}>\r\n            <div className=\"what-is-header\">What is... {name}?</div>\r\n            <div className=\"what-is-description\">{text}</div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WhatIs","import React, {useState} from \"react\"\r\nimport SettingOption from \"./SettingOption\"\r\nimport WhatIs from \"./WhatIs\"\r\nimport \"./Panel.css\"\r\n\r\nconst CustomizeSection = (props) => {\r\n\r\n    const {name, setting, options, onChange} = props\r\n\r\n    const [showWhatIs, setShowWhatIs] = useState(false)\r\n    const [whatIs, setWhatIs] = useState({})\r\n\r\n    const handleChange = (optionKey, option) => {\r\n        const newSetting = {...setting, [optionKey]: option}\r\n        onChange(newSetting, name)\r\n    }\r\n\r\n    const handleShowWhatIs = (name, text, pos) => {\r\n        setShowWhatIs(true)\r\n        setWhatIs({\r\n            name,\r\n            text,\r\n            xPos: pos.x,\r\n            yPos: pos.y\r\n        })    \r\n    }\r\n\r\n    const closeWhatIs = () => {\r\n        setShowWhatIs(false)\r\n        setWhatIs({})\r\n    }\r\n\r\n    return (\r\n        <div className=\"customize-section\">\r\n            <div className=\"customoze-section-header\">{setting.displayName}</div>\r\n            {options.map(o => {\r\n            return <SettingOption {...o} key={`${name}-${o.key}`} value={setting[o.key]} name={o.key} parentKey={`${name}-${o.key}`} onChange={handleChange} onHelp={handleShowWhatIs} closeHelp={closeWhatIs}/>\r\n            })}\r\n            {showWhatIs ? <WhatIs {...whatIs}/> : null}\r\n        </div>\r\n            \r\n    )\r\n}\r\n\r\nexport default CustomizeSection","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport CustomizeSection from \"./CustomizeSection\"\r\nimport {abilityOptions, auraOptions} from \"../../lib/options\"\r\nimport \"./Panel.css\"\r\n\r\nconst SettingsPanel = (props) => {\r\n\r\n    const {settings, currentPanel, onAbilitySet, onAuraSet, onClick, closePanel} = props\r\n\r\n    const {abilities, auras} = settings\r\n\r\n    const panel = \"settings\"\r\n    const header= \"Custom Settings\"\r\n    const panelClass = \"right-panel\"\r\n\r\n    const [currentAbilities, setCurrentAbilities] = useState(abilities)\r\n    const [currentAuras, setCurrentAuras] = useState(auras)\r\n    const [activeAbilitySection, setActiveAbilitySection] = useState(Object.keys(abilities)[0])\r\n    const [activeAuraSection, setActiveAuraSection] = useState(Object.keys(auras)[0])\r\n\r\n    const handleAbilitySettingChange = (setting, key) => {\r\n        const newAbilities = {...currentAbilities, [key]: setting}\r\n        setCurrentAbilities(newAbilities)\r\n    }\r\n\r\n    const handleAuraSettingChange = (setting, key) => {\r\n        const newAuras = {...currentAuras, [key]: setting}\r\n        setCurrentAuras(newAuras)\r\n    }\r\n\r\n    const handleAbilitySet = () => {\r\n        onAbilitySet(currentAbilities)\r\n    }\r\n\r\n    const handleAuraSet = () => {\r\n        onAuraSet(currentAuras)\r\n    }\r\n\r\n    const showAbilityOptions = (e) => {\r\n        const settingKey = e.target.getAttribute(\"setting\")\r\n        setActiveAbilitySection(settingKey)\r\n    }\r\n\r\n    const showAuraOptions = (e) => {\r\n        const settingKey = e.target.getAttribute(\"setting\")\r\n        setActiveAuraSection(settingKey)\r\n    }\r\n\r\n    const reset = () => {\r\n        setActiveAbilitySection(Object.keys(abilities)[0])\r\n        setActiveAuraSection(Object.keys(auras)[0])\r\n        setCurrentAuras(auras)\r\n        setCurrentAbilities(abilities)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass} style={{transform: `translateX(${currentPanel === panel ? \"0px\": \"350px\"}`}}>\r\n            <div className=\"vertical-panel-content\">\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Customize Abilities</div>\r\n                    <div className=\"settings-header-container\">\r\n                        {Object.keys(abilities).map(k => \r\n                            <div key={k} className={activeAbilitySection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAbilityOptions}>{abilities[k].displayName}</div>    \r\n                        )}\r\n                    </div>\r\n                    {activeAbilitySection ? <CustomizeSection name={activeAbilitySection} setting={currentAbilities[activeAbilitySection]} options={abilityOptions[activeAbilitySection]} onChange={handleAbilitySettingChange}/> : null}\r\n                    <button className=\"panel-button\" onClick={handleAbilitySet}>Apply</button>\r\n                </div>\r\n                <div className=\"panel-content-container\">\r\n                    <div className=\"panel-content-header\">Customize Auras</div>\r\n                        <div className=\"settings-header-container\">\r\n                            {Object.keys(auras).map(k => \r\n                                <div key={k} className={activeAuraSection === k ? \"settings-header-active\" : \"settings-header\"} setting={k} onClick={showAuraOptions}>{auras[k].displayName}</div>    \r\n                            )}\r\n                        </div>\r\n                        {activeAuraSection ? <CustomizeSection name={activeAuraSection} setting={currentAuras[activeAuraSection]} options={auraOptions[activeAuraSection]} onChange={handleAuraSettingChange}/> : null}\r\n                        <button className=\"panel-button\" onClick={handleAuraSet}>Apply</button>                 \r\n                </div>\r\n            </div>\r\n        </Panel>      \r\n    )\r\n}\r\n\r\nexport default SettingsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\nimport {keybinds} from \"../../lib/constants\"\r\nimport \"./Panel.css\"\r\nimport \"./Tooltip.css\"\r\n\r\nconst AbilityKeybindsPanel = (props) => {\r\n\r\n    const {abilities, currentPanel, onKeybind, onToggle, onClick, onPause, closePanel} = props\r\n\r\n    const panel = \"abilitykeybinds\"\r\n    const header = \"Ability and Keybinds\"\r\n    const panelClass = \"bottom-panel\"\r\n\r\n    const defaultState = {\r\n        tooltip: \"\",\r\n        keybindText: \"\",\r\n        currentAbility: \"\"\r\n    }\r\n\r\n    const [tooltip, setTooltip] = useState(defaultState.tooltip)\r\n    const [keybindText, setKeybindText] = useState(defaultState.keybindText)\r\n    const [currentAbility, setCurrentAbility] = useState(defaultState.currentAbility)\r\n\r\n    const handleClose = () => {\r\n        setTooltip(defaultState.tooltip)\r\n        setKeybindText(defaultState.keybindText)\r\n        setCurrentAbility(defaultState.currentAbility)\r\n\r\n        closePanel()\r\n    }\r\n\r\n    const currentAbilityRef = useRef(currentAbility)\r\n    currentAbilityRef.current = currentAbility\r\n\r\n    const showToolTip = (e) => {\r\n        setTooltip(e.target.alt)\r\n    }\r\n\r\n    const hideToolTip = () => {\r\n        setTooltip(\"\")\r\n    }\r\n\r\n    const prepareToBindAbility = (e) => {\r\n        let ability = e.target.getAttribute(\"ability\")\r\n        setCurrentAbility(ability)\r\n\r\n        setKeybindText(`Press any key to bind to ${abilities[ability].displayName}`)\r\n\r\n        document.addEventListener(\"keypress\", bindAbility, {once: true})\r\n    }\r\n\r\n    const bindAbility = (event) => {\r\n        document.removeEventListener(\"keypress\", bindAbility)\r\n        let keybind = {\r\n            key: event.key,\r\n            keybindText: event.key\r\n        }\r\n\r\n        if(keybinds[keybind.key]) keybind.keybindText = keybinds[keybind.key]\r\n        if(keybind.key.match(/[a-z]/)) keybind.keybindText = keybind.key.toUpperCase()\r\n        if(keybind.key.match(/[A-Z]/)) keybind.keybindText = \"S-\" + keybind.key\r\n        \r\n        let ability = currentAbilityRef.current \r\n\r\n        onKeybind(keybind, ability)\r\n        setKeybindText(`${abilities[ability].displayName} successfuly bound to ${keybind.keybindText}`)\r\n    }\r\n\r\n    const reset = () => {\r\n        document.removeEventListener(\"keypress\", bindAbility)\r\n        setTooltip(defaultState.tooltip)\r\n        setKeybindText(defaultState.keybindText)\r\n        setCurrentAbility(defaultState.currentAbility)\r\n    }\r\n\r\n    return (\r\n        <Panel panel={panel} currentPanel={currentPanel} reset={reset} onClick={onClick} header={header} style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"250px\"}`}} panelClass={panelClass} handleClose={handleClose}>\r\n            <div className=\"horizontal-panel-content\">\r\n                <div className=\"panel-content-header\">Change Abilities and Keybinds</div>\r\n                <div className=\"tooltip\">\r\n                    <span className=\"tooltip-text\" visibility={(!!tooltip).toString()}>\r\n                        {tooltip}\r\n                    </span>\r\n                </div>\r\n                <div className=\"panel-abilities-container\">\r\n                    {Object.keys(abilities).map(k => {\r\n                        if(k === \"void-eruption\") return\r\n                        return <div className=\"panel-ability-container\" key={k}>\r\n                            <img  \r\n                                className=\"hover-pointer\" \r\n                                alt={abilities[k].displayName}\r\n                                ability={k} \r\n                                onMouseOver={showToolTip}\r\n                                onMouseOut={hideToolTip}\r\n                                onClick={prepareToBindAbility}\r\n                                src={abilities[k].icon}\r\n                                height={50}\r\n                                width={50}\r\n                            />\r\n                        <button className=\"panel-button\" onClick={() => onToggle(k)}>{abilities[k].disabled ? \"Enable\" : \"Disable\"}</button>\r\n                        </div>\r\n                })}\r\n                </div>\r\n                <div>{keybindText ? keybindText : null}</div>\r\n            </div>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default AbilityKeybindsPanel","import React, {useState, useEffect, useReducer, useRef} from 'react';\r\nimport Panel from \"./Panel\"\r\n\r\nimport \"./Panel.css\"\r\n\r\nconst AboutPanel = (props) => {\r\n    const {currentPanel, onClick, closePanel} = props\r\n\r\n    const panel = \"about\"\r\n    const header= \"About\"\r\n    const panelClass = \"middle-panel\"\r\n\r\n    return (\r\n        <Panel panel={panel} onClick={onClick} handleClose={closePanel} header={header} panelClass={panelClass}\r\n            style={{transform: `translateY(${currentPanel === panel ? \"0px\": \"-685px\"}`}}\r\n        >\r\n            <div className=\"middle-panel-content\">\r\n                <div className=\"panel-content-header\">About</div>\r\n                <div className=\"medium-text left-text panel-text-content\">\r\n                    <p>\r\n                    Voidform Optimizer is a thought experiment I had.\r\n                    </p>\r\n                    <p>\r\n                    I am convinced that many, although not all, players' grievances with Voidform are caused by the\r\n                    implementations of Voidform they have experienced, and not by the design of Voidform itself. Therefore I have made it my mission to allow others\r\n                    to experience Voidform in a myriad of ways, in hope that they will find what they most enjoy about it, share it with others, and maybe as a\r\n                    community come to an agreement on the best ways to make Voidform be the best it can be.\r\n                    </p>\r\n                    <p>\r\n                    If you have any questions, feedback, or bugs to report, please feel free to DM me on Discord at Shot#1711.\r\n                    </p>\r\n\r\n                </div>\r\n            </div>\r\n        </Panel>      \r\n    )\r\n}\r\n\r\nexport default AboutPanel","const defaultAbilities = {\r\n    \"mind-flay\": {\r\n        displayName: \"Mind Flay\",\r\n        keybind: {\r\n            key: \"1\",\r\n            keybindText: \"1\"\r\n        },\r\n        icon: \"images/mind-flay.jpg\"\r\n    },\r\n    \"mind-blast\": {\r\n        displayName: \"Mind Blast\",\r\n        keybind: {\r\n            key: \"2\",\r\n            keybindText: \"2\"\r\n        },\r\n        icon: \"images/mind-blast.jpg\"\r\n    },\r\n    \"void-bolt\": {\r\n        displayName: \"Void Bolt\",\r\n        keybind: {\r\n            key: \"3\",\r\n            keybindText: \"3\"\r\n        },\r\n        icon: \"images/void-bolt.jpg\"\r\n    },\r\n    \"void-eruption\": {\r\n        displayName: \"Void Eruption\",\r\n        keybind: {\r\n            key: \"3\",\r\n            keybindText: \"3\"\r\n        },\r\n        icon: \"images/void-eruption.jpg\"\r\n    },\r\n    \"shadow-word-death\": {\r\n        displayName: \"Shadow Word: Death\",\r\n        keybind: {\r\n            key: \"4\",\r\n            keybindText: \"4\"\r\n        },\r\n        icon: \"images/shadow-word-death.jpg\"\r\n    },\r\n    \"void-torrent\": {\r\n        displayName: \"Void Torrent\",\r\n        keybind: {\r\n            key: \"5\",\r\n            keybindText: \"5\"\r\n        },\r\n        icon: \"images/void-torrent.jpg\"\r\n    },\r\n    \"shadow-word-pain\": {\r\n        displayName: \"Shadow Word: Pain\",\r\n        keybind: {\r\n            key: \"6\",\r\n            keybindText: \"6\"\r\n        },\r\n        icon: \"images/shadow-word-pain.jpg\"\r\n    },\r\n    \"vampiric-touch\": {\r\n        displayName: \"Vampiric Touch\",\r\n        keybind: {\r\n            key: \"7\",\r\n            keybindText: \"7\"\r\n        },\r\n        icon: \"images/vampiric-touch.jpg\"\r\n    }\r\n}\r\n\r\nexport default defaultAbilities","import React from \"react\"\r\n\r\nconst FormTextAreaField = (props) => {\r\n\r\n    const {value, id, label, className, placeHolder, onChange} = props\r\n\r\n    const handleChange = (e) => onChange(id, e.target.value)\r\n\r\n    return (\r\n        <div className={`form-field ${className}`}>\r\n            <label htmlFor={id}>{label}</label>\r\n            <div className={\"form-input-container\"}>\r\n                <textarea className=\"panel-text-area form-input-field\" id={id} value={value} placeholder={placeHolder} required={true} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormTextAreaField","import React from \"react\"\r\n\r\nconst FormTextField = (props) => {\r\n\r\n    const {value, id, label, placeHolder, onChange} = props\r\n\r\n    const handleChange = (e) => onChange(id, e.target.value)\r\n\r\n    return (\r\n        <div className=\"form-text-field form-title\">\r\n            <label className=\"form-input-title\" htmlFor={id}>{label}</label>\r\n            <input className=\"panel-text-area form-input-field\" type=\"text\" id={id} value={value} placeholder={placeHolder} required={true} onChange={handleChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormTextField","import Github from \"github-api\"\r\n\r\nconst repository = \"voidform-optimizer\"\r\nconst owner = \"ryeshot\"\r\n\r\nconst github = new Github({\r\n    token: process.env.REACT_APP_ACCESS_TOKEN\r\n})\r\nconst issues = github.getIssues(owner, repository)\r\n\r\nconst formatBugReportContent = (body) => {\r\n    const descriptionHeader = \"### Give a brief description of the issue\"\r\n    //const reproductionHeader = \"### How can this issue be reproduced?\"\r\n    const expectedBehaviorHeader = \"### What is the expected behavior?\"\r\n    const actualBehaviorHeader = \"### What is the actual behavior?\"\r\n\r\n    const headers = [descriptionHeader, expectedBehaviorHeader, actualBehaviorHeader]\r\n\r\n    return Object.keys(body).reduce((content, key, i) => {\r\n        return content.concat([headers[i], body[key]])\r\n    }, []).join(\"\\n\")\r\n}\r\n\r\nconst sendBugReport = async (report) => {\r\n    const data = {\r\n        ...report\r\n      }\r\n\r\n    await issues.createIssue(data)\r\n}\r\n\r\nexport const submitBugReport = async (data, success, fail) => {\r\n\r\n    const {title, ...body} = data\r\n\r\n    console.log(\"About to format content\")\r\n\r\n    const content = formatBugReportContent(body)\r\n\r\n    console.log(\"Formatted content\")\r\n    console.log(content)\r\n\r\n    try {\r\n        await sendBugReport({title: `[BUG] ${title}`  , body: content})\r\n        success()\r\n    }\r\n    catch(err){\r\n        console.log(err)\r\n        fail()\r\n    }\r\n}\r\n","import React, {useState} from \"react\"\r\nimport Form from \"./Form\"\r\nimport FormTextAreaField from \"./FormTextAreaField\"\r\nimport FormTextField from \"./FormTextField\"\r\nimport {submitBugReport} from \"../../utils/bugreport\"\r\n\r\nconst fields = [{\r\n    id: \"bug-report-description\",\r\n    label: \"Description\",\r\n    className: \"form-field-small\"\r\n    // placeHolder: \"Enter a description of the bug...\"\r\n},\r\n{\r\n    id: \"bug-report-expected\",\r\n    label: \"Expected Behavior\",\r\n    className: \"form-field-medium\"\r\n    // placeHolder: \"Enter the expected behavior...\"\r\n},\r\n{\r\n    id: \"bug-report-actual\",\r\n    label: \"Actual Behavior\",\r\n    className: \"form-field-medium\"\r\n    // placeHolder: \"Enter the actual behavior...\"\r\n}]\r\n\r\nconst titleField = {\r\n    id: \"title\",\r\n    label: \"Title\"\r\n}\r\n\r\nconst formTitle = \"Bug Report\"\r\n\r\nconst submitSuccess = \"Bug report successfully submitted!\"\r\nconst submitFail = \"Failed to submit bug report\"\r\n\r\nconst BugReport = (props) => {\r\n\r\n    const {closeForm} = props\r\n    const [data, setData] = useState({})\r\n    const [canSubmit, setCanSubmit] = useState(true)\r\n    const [submitMessage, setSubmitMessage] = useState(\"\")\r\n\r\n    const onChange = (id, value) => {\r\n        setData({...data, [id]: value})\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        const success = () => setSubmitMessage(submitSuccess)\r\n        const fail = () => setSubmitMessage(submitFail)\r\n\r\n        submitBugReport(data, success, fail)\r\n        setCanSubmit(false)\r\n    }\r\n\r\n    return <div className=\"modal\">\r\n        <div className=\"modal-content panel\">\r\n            <div className=\"form-title\">\r\n                {formTitle}\r\n            </div>\r\n            <form className=\"form\" onSubmit={onSubmit}>\r\n                <FormTextField value={data.title} {...titleField} onChange={onChange} />\r\n                {fields.map(f => <FormTextAreaField key={f.id} value={data[f.id]} {...f} onChange={onChange} />)}\r\n                <div>\r\n                    <input className=\"panel-button\" type=\"submit\" value=\"Submit\" disabled={!canSubmit} />\r\n                </div>\r\n            </form>\r\n            <div>\r\n                {submitMessage}\r\n            </div>\r\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default BugReport","import React, {useState} from \"react\"\r\nimport Form from \"./Form\"\r\nimport FormTextAreaField from \"./FormTextAreaField\"\r\nimport FormTextField from \"./FormTextField\"\r\n\r\nconst fields = []\r\n\r\nconst submitSuccess = \"Feature request successfully submitted!\"\r\nconst submitFail = \"Failed to submit feature request\"\r\n\r\nconst FeatureRequest = (props) => {\r\n\r\n    const {closeForm} = props\r\n\r\n    return <div className=\"modal\">\r\n        <div className=\"modal-content panel\">\r\n            Coming soon!\r\n            <button className=\"panel-button panel-exit-button\" onClick={closeForm}>x</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default FeatureRequest","import React, {useState} from \"react\"\r\nimport BugReport from \"./BugReport\"\r\nimport FeatureRequest from \"./FeatureRequest\"\r\nimport \"./Form.css\"\r\nimport \"../panels/Panel.css\"\r\nimport \"../panels/SettingOption.css\"\r\n\r\nconst Forms = () => {\r\n\r\n    const [showBugReport, setShowBugReport] = useState(false)\r\n    const [showFeatureRequest, setShowFeatureRequest] = useState(false)\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"forms-container\">\r\n            <div>\r\n                <button className=\"panel-button\" onClick={() => setShowBugReport(true)}>Report a Bug</button>\r\n                <button className=\"panel-button\" onClick={() => setShowFeatureRequest(true)}>Request a Feature</button>\r\n            </div>\r\n                {showBugReport ? <BugReport closeForm={() => setShowBugReport(false)} /> : null} \r\n                {showFeatureRequest ? <FeatureRequest closeForm={() => setShowFeatureRequest(false)} /> : null} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Forms","import React, {useState, useEffect, useReducer} from 'react';\r\nimport './App.css';\r\nimport ResourceBar from \"./components/ResourceBar\"\r\nimport AbilityBar from \"./components/AbilityBar\"\r\nimport AuraBar from \"./components/auras/AuraBar\"\r\nimport ExportPanel from \"./components/panels/ExportPanel\"\r\nimport SettingsPanel from \"./components/panels/SettingsPanel\"\r\nimport AbilityKeybindsPanel from \"./components/panels/AbilityKeybindsPanel\"\r\nimport AboutPanel from \"./components/panels/AboutPanel\"\r\nimport defaultAbilities from \"./lib/abilities\"\r\nimport defaultAbilitySettings from \"./lib/abilitySettings\"\r\nimport defaultAuraSettings from \"./lib/auraSettings\"\r\nimport Forms from \"./components/forms/Forms\"\r\n\r\nconst App = () => {\r\n\r\n  const [panel, setPanel] = useState()\r\n  const [abilitySettings, setAbilitySettings] = useState(defaultAbilitySettings)\r\n  const [abilities, setAbilities] = useState(defaultAbilities)\r\n  const [auraSettings, setAuraSettings] = useState(defaultAuraSettings)\r\n  const [keyEventsPaused, setKeyEventsPaused] = useState(false)\r\n  const [reset, setReset] = useState(false)\r\n  const [haste, setHaste] = useState(0)\r\n\r\n  const defaultState = {\r\n    resource: 0,\r\n    auras: {\r\n      stats: {\r\n        haste\r\n      },\r\n      voidform: {\r\n        active: false,\r\n        stacks: 0,\r\n        haste: 0,\r\n        paused: false,\r\n      },\r\n      lingeringInsanity: {\r\n        active: false,\r\n        stacks: 0,\r\n        haste: 0\r\n      },\r\n      \"shadow-word-pain\": {\r\n        active: false,\r\n        maxDuration: 16000\r\n      },\r\n      \"vampiric-touch\": {\r\n        active: false,\r\n        maxDuration: 24000\r\n      }\r\n    },\r\n    abilities: {\r\n      \"void-eruption\": {\r\n        unusable: true\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAuraPandemic = (aura, baseDuration, now) => {\r\n    const endTime = aura.startTime + aura.maxDuration\r\n    const remaining = endTime - now\r\n    const pandemicDuration = Math.min(.3 * baseDuration, remaining)\r\n\r\n    aura.maxDuration = baseDuration + pandemicDuration\r\n    aura.startTime = now\r\n  }\r\n\r\n  const [state, updateState] = useReducer((state, action) => {\r\n\r\n    let event = action.type\r\n    let newState = JSON.parse(JSON.stringify(state))\r\n\r\n    const voidform = newState.auras.voidform\r\n    const lingeringInsanity = newState.auras.lingeringInsanity\r\n\r\n    switch(event) {\r\n      case \"RESET\":\r\n        return defaultState\r\n      case \"RESET_ABILITIES\":\r\n        return {...defaultState, auras: state.auras}\r\n      case \"RESET_AURAS\":\r\n        const n = {...newState, auras: {...defaultState.auras, stats: state.auras.stats} }\r\n        console.log(n)\r\n        return {...newState, auras: {...defaultState.auras, stats: state.auras.stats} }\r\n      case \"HASTE_SET\":\r\n        var {source, haste} = action.payload\r\n        newState.auras[source].haste = haste\r\n        break\r\n      case \"HASTE_UPDATE\":\r\n        var {source, haste} = action.payload\r\n        newState.auras[source].haste += haste\r\n        break\r\n      case \"VOIDFORM_UPDATE\":\r\n        voidform.stacks++\r\n        voidform.haste += action.payload\r\n        break;\r\n      case \"VOIDFORM_START\":\r\n        voidform.active = true\r\n        voidform.stacks = 1\r\n        break;\r\n      case \"VOIDFORM_END\":\r\n        var {time, startingHaste} = action.payload\r\n        lingeringInsanity.active = true\r\n        lingeringInsanity.stacks = voidform.stacks\r\n        lingeringInsanity.haste = Math.round((voidform.haste - startingHaste)*1000)/1000\r\n        lingeringInsanity.startTime = time\r\n        voidform.stacks = 0\r\n        voidform.haste = 0\r\n        newState.abilities[\"void-eruption\"].unusable = true\r\n        break;\r\n      case \"LINGERING_INSANITY_START\":\r\n        var {haste, stacks} = action.payload\r\n        lingeringInsanity.haste = haste\r\n        lingeringInsanity.stacks = stacks\r\n        break;\r\n      case \"LINGERING_INSANITY_UPDATE\":\r\n        lingeringInsanity.haste += action.payload\r\n        lingeringInsanity.stacks--\r\n        if(lingeringInsanity.haste <= 0) lingeringInsanity.haste = 0\r\n        break;\r\n      case \"LINGERING_INSANITY_END\":\r\n        lingeringInsanity.active = false\r\n        lingeringInsanity.stacks = 0\r\n        lingeringInsanity.haste = 0\r\n        lingeringInsanity.startTime = 0\r\n        break;\r\n      case \"RESOURCE_UPDATE\":\r\n        let resource = Math.max(Math.min(newState.resource + action.payload.resource, 100), 0)\r\n        newState.resource = resource\r\n        if(resource <= 0 && voidform.active) {\r\n          voidform.active = false\r\n        }\r\n        if(!voidform.active && resource >= abilitySettings[\"void-eruption\"].threshold) {\r\n          newState.abilities[\"void-eruption\"].unusable = false\r\n        }\r\n        break;\r\n      case \"INSANITY_DRAIN_PAUSE_START\":\r\n        voidform.paused = true\r\n        break\r\n      case \"INSANITY_DRAIN_PAUSE_END\":\r\n        voidform.paused = false\r\n        break\r\n      case \"AURA_START\":\r\n        var {name, time} = action.payload\r\n        var aura = newState.auras[name]\r\n\r\n        aura.active ? handleAuraPandemic(aura, auraSettings[name].baseDuration, time) : aura.active = true\r\n        break\r\n      case \"AURA_BEGIN\":\r\n        var {name, time, duration} = action.payload\r\n        newState.auras[name].startTime = time\r\n        newState.auras[name].maxDuration = duration\r\n        break\r\n      case \"AURA_REFRESH\":\r\n        var {name, time} = action.payload\r\n        newState.auras[name].startTime = time\r\n        break\r\n      case \"AURA_END\":\r\n        var {name} = action.payload\r\n        newState.auras[name].active = false\r\n        newState.auras[name].startTime = 0\r\n        break\r\n      case \"DOT_EXTEND\":\r\n        const extension = abilitySettings[\"void-bolt\"].extension\r\n        const dots = [\"shadow-word-pain\", \"vampiric-touch\"]\r\n        dots.forEach(d => {\r\n          const dot = newState.auras[d]\r\n          if(!dot.active) return\r\n          dot.maxDuration += extension\r\n        })\r\n        break\r\n    }\r\n\r\n    return newState\r\n  }, defaultState)\r\n\r\n  useEffect(() => {\r\n    setHaste(calculateHaste)\r\n  }, [state.auras.stats.haste,\r\n    state.auras.voidform.haste,\r\n    state.auras.lingeringInsanity.haste])\r\n\r\n  const enterVoidform = () => {\r\n    updateState({\r\n      type: \"VOIDFORM_START\"\r\n    })\r\n  }\r\n\r\n  const gainInsanity = () => {\r\n    updateState({\r\n      type: \"RESOURCE_UPDATE\",\r\n      payload: {\r\n        resource: 10\r\n      }\r\n    })\r\n  }\r\n\r\n  const calculateHaste = () => {\r\n    const auras = state.auras\r\n    return Object.keys(auras).reduce((haste, aura) => {\r\n      if(!auras[aura].haste) return haste\r\n      return haste * (1+auras[aura].haste)\r\n    }, 1)\r\n  }\r\n\r\n  const handlePanelHeaderClick = (panel) => {\r\n    setKeyEventsPaused(true)\r\n    setPanel(panel)\r\n  }\r\n\r\n  const handlePanelClose = () => {\r\n    setKeyEventsPaused(false)\r\n    setPanel(null)\r\n  }\r\n\r\n  const handleAbilityToggle = (ability) => {\r\n    let newSettings = JSON.parse(JSON.stringify(abilities))\r\n\r\n    newSettings[ability].disabled = !newSettings[ability].disabled\r\n    if(ability === \"void-bolt\") newSettings[\"void-eruption\"].disabled = newSettings[ability].disabled\r\n\r\n    setAbilities(newSettings)\r\n  }\r\n\r\n  const setKeyBind = (keybind, ability) => {\r\n    let state = JSON.parse(JSON.stringify(abilities))\r\n    let key = keybind.key\r\n    let voidBoltOrEruption = ability === \"void-bolt\" || ability === \"void-eruption\"\r\n    Object.keys(state).forEach(k => {\r\n      let abilityKeybind = state[k].keybind\r\n      if(abilityKeybind.key === key) state[k].keybind = { keybindText: \"--\"}\r\n    })\r\n    if(voidBoltOrEruption) {\r\n      state[\"void-bolt\"].keybind = {...keybind}\r\n      state[\"void-eruption\"].keybind = {...keybind}\r\n    }\r\n    else {\r\n      state[ability].keybind = {...keybind}\r\n    }\r\n\r\n    setAbilities(state)\r\n  }\r\n\r\n  const handleImport = (settings) => {\r\n    setAllAbilities(settings.abilityConfig)\r\n    handleAbilitySet(settings.abilitySettings)\r\n    handleAuraSet(settings.auraSettings)\r\n  }\r\n\r\n  const setAllAbilities = (importedAbilities) => {\r\n    let state = Object.keys(abilities).reduce((state, ability) => {\r\n      state[ability] = {...abilities[ability], ...importedAbilities[ability]}\r\n      return state\r\n    }, {})\r\n\r\n    setAbilities(state)\r\n  }\r\n\r\n  const mergeAbilities = () => {\r\n    return Object.keys(abilities).reduce((merged, a) => {\r\n      merged[a] = {...abilities[a], ...state.abilities[a]}\r\n      return merged\r\n    }, {})\r\n  }\r\n\r\n  const abilitySettingsWithDisplayName = () => {\r\n    return Object.keys(abilitySettings).reduce((merged, a) => {\r\n      merged[a] = {...abilitySettings[a], displayName: defaultAbilities[a].displayName}\r\n      return merged\r\n    }, {}) \r\n  }\r\n\r\n  const handleAuraSet = (auraSettings) => {\r\n    handleAuraReset()\r\n    setAuraSettings(auraSettings)\r\n    const haste = auraSettings.stats.haste\r\n    updateState({\r\n      type: \"HASTE_SET\",\r\n      payload: {\r\n        source: \"stats\",\r\n        haste\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleAbilitySet = (abilitySettings) => {\r\n    handleAbilityReset()\r\n    setAbilitySettings(abilitySettings)\r\n  }\r\n\r\n  const handleAbilityReset = () => {\r\n    setReset(!reset)\r\n    updateState({\r\n      type: \"RESET_ABILITIES\"\r\n    })\r\n    updateState({\r\n      type: \"RESOURCE_UPDATE\",\r\n      payload: {\r\n        resource: 0\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleAuraReset = () => {\r\n    updateState({\r\n      type: \"RESET_AURAS\"\r\n    })\r\n  }\r\n\r\n  const handleReset = () => {\r\n    handleAbilityReset()\r\n    handleAuraReset()\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header header-panel\">\r\n        <div className=\"App-title\">\r\n          <div className=\"App-title-text\">\r\n            Voidform Optimizer\r\n          </div>\r\n        </div>\r\n        <div className=\"panel-container\">\r\n          <SettingsPanel settings={{abilities: abilitySettingsWithDisplayName(), auras: auraSettings}} onAbilitySet={handleAbilitySet} onAuraSet={handleAuraSet} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n          <AbilityKeybindsPanel abilities={abilities} currentPanel={panel} onKeybind={setKeyBind} onToggle={handleAbilityToggle} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n          <ExportPanel settings={{abilitySettings, auraSettings, abilities}} onImport={handleImport} currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose}/>\r\n          <AboutPanel currentPanel={panel} onClick={handlePanelHeaderClick} closePanel={handlePanelClose} />\r\n        </div>\r\n        <Forms />\r\n      </header>\r\n      <div className=\"App-content\">\r\n        <AuraBar auras={state.auras} settings={auraSettings} haste={haste} triggerEvent={updateState} />\r\n        <ResourceBar current={state.resource} max={100}/>\r\n        <AbilityBar abilitySettings={abilitySettings} abilities={mergeAbilities()} haste={haste} inVoidform={state.auras.voidform.active} triggerEvent={updateState} keyEventsPaused={keyEventsPaused} reset={reset} />\r\n        <button className=\"panel-button\" onClick={handleReset}>Reset</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport dotenv from \"dotenv\"\r\n\r\ndotenv.config()\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}